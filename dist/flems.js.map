{"version":3,"file":"flems.js","sources":["../node_modules/bss/lib/utils.js","../node_modules/bss/lib/sheet.js","../node_modules/bss/lib/index.js","../src/utils.js","../src/editor/editor.js","../src/editor/tabs.js","../src/runtime/size.js","../src/components/tooltip.js","../src/console/index.js","../node_modules/object-inspect/index.js","../src/model.js","../src/dmp.js","../node_modules/source-map/lib/base64-vlq.js","../node_modules/source-map/lib/array-set.js","../node_modules/source-map/lib/mapping-list.js","../node_modules/source-map/lib/source-map-generator.js","../node_modules/source-map/lib/quick-sort.js","../node_modules/source-map/lib/source-map-consumer.js","../node_modules/source-map/lib/source-node.js","../src/index.js","../node_modules/bss/lib/popular.js","../node_modules/bss/lib/keyframes.js","../node_modules/bss/lib/pseudos.js","../src/styles.js","../node_modules/mithril/mithril.js","../node_modules/lz-string/libs/lz-string.js","../node_modules/codemirror/lib/codemirror.js","../node_modules/codemirror/mode/javascript/javascript.js","../node_modules/codemirror/mode/css/css.js","../node_modules/codemirror/mode/xml/xml.js","../node_modules/codemirror/mode/htmlmixed/htmlmixed.js","../node_modules/codemirror/addon/search/searchcursor.js","../node_modules/codemirror/addon/edit/matchbrackets.js","../node_modules/codemirror/keymap/sublime.js","../node_modules/codemirror/addon/edit/closebrackets.js","../node_modules/codemirror/addon/fold/xml-fold.js","../node_modules/codemirror/addon/edit/closetag.js","../node_modules/codemirror/addon/selection/active-line.js","../node_modules/codemirror/addon/dialog/dialog.js","../node_modules/codemirror/addon/search/search.js","../node_modules/codemirror/addon/fold/foldcode.js","../node_modules/codemirror/addon/fold/foldgutter.js","../node_modules/codemirror/addon/fold/brace-fold.js","../node_modules/codemirror/addon/fold/comment-fold.js","../src/components/icon.js","../src/components/collapsed.js","../src/editor/handle.js","../src/editor/index.js","../src/runtime/iframe.js","../src/components/toolbarbutton.js","../src/runtime/toolbar.js","../src/runtime/loading.js","../src/runtime/index.js","../src/console/input.js","../src/app.js","../src/compilers.js","../node_modules/mithril/stream/stream.js","../node_modules/source-map/lib/base64.js","../node_modules/source-map/lib/util.js","../node_modules/source-map/lib/binary-search.js","../node_modules/source-map/source-map.js","../src/actions.js","../src/message.js"],"sourcesContent":["import popular from './popular'\n\nconst shorts = Object.create(null)\n\nexport const cssProperties = Object.keys(\n  findWidth(document.documentElement.style)\n).filter(prop => typeof document.documentElement.style[prop] === 'string')\n\nfunction findWidth(obj) {\n  return obj.hasOwnProperty('width')\n    ? obj\n    : findWidth(Object.getPrototypeOf(obj))\n}\n\nexport const vendorMap = Object.create(null, {})\n\nexport const vendorRegex = /^(o|O|ms|MS|Ms|moz|Moz|webkit|Webkit|WebKit)([A-Z])/\n\nexport function parse(input, value) {\n  if (typeof input === 'string') {\n    if (typeof value === 'string' || typeof value === 'number')\n      return ({ [input] : value })\n\n    return stringToObject(input)\n  } else if (Array.isArray(input) && Array.isArray(input.raw)) {\n    arguments[0] = { raw: input }\n    return stringToObject(String.raw.apply(null, arguments))\n  }\n\n  return input.style || sanitize(input)\n}\n\nconst memoize = (fn, cache = {}) => item =>\n  item in cache\n    ? cache[item]\n    : cache[item] = fn(item)\n\nconst appendPx = memoize(prop => {\n  const el = document.createElement('div')\n\n  try {\n    el.style[prop] = '1px'\n    el.style.setProperty(prop, '1px')\n    return el.style[prop].slice(-3) === '1px' ? 'px' : ''\n  } catch (err) {\n    return ''\n  }\n}, {\n  flex: ''\n})\n\nexport function lowercaseFirst(string) {\n  return string.charAt(0).toLowerCase() + string.slice(1)\n}\n\nfunction sanitize(styles) {\n  return Object.keys(styles).reduce((acc, key) => {\n    const value = styles[key]\n\n    if (!value && value !== 0 && value !== '')\n      return acc\n\n    if (key === 'content' && value.charAt(0) !== '\"')\n      acc[key] = '\"' + value + '\"'\n    else\n      acc[key in vendorMap ? vendorMap[key] : key] = addPx(key, value)\n\n    return acc\n  }, {})\n}\n\nexport function assign(obj, obj2) {\n  for (const key in obj2) {\n    if (obj2.hasOwnProperty(key))\n      obj[key] = obj2[key]\n  }\n}\n\nexport function hyphenToCamelCase(hyphen) {\n  return hyphen.slice(hyphen.charAt(0) === '-' ? 1 : 0).replace(/-([a-z])/g, function(match) {\n    return match[1].toUpperCase()\n  })\n}\n\nexport function camelCaseToHyphen(camelCase) {\n  return camelCase.replace(/([A-Z])/g, '-$1').toLowerCase()\n}\n\nexport function initials(camelCase) {\n  return camelCase.charAt(0) + (camelCase.match(/([A-Z])/g) || []).join('').toLowerCase()\n}\n\nexport function short(prop) {\n  const acronym = initials(prop)\n      , short = popular[acronym] && popular[acronym] !== prop ? prop : acronym\n\n  shorts[short] = prop\n  return short\n}\n\nexport function getStyleSheetText(classes) {\n  return Object.keys(classes).sort().map(key => {\n    return key.replace(/CLASS_NAME/g, classes[key])\n  }).join('')\n}\n\nexport function objectToRules(style) {\n  const base = {}\n      , rules = []\n\n  let hasBase = false\n\n  Object.keys(style).forEach(key => {\n    if (key.charAt(0) === '@') {\n      rules.push(key + '{' + objectToRules(style[key]) + '}')\n    } else if (key.charAt(0) === ' ' || key.charAt(0) === ':') {\n      rules.push(selectorBlock('.$' + key, style[key]))\n    } else {\n      base[key] = style[key]\n      hasBase = true\n    }\n  })\n\n  if (hasBase)\n    rules.unshift(selectorBlock('.$', base))\n\n  return rules\n}\n\nexport function selectorBlock(selector, style) {\n  return selector + '{'\n    + stylesToCss((typeof style === 'string' ? stringToObject(style) : style))\n    + '}'\n}\n\nexport function stylesToCss(style) {\n  return Object.keys(style).map(k => propToString(style, k)).join('')\n}\n\nfunction stringToObject(string) {\n  return string.replace(/;/g, '\\n').split('\\n').reduce((acc, line) => {\n    const tokens = line.trim().split(/[: ]/)\n    if (tokens.length > 1) {\n      const key = hyphenToCamelCase(tokens.shift().trim())\n      acc[shorts[key] || key] = addPx(shorts[key] || key, tokens.join(' ').trim())\n    }\n    return acc\n  }, {})\n}\n\nexport function readClasses(sheet) {\n  throw new Error('not implemented')\n}\n\nfunction propToString(style, k) {\n  return (vendorRegex.test(k) ? '-' : '')\n  + camelCaseToHyphen(k) + ':' + style[k] + ';'\n}\n\nexport function addPx(key, value) {\n  return value + (isNaN(value) ? '' : appendPx(key))\n}\n","import {\n  objectToRules\n} from './utils'\n\nconst document = window.document\nconst classes = Object.create(null, {})\nconst styleSheet = document && document.createElement('style')\nstyleSheet && document.head.appendChild(styleSheet)\nconst sheet = styleSheet && styleSheet.sheet\n\nlet debug = false\nlet rules = []\nlet count = 0\n\nexport const classPrefix = 'b' + ('000' + ((Math.random() * 46656) | 0).toString(36)).slice(-3) +\n                    ('000' + ((Math.random() * 46656) | 0).toString(36)).slice(-3)\n\nexport function setDebug(d) {\n  debug = d\n}\n\nexport function getSheet() {\n  const content = rules.join('')\n  rules = []\n  return content\n}\n\nexport function insert(rule, index) {\n  rules.push(rule)\n\n  if (debug)\n    return styleSheet.textContent += rule\n\n  sheet && sheet.insertRule(rule, arguments.length > 1\n    ? index\n    : sheet.cssRules.length\n  )\n}\n\nexport function createClass(style) {\n  const rules = objectToRules(style)\n      , css = rules.join('')\n\n  if (css in classes)\n    return classes[css]\n\n  const className = classPrefix + (++count)\n\n  rules.map(rule =>\n    insert(rule.replace(/\\.\\$/, '.' + className))\n  )\n\n  classes[css] = className\n\n  return className\n}\n","import keyframes from './keyframes'\nimport pseudos from './pseudos'\n\nimport {\n  classPrefix,\n  createClass,\n  setDebug,\n  getSheet,\n  insert\n} from './sheet'\n\nimport {\n  hyphenToCamelCase,\n  lowercaseFirst,\n  selectorBlock,\n  cssProperties,\n  vendorRegex,\n  vendorMap,\n  assign,\n  addPx,\n  short,\n  parse\n} from './utils'\n\nfunction bss(input, value) {\n  assign(bss.style, parse.apply(null, arguments))\n  return chain(bss)\n}\n\nbss.setDebug = setDebug\n\nbss.style = {}\n\nbss.valueOf = function() {\n  return '.' + this.class\n}\n\nbss.$keyframes = keyframes\nbss.getSheet = getSheet\nbss.helper = helper\nbss.css = css\nbss.classPrefix = classPrefix\n\nfunction chain(instance) {\n  const newInstance = Object.create(bss, { style: { value: instance.style } })\n\n  if (instance === bss)\n    bss.style = {}\n\n  return newInstance\n}\n\ncssProperties.forEach(prop => {\n  if (vendorRegex.test(prop)) {\n    const unprefixed = lowercaseFirst(prop.replace(vendorRegex, '$2'))\n    if (cssProperties.indexOf(unprefixed) === -1) {\n      vendorMap[unprefixed] = prop\n      bss[unprefixed] = bss[short(unprefixed)] = setter(prop)\n      return\n    }\n  }\n\n  bss[prop] = bss[short(prop)] = setter(prop)\n})\n\nbss.content = function(arg) {\n  this.style.content = '\"' + arg + '\"'\n  return chain(this)\n}\n\nObject.defineProperty(bss, 'class', {\n  get: function() {\n    return createClass(this.style)\n  }\n})\n\nbss.$media = function(value, style) {\n  this.style['@media ' + value] = parse(style)\n  return chain(this)\n}\n\nbss.$nest = function(value, style) {\n  this.style[(value.charAt(0) === ':' ? '' : ' ') + value] = parse(style)\n  return chain(this)\n}\n\npseudos.forEach(name =>\n  bss['$' + hyphenToCamelCase(name)] = function(value, b) {\n    this.style[':' + name + (b ? '(' + value + ')' : '')] = parse(b || value)\n    return chain(this)\n  }\n)\n\nfunction setter(prop) {\n  return function CssProperty(value) {\n    for (let i = 0; i < arguments.length; i++) {\n      if (prop in this.style)\n        this.style[prop] += ' ' + addPx(prop, arguments[i])\n      else if (arguments[i] || arguments[i] === 0)\n        this.style[prop] = addPx(prop, arguments[i])\n    }\n\n    return chain(this)\n  }\n}\n\nfunction css(selector, style) {\n  if (arguments.length === 1)\n    return Object.keys(selector).forEach(key => css(key, selector[key]))\n\n  insert(selectorBlock(selector, parse(style)), 0)\n}\n\nfunction helper(name, styling) {\n  if (arguments.length === 1)\n    return Object.keys(name).forEach(key => helper(key, name[key]))\n\n  if (typeof styling === 'object') {\n    delete bss[name] // Needed to avoid weird get calls in chrome\n    Object.defineProperty(bss, name, {\n      get: function() {\n        assign(this.style, parse(styling))\n        return chain(this)\n      }\n    })\n    return\n  }\n\n  bss[name] = function Helper() {\n    const result = styling.apply(null, arguments)\n    assign(this.style, result.style)\n    return chain(this)\n  }\n}\n\nbss.helper('$animate', (value, props) =>\n  bss.animation(bss.$keyframes(props) + ' ' + value)\n)\n\nexport default bss\n","import lz from 'lz-string'\n\nexport function endsWith(suffix, str) {\n  if (arguments.length === 1)\n    return str => endsWith(suffix, str)\n\n  return str.indexOf(suffix, str.length - suffix.length) > -1\n}\n\nexport function assign(obj, obj2) {\n  for (const key in obj2) {\n    if (obj2.hasOwnProperty(key))\n      obj[key] = obj2[key]\n  }\n  return obj\n}\n\nexport const createFlemsIoLink = state => {\n  return 'https://flems.io/#0=' + lz.compressToEncodedURIComponent(\n    JSON.stringify(state)\n  )\n}\n\nexport function find(fn, array) {\n  let match = null\n  array.some(item => {\n    match = fn(item)\n    return match\n  })\n  return match\n}\n\nexport const memoize = (fn, cache = {}) => item =>\n  item in cache\n    ? cache[item]\n    : cache[item] = fn(item)\n\nexport const ext = f => f.lastIndexOf('.') > -1 && f.slice(f.lastIndexOf('.') + 1)\n\nexport const isJs = endsWith('.js')\nexport const isTs = endsWith('.ts')\nexport const isLs = endsWith('.ls')\nexport const isCss = endsWith('.css')\nexport const isHtml = endsWith('.html')\nexport const isScript = f => isJs(f) || isTs(f) || isLs(f)\n\nexport const urlRegex = /^https?:\\/\\//\nexport const filenameRegex = /^[\\w-_.]*$/\n","import m from 'mithril'\nimport b from 'bss'\nimport { endsWith } from '../utils'\n\nimport CodeMirror from 'codemirror'\nimport 'codemirror/mode/javascript/javascript'\nimport 'codemirror/mode/css/css'\nimport 'codemirror/mode/htmlmixed/htmlmixed'\nimport 'codemirror/keymap/sublime'\nimport 'codemirror/addon/edit/closebrackets'\nimport 'codemirror/addon/edit/closetag'\nimport 'codemirror/addon/edit/matchbrackets'\nimport 'codemirror/addon/selection/active-line'\nimport 'codemirror/addon/dialog/dialog.js'\nimport 'codemirror/addon/search/search.js'\nimport 'codemirror/addon/search/searchcursor.js'\nimport 'codemirror/addon/fold/foldcode.js'\nimport 'codemirror/addon/fold/foldgutter.js'\nimport 'codemirror/addon/fold/brace-fold.js'\nimport 'codemirror/addon/fold/xml-fold.js'\nimport 'codemirror/addon/fold/comment-fold.js'\n\nimport logoIcon from '../icons/logo.svg'\n\nconst logoIcon64 = btoa(logoIcon)\n\nconst modes = {\n  html: 'htmlmixed',\n  js: {\n    name: 'javascript',\n    statementIndent: 2\n  },\n  ts: {\n    name: 'text/typescript',\n    statementIndent: 2\n  },\n  css: 'css'\n}\n\nconst noSmartIndent = {\n  ',': true,\n  '.': true\n}\n\nexport default (model, actions) =>\n  m('.editor'\n  + b.position('absolute')\n    .w('100%')\n    .top(model.toolbar()).left(0).bottom(0).right(0)\n    .overflow('hidden')\n    .$after(\n      b\n      .content('')\n      .position('absolute')\n      .top('-7vh')\n      .width('100%')\n      .height('100vh')\n      .zIndex(3)\n      .opacity(0.1)\n      .pointerEvents('none')\n      .backgroundImage('url(data:image/svg+xml;base64,' + logoIcon64 + ')')\n      .backgroundSize('120% auto')\n      .backgroundRepeat('no-repeat')\n      .backgroundPosition('center center')\n    )\n    .$nest('.CodeMirror',\n      b.fontFamily('Source Code Pro, monospace')\n      .lineHeight('22px')\n      .cursor('text')\n      .w('100%').h('100%')\n      .fontSize(14)\n    )\n    .$nest('.cm-s-material.CodeMirror, .cm-s-material div.CodeMirror-gutters',\n      b.backgroundColor(model.state.color)\n    )\n    .$nest('.CodeMirror-activeline',\n      b.background('rgba(255,255,255,0.07)')\n    )\n  , {\n    oncreate: ({ dom }) => {\n      const docs = {}\n\n      const cm = CodeMirror(dom, {\n        theme: 'material',\n        readOnly: !model.state.editable,\n        autoCloseBrackets: true,\n        autoCloseTags: true,\n        matchBrackets: true,\n        styleActiveLine: true,\n        lineNumbers: true,\n        foldGutter: true,\n        gutters: ['CodeMirror-linenumbers', 'CodeMirror-foldgutter'],\n        tabSize: 2,\n        keyMap: 'sublime',\n        extraKeys: {\n          'Alt-F': 'findPersistent',\n          'Shift-Tab': 'indentLess',\n          Enter: cm => {\n            const cursor = cm.getCursor()\n                , before = cm.getRange({ line: 0, ch: 0 }, cursor).trim()\n                , line = cm.getRange({ line: cursor.line, ch: 0 }, cursor).trim()\n\n            cm.setOption('smartIndent', !(line.charAt(0) in noSmartIndent) && !endsWith(before, '=>'))\n            cm.execCommand('newlineAndIndent')\n          },\n          Tab: cm => {\n            if (cm.somethingSelected())\n              cm.indentSelection('add')\n            else\n              cm.execCommand('insertSoftTab')\n          },\n          Backspace: cm => {\n            const cursor = cm.getCursor()\n                , before = cm.getRange({ line: cursor.line, ch: 0 }, cursor)\n\n            if (before.length % 2 === 0 && endsWith('  ', before))\n              CodeMirror.commands.delCharBefore(cm)\n\n            CodeMirror.commands.delCharBefore(cm)\n          }\n        }\n      })\n\n      cm.on('gutterClick', selectLineNumber)\n\n      const initialDoc = cm.getDoc()\n\n      model.refreshCm.map(() => cm.refresh())\n      model.focus.map(({ line, column }) => {\n        cm.setCursor(line - 1, column - 1)\n        cm.focus()\n      })\n\n      model.selectedFile\n      .map(file => {\n        if (!file)\n          return\n\n        let doc = docs[file.url || file.name]\n\n        const content = file.content || model.linkPatched[file.url] || ''\n\n        if (!doc) {\n          doc = CodeMirror.Doc(\n            content,\n            modes[file.name.split('.').pop()] || 'javascript'\n          )\n\n          doc.on('change', e =>\n            actions.fileChange(file, doc.getValue())\n          )\n\n          docs[file.url || file.name] = doc\n        }\n\n        if (content !== doc.getValue())\n          doc.setValue(content)\n\n        const focusAfter = cm.getDoc() !== initialDoc || model.state.autoFocus\n\n        cm.swapDoc(doc)\n\n        if (focusAfter)\n          cm.focus()\n      })\n\n      if (model.state.autoHeight)\n        model.cmHeight = dom.querySelector('.CodeMirror-sizer').offsetHeight\n    }\n  })\n\nfunction selectLineNumber(cm, line, gutter, e) {\n  if (gutter === 'CodeMirror-foldgutter')\n    return\n\n  const selections = cm.listSelections()\n      , others = e.ctrlKey || e.metaKey ? selections : []\n      , from = e.shiftKey && selections.length\n        ? selections[0].anchor.line\n        : line\n\n  let to = e.shiftKey && selections.length && from > line\n    ? line\n    : line + 1\n\n  update()\n\n  const move = function(e) {\n    const curLine = cm.lineAtHeight(e.clientY, 'client')\n    if (curLine !== to) {\n      to = curLine\n      update()\n    }\n  }\n\n  const up = (e) => {\n    window.removeEventListener('mouseup', up)\n    window.removeEventListener('mousemove', move)\n  }\n  window.addEventListener('mousemove', move)\n  window.addEventListener('mouseup', up)\n\n  function update() {\n    cm.setSelections(\n      others.concat([{\n        anchor: CodeMirror.Pos(from, to > from ? 0 : null),\n        head: CodeMirror.Pos(to, 0)\n      }]),\n      others.length,\n      { origin: '*mouse' }\n    )\n  }\n}\n","import m from 'mithril'\nimport b from 'bss'\n\nexport default (model, actions) =>\n  m('nav'\n    + b\n      .minHeight(38)\n      .d('flex')\n      .c('gray')\n      .w('100%')\n      .background('rgb(246,246,246)')\n      .fontSize(14)\n    ,\n    m('.tabs'\n      + b.d('flex')\n        .minHeight(38)\n        .overflowX('auto')\n        .overflowY('hidden')\n        .flexGrow(1)\n      ,\n        model.state.fileTabs && fileTabs(model, actions)\n      ,\n        model.state.linkTabs && linkTabs(model, actions)\n    )\n  )\n\nfunction linkTabs(model, actions) {\n  return model.state.links.map(link =>\n    tab(\n      m('a' + b.c('inherit'), {\n        href: link.url,\n        target: '_blank',\n        onclick: e => model.linkContent[link.url] && e.preventDefault()\n      }, link.name),\n      () => model.linkContent[link.url] && actions.select(link.url),\n      link === model.selectedFile(),\n      model\n    )\n  )\n}\n\nfunction fileTabs(model, actions) {\n  return model.state.files.map(file =>\n    tab(\n      file.name,\n      () => actions.select(file.name),\n      file === model.selectedFile(),\n      model\n    )\n  )\n}\n\nfunction tab(title, onclick, selected, model) {\n  return m('.tab'\n   + b.d('flex')\n    .ai('center')\n    .transition('all 0.3s')\n    .minWidth(40)\n    .maxWidth(200)\n    .cursor('pointer')\n    .flexShrink(2)\n    .background('rgb(246,246,246)')\n    .$hover(\n      b\n      .flexShrink(0)\n      .background('#ddd')\n      .c('#333')\n    )\n  , {\n    style: selected\n      ? b\n      .background(model.state.color)\n      .c('white')\n      .flexShrink(0)\n      .style\n      : {},\n    onclick: onclick\n  },\n    m('span'\n      + b.flexGrow(1)\n      .overflow('hidden')\n      .ta('center')\n      .whiteSpace('nowrap')\n      .p('0 12px')\n    ,\n      title\n    )\n  )\n}\n","import m from 'mithril'\nimport b from 'bss'\n\nexport default (model, actions) =>\n  m('.size'\n    + b.position('absolute')\n      .fontFamily('Source Code Pro, monospace')\n      .zi(1)\n      .fontSize(14)\n      .top(model.toolbar() + 8)\n      .p('4px 8px')\n      .right(8)\n      .background('white')\n      .o(0.65)\n      .transition('opacity 0.3s')\n      .$animate('.3s', {\n        from: b.o(0),\n        to: b.o(1)\n      })\n      .boxShadow('0 0 3px rgba(0, 0, 0, .35)')\n  , {\n    onbeforeremove: fadeRemove\n  },\n    model.iframe.clientWidth,\n    ' x ',\n    model.iframe.clientHeight\n  )\n\nfunction fadeRemove(vnode) {\n  vnode.dom.style.opacity = 0\n  return new Promise(r => setTimeout(r, 300))\n}\n","import m from 'mithril'\nimport b from 'bss'\n\nfunction closest(el, className) {\n  while (!el.classList.contains(className))\n    el = el.parentElement\n\n  return el\n}\n\nconst setTriangle = ({ dom }) => {\n  const container = closest(dom, 'flems').getBoundingClientRect()\n      , parent = dom.parentNode.getBoundingClientRect()\n\n  if (parent.top - container.top < 40) {\n    dom.style.bottom = 0\n    dom.style.borderBottom = '5px solid white'\n  } else {\n    dom.style.top = 0\n    dom.style.borderTop = '5px solid white'\n  }\n}\n\nconst position = dom => {\n  const container = closest(dom, 'flems').getBoundingClientRect()\n      , parent = dom.parentNode.getBoundingClientRect()\n\n  const left = Math.min(\n    -dom.clientWidth / 2 + dom.parentNode.clientWidth / 2,\n    -dom.clientWidth + parent.width + (container.width - (parent.right - container.left) - 2)\n  )\n  dom.style.left = left + 'px'\n\n  if (parent.top - container.top < 40) {\n    dom.style.transformOrigin = Math.abs(left) + parent.width / 2 + 'px 0px'\n    dom.style.bottom = '-26px'\n  } else {\n    dom.style.transformOrigin = Math.abs(left) + parent.width / 2 + 'px 26px'\n    dom.style.top = '-26px'\n  }\n}\n\nconst oncreate = ({ dom }) => {\n  dom.parentNode.classList.add(\n    b.$nest(':hover .tooltip',\n      b.o(1).transform('scale(1)')\n    ).class\n  )\n  position(dom)\n}\n\nexport default title => [\n  m('.tooltip'\n   + b\n    .position('absolute')\n    .o(0)\n    .transform('scale(0)')\n    .zi(1)\n    .w('auto')\n    .h(26)\n    .fs(12)\n    .br(2)\n    .p('4px 8px')\n    .bc('white')\n    .c('#555')\n    .bs('0 2px 8px rgba(0,0,0,0.35)')\n    .transition('all 0.3s')\n    .pointerEvents('none')\n    .textTransform('uppercase')\n    .textAlign('right')\n    .whiteSpace('nowrap')\n  ,\n    {\n      oncreate\n    }\n  ,\n    title\n  )\n,\n  m('.tooltip'\n   + b\n    .pointerEvents('none')\n    .o(0)\n    .zi(1)\n    .transform('scale(0)')\n    .position('absolute')\n    .transformOrigin('bottom center')\n    .transition('all 0.3s')\n    .l('calc(50% - 5px)')\n    .w(0)\n    .h(0)\n    .borderLeft('5px solid transparent')\n    .borderRight('5px solid transparent')\n    .textAlign('right')\n  , {\n    oncreate: setTriangle\n  })\n]\n","import m from 'mithril'\nimport b from 'bss'\n\nimport input from './input'\n\nimport icon from '../components/icon'\nimport tooltip from '../components/tooltip'\nimport arrowIcon from '../icons/arrow.svg'\n\nexport default (model, actions) =>\n  m('.console' + b\n      .bs('0 0 8px rgba(0,0,0,.2)')\n      .position('relative')\n      .maxHeight(32)\n      .zi(40)\n      .d('flex')\n      .transition('max-height 0.3s')\n      .fd('column')\n      .background('rgb(246,246,246)')\n  , {\n    style: b.maxHeight(model.state.console === true && '50%').style\n  },\n    m('div'\n      + b.d('flex').c('#777').flexShrink(0)\n    , {\n      onclick: () => actions.toggleConsole()\n    },\n      m('span'\n        + b.fs(12).tt('uppercase').p('8px 10px')\n      ,\n        m('span' + b.mr(4), 'Console'),\n        bubble('#d82c2c', model.console.errors()),\n        bubble('gray', model.console.infos())\n      ),\n      m('div' + b.ml('auto').rel,\n        icon({\n          size: 32,\n          style:\n            b.transform(model.state.console === true && 'rotate(180deg)').style,\n          class: b\n            .p(8)\n            .background('inherit')\n            .cursor('pointer')\n            .transition('max-height 0.3s')\n            .class\n        }, arrowIcon),\n        tooltip(model.state.console === true ? 'Hide console' : 'Show console')\n      )\n    ),\n    m('.scroll'\n      + b.overflow('auto')\n    , {\n      onscroll: (e) => {\n        e.redraw = false\n        if (model.ignoreScroll) {\n          model.ignoreScroll = false\n          return\n        }\n\n        model.console.manualScroll =\n          e.target.scrollTop !== e.target.scrollHeight - e.target.offsetHeight\n      },\n      onupdate: ({ state, dom }) => {\n        if (model.console.manualScroll)\n          return\n\n        model.ignoreScroll = true\n        dom.lastChild && dom.lastChild.scrollIntoView(false)\n      }\n    },\n      model.console.output.slice(-200).map(log =>\n        m('div' +\n          b.d('flex')\n          .ff('Source Code Pro, monospace')\n          .alignItems('center')\n          .p(2, 10)\n          .minHeight(22)\n          .fs(12).borderBottom('1px solid #dedede')\n          .c('#555')\n          .whiteSpace('pre-wrap')\n          .alignItems('center')\n        , {\n          onclick: () => log.expand = !log.expand,\n          title: log.date\n        }, [\n          m('div' + b.flexGrow(1)\n          ,\n            log.content[0].indexOf('%c') > -1 && log.content.length > 1\n              ? log.content[0].split('%c').map((p, i) =>\n                  m('span' + b(log.content[i] || ''), p)\n                )\n              : log.content.map(p => m('span' + b.d('inline-block').mr(10), p))\n          ),\n          log.stack && m('div' + b.ta('right').flexShrink(0).overflow('hidden'), {\n            style: b.maxHeight(!log.expand && log.type !== 'error' && 18).style\n          }, log.stack.map(s =>\n            m('div', [\n              (s.function || '') + ' at ',\n              m('a' + (s.file ? b.textDecoration('underline').cursor('pointer') : ''), {\n                onclick: e => {\n                  e.stopPropagation()\n                  s.select && actions.select(s.select, s)\n                }\n              }, (s.file || 0) + ':' + (s.line || 0) + ':' + (s.column || 0))\n            ])\n          ))\n        ])\n      )\n    ),\n    input(model, actions)\n  )\n\nfunction bubble(background, count) {\n  return m('span'\n    + b.bc(background)\n      .position('relative')\n      .m(0, 4)\n      .p(0, 10)\n      .ta('center')\n      .c('white')\n      .d('inline-block')\n      .br(50)\n      .o(0.2)\n      .transition('all 0.5s')\n  , {\n    style: b.o(count > 0 && 1).style\n  },\n    count\n  )\n}\n","var hasMap = typeof Map === 'function' && Map.prototype;\nvar mapSizeDescriptor = Object.getOwnPropertyDescriptor && hasMap ? Object.getOwnPropertyDescriptor(Map.prototype, 'size') : null;\nvar mapSize = hasMap && mapSizeDescriptor && typeof mapSizeDescriptor.get === 'function' ? mapSizeDescriptor.get : null;\nvar mapForEach = hasMap && Map.prototype.forEach;\nvar hasSet = typeof Set === 'function' && Set.prototype;\nvar setSizeDescriptor = Object.getOwnPropertyDescriptor && hasSet ? Object.getOwnPropertyDescriptor(Set.prototype, 'size') : null;\nvar setSize = hasSet && setSizeDescriptor && typeof setSizeDescriptor.get === 'function' ? setSizeDescriptor.get : null;\nvar setForEach = hasSet && Set.prototype.forEach;\nvar booleanValueOf = Boolean.prototype.valueOf;\nvar objectToString = Object.prototype.toString;\n\nmodule.exports = function inspect_ (obj, opts, depth, seen) {\n    if (typeof obj === 'undefined') {\n        return 'undefined';\n    }\n    if (obj === null) {\n        return 'null';\n    }\n    if (typeof obj === 'boolean') {\n        return obj ? 'true' : 'false';\n    }\n    if (typeof obj === 'string') {\n        return inspectString(obj);\n    }\n    if (typeof obj === 'number') {\n      if (obj === 0) {\n        return Infinity / obj > 0 ? '0' : '-0';\n      }\n      return String(obj);\n    }\n\n    if (!opts) opts = {};\n\n    var maxDepth = typeof opts.depth === 'undefined' ? 5 : opts.depth;\n    if (typeof depth === 'undefined') depth = 0;\n    if (depth >= maxDepth && maxDepth > 0 && typeof obj === 'object') {\n        return '[Object]';\n    }\n\n    if (typeof seen === 'undefined') seen = [];\n    else if (indexOf(seen, obj) >= 0) {\n        return '[Circular]';\n    }\n\n    function inspect (value, from) {\n        if (from) {\n            seen = seen.slice();\n            seen.push(from);\n        }\n        return inspect_(value, opts, depth + 1, seen);\n    }\n\n    if (typeof obj === 'function') {\n        var name = nameOf(obj);\n        return '[Function' + (name ? ': ' + name : '') + ']';\n    }\n    if (isSymbol(obj)) {\n        var symString = Symbol.prototype.toString.call(obj);\n        return typeof obj === 'object' ? markBoxed(symString) : symString;\n    }\n    if (isElement(obj)) {\n        var s = '<' + String(obj.nodeName).toLowerCase();\n        var attrs = obj.attributes || [];\n        for (var i = 0; i < attrs.length; i++) {\n            s += ' ' + attrs[i].name + '=\"' + quote(attrs[i].value) + '\"';\n        }\n        s += '>';\n        if (obj.childNodes && obj.childNodes.length) s += '...';\n        s += '</' + String(obj.nodeName).toLowerCase() + '>';\n        return s;\n    }\n    if (isArray(obj)) {\n        if (obj.length === 0) return '[]';\n        return '[ ' + arrObjKeys(obj, inspect).join(', ') + ' ]';\n    }\n    if (isError(obj)) {\n        var parts = arrObjKeys(obj, inspect);\n        if (parts.length === 0) return '[' + String(obj) + ']';\n        return '{ [' + String(obj) + '] ' + parts.join(', ') + ' }';\n    }\n    if (typeof obj === 'object' && typeof obj.inspect === 'function') {\n        return obj.inspect();\n    }\n    if (isMap(obj)) {\n        var parts = [];\n        mapForEach.call(obj, function (value, key) {\n            parts.push(inspect(key, obj) + ' => ' + inspect(value, obj));\n        });\n        return collectionOf('Map', mapSize.call(obj), parts);\n    }\n    if (isSet(obj)) {\n        var parts = [];\n        setForEach.call(obj, function (value ) {\n            parts.push(inspect(value, obj));\n        });\n        return collectionOf('Set', setSize.call(obj), parts);\n    }\n    if (isNumber(obj)) {\n        return markBoxed(Number(obj));\n    }\n    if (isBoolean(obj)) {\n        return markBoxed(booleanValueOf.call(obj));\n    }\n    if (isString(obj)) {\n        return markBoxed(inspect(String(obj)));\n    }\n    if (!isDate(obj) && !isRegExp(obj)) {\n        var xs = arrObjKeys(obj, inspect);\n        if (xs.length === 0) return '{}';\n        return '{ ' + xs.join(', ') + ' }';\n    }\n    return String(obj);\n};\n\nfunction quote (s) {\n    return String(s).replace(/\"/g, '&quot;');\n}\n\nfunction isArray (obj) { return toStr(obj) === '[object Array]' }\nfunction isDate (obj) { return toStr(obj) === '[object Date]' }\nfunction isRegExp (obj) { return toStr(obj) === '[object RegExp]' }\nfunction isError (obj) { return toStr(obj) === '[object Error]' }\nfunction isSymbol (obj) { return toStr(obj) === '[object Symbol]' }\nfunction isString (obj) { return toStr(obj) === '[object String]' }\nfunction isNumber (obj) { return toStr(obj) === '[object Number]' }\nfunction isBoolean (obj) { return toStr(obj) === '[object Boolean]' }\n\nvar hasOwn = Object.prototype.hasOwnProperty || function (key) { return key in this; };\nfunction has (obj, key) {\n    return hasOwn.call(obj, key);\n}\n\nfunction toStr (obj) {\n    return objectToString.call(obj);\n}\n\nfunction nameOf (f) {\n    if (f.name) return f.name;\n    var m = String(f).match(/^function\\s*([\\w$]+)/);\n    if (m) return m[1];\n}\n\nfunction indexOf (xs, x) {\n    if (xs.indexOf) return xs.indexOf(x);\n    for (var i = 0, l = xs.length; i < l; i++) {\n        if (xs[i] === x) return i;\n    }\n    return -1;\n}\n\nfunction isMap (x) {\n    if (!mapSize) {\n        return false;\n    }\n    try {\n        mapSize.call(x);\n        try {\n            setSize.call(x);\n        } catch (s) {\n            return true;\n        }\n        return x instanceof Map; // core-js workaround, pre-v2.5.0\n    } catch (e) {}\n    return false;\n}\n\nfunction isSet (x) {\n    if (!setSize) {\n        return false;\n    }\n    try {\n        setSize.call(x);\n        try {\n            mapSize.call(x);\n        } catch (m) {\n            return true;\n        }\n        return x instanceof Set; // core-js workaround, pre-v2.5.0\n    } catch (e) {}\n    return false;\n}\n\nfunction isElement (x) {\n    if (!x || typeof x !== 'object') return false;\n    if (typeof HTMLElement !== 'undefined' && x instanceof HTMLElement) {\n        return true;\n    }\n    return typeof x.nodeName === 'string'\n        && typeof x.getAttribute === 'function'\n    ;\n}\n\nfunction inspectString (str) {\n    var s = str.replace(/(['\\\\])/g, '\\\\$1').replace(/[\\x00-\\x1f]/g, lowbyte);\n    return \"'\" + s + \"'\";\n}\n\nfunction lowbyte (c) {\n    var n = c.charCodeAt(0);\n    var x = { 8: 'b', 9: 't', 10: 'n', 12: 'f', 13: 'r' }[n];\n    if (x) return '\\\\' + x;\n    return '\\\\x' + (n < 0x10 ? '0' : '') + n.toString(16);\n}\n\nfunction markBoxed (str) {\n    return 'Object(' + str + ')';\n}\n\nfunction collectionOf (type, size, entries) {\n    return type + ' (' + size + ') {' + entries.join(', ') + '}';\n}\n\nfunction arrObjKeys (obj, inspect) {\n    var isArr = isArray(obj);\n    var xs = [];\n    if (isArr) {\n        xs.length = obj.length;\n        for (var i = 0; i < obj.length; i++) {\n            xs[i] = has(obj, i) ? inspect(obj[i], obj) : '';\n        }\n    }\n    for (var key in obj) {\n        if (!has(obj, key)) continue;\n        if (isArr && String(Number(key)) === key && key < obj.length) continue;\n        if (/[^\\w$]/.test(key)) {\n            xs.push(inspect(key, obj) + ': ' + inspect(obj[key], obj));\n        } else {\n            xs.push(key + ': ' + inspect(obj[key], obj));\n        }\n    }\n    return xs;\n}\n","import { endsWith, urlRegex, filenameRegex } from './utils'\nimport compilers from './compilers'\nimport stream from 'mithril/stream'\nimport b from 'bss'\n\nconst scripts = document.getElementsByTagName('script')\n    , flems = scripts[scripts.length - 1]\n    , runtimeUrlGuess = endsWith('flems.html', flems ? flems.src : '') && flems.src\n    , findFile = (state, name) =>\n      state.files.filter(f => f.name === name)[0] ||\n      state.links.filter(l => l.url === name)[0]\n\nconst defaults = () => ({\n  middle        : 50,\n  selected      : '.js',\n  color         : 'rgb(38,50,56)',\n  resizeable    : true,\n  editable      : true,\n  toolbar       : true,\n  fileTabs      : true,\n  linkTabs      : true,\n  shareButton   : true,\n  reloadButton  : true,\n  console       : true,\n  autoReload    : true,\n  autoFocus     : false,\n  autoHeight    : false,\n  files : [{\n    name: '.html',\n    content: ''\n  }, {\n    name: '.js',\n    content: ''\n  }, {\n    name: '.css',\n    content: ''\n  }],\n  links : []\n})\n\nexport { defaults }\n\nexport default function(dom, state, runtimeUrl) {\n  state = validateAndCleanState(state)\n\n  const id = randomId()\n      , selected = stream(state.selected)\n      , selectedFile = selected.map(s => findFile(state, s))\n\n  state.middle = Math.min(Math.max(state.middle, 0), 100)\n  selected.map(name => state.selected = name)\n\n  const model = {\n    id,\n    dom,\n    state,\n    findFile,\n    selected,\n    selectedFile,\n    iOS           : 'overflowScrolling' in b,\n    linkPatched   : {},\n    docs          : {},\n    runtimeUrl    : runtimeUrl || runtimeUrlGuess || 'flems.html',\n    linkContent   : {},\n    sourceMaps    : {},\n    console       : {\n      input         : '',\n      output        : [],\n      history       : [],\n      position      : 0,\n      manualScroll  : false,\n      lineHeight    : 22,\n      errors        : () => model.console.output.filter(o => o.type === 'error').length,\n      infos         : () => model.console.output.filter(o => o.type !== 'error').length,\n      inputHeight   : () => Math.min(\n        model.console.lineHeight * model.console.input.split('\\n').length,\n        model.console.lineHeight * 5\n      )\n    },\n    cmHeight      : null,\n    iframe        : null,\n    loading       : true,\n    resizing      : false,\n    hideError     : true,\n    dragging      : false,\n    refreshCm     : stream(),\n    focus         : stream(),\n    vertical      : () => dom.offsetWidth < 600,\n    toolbar       : () => model.state.toolbar ? 38 : 0\n  }\n\n  return model\n}\n\nfunction randomId() {\n  return ('000' + ((Math.random() * 46656) | 0).toString(36)).slice(-3) +\n         ('000' + ((Math.random() * 46656) | 0).toString(36)).slice(-3)\n}\n\nfunction validateAndCleanState(state) {\n  const clean = defaults()\n\n  Object.keys(state).forEach(key => {\n    if (key in clean)\n      clean[key] = state[key]\n  })\n\n  clean.files.forEach(f => {\n    validateFilename(f.name)\n    validateCompiler(f.compiler)\n    f.content = f.content || ''\n  })\n\n  if (clean.files.some(f => f.name.toLowerCase() === name.toLowerCase()))\n    throw new Error('Multiple files with the same name: ' + name + ' cannot exist')\n\n  clean.links.forEach(f => {\n    validateUrl(f.url)\n    f.name = f.name || f.url.slice(f.url.lastIndexOf('/') + 1)\n  })\n\n  if (!findFile(clean, clean.selected))\n    clean.selected = (clean.files[0] || {}).name || (clean.links[0] || {}).url\n\n  return clean\n}\n\nfunction validateFilename(filename) {\n  if (name.length > 60)\n    throw new Error('File names can be no longer than 64 characters')\n\n  if (!filenameRegex.test(name))\n    throw new Error('File names can only include a-Z, 0-9, dash, underscore and period')\n}\n\nfunction validateUrl(url) {\n  if (!urlRegex.test(url))\n    throw new Error('Link url\\'s should start with http:// or https://')\n}\n\nfunction validateCompiler(compiler) {\n  if (compiler && !(compiler in compilers))\n    throw new Error(compiler + ' is not supported')\n}\n","const diffTimeout = 1.0\nconst diffEditCost = 4\nconst patchDeleteThreshold = 0.5\nconst patchMargin = 4\nconst matchMaxBits = 32\nconst matchThreshold = 0.5\nconst matchDistance = 1000\n\nconst nonAlphaNumericRegex_ = /[^a-zA-Z0-9]/\nconst whitespaceRegex_ = /\\s/\nconst linebreakRegex_ = /[\\r\\n]/\nconst blanklineEndRegex_ = /\\n\\r?\\n$/\nconst blanklineStartRegex_ = /^\\r?\\n\\r?\\n/\n\nconst DIFF_DELETE = -1\nconst DIFF_INSERT = 1\nconst DIFF_EQUAL = 0\n\nfunction diffMain(text1, text2, optChecklines, optDeadline) {\n  // Set a deadline by which time the diff must be complete.\n  if (typeof optDeadline === 'undefined') {\n    if (diffTimeout <= 0)\n      optDeadline = Number.MAX_VALUE\n    else\n      optDeadline = (new Date()).getTime() + diffTimeout * 1000\n\n  }\n  const deadline = optDeadline\n\n  if (text1 === text2) {\n    if (text1) {\n      return [\n        [DIFF_EQUAL, text1]\n      ]\n    }\n    return []\n  }\n\n  if (typeof optChecklines === 'undefined')\n    optChecklines = true\n\n  const checklines = optChecklines\n\n  // Trim off common prefix (speedup).\n  let commonlength = diffCommonPrefix(text1, text2)\n  const commonprefix = text1.substring(0, commonlength)\n  text1 = text1.substring(commonlength)\n  text2 = text2.substring(commonlength)\n\n  // Trim off common suffix (speedup).\n  commonlength = diffCommonSuffix(text1, text2)\n  const commonsuffix = text1.substring(text1.length - commonlength)\n  text1 = text1.substring(0, text1.length - commonlength)\n  text2 = text2.substring(0, text2.length - commonlength)\n\n  // Compute the diff on the middle block.\n  const diffs = diffCompute(text1, text2, checklines, deadline)\n\n  // Restore the prefix and suffix.\n  if (commonprefix)\n    diffs.unshift([DIFF_EQUAL, commonprefix])\n\n  if (commonsuffix)\n    diffs.push([DIFF_EQUAL, commonsuffix])\n\n  diffCleanupMerge(diffs)\n  return diffs\n}\n\nfunction diffCompute(text1, text2, checklines, deadline) {\n  let diffs\n\n  if (!text1) {\n    // Just add some text (speedup).\n    return [\n      [DIFF_INSERT, text2]\n    ]\n  }\n\n  if (!text2) {\n    // Just delete some text (speedup).\n    return [\n      [DIFF_DELETE, text1]\n    ]\n  }\n\n  const longtext = text1.length > text2.length ? text1 : text2\n  const shorttext = text1.length > text2.length ? text2 : text1\n  const i = longtext.indexOf(shorttext)\n  if (i !== -1) {\n    // Shorter text is inside the longer text (speedup).\n    diffs = [\n      [DIFF_INSERT, longtext.substring(0, i)],\n      [DIFF_EQUAL, shorttext],\n      [DIFF_INSERT, longtext.substring(i + shorttext.length)]\n    ]\n    // Swap insertions for deletions if diff is reversed.\n    if (text1.length > text2.length)\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE\n\n    return diffs\n  }\n\n  if (shorttext.length === 1) {\n    // Single character string.\n    // After the previous speedup, the character can't be an equality.\n    return [\n      [DIFF_DELETE, text1],\n      [DIFF_INSERT, text2]\n    ]\n  }\n\n  // Check to see if the problem can be split in two.\n  const hm = diffHalfMatch(text1, text2)\n  if (hm) {\n    // A half-match was found, sort out the return data.\n    const text1A = hm[0]\n    const text1B = hm[1]\n    const text2A = hm[2]\n    const text2B = hm[3]\n    const midCommon = hm[4]\n    // Send both pairs off for separate processing.\n    const diffsA = diffMain(text1A, text2A, checklines, deadline)\n    const diffsB = diffMain(text1B, text2B, checklines, deadline)\n    // Merge the results.\n    return diffsA.concat([\n      [DIFF_EQUAL, midCommon]\n    ], diffsB)\n  }\n\n  if (checklines && text1.length > 100 && text2.length > 100)\n    return diffLinemode(text1, text2, deadline)\n\n\n  return diffBisect(text1, text2, deadline)\n}\n\nfunction diffLinemode(text1, text2, deadline) {\n  // Scan the text on a line-by-line basis first.\n  const a = diffLinesToChars(text1, text2)\n  text1 = a.chars1\n  text2 = a.chars2\n  const linearray = a.lineArray\n\n  const diffs = diffMain(text1, text2, false, deadline)\n\n  // Convert the diff back to original text.\n  diffCharsToLines(diffs, linearray)\n  // Eliminate freak matches (e.g. blank lines)\n  diffCleanupSemantic(diffs)\n\n  // Rediff any replacement blocks, this time character-by-character.\n  // Add a dummy entry at the end.\n  diffs.push([DIFF_EQUAL, ''])\n  let pointer = 0\n  let countDelete = 0\n  let countInsert = 0\n  let textDelete = ''\n  let textInsert = ''\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] === DIFF_INSERT) {\n      countInsert++\n      textInsert += diffs[pointer][1]\n    } else if (diffs[pointer][0] === DIFF_DELETE) {\n      countDelete++\n      textDelete += diffs[pointer][1]\n    } else if (diffs[pointer][0] === DIFF_EQUAL) {\n      // Upon reaching an equality, check for prior redundancies.\n      if (countDelete >= 1 && countInsert >= 1) {\n        // Delete the offending records and add the merged ones.\n        diffs.splice(pointer - countDelete - countInsert,\n          countDelete + countInsert)\n        pointer = pointer - countDelete - countInsert\n        const a = diffMain(textDelete, textInsert, false, deadline)\n        for (let j = a.length - 1; j >= 0; j--)\n          diffs.splice(pointer, 0, a[j])\n\n        pointer = pointer + a.length\n      }\n      countInsert = 0\n      countDelete = 0\n      textDelete = ''\n      textInsert = ''\n    }\n    pointer++\n  }\n  diffs.pop() // Remove the dummy entry at the end.\n\n  return diffs\n}\n\nfunction diffBisect(text1, text2, deadline) {\n  // Cache the text lengths to prevent multiple calls.\n  const text1Length = text1.length\n  const text2Length = text2.length\n  const maxD = Math.ceil((text1Length + text2Length) / 2)\n  const vOffset = maxD\n  const vLength = 2 * maxD\n  const v1 = new Array(vLength)\n  const v2 = new Array(vLength)\n  // Setting all elements to -1 is faster in Chrome & Firefox than mixing\n  // integers and undefined.\n  for (let x = 0; x < vLength; x++) {\n    v1[x] = -1\n    v2[x] = -1\n  }\n  v1[vOffset + 1] = 0\n  v2[vOffset + 1] = 0\n  const delta = text1Length - text2Length\n  // If the total number of characters is odd, then the front path will collide\n  // with the reverse path.\n  const front = (delta % 2 !== 0)\n  // Offsets for start and end of k loop.\n  // Prevents mapping of space beyond the grid.\n  let k1start = 0\n  let k1end = 0\n  let k2start = 0\n  let k2end = 0\n  for (let d = 0; d < maxD; d++) {\n    // Bail out if deadline is reached.\n    if ((new Date()).getTime() > deadline)\n      break\n\n\n    // Walk the front path one step.\n    for (let k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\n      const k1Offset = vOffset + k1\n      let x1\n      if (k1 === -d || (k1 !== d && v1[k1Offset - 1] < v1[k1Offset + 1]))\n        x1 = v1[k1Offset + 1]\n      else\n        x1 = v1[k1Offset - 1] + 1\n\n      let y1 = x1 - k1\n      while (x1 < text1Length && y1 < text2Length &&\n        text1.charAt(x1) === text2.charAt(y1)) {\n        x1++\n        y1++\n      }\n      v1[k1Offset] = x1\n      if (x1 > text1Length) {\n        // Ran off the right of the graph.\n        k1end += 2\n      } else if (y1 > text2Length) {\n        // Ran off the bottom of the graph.\n        k1start += 2\n      } else if (front) {\n        const k2Offset = vOffset + delta - k1\n        if (k2Offset >= 0 && k2Offset < vLength && v2[k2Offset] !== -1) {\n          // Mirror x2 onto top-left coordinate system.\n          const x2 = text1Length - v2[k2Offset]\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diffBisectSplit(text1, text2, x1, y1, deadline)\n          }\n        }\n      }\n    }\n\n    // Walk the reverse path one step.\n    for (let k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\n      const k2Offset = vOffset + k2\n      let x2\n      if (k2 === -d || (k2 !== d && v2[k2Offset - 1] < v2[k2Offset + 1]))\n        x2 = v2[k2Offset + 1]\n      else\n        x2 = v2[k2Offset - 1] + 1\n\n      let y2 = x2 - k2\n      while (x2 < text1Length && y2 < text2Length &&\n        text1.charAt(text1Length - x2 - 1) ===\n        text2.charAt(text2Length - y2 - 1)) {\n        x2++\n        y2++\n      }\n      v2[k2Offset] = x2\n      if (x2 > text1Length) {\n        // Ran off the left of the graph.\n        k2end += 2\n      } else if (y2 > text2Length) {\n        // Ran off the top of the graph.\n        k2start += 2\n      } else if (!front) {\n        const k1Offset = vOffset + delta - k2\n        if (k1Offset >= 0 && k1Offset < vLength && v1[k1Offset] !== -1) {\n          const x1 = v1[k1Offset]\n          const y1 = vOffset + x1 - k1Offset\n          // Mirror x2 onto top-left coordinate system.\n          x2 = text1Length - x2\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diffBisectSplit(text1, text2, x1, y1, deadline)\n          }\n        }\n      }\n    }\n  }\n  // Diff took too long and hit the deadline or\n  // number of diffs equals number of characters, no commonality at all.\n  return [\n    [DIFF_DELETE, text1],\n    [DIFF_INSERT, text2]\n  ]\n}\n\nfunction diffBisectSplit(text1, text2, x, y, deadline) {\n  const text1a = text1.substring(0, x)\n  const text2a = text2.substring(0, y)\n  const text1b = text1.substring(x)\n  const text2b = text2.substring(y)\n\n  // Compute both diffs serially.\n  const diffs = diffMain(text1a, text2a, false, deadline)\n  const diffsb = diffMain(text1b, text2b, false, deadline)\n\n  return diffs.concat(diffsb)\n}\n\nfunction diffLinesToChars(text1, text2) {\n  const lineArray = [] // e.g. lineArray[4] == 'Hello\\n'\n  const lineHash = {} // e.g. lineHash['Hello\\n'] == 4\n\n  // '\\x00' is a valid character, but various debuggers don't like it.\n  // So we'll insert a junk entry to avoid generating a null character.\n  lineArray[0] = ''\n\n  /**\n   * Split a text into an array of strings.  Reduce the texts to a string of\n   * hashes where each Unicode character represents one line.\n   * Modifies linearray and linehash through being a closure.\n   * @param {string} text String to encode.\n   * @return {string} Encoded string.\n   * @private\n   */\n  function diffLinesToCharsMunge(text) {\n    let chars = ''\n    // Walk the text, pulling out a substring for each line.\n    // text.split('\\n') would would temporarily double our memory footprint.\n    // Modifying text would create many large strings to garbage collect.\n    let lineStart = 0\n    let lineEnd = -1\n    // Keeping our own length variable is faster than looking it up.\n    let lineArrayLength = lineArray.length\n    while (lineEnd < text.length - 1) {\n      lineEnd = text.indexOf('\\n', lineStart)\n      if (lineEnd === -1)\n        lineEnd = text.length - 1\n\n      const line = text.substring(lineStart, lineEnd + 1)\n      lineStart = lineEnd + 1\n\n      if (lineHash.hasOwnProperty ? lineHash.hasOwnProperty(line) :\n        (lineHash[line] !== undefined)) {\n        chars += String.fromCharCode(lineHash[line])\n      } else {\n        chars += String.fromCharCode(lineArrayLength)\n        lineHash[line] = lineArrayLength\n        lineArray[lineArrayLength++] = line\n      }\n    }\n    return chars\n  }\n\n  const chars1 = diffLinesToCharsMunge(text1)\n  const chars2 = diffLinesToCharsMunge(text2)\n  return {\n    chars1: chars1,\n    chars2: chars2,\n    lineArray: lineArray\n  }\n}\n\nfunction diffCharsToLines(diffs, lineArray) {\n  for (let x = 0; x < diffs.length; x++) {\n    const chars = diffs[x][1]\n    const text = []\n    for (let y = 0; y < chars.length; y++)\n      text[y] = lineArray[chars.charCodeAt(y)]\n\n    diffs[x][1] = text.join('')\n  }\n}\n\nfunction diffCommonPrefix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(0) !== text2.charAt(0))\n    return 0\n\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  let pointermin = 0\n  let pointermax = Math.min(text1.length, text2.length)\n  let pointermid = pointermax\n  let pointerstart = 0\n  while (pointermin < pointermid) {\n    if (text1.substring(pointerstart, pointermid) ===\n      text2.substring(pointerstart, pointermid)) {\n      pointermin = pointermid\n      pointerstart = pointermin\n    } else {\n      pointermax = pointermid\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin)\n  }\n  return pointermid\n}\n\nfunction diffCommonSuffix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 ||\n    text1.charAt(text1.length - 1) !== text2.charAt(text2.length - 1))\n    return 0\n\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  let pointermin = 0\n  let pointermax = Math.min(text1.length, text2.length)\n  let pointermid = pointermax\n  let pointerend = 0\n  while (pointermin < pointermid) {\n    if (text1.substring(text1.length - pointermid, text1.length - pointerend) ===\n      text2.substring(text2.length - pointermid, text2.length - pointerend)) {\n      pointermin = pointermid\n      pointerend = pointermin\n    } else {\n      pointermax = pointermid\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin)\n  }\n  return pointermid\n}\n\nfunction diffCommonOverlap(text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  const text1Length = text1.length\n  const text2Length = text2.length\n  // Eliminate the null case.\n  if (text1Length === 0 || text2Length === 0)\n    return 0\n\n  // Truncate the longer string.\n  if (text1Length > text2Length)\n    text1 = text1.substring(text1Length - text2Length)\n  else if (text1Length < text2Length)\n    text2 = text2.substring(0, text1Length)\n\n  const textLength = Math.min(text1Length, text2Length)\n  // Quick check for the worst case.\n  if (text1 === text2)\n    return textLength\n\n\n  // Start by looking for a single character match\n  // and increase length until no match is found.\n  // Performance analysis: http://neil.fraser.name/news/2010/11/04/\n  let best = 0\n  let length = 1\n  while (true) { // eslint-disable-line\n    const pattern = text1.substring(textLength - length)\n    const found = text2.indexOf(pattern)\n    if (found === -1)\n      return best\n\n    length += found\n    if (found === 0 || text1.substring(textLength - length) ===\n      text2.substring(0, length)) {\n      best = length\n      length++\n    }\n  }\n}\n\nfunction diffHalfMatch(text1, text2) {\n  if (diffTimeout <= 0) {\n    // Don't risk returning a non-optimal diff if we have unlimited time.\n    return null\n  }\n  const longtext = text1.length > text2.length ? text1 : text2\n  const shorttext = text1.length > text2.length ? text2 : text1\n  if (longtext.length < 4 || shorttext.length * 2 < longtext.length)\n    return null // Pointless.\n\n\n  /**\n   * Does a substring of shorttext exist within longtext such that the substring\n   * is at least half the length of longtext?\n   * Closure, but does not reference any external variables.\n   * @param {string} longtext Longer string.\n   * @param {string} shorttext Shorter string.\n   * @param {number} i Start index of quarter length substring within longtext.\n   * @return {Array.<string>} Five element Array, containing the prefix of\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\n   *     of shorttext and the common middle.  Or null if there was no match.\n   * @private\n   */\n  function diffHalfMatchI(longtext, shorttext, i) {\n    const seed = longtext.substring(i, i + Math.floor(longtext.length / 4))\n    let j = -1\n    let bestCommon = ''\n      , bestLongtextA\n      , bestLongtextB\n      , bestShorttextA\n      , bestShorttextB\n    while ((j = shorttext.indexOf(seed, j + 1)) !== -1) {\n      const prefixLength = diffCommonPrefix(longtext.substring(i),\n        shorttext.substring(j))\n      const suffixLength = diffCommonSuffix(longtext.substring(0, i),\n        shorttext.substring(0, j))\n      if (bestCommon.length < suffixLength + prefixLength) {\n        bestCommon = shorttext.substring(j - suffixLength, j) +\n          shorttext.substring(j, j + prefixLength)\n        bestLongtextA = longtext.substring(0, i - suffixLength)\n        bestLongtextB = longtext.substring(i + prefixLength)\n        bestShorttextA = shorttext.substring(0, j - suffixLength)\n        bestShorttextB = shorttext.substring(j + prefixLength)\n      }\n    }\n    if (bestCommon.length * 2 >= longtext.length) {\n      return [bestLongtextA, bestLongtextB,\n        bestShorttextA, bestShorttextB, bestCommon\n      ]\n    }\n    return null\n\n  }\n\n  // First check if the second quarter is the seed for a half-match.\n  const hm1 = diffHalfMatchI(longtext, shorttext,\n    Math.ceil(longtext.length / 4))\n  // Check again based on the third quarter.\n  const hm2 = diffHalfMatchI(longtext, shorttext,\n    Math.ceil(longtext.length / 2))\n  let hm\n  if (!hm1 && !hm2)\n    return null\n\n  if (!hm2) {\n    hm = hm1\n  } else if (!hm1) {\n    hm = hm2\n  } else {\n    // Both matched.  Select the longest.\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2\n  }\n\n  // A half-match was found, sort out the return data.\n  let text1A\n    , text1B\n    , text2A\n    , text2B\n  if (text1.length > text2.length) {\n    text1A = hm[0]\n    text1B = hm[1]\n    text2A = hm[2]\n    text2B = hm[3]\n  } else {\n    text2A = hm[0]\n    text2B = hm[1]\n    text1A = hm[2]\n    text1B = hm[3]\n  }\n  const midCommon = hm[4]\n  return [text1A, text1B, text2A, text2B, midCommon]\n}\n\nfunction diffCleanupSemantic(diffs) {\n  let changes = false\n  const equalities = [] // Stack of indices where equalities are found.\n  let equalitiesLength = 0 // Keeping our own length const is faster in JS.\n  /** @type {?string} */\n  let lastEquality = null\n  // Always equal to diffs[equalities[equalitiesLength - 1]][1]\n  let pointer = 0 // Index of current position.\n  // Number of characters that changed prior to the equality.\n  let lengthInsertions1 = 0\n  let lengthDeletions1 = 0\n  // Number of characters that changed after the equality.\n  let lengthInsertions2 = 0\n  let lengthDeletions2 = 0\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] === DIFF_EQUAL) { // Equality found.\n      equalities[equalitiesLength++] = pointer\n      lengthInsertions1 = lengthInsertions2\n      lengthDeletions1 = lengthDeletions2\n      lengthInsertions2 = 0\n      lengthDeletions2 = 0\n      lastEquality = diffs[pointer][1]\n    } else { // An insertion or deletion.\n      if (diffs[pointer][0] === DIFF_INSERT)\n        lengthInsertions2 += diffs[pointer][1].length\n      else\n        lengthDeletions2 += diffs[pointer][1].length\n\n      // Eliminate an equality that is smaller or equal to the edits on both\n      // sides of it.\n      if (lastEquality && (lastEquality.length <=\n          Math.max(lengthInsertions1, lengthDeletions1)) &&\n        (lastEquality.length <= Math.max(lengthInsertions2,\n          lengthDeletions2))) {\n        // Duplicate record.\n        diffs.splice(equalities[equalitiesLength - 1], 0, [DIFF_DELETE, lastEquality])\n        // Change second copy to insert.\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT\n        // Throw away the equality we just deleted.\n        equalitiesLength--\n        // Throw away the previous equality (it needs to be reevaluated).\n        equalitiesLength--\n        pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1\n        lengthInsertions1 = 0 // Reset the counters.\n        lengthDeletions1 = 0\n        lengthInsertions2 = 0\n        lengthDeletions2 = 0\n        lastEquality = null\n        changes = true\n      }\n    }\n    pointer++\n  }\n\n  // Normalize the diff.\n  if (changes)\n    diffCleanupMerge(diffs)\n\n  diffCleanupSemanticLossless(diffs)\n\n  // Find any overlaps between deletions and insertions.\n  // e.g: <del>abcxxx</del><ins>xxxdef</ins>\n  //   -> <del>abc</del>xxx<ins>def</ins>\n  // e.g: <del>xxxabc</del><ins>defxxx</ins>\n  //   -> <ins>def</ins>xxx<del>abc</del>\n  // Only extract an overlap if it is as big as the edit ahead or behind it.\n  pointer = 1\n  while (pointer < diffs.length) {\n    if (diffs[pointer - 1][0] === DIFF_DELETE &&\n      diffs[pointer][0] === DIFF_INSERT) {\n      const deletion = diffs[pointer - 1][1]\n      const insertion = diffs[pointer][1]\n      const overlapLength1 = diffCommonOverlap(deletion, insertion)\n      const overlapLength2 = diffCommonOverlap(insertion, deletion)\n      if (overlapLength1 >= overlapLength2) {\n        if (overlapLength1 >= deletion.length / 2 ||\n          overlapLength1 >= insertion.length / 2) {\n          // Overlap found.  Insert an equality and trim the surrounding edits.\n          diffs.splice(pointer, 0, [DIFF_EQUAL, insertion.substring(0, overlapLength1)])\n          diffs[pointer - 1][1] =\n            deletion.substring(0, deletion.length - overlapLength1)\n          diffs[pointer + 1][1] = insertion.substring(overlapLength1)\n          pointer++\n        }\n      } else if (overlapLength2 >= deletion.length / 2 ||\n          overlapLength2 >= insertion.length / 2) {\n        // Reverse overlap found.\n        // Insert an equality and swap and trim the surrounding edits.\n        diffs.splice(pointer, 0, [DIFF_EQUAL, deletion.substring(0, overlapLength2)])\n        diffs[pointer - 1][0] = DIFF_INSERT\n        diffs[pointer - 1][1] =\n            insertion.substring(0, insertion.length - overlapLength2)\n        diffs[pointer + 1][0] = DIFF_DELETE\n        diffs[pointer + 1][1] =\n            deletion.substring(overlapLength2)\n        pointer++\n      }\n      pointer++\n    }\n    pointer++\n  }\n}\n\nfunction diffCleanupSemanticLossless(diffs) {\n\n  /**\n     * Given two strings, compute a score representing whether the internal\n     * boundary falls on logical boundaries.\n     * Scores range from 6 (best) to 0 (worst).\n     * Closure, but does not reference any external variables.\n     * @param {string} one First string.\n     * @param {string} two Second string.\n     * @return {number} The score.\n     * @private\n     */\n  function diffCleanupSemanticScore_(one, two) {\n    if (!one || !two) {\n      // Edges are the best.\n      return 6\n    }\n\n    // Each port of this function behaves slightly differently due to\n    // subtle differences in each language's definition of things like\n    // 'whitespace'.  Since this function's purpose is largely cosmetic,\n    // the choice has been made to use each language's native features\n    // rather than force total conformity.\n    const char1 = one.charAt(one.length - 1)\n    const char2 = two.charAt(0)\n    const nonAlphaNumeric1 = char1.match(nonAlphaNumericRegex_)\n    const nonAlphaNumeric2 = char2.match(nonAlphaNumericRegex_)\n    const whitespace1 = nonAlphaNumeric1 &&\n      char1.match(whitespaceRegex_)\n    const whitespace2 = nonAlphaNumeric2 &&\n      char2.match(whitespaceRegex_)\n    const lineBreak1 = whitespace1 &&\n      char1.match(linebreakRegex_)\n    const lineBreak2 = whitespace2 &&\n      char2.match(linebreakRegex_)\n    const blankLine1 = lineBreak1 &&\n      one.match(blanklineEndRegex_)\n    const blankLine2 = lineBreak2 &&\n      two.match(blanklineStartRegex_)\n\n    if (blankLine1 || blankLine2) {\n      // Five points for blank lines.\n      return 5\n    } else if (lineBreak1 || lineBreak2) {\n      // Four points for line breaks.\n      return 4\n    } else if (nonAlphaNumeric1 && !whitespace1 && whitespace2) {\n      // Three points for end of sentences.\n      return 3\n    } else if (whitespace1 || whitespace2) {\n      // Two points for whitespace.\n      return 2\n    } else if (nonAlphaNumeric1 || nonAlphaNumeric2) {\n      // One point for non-alphanumeric.\n      return 1\n    }\n    return 0\n  }\n\n  let pointer = 1\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] === DIFF_EQUAL &&\n      diffs[pointer + 1][0] === DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      let equality1 = diffs[pointer - 1][1]\n      let edit = diffs[pointer][1]\n      let equality2 = diffs[pointer + 1][1]\n\n      // First, shift the edit as far left as possible.\n      const commonOffset = diffCommonSuffix(equality1, edit)\n      if (commonOffset) {\n        const commonString = edit.substring(edit.length - commonOffset)\n        equality1 = equality1.substring(0, equality1.length - commonOffset)\n        edit = commonString + edit.substring(0, edit.length - commonOffset)\n        equality2 = commonString + equality2\n      }\n\n      // Second, step character by character right, looking for the best fit.\n      let bestEquality1 = equality1\n      let bestEdit = edit\n      let bestEquality2 = equality2\n      let bestScore = diffCleanupSemanticScore_(equality1, edit) +\n        diffCleanupSemanticScore_(edit, equality2)\n      while (edit.charAt(0) === equality2.charAt(0)) {\n        equality1 += edit.charAt(0)\n        edit = edit.substring(1) + equality2.charAt(0)\n        equality2 = equality2.substring(1)\n        const score = diffCleanupSemanticScore_(equality1, edit) +\n          diffCleanupSemanticScore_(edit, equality2)\n        // The >= encourages trailing rather than leading whitespace on edits.\n        if (score >= bestScore) {\n          bestScore = score\n          bestEquality1 = equality1\n          bestEdit = edit\n          bestEquality2 = equality2\n        }\n      }\n\n      if (diffs[pointer - 1][1] !== bestEquality1) {\n        // We have an improvement, save it back to the diff.\n        if (bestEquality1) {\n          diffs[pointer - 1][1] = bestEquality1\n        } else {\n          diffs.splice(pointer - 1, 1)\n          pointer--\n        }\n        diffs[pointer][1] = bestEdit\n        if (bestEquality2) {\n          diffs[pointer + 1][1] = bestEquality2\n        } else {\n          diffs.splice(pointer + 1, 1)\n          pointer--\n        }\n      }\n    }\n    pointer++\n  }\n}\n\nfunction diffCleanupEfficiency(diffs) {\n  let changes = false\n  const equalities = [] // Stack of indices where equalities are found.\n  let equalitiesLength = 0 // Keeping our own length const is faster in JS.\n  /** @type {?string} */\n  let lastEquality = null\n  // Always equal to diffs[equalities[equalitiesLength - 1]][1]\n  let pointer = 0 // Index of current position.\n  // Is there an insertion operation before the last equality.\n  let preIns = false\n  // Is there a deletion operation before the last equality.\n  let preDel = false\n  // Is there an insertion operation after the last equality.\n  let postIns = false\n  // Is there a deletion operation after the last equality.\n  let postDel = false\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] === DIFF_EQUAL) { // Equality found.\n      if (diffs[pointer][1].length < diffEditCost &&\n        (postIns || postDel)) {\n        // Candidate found.\n        equalities[equalitiesLength++] = pointer\n        preIns = postIns\n        preDel = postDel\n        lastEquality = diffs[pointer][1]\n      } else {\n        // Not a candidate, and can never become one.\n        equalitiesLength = 0\n        lastEquality = null\n      }\n      postIns = postDel = false\n    } else { // An insertion or deletion.\n      if (diffs[pointer][0] === DIFF_DELETE)\n        postDel = true\n      else\n        postIns = true\n\n\n      /*\n       * Five types to be split:\n       * <ins>A</ins><del>B</del>XY<ins>C</ins><del>D</del>\n       * <ins>A</ins>X<ins>C</ins><del>D</del>\n       * <ins>A</ins><del>B</del>X<ins>C</ins>\n       * <ins>A</del>X<ins>C</ins><del>D</del>\n       * <ins>A</ins><del>B</del>X<del>C</del>\n       */\n      if (lastEquality && ((preIns && preDel && postIns && postDel) ||\n          ((lastEquality.length < diffEditCost / 2) &&\n            (preIns + preDel + postIns + postDel) === 3))) {\n        // Duplicate record.\n        diffs.splice(equalities[equalitiesLength - 1], 0, [DIFF_DELETE, lastEquality])\n        // Change second copy to insert.\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT\n        equalitiesLength-- // Throw away the equality we just deleted\n        lastEquality = null\n        if (preIns && preDel) {\n          // No changes made which could affect previous entry, keep going.\n          postIns = postDel = true\n          equalitiesLength = 0\n        } else {\n          equalitiesLength-- // Throw away the previous equality.\n          pointer = equalitiesLength > 0 ?\n            equalities[equalitiesLength - 1] : -1\n          postIns = postDel = false\n        }\n        changes = true\n      }\n    }\n    pointer++\n  }\n\n  if (changes)\n    diffCleanupMerge(diffs)\n\n}\n\nfunction diffCleanupMerge(diffs) {\n  diffs.push([DIFF_EQUAL, '']) // Add a dummy entry at the end.\n  let pointer = 0\n  let countDelete = 0\n  let countInsert = 0\n  let textDelete = ''\n  let textInsert = ''\n  let commonlength\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] === DIFF_INSERT) {\n      countInsert++\n      textInsert += diffs[pointer][1]\n      pointer++\n    }\n    if (diffs[pointer][0] === DIFF_DELETE) {\n      countDelete++\n      textDelete += diffs[pointer][1]\n      pointer++\n    }\n    if (diffs[pointer][0] === DIFF_EQUAL) {\n      // Upon reaching an equality, check for prior redundancies.\n      if (countDelete + countInsert > 1) {\n        if (countDelete !== 0 && countInsert !== 0) {\n        // Factor out any common prefixies.\n          commonlength = diffCommonPrefix(textInsert, textDelete)\n          if (commonlength !== 0) {\n            if ((pointer - countDelete - countInsert) > 0 &&\n                diffs[pointer - countDelete - countInsert - 1][0] ===\n                DIFF_EQUAL) {\n              diffs[pointer - countDelete - countInsert - 1][1] +=\n                  textInsert.substring(0, commonlength)\n            } else {\n              diffs.splice(0, 0, [DIFF_EQUAL,\n                textInsert.substring(0, commonlength)\n              ])\n              pointer++\n            }\n            textInsert = textInsert.substring(commonlength)\n            textDelete = textDelete.substring(commonlength)\n          }\n          // Factor out any common suffixies.\n          commonlength = diffCommonSuffix(textInsert, textDelete)\n          if (commonlength !== 0) {\n            diffs[pointer][1] = textInsert.substring(textInsert.length -\n                commonlength) + diffs[pointer][1]\n            textInsert = textInsert.substring(0, textInsert.length -\n                commonlength)\n            textDelete = textDelete.substring(0, textDelete.length -\n                commonlength)\n          }\n        }\n        // Delete the offending records and add the merged ones.\n        if (countDelete === 0) {\n          diffs.splice(pointer - countInsert,\n            countDelete + countInsert, [DIFF_INSERT, textInsert])\n        } else if (countInsert === 0) {\n          diffs.splice(pointer - countDelete,\n            countDelete + countInsert, [DIFF_DELETE, textDelete])\n        } else {\n          diffs.splice(pointer - countDelete - countInsert,\n            countDelete + countInsert, [DIFF_DELETE, textDelete], [DIFF_INSERT, textInsert])\n        }\n        pointer = pointer - countDelete - countInsert +\n            (countDelete ? 1 : 0) + (countInsert ? 1 : 0) + 1\n      } else if (pointer !== 0 && diffs[pointer - 1][0] === DIFF_EQUAL) {\n        // Merge this equality with the previous one.\n        diffs[pointer - 1][1] += diffs[pointer][1]\n        diffs.splice(pointer, 1)\n      } else {\n        pointer++\n      }\n      countInsert = 0\n      countDelete = 0\n      textDelete = ''\n      textInsert = ''\n    }\n  }\n  if (diffs[diffs.length - 1][1] === '')\n    diffs.pop() // Remove the dummy entry at the end.\n\n\n  // Second pass: look for single edits surrounded on both sides by equalities\n  // which can be shifted sideways to eliminate an equality.\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\n  let changes = false\n  pointer = 1\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] === DIFF_EQUAL &&\n      diffs[pointer + 1][0] === DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      if (diffs[pointer][1].substring(diffs[pointer][1].length -\n          diffs[pointer - 1][1].length) === diffs[pointer - 1][1]) {\n        // Shift the edit over the previous equality.\n        diffs[pointer][1] = diffs[pointer - 1][1] +\n          diffs[pointer][1].substring(0, diffs[pointer][1].length -\n            diffs[pointer - 1][1].length)\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1]\n        diffs.splice(pointer - 1, 1)\n        changes = true\n      } else if (diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) ===\n        diffs[pointer + 1][1]) {\n        // Shift the edit over the next equality.\n        diffs[pointer - 1][1] += diffs[pointer + 1][1]\n        diffs[pointer][1] =\n          diffs[pointer][1].substring(diffs[pointer + 1][1].length) +\n          diffs[pointer + 1][1]\n        diffs.splice(pointer + 1, 1)\n        changes = true\n      }\n    }\n    pointer++\n  }\n  // If shifts were made, the diff needs reordering and another shift sweep.\n  if (changes)\n    diffCleanupMerge(diffs)\n\n}\n\nfunction diffText1(diffs) {\n  const text = []\n  for (let x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_INSERT)\n      text[x] = diffs[x][1]\n\n  }\n  return text.join('')\n}\n\nfunction diffText2(diffs) {\n  const text = []\n  for (let x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_DELETE)\n      text[x] = diffs[x][1]\n\n  }\n  return text.join('')\n}\n\nfunction matchMain(text, pattern, loc) {\n  loc = Math.max(0, Math.min(loc, text.length))\n  if (text === pattern) {\n    // Shortcut (potentially not guaranteed by the algorithm)\n    return 0\n  } else if (!text.length) {\n    // Nothing to match.\n    return -1\n  } else if (text.substring(loc, loc + pattern.length) === pattern) {\n    // Perfect match at the perfect spot!  (Includes case of null pattern)\n    return loc\n  }\n  // Do a fuzzy compare.\n  return matchBitap(text, pattern, loc)\n\n}\n\nfunction matchAlphabet(pattern) {\n  const s = {}\n  for (let i = 0; i < pattern.length; i++)\n    s[pattern.charAt(i)] = 0\n\n  for (let i = 0; i < pattern.length; i++)\n    s[pattern.charAt(i)] |= 1 << (pattern.length - i - 1)\n\n  return s\n}\n\nfunction matchBitap(text, pattern, loc) {\n  if (pattern.length > matchMaxBits)\n    throw new Error('Pattern too long for this browser.')\n\n  // Initialise the alphabet.\n  const s = matchAlphabet(pattern)\n\n  /**\n   * Compute and return the score for a match with e errors and x location.\n   * Accesses loc and pattern through being a closure.\n   * @param {number} e Number of errors in match.\n   * @param {number} x Location of match.\n   * @return {number} Overall score for match (0.0 = good, 1.0 = bad).\n   * @private\n   */\n  function matchBitapScore_(e, x) {\n    const accuracy = e / pattern.length\n    const proximity = Math.abs(loc - x)\n    if (!matchDistance) {\n      // Dodge divide by zero error.\n      return proximity ? 1.0 : accuracy\n    }\n    return accuracy + (proximity / matchDistance)\n  }\n\n  // Highest score beyond which we give up.\n  let scoreThreshold = matchThreshold\n  // Is there a nearby exact match? (speedup)\n  let bestLoc = text.indexOf(pattern, loc)\n  if (bestLoc !== -1) {\n    scoreThreshold = Math.min(matchBitapScore_(0, bestLoc), scoreThreshold)\n    // What about in the other direction? (speedup)\n    bestLoc = text.lastIndexOf(pattern, loc + pattern.length)\n    if (bestLoc !== -1) {\n      scoreThreshold =\n          Math.min(matchBitapScore_(0, bestLoc), scoreThreshold)\n    }\n  }\n\n  // Initialise the bit arrays.\n  const matchmask = 1 << (pattern.length - 1)\n  bestLoc = -1\n\n  let binMin\n    , binMid\n\n  let binMax = pattern.length + text.length\n  let lastRd\n  for (let d = 0; d < pattern.length; d++) {\n    // Scan for the best match; each iteration allows for one more error.\n    // Run a binary search to determine how far from 'loc' we can stray at this\n    // error level.\n    binMin = 0\n    binMid = binMax\n    while (binMin < binMid) {\n      if (matchBitapScore_(d, loc + binMid) <= scoreThreshold)\n        binMin = binMid\n      else\n        binMax = binMid\n\n      binMid = Math.floor((binMax - binMin) / 2 + binMin)\n    }\n    // Use the result from this iteration as the maximum for the next.\n    binMax = binMid\n    let start = Math.max(1, loc - binMid + 1)\n    const finish = Math.min(loc + binMid, text.length) + pattern.length\n\n    const rd = Array(finish + 2)\n    rd[finish + 1] = (1 << d) - 1\n    for (let j = finish; j >= start; j--) {\n      // The alphabet (s) is a sparse hash, so the following line generates\n      // warnings.\n      const charMatch = s[text.charAt(j - 1)]\n      if (d === 0) { // First pass: exact match.\n        rd[j] = ((rd[j + 1] << 1) | 1) & charMatch\n      } else { // Subsequent passes: fuzzy match.\n        rd[j] = (((rd[j + 1] << 1) | 1) & charMatch) |\n                (((lastRd[j + 1] | lastRd[j]) << 1) | 1) |\n                lastRd[j + 1]\n      }\n      if (rd[j] & matchmask) {\n        const score = matchBitapScore_(d, j - 1)\n        // This match will almost certainly be better than any existing match.\n        // But check anyway.\n        if (score <= scoreThreshold) {\n          // Told you so.\n          scoreThreshold = score\n          bestLoc = j - 1\n          if (bestLoc > loc) {\n            // When passing loc, don't exceed our current distance from loc.\n            start = Math.max(1, 2 * loc - bestLoc)\n          } else {\n            // Already passed loc, downhill from here on in.\n            break\n          }\n        }\n      }\n    }\n    // No hope for a (better) match at greater error levels.\n    if (matchBitapScore_(d + 1, loc) > scoreThreshold)\n      break\n\n    lastRd = rd\n  }\n  return bestLoc\n}\n\nfunction patchAddContext(patch, text) {\n  if (text.length === 0)\n    return\n\n  let pattern = text.substring(patch.start2, patch.start2 + patch.length1)\n  let padding = 0\n\n  // Look for the first and last matches of pattern in text.  If two different\n  // matches are found, increase the pattern length.\n  while (text.indexOf(pattern) !== text.lastIndexOf(pattern) &&\n    pattern.length < matchMaxBits - patchMargin -\n    patchMargin) {\n    padding += patchMargin\n    pattern = text.substring(patch.start2 - padding,\n      patch.start2 + patch.length1 + padding)\n  }\n  // Add one chunk for good luck.\n  padding += patchMargin\n\n  // Add the prefix.\n  const prefix = text.substring(patch.start2 - padding, patch.start2)\n  if (prefix)\n    patch.diffs.unshift([DIFF_EQUAL, prefix])\n\n  // Add the suffix.\n  const suffix = text.substring(patch.start2 + patch.length1,\n    patch.start2 + patch.length1 + padding)\n  if (suffix)\n    patch.diffs.push([DIFF_EQUAL, suffix])\n\n\n  // Roll back the start points.\n  patch.start1 -= prefix.length\n  patch.start2 -= prefix.length\n  // Extend the lengths.\n  patch.length1 += prefix.length + suffix.length\n  patch.length2 += prefix.length + suffix.length\n}\n\nexport function diff(a, optB, optC) {\n  let text1\n    , diffs\n  if (typeof a === 'string' && typeof optB === 'string' &&\n    typeof optC === 'undefined') {\n    // Method 1: text1, text2\n    // Compute diffs from text1 and text2.\n    text1 = /** @type {string} */ (a)\n    diffs = diffMain(text1, optB, true, undefined)\n    if (diffs.length > 2) {\n      diffCleanupSemantic(diffs)\n      diffCleanupEfficiency(diffs)\n    }\n  }\n\n  const patches = []\n  let patch = patchObj()\n  let patchDiffLength = 0 // Keeping our own length const is faster in JS.\n  let charCount1 = 0 // Number of characters into the text1 string.\n  let charCount2 = 0 // Number of characters into the text2 string.\n  // Start with text1 (prepatchText) and apply the diffs until we arrive at\n  // text2 (postpatchText).  We recreate the patches one by one to determine\n  // context info.\n  let prepatchText = text1\n  let postpatchText = text1\n  for (let x = 0; x < diffs.length; x++) {\n    const diffType = diffs[x][0]\n    const diffText = diffs[x][1]\n\n    if (!patchDiffLength && diffType !== DIFF_EQUAL) {\n      // A new patch starts here.\n      patch.start1 = charCount1\n      patch.start2 = charCount2\n    }\n\n    if (diffType === DIFF_INSERT) {\n      patch.diffs[patchDiffLength++] = diffs[x]\n      patch.length2 += diffText.length\n      postpatchText = postpatchText.substring(0, charCount2) + diffText +\n          postpatchText.substring(charCount2)\n    }\n    if (diffType === DIFF_DELETE) {\n      patch.length1 += diffText.length\n      patch.diffs[patchDiffLength++] = diffs[x]\n      postpatchText = postpatchText.substring(0, charCount2) +\n          postpatchText.substring(charCount2 +\n            diffText.length)\n    }\n    if (diffType === DIFF_EQUAL) {\n      if (diffText.length <= 2 * patchMargin &&\n          patchDiffLength && diffs.length !== x + 1) {\n        // Small equality inside a patch.\n        patch.diffs[patchDiffLength++] = diffs[x]\n        patch.length1 += diffText.length\n        patch.length2 += diffText.length\n      } else if (diffText.length >= 2 * patchMargin) {\n        // Time for a new patch.\n        if (patchDiffLength) {\n          patchAddContext(patch, prepatchText)\n          patches.push(patch)\n          patch = patchObj()\n          patchDiffLength = 0\n          // Unlike Unidiff, our patch lists have a rolling context.\n          // http://code.google.com/p/google-diff-match-patch/wiki/Unidiff\n          // Update prepatch text & pos to reflect the application of the\n          // just completed patch.\n          prepatchText = postpatchText\n          charCount1 = charCount2\n        }\n      }\n    }\n\n    // Update the current character count.\n    if (diffType !== DIFF_INSERT)\n      charCount1 += diffText.length\n\n    if (diffType !== DIFF_DELETE)\n      charCount2 += diffText.length\n\n  }\n  // Pick up the leftover patch if not empty.\n  if (patchDiffLength) {\n    patchAddContext(patch, prepatchText)\n    patches.push(patch)\n  }\n\n  return serialize(patches)\n}\n\nfunction patchDeepCopy(patches) {\n  // Making deep copies is hard in JavaScript.\n  const patchesCopy = []\n  for (let x = 0; x < patches.length; x++) {\n    const patch = patches[x]\n    const patchCopy = patchObj()\n    patchCopy.diffs = []\n    for (let y = 0; y < patch.diffs.length; y++)\n      patchCopy.diffs[y] = patch.diffs[y].slice()\n\n    patchCopy.start1 = patch.start1\n    patchCopy.start2 = patch.start2\n    patchCopy.length1 = patch.length1\n    patchCopy.length2 = patch.length2\n    patchesCopy[x] = patchCopy\n  }\n  return patchesCopy\n}\n\nfunction diffLevenshtein(diffs) {\n  let levenshtein = 0\n  let insertions = 0\n  let deletions = 0\n  for (let x = 0; x < diffs.length; x++) {\n    const op = diffs[x][0]\n    const data = diffs[x][1]\n    if (op === DIFF_INSERT) {\n      insertions += data.length\n    } else if (op === DIFF_DELETE) {\n      deletions += data.length\n    } else if (op === DIFF_EQUAL) {\n      // A deletion and an insertion is one substitution.\n      levenshtein += Math.max(insertions, deletions)\n      insertions = 0\n      deletions = 0\n    }\n  }\n  levenshtein += Math.max(insertions, deletions)\n  return levenshtein\n}\n\nexport function patch(text, patches) {\n  patches = deserialize(patches)\n\n  if (patches.length === 0)\n    return [text, []]\n\n\n  // Deep copy the patches so that no changes are made to originals.\n  patches = patchDeepCopy(patches)\n\n  const nullPadding = patchAddPadding(patches)\n  text = nullPadding + text + nullPadding\n\n  patchSplitMax(patches)\n  // delta keeps track of the offset between the expected and actual location\n  // of the previous patch.  If there are patches expected at positions 10 and\n  // 20, but the first patch was found at 12, delta is 2 and the second patch\n  // has an effective expected position of 22.\n  let delta = 0\n  const results = []\n  for (let x = 0; x < patches.length; x++) {\n    const expectedLoc = patches[x].start2 + delta\n    const text1 = diffText1(patches[x].diffs)\n    let startLoc\n    let endLoc = -1\n    if (text1.length > matchMaxBits) {\n      // patchSplitMax will only provide an oversized pattern in the case of\n      // a monster delete.\n      startLoc = matchMain(text, text1.substring(0, matchMaxBits),\n        expectedLoc)\n      if (startLoc !== -1) {\n        endLoc = matchMain(text,\n          text1.substring(text1.length - matchMaxBits),\n          expectedLoc + text1.length - matchMaxBits)\n        if (endLoc === -1 || startLoc >= endLoc) {\n          // Can't find valid trailing context.  Drop this patch.\n          startLoc = -1\n        }\n      }\n    } else {\n      startLoc = matchMain(text, text1, expectedLoc)\n    }\n    if (startLoc === -1) {\n      // No match found.  :(\n      results[x] = false\n      // Subtract the delta for this failed patch from subsequent patches.\n      delta -= patches[x].length2 - patches[x].length1\n    } else {\n      // Found a match.  :)\n      results[x] = true\n      delta = startLoc - expectedLoc\n      let text2\n      if (endLoc === -1)\n        text2 = text.substring(startLoc, startLoc + text1.length)\n      else\n        text2 = text.substring(startLoc, endLoc + matchMaxBits)\n\n      if (text1 === text2) {\n        // Perfect match, just shove the replacement text in.\n        text = text.substring(0, startLoc) +\n          diffText2(patches[x].diffs) +\n          text.substring(startLoc + text1.length)\n      } else {\n        // Imperfect match.  Run a diff to get a framework of equivalent\n        // indices.\n        const diffs = diffMain(text1, text2, false, undefined)\n        if (text1.length > matchMaxBits &&\n          diffLevenshtein(diffs) / text1.length >\n          patchDeleteThreshold) {\n          // The end points match, but the content is unacceptably bad.\n          results[x] = false\n        } else {\n          diffCleanupSemanticLossless(diffs)\n          let index1 = 0\n          let index2\n          for (let y = 0; y < patches[x].diffs.length; y++) {\n            const mod = patches[x].diffs[y]\n            if (mod[0] !== DIFF_EQUAL) // eslint-disable-line\n              index2 = diffXIndex(diffs, index1)\n\n            if (mod[0] === DIFF_INSERT) { // eslint-disable-line\n              text = text.substring(0, startLoc + index2) + mod[1] +\n                text.substring(startLoc + index2)\n            } else if (mod[0] === DIFF_DELETE) { // Deletion\n              text = text.substring(0, startLoc + index2) +\n                text.substring(startLoc + diffXIndex(diffs,\n                  index1 + mod[1].length))\n            }\n            if (mod[0] !== DIFF_DELETE)\n              index1 += mod[1].length\n\n          }\n        }\n      }\n    }\n  }\n  // Strip the padding off.\n  text = text.substring(nullPadding.length, text.length - nullPadding.length)\n  return [text, results]\n}\n\nfunction diffXIndex(diffs, loc) {\n  let chars1 = 0\n  let chars2 = 0\n  let lastChars1 = 0\n  let lastChars2 = 0\n  let x\n  for (x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_INSERT) { // Equality or deletion.\n      chars1 += diffs[x][1].length\n    }\n    if (diffs[x][0] !== DIFF_DELETE) { // Equality or insertion.\n      chars2 += diffs[x][1].length\n    }\n    if (chars1 > loc) { // Overshot the location.\n      break\n    }\n    lastChars1 = chars1\n    lastChars2 = chars2\n  }\n  // Was the location was deleted?\n  if (diffs.length !== x && diffs[x][0] === DIFF_DELETE)\n    return lastChars2\n\n  // Add the remaining character length.\n  return lastChars2 + (loc - lastChars1)\n}\n\nfunction patchAddPadding(patches) {\n  const paddingLength = patchMargin\n  let nullPadding = ''\n  for (let x = 1; x <= paddingLength; x++)\n    nullPadding += String.fromCharCode(x)\n\n\n  // Bump all the patches forward.\n  for (let x = 0; x < patches.length; x++) {\n    patches[x].start1 += paddingLength\n    patches[x].start2 += paddingLength\n  }\n\n  // Add some padding on start of first diff.\n  let patch = patches[0]\n  let diffs = patch.diffs\n  if (diffs.length === 0 || diffs[0][0] !== DIFF_EQUAL) {\n    // Add nullPadding equality.\n    diffs.unshift([DIFF_EQUAL, nullPadding])\n    patch.start1 -= paddingLength // Should be 0.\n    patch.start2 -= paddingLength // Should be 0.\n    patch.length1 += paddingLength\n    patch.length2 += paddingLength\n  } else if (paddingLength > diffs[0][1].length) {\n    // Grow first equality.\n    const extraLength = paddingLength - diffs[0][1].length\n    diffs[0][1] = nullPadding.substring(diffs[0][1].length) + diffs[0][1]\n    patch.start1 -= extraLength\n    patch.start2 -= extraLength\n    patch.length1 += extraLength\n    patch.length2 += extraLength\n  }\n\n  // Add some padding on end of last diff.\n  patch = patches[patches.length - 1]\n  diffs = patch.diffs\n  if (diffs.length === 0 || diffs[diffs.length - 1][0] !== DIFF_EQUAL) {\n    // Add nullPadding equality.\n    diffs.push([DIFF_EQUAL, nullPadding])\n    patch.length1 += paddingLength\n    patch.length2 += paddingLength\n  } else if (paddingLength > diffs[diffs.length - 1][1].length) {\n    // Grow last equality.\n    const extraLength = paddingLength - diffs[diffs.length - 1][1].length\n    diffs[diffs.length - 1][1] += nullPadding.substring(0, extraLength)\n    patch.length1 += extraLength\n    patch.length2 += extraLength\n  }\n\n  return nullPadding\n}\n\nfunction patchSplitMax(patches) {\n  const patchSize = matchMaxBits\n  for (let x = 0; x < patches.length; x++) {\n    if (patches[x].length1 <= patchSize)\n      continue // eslint-disable-line\n\n    const bigpatch = patches[x]\n    // Remove the big old patch.\n    patches.splice(x--, 1)\n    let start1 = bigpatch.start1\n    let start2 = bigpatch.start2\n    let precontext = ''\n    while (bigpatch.diffs.length !== 0) {\n      // Create one of several smaller patches.\n      const patch = patchObj()\n      let empty = true\n      patch.start1 = start1 - precontext.length\n      patch.start2 = start2 - precontext.length\n      if (precontext !== '') {\n        patch.length1 = patch.length2 = precontext.length\n        patch.diffs.push([DIFF_EQUAL, precontext])\n      }\n      while (bigpatch.diffs.length !== 0 &&\n        patch.length1 < patchSize - patchMargin) {\n        const diffType = bigpatch.diffs[0][0]\n        let diffText = bigpatch.diffs[0][1]\n        if (diffType === DIFF_INSERT) {\n          // Insertions are harmless.\n          patch.length2 += diffText.length\n          start2 += diffText.length\n          patch.diffs.push(bigpatch.diffs.shift())\n          empty = false\n        } else if (diffType === DIFF_DELETE && patch.diffs.length === 1 &&\n          patch.diffs[0][0] === DIFF_EQUAL &&\n          diffText.length > 2 * patchSize) {\n          // This is a large deletion.  Let it pass in one chunk.\n          patch.length1 += diffText.length\n          start1 += diffText.length\n          empty = false\n          patch.diffs.push([diffType, diffText])\n          bigpatch.diffs.shift()\n        } else {\n          // Deletion or equality.  Only take as much as we can stomach.\n          diffText = diffText.substring(0,\n            patchSize - patch.length1 - patchMargin)\n          patch.length1 += diffText.length\n          start1 += diffText.length\n          if (diffType === DIFF_EQUAL) {\n            patch.length2 += diffText.length\n            start2 += diffText.length\n          } else {\n            empty = false\n          }\n          patch.diffs.push([diffType, diffText])\n          if (diffText === bigpatch.diffs[0][1]) {\n            bigpatch.diffs.shift()\n          } else {\n            bigpatch.diffs[0][1] =\n              bigpatch.diffs[0][1].substring(diffText.length)\n          }\n        }\n      }\n      // Compute the head context for the next patch.\n      precontext = diffText2(patch.diffs)\n      precontext =\n        precontext.substring(precontext.length - patchMargin)\n      // Append the end context for this patch.\n      const postcontext = diffText1(bigpatch.diffs)\n        .substring(0, patchMargin)\n      if (postcontext !== '') {\n        patch.length1 += postcontext.length\n        patch.length2 += postcontext.length\n        if (patch.diffs.length !== 0 &&\n          patch.diffs[patch.diffs.length - 1][0] === DIFF_EQUAL)\n          patch.diffs[patch.diffs.length - 1][1] += postcontext\n        else\n          patch.diffs.push([DIFF_EQUAL, postcontext])\n\n      }\n      if (!empty)\n        patches.splice(++x, 0, patch)\n\n    }\n  }\n}\n\nfunction patchObj() {\n  return {\n    diffs: [],\n    start1: null,\n    start2: null,\n    length1: 0,\n    length2: 0\n  }\n}\n\nfunction serialize(diff) {\n  return diff.map(d => d.diffs.concat([\n    d.length1,\n    d.length2,\n    d.start1,\n    d.start2\n  ]))\n}\n\nfunction deserialize(diff) {\n  return diff.map(d => {\n    return {\n      diffs: Array.isArray(d[0])\n        ? d.slice(0, -4)\n        : [\n          [0, d[1]],\n          [d[0], d[2]],\n          [0, d[3]]\n        ],\n      length1: d[d.length - 4],\n      length2: d[d.length - 3],\n      start1: d[d.length - 2],\n      start2: d[d.length - 1]\n    }\n  })\n}\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n *\n * Based on the Base 64 VLQ implementation in Closure Compiler:\n * https://code.google.com/p/closure-compiler/source/browse/trunk/src/com/google/debugging/sourcemap/Base64VLQ.java\n *\n * Copyright 2011 The Closure Compiler Authors. All rights reserved.\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *  * Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above\n *    copyright notice, this list of conditions and the following\n *    disclaimer in the documentation and/or other materials provided\n *    with the distribution.\n *  * Neither the name of Google Inc. nor the names of its\n *    contributors may be used to endorse or promote products derived\n *    from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nvar base64 = require('./base64');\n\n// A single base 64 digit can contain 6 bits of data. For the base 64 variable\n// length quantities we use in the source map spec, the first bit is the sign,\n// the next four bits are the actual value, and the 6th bit is the\n// continuation bit. The continuation bit tells us whether there are more\n// digits in this value following this digit.\n//\n//   Continuation\n//   |    Sign\n//   |    |\n//   V    V\n//   101011\n\nvar VLQ_BASE_SHIFT = 5;\n\n// binary: 100000\nvar VLQ_BASE = 1 << VLQ_BASE_SHIFT;\n\n// binary: 011111\nvar VLQ_BASE_MASK = VLQ_BASE - 1;\n\n// binary: 100000\nvar VLQ_CONTINUATION_BIT = VLQ_BASE;\n\n/**\n * Converts from a two-complement value to a value where the sign bit is\n * placed in the least significant bit.  For example, as decimals:\n *   1 becomes 2 (10 binary), -1 becomes 3 (11 binary)\n *   2 becomes 4 (100 binary), -2 becomes 5 (101 binary)\n */\nfunction toVLQSigned(aValue) {\n  return aValue < 0\n    ? ((-aValue) << 1) + 1\n    : (aValue << 1) + 0;\n}\n\n/**\n * Converts to a two-complement value from a value where the sign bit is\n * placed in the least significant bit.  For example, as decimals:\n *   2 (10 binary) becomes 1, 3 (11 binary) becomes -1\n *   4 (100 binary) becomes 2, 5 (101 binary) becomes -2\n */\nfunction fromVLQSigned(aValue) {\n  var isNegative = (aValue & 1) === 1;\n  var shifted = aValue >> 1;\n  return isNegative\n    ? -shifted\n    : shifted;\n}\n\n/**\n * Returns the base 64 VLQ encoded value.\n */\nexports.encode = function base64VLQ_encode(aValue) {\n  var encoded = \"\";\n  var digit;\n\n  var vlq = toVLQSigned(aValue);\n\n  do {\n    digit = vlq & VLQ_BASE_MASK;\n    vlq >>>= VLQ_BASE_SHIFT;\n    if (vlq > 0) {\n      // There are still more digits in this value, so we must make sure the\n      // continuation bit is marked.\n      digit |= VLQ_CONTINUATION_BIT;\n    }\n    encoded += base64.encode(digit);\n  } while (vlq > 0);\n\n  return encoded;\n};\n\n/**\n * Decodes the next base 64 VLQ value from the given string and returns the\n * value and the rest of the string via the out parameter.\n */\nexports.decode = function base64VLQ_decode(aStr, aIndex, aOutParam) {\n  var strLen = aStr.length;\n  var result = 0;\n  var shift = 0;\n  var continuation, digit;\n\n  do {\n    if (aIndex >= strLen) {\n      throw new Error(\"Expected more digits in base 64 VLQ value.\");\n    }\n\n    digit = base64.decode(aStr.charCodeAt(aIndex++));\n    if (digit === -1) {\n      throw new Error(\"Invalid base64 digit: \" + aStr.charAt(aIndex - 1));\n    }\n\n    continuation = !!(digit & VLQ_CONTINUATION_BIT);\n    digit &= VLQ_BASE_MASK;\n    result = result + (digit << shift);\n    shift += VLQ_BASE_SHIFT;\n  } while (continuation);\n\n  aOutParam.value = fromVLQSigned(result);\n  aOutParam.rest = aIndex;\n};\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar util = require('./util');\nvar has = Object.prototype.hasOwnProperty;\nvar hasNativeMap = typeof Map !== \"undefined\";\n\n/**\n * A data structure which is a combination of an array and a set. Adding a new\n * member is O(1), testing for membership is O(1), and finding the index of an\n * element is O(1). Removing elements from the set is not supported. Only\n * strings are supported for membership.\n */\nfunction ArraySet() {\n  this._array = [];\n  this._set = hasNativeMap ? new Map() : Object.create(null);\n}\n\n/**\n * Static method for creating ArraySet instances from an existing array.\n */\nArraySet.fromArray = function ArraySet_fromArray(aArray, aAllowDuplicates) {\n  var set = new ArraySet();\n  for (var i = 0, len = aArray.length; i < len; i++) {\n    set.add(aArray[i], aAllowDuplicates);\n  }\n  return set;\n};\n\n/**\n * Return how many unique items are in this ArraySet. If duplicates have been\n * added, than those do not count towards the size.\n *\n * @returns Number\n */\nArraySet.prototype.size = function ArraySet_size() {\n  return hasNativeMap ? this._set.size : Object.getOwnPropertyNames(this._set).length;\n};\n\n/**\n * Add the given string to this set.\n *\n * @param String aStr\n */\nArraySet.prototype.add = function ArraySet_add(aStr, aAllowDuplicates) {\n  var sStr = hasNativeMap ? aStr : util.toSetString(aStr);\n  var isDuplicate = hasNativeMap ? this.has(aStr) : has.call(this._set, sStr);\n  var idx = this._array.length;\n  if (!isDuplicate || aAllowDuplicates) {\n    this._array.push(aStr);\n  }\n  if (!isDuplicate) {\n    if (hasNativeMap) {\n      this._set.set(aStr, idx);\n    } else {\n      this._set[sStr] = idx;\n    }\n  }\n};\n\n/**\n * Is the given string a member of this set?\n *\n * @param String aStr\n */\nArraySet.prototype.has = function ArraySet_has(aStr) {\n  if (hasNativeMap) {\n    return this._set.has(aStr);\n  } else {\n    var sStr = util.toSetString(aStr);\n    return has.call(this._set, sStr);\n  }\n};\n\n/**\n * What is the index of the given string in the array?\n *\n * @param String aStr\n */\nArraySet.prototype.indexOf = function ArraySet_indexOf(aStr) {\n  if (hasNativeMap) {\n    var idx = this._set.get(aStr);\n    if (idx >= 0) {\n        return idx;\n    }\n  } else {\n    var sStr = util.toSetString(aStr);\n    if (has.call(this._set, sStr)) {\n      return this._set[sStr];\n    }\n  }\n\n  throw new Error('\"' + aStr + '\" is not in the set.');\n};\n\n/**\n * What is the element at the given index?\n *\n * @param Number aIdx\n */\nArraySet.prototype.at = function ArraySet_at(aIdx) {\n  if (aIdx >= 0 && aIdx < this._array.length) {\n    return this._array[aIdx];\n  }\n  throw new Error('No element indexed by ' + aIdx);\n};\n\n/**\n * Returns the array representation of this set (which has the proper indices\n * indicated by indexOf). Note that this is a copy of the internal array used\n * for storing the members so that no one can mess with internal state.\n */\nArraySet.prototype.toArray = function ArraySet_toArray() {\n  return this._array.slice();\n};\n\nexports.ArraySet = ArraySet;\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2014 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar util = require('./util');\n\n/**\n * Determine whether mappingB is after mappingA with respect to generated\n * position.\n */\nfunction generatedPositionAfter(mappingA, mappingB) {\n  // Optimized for most common case\n  var lineA = mappingA.generatedLine;\n  var lineB = mappingB.generatedLine;\n  var columnA = mappingA.generatedColumn;\n  var columnB = mappingB.generatedColumn;\n  return lineB > lineA || lineB == lineA && columnB >= columnA ||\n         util.compareByGeneratedPositionsInflated(mappingA, mappingB) <= 0;\n}\n\n/**\n * A data structure to provide a sorted view of accumulated mappings in a\n * performance conscious manner. It trades a neglibable overhead in general\n * case for a large speedup in case of mappings being added in order.\n */\nfunction MappingList() {\n  this._array = [];\n  this._sorted = true;\n  // Serves as infimum\n  this._last = {generatedLine: -1, generatedColumn: 0};\n}\n\n/**\n * Iterate through internal items. This method takes the same arguments that\n * `Array.prototype.forEach` takes.\n *\n * NOTE: The order of the mappings is NOT guaranteed.\n */\nMappingList.prototype.unsortedForEach =\n  function MappingList_forEach(aCallback, aThisArg) {\n    this._array.forEach(aCallback, aThisArg);\n  };\n\n/**\n * Add the given source mapping.\n *\n * @param Object aMapping\n */\nMappingList.prototype.add = function MappingList_add(aMapping) {\n  if (generatedPositionAfter(this._last, aMapping)) {\n    this._last = aMapping;\n    this._array.push(aMapping);\n  } else {\n    this._sorted = false;\n    this._array.push(aMapping);\n  }\n};\n\n/**\n * Returns the flat, sorted array of mappings. The mappings are sorted by\n * generated position.\n *\n * WARNING: This method returns internal data without copying, for\n * performance. The return value must NOT be mutated, and should be treated as\n * an immutable borrow. If you want to take ownership, you must make your own\n * copy.\n */\nMappingList.prototype.toArray = function MappingList_toArray() {\n  if (!this._sorted) {\n    this._array.sort(util.compareByGeneratedPositionsInflated);\n    this._sorted = true;\n  }\n  return this._array;\n};\n\nexports.MappingList = MappingList;\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar base64VLQ = require('./base64-vlq');\nvar util = require('./util');\nvar ArraySet = require('./array-set').ArraySet;\nvar MappingList = require('./mapping-list').MappingList;\n\n/**\n * An instance of the SourceMapGenerator represents a source map which is\n * being built incrementally. You may pass an object with the following\n * properties:\n *\n *   - file: The filename of the generated source.\n *   - sourceRoot: A root for all relative URLs in this source map.\n */\nfunction SourceMapGenerator(aArgs) {\n  if (!aArgs) {\n    aArgs = {};\n  }\n  this._file = util.getArg(aArgs, 'file', null);\n  this._sourceRoot = util.getArg(aArgs, 'sourceRoot', null);\n  this._skipValidation = util.getArg(aArgs, 'skipValidation', false);\n  this._sources = new ArraySet();\n  this._names = new ArraySet();\n  this._mappings = new MappingList();\n  this._sourcesContents = null;\n}\n\nSourceMapGenerator.prototype._version = 3;\n\n/**\n * Creates a new SourceMapGenerator based on a SourceMapConsumer\n *\n * @param aSourceMapConsumer The SourceMap.\n */\nSourceMapGenerator.fromSourceMap =\n  function SourceMapGenerator_fromSourceMap(aSourceMapConsumer) {\n    var sourceRoot = aSourceMapConsumer.sourceRoot;\n    var generator = new SourceMapGenerator({\n      file: aSourceMapConsumer.file,\n      sourceRoot: sourceRoot\n    });\n    aSourceMapConsumer.eachMapping(function (mapping) {\n      var newMapping = {\n        generated: {\n          line: mapping.generatedLine,\n          column: mapping.generatedColumn\n        }\n      };\n\n      if (mapping.source != null) {\n        newMapping.source = mapping.source;\n        if (sourceRoot != null) {\n          newMapping.source = util.relative(sourceRoot, newMapping.source);\n        }\n\n        newMapping.original = {\n          line: mapping.originalLine,\n          column: mapping.originalColumn\n        };\n\n        if (mapping.name != null) {\n          newMapping.name = mapping.name;\n        }\n      }\n\n      generator.addMapping(newMapping);\n    });\n    aSourceMapConsumer.sources.forEach(function (sourceFile) {\n      var content = aSourceMapConsumer.sourceContentFor(sourceFile);\n      if (content != null) {\n        generator.setSourceContent(sourceFile, content);\n      }\n    });\n    return generator;\n  };\n\n/**\n * Add a single mapping from original source line and column to the generated\n * source's line and column for this source map being created. The mapping\n * object should have the following properties:\n *\n *   - generated: An object with the generated line and column positions.\n *   - original: An object with the original line and column positions.\n *   - source: The original source file (relative to the sourceRoot).\n *   - name: An optional original token name for this mapping.\n */\nSourceMapGenerator.prototype.addMapping =\n  function SourceMapGenerator_addMapping(aArgs) {\n    var generated = util.getArg(aArgs, 'generated');\n    var original = util.getArg(aArgs, 'original', null);\n    var source = util.getArg(aArgs, 'source', null);\n    var name = util.getArg(aArgs, 'name', null);\n\n    if (!this._skipValidation) {\n      this._validateMapping(generated, original, source, name);\n    }\n\n    if (source != null) {\n      source = String(source);\n      if (!this._sources.has(source)) {\n        this._sources.add(source);\n      }\n    }\n\n    if (name != null) {\n      name = String(name);\n      if (!this._names.has(name)) {\n        this._names.add(name);\n      }\n    }\n\n    this._mappings.add({\n      generatedLine: generated.line,\n      generatedColumn: generated.column,\n      originalLine: original != null && original.line,\n      originalColumn: original != null && original.column,\n      source: source,\n      name: name\n    });\n  };\n\n/**\n * Set the source content for a source file.\n */\nSourceMapGenerator.prototype.setSourceContent =\n  function SourceMapGenerator_setSourceContent(aSourceFile, aSourceContent) {\n    var source = aSourceFile;\n    if (this._sourceRoot != null) {\n      source = util.relative(this._sourceRoot, source);\n    }\n\n    if (aSourceContent != null) {\n      // Add the source content to the _sourcesContents map.\n      // Create a new _sourcesContents map if the property is null.\n      if (!this._sourcesContents) {\n        this._sourcesContents = Object.create(null);\n      }\n      this._sourcesContents[util.toSetString(source)] = aSourceContent;\n    } else if (this._sourcesContents) {\n      // Remove the source file from the _sourcesContents map.\n      // If the _sourcesContents map is empty, set the property to null.\n      delete this._sourcesContents[util.toSetString(source)];\n      if (Object.keys(this._sourcesContents).length === 0) {\n        this._sourcesContents = null;\n      }\n    }\n  };\n\n/**\n * Applies the mappings of a sub-source-map for a specific source file to the\n * source map being generated. Each mapping to the supplied source file is\n * rewritten using the supplied source map. Note: The resolution for the\n * resulting mappings is the minimium of this map and the supplied map.\n *\n * @param aSourceMapConsumer The source map to be applied.\n * @param aSourceFile Optional. The filename of the source file.\n *        If omitted, SourceMapConsumer's file property will be used.\n * @param aSourceMapPath Optional. The dirname of the path to the source map\n *        to be applied. If relative, it is relative to the SourceMapConsumer.\n *        This parameter is needed when the two source maps aren't in the same\n *        directory, and the source map to be applied contains relative source\n *        paths. If so, those relative source paths need to be rewritten\n *        relative to the SourceMapGenerator.\n */\nSourceMapGenerator.prototype.applySourceMap =\n  function SourceMapGenerator_applySourceMap(aSourceMapConsumer, aSourceFile, aSourceMapPath) {\n    var sourceFile = aSourceFile;\n    // If aSourceFile is omitted, we will use the file property of the SourceMap\n    if (aSourceFile == null) {\n      if (aSourceMapConsumer.file == null) {\n        throw new Error(\n          'SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, ' +\n          'or the source map\\'s \"file\" property. Both were omitted.'\n        );\n      }\n      sourceFile = aSourceMapConsumer.file;\n    }\n    var sourceRoot = this._sourceRoot;\n    // Make \"sourceFile\" relative if an absolute Url is passed.\n    if (sourceRoot != null) {\n      sourceFile = util.relative(sourceRoot, sourceFile);\n    }\n    // Applying the SourceMap can add and remove items from the sources and\n    // the names array.\n    var newSources = new ArraySet();\n    var newNames = new ArraySet();\n\n    // Find mappings for the \"sourceFile\"\n    this._mappings.unsortedForEach(function (mapping) {\n      if (mapping.source === sourceFile && mapping.originalLine != null) {\n        // Check if it can be mapped by the source map, then update the mapping.\n        var original = aSourceMapConsumer.originalPositionFor({\n          line: mapping.originalLine,\n          column: mapping.originalColumn\n        });\n        if (original.source != null) {\n          // Copy mapping\n          mapping.source = original.source;\n          if (aSourceMapPath != null) {\n            mapping.source = util.join(aSourceMapPath, mapping.source)\n          }\n          if (sourceRoot != null) {\n            mapping.source = util.relative(sourceRoot, mapping.source);\n          }\n          mapping.originalLine = original.line;\n          mapping.originalColumn = original.column;\n          if (original.name != null) {\n            mapping.name = original.name;\n          }\n        }\n      }\n\n      var source = mapping.source;\n      if (source != null && !newSources.has(source)) {\n        newSources.add(source);\n      }\n\n      var name = mapping.name;\n      if (name != null && !newNames.has(name)) {\n        newNames.add(name);\n      }\n\n    }, this);\n    this._sources = newSources;\n    this._names = newNames;\n\n    // Copy sourcesContents of applied map.\n    aSourceMapConsumer.sources.forEach(function (sourceFile) {\n      var content = aSourceMapConsumer.sourceContentFor(sourceFile);\n      if (content != null) {\n        if (aSourceMapPath != null) {\n          sourceFile = util.join(aSourceMapPath, sourceFile);\n        }\n        if (sourceRoot != null) {\n          sourceFile = util.relative(sourceRoot, sourceFile);\n        }\n        this.setSourceContent(sourceFile, content);\n      }\n    }, this);\n  };\n\n/**\n * A mapping can have one of the three levels of data:\n *\n *   1. Just the generated position.\n *   2. The Generated position, original position, and original source.\n *   3. Generated and original position, original source, as well as a name\n *      token.\n *\n * To maintain consistency, we validate that any new mapping being added falls\n * in to one of these categories.\n */\nSourceMapGenerator.prototype._validateMapping =\n  function SourceMapGenerator_validateMapping(aGenerated, aOriginal, aSource,\n                                              aName) {\n    // When aOriginal is truthy but has empty values for .line and .column,\n    // it is most likely a programmer error. In this case we throw a very\n    // specific error message to try to guide them the right way.\n    // For example: https://github.com/Polymer/polymer-bundler/pull/519\n    if (aOriginal && typeof aOriginal.line !== 'number' && typeof aOriginal.column !== 'number') {\n        throw new Error(\n            'original.line and original.column are not numbers -- you probably meant to omit ' +\n            'the original mapping entirely and only map the generated position. If so, pass ' +\n            'null for the original mapping instead of an object with empty or null values.'\n        );\n    }\n\n    if (aGenerated && 'line' in aGenerated && 'column' in aGenerated\n        && aGenerated.line > 0 && aGenerated.column >= 0\n        && !aOriginal && !aSource && !aName) {\n      // Case 1.\n      return;\n    }\n    else if (aGenerated && 'line' in aGenerated && 'column' in aGenerated\n             && aOriginal && 'line' in aOriginal && 'column' in aOriginal\n             && aGenerated.line > 0 && aGenerated.column >= 0\n             && aOriginal.line > 0 && aOriginal.column >= 0\n             && aSource) {\n      // Cases 2 and 3.\n      return;\n    }\n    else {\n      throw new Error('Invalid mapping: ' + JSON.stringify({\n        generated: aGenerated,\n        source: aSource,\n        original: aOriginal,\n        name: aName\n      }));\n    }\n  };\n\n/**\n * Serialize the accumulated mappings in to the stream of base 64 VLQs\n * specified by the source map format.\n */\nSourceMapGenerator.prototype._serializeMappings =\n  function SourceMapGenerator_serializeMappings() {\n    var previousGeneratedColumn = 0;\n    var previousGeneratedLine = 1;\n    var previousOriginalColumn = 0;\n    var previousOriginalLine = 0;\n    var previousName = 0;\n    var previousSource = 0;\n    var result = '';\n    var next;\n    var mapping;\n    var nameIdx;\n    var sourceIdx;\n\n    var mappings = this._mappings.toArray();\n    for (var i = 0, len = mappings.length; i < len; i++) {\n      mapping = mappings[i];\n      next = ''\n\n      if (mapping.generatedLine !== previousGeneratedLine) {\n        previousGeneratedColumn = 0;\n        while (mapping.generatedLine !== previousGeneratedLine) {\n          next += ';';\n          previousGeneratedLine++;\n        }\n      }\n      else {\n        if (i > 0) {\n          if (!util.compareByGeneratedPositionsInflated(mapping, mappings[i - 1])) {\n            continue;\n          }\n          next += ',';\n        }\n      }\n\n      next += base64VLQ.encode(mapping.generatedColumn\n                                 - previousGeneratedColumn);\n      previousGeneratedColumn = mapping.generatedColumn;\n\n      if (mapping.source != null) {\n        sourceIdx = this._sources.indexOf(mapping.source);\n        next += base64VLQ.encode(sourceIdx - previousSource);\n        previousSource = sourceIdx;\n\n        // lines are stored 0-based in SourceMap spec version 3\n        next += base64VLQ.encode(mapping.originalLine - 1\n                                   - previousOriginalLine);\n        previousOriginalLine = mapping.originalLine - 1;\n\n        next += base64VLQ.encode(mapping.originalColumn\n                                   - previousOriginalColumn);\n        previousOriginalColumn = mapping.originalColumn;\n\n        if (mapping.name != null) {\n          nameIdx = this._names.indexOf(mapping.name);\n          next += base64VLQ.encode(nameIdx - previousName);\n          previousName = nameIdx;\n        }\n      }\n\n      result += next;\n    }\n\n    return result;\n  };\n\nSourceMapGenerator.prototype._generateSourcesContent =\n  function SourceMapGenerator_generateSourcesContent(aSources, aSourceRoot) {\n    return aSources.map(function (source) {\n      if (!this._sourcesContents) {\n        return null;\n      }\n      if (aSourceRoot != null) {\n        source = util.relative(aSourceRoot, source);\n      }\n      var key = util.toSetString(source);\n      return Object.prototype.hasOwnProperty.call(this._sourcesContents, key)\n        ? this._sourcesContents[key]\n        : null;\n    }, this);\n  };\n\n/**\n * Externalize the source map.\n */\nSourceMapGenerator.prototype.toJSON =\n  function SourceMapGenerator_toJSON() {\n    var map = {\n      version: this._version,\n      sources: this._sources.toArray(),\n      names: this._names.toArray(),\n      mappings: this._serializeMappings()\n    };\n    if (this._file != null) {\n      map.file = this._file;\n    }\n    if (this._sourceRoot != null) {\n      map.sourceRoot = this._sourceRoot;\n    }\n    if (this._sourcesContents) {\n      map.sourcesContent = this._generateSourcesContent(map.sources, map.sourceRoot);\n    }\n\n    return map;\n  };\n\n/**\n * Render the source map being generated to a string.\n */\nSourceMapGenerator.prototype.toString =\n  function SourceMapGenerator_toString() {\n    return JSON.stringify(this.toJSON());\n  };\n\nexports.SourceMapGenerator = SourceMapGenerator;\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\n// It turns out that some (most?) JavaScript engines don't self-host\n// `Array.prototype.sort`. This makes sense because C++ will likely remain\n// faster than JS when doing raw CPU-intensive sorting. However, when using a\n// custom comparator function, calling back and forth between the VM's C++ and\n// JIT'd JS is rather slow *and* loses JIT type information, resulting in\n// worse generated code for the comparator function than would be optimal. In\n// fact, when sorting with a comparator, these costs outweigh the benefits of\n// sorting in C++. By using our own JS-implemented Quick Sort (below), we get\n// a ~3500ms mean speed-up in `bench/bench.html`.\n\n/**\n * Swap the elements indexed by `x` and `y` in the array `ary`.\n *\n * @param {Array} ary\n *        The array.\n * @param {Number} x\n *        The index of the first item.\n * @param {Number} y\n *        The index of the second item.\n */\nfunction swap(ary, x, y) {\n  var temp = ary[x];\n  ary[x] = ary[y];\n  ary[y] = temp;\n}\n\n/**\n * Returns a random integer within the range `low .. high` inclusive.\n *\n * @param {Number} low\n *        The lower bound on the range.\n * @param {Number} high\n *        The upper bound on the range.\n */\nfunction randomIntInRange(low, high) {\n  return Math.round(low + (Math.random() * (high - low)));\n}\n\n/**\n * The Quick Sort algorithm.\n *\n * @param {Array} ary\n *        An array to sort.\n * @param {function} comparator\n *        Function to use to compare two items.\n * @param {Number} p\n *        Start index of the array\n * @param {Number} r\n *        End index of the array\n */\nfunction doQuickSort(ary, comparator, p, r) {\n  // If our lower bound is less than our upper bound, we (1) partition the\n  // array into two pieces and (2) recurse on each half. If it is not, this is\n  // the empty array and our base case.\n\n  if (p < r) {\n    // (1) Partitioning.\n    //\n    // The partitioning chooses a pivot between `p` and `r` and moves all\n    // elements that are less than or equal to the pivot to the before it, and\n    // all the elements that are greater than it after it. The effect is that\n    // once partition is done, the pivot is in the exact place it will be when\n    // the array is put in sorted order, and it will not need to be moved\n    // again. This runs in O(n) time.\n\n    // Always choose a random pivot so that an input array which is reverse\n    // sorted does not cause O(n^2) running time.\n    var pivotIndex = randomIntInRange(p, r);\n    var i = p - 1;\n\n    swap(ary, pivotIndex, r);\n    var pivot = ary[r];\n\n    // Immediately after `j` is incremented in this loop, the following hold\n    // true:\n    //\n    //   * Every element in `ary[p .. i]` is less than or equal to the pivot.\n    //\n    //   * Every element in `ary[i+1 .. j-1]` is greater than the pivot.\n    for (var j = p; j < r; j++) {\n      if (comparator(ary[j], pivot) <= 0) {\n        i += 1;\n        swap(ary, i, j);\n      }\n    }\n\n    swap(ary, i + 1, j);\n    var q = i + 1;\n\n    // (2) Recurse on each half.\n\n    doQuickSort(ary, comparator, p, q - 1);\n    doQuickSort(ary, comparator, q + 1, r);\n  }\n}\n\n/**\n * Sort the given array in-place with the given comparator function.\n *\n * @param {Array} ary\n *        An array to sort.\n * @param {function} comparator\n *        Function to use to compare two items.\n */\nexports.quickSort = function (ary, comparator) {\n  doQuickSort(ary, comparator, 0, ary.length - 1);\n};\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar util = require('./util');\nvar binarySearch = require('./binary-search');\nvar ArraySet = require('./array-set').ArraySet;\nvar base64VLQ = require('./base64-vlq');\nvar quickSort = require('./quick-sort').quickSort;\n\nfunction SourceMapConsumer(aSourceMap) {\n  var sourceMap = aSourceMap;\n  if (typeof aSourceMap === 'string') {\n    sourceMap = JSON.parse(aSourceMap.replace(/^\\)\\]\\}'/, ''));\n  }\n\n  return sourceMap.sections != null\n    ? new IndexedSourceMapConsumer(sourceMap)\n    : new BasicSourceMapConsumer(sourceMap);\n}\n\nSourceMapConsumer.fromSourceMap = function(aSourceMap) {\n  return BasicSourceMapConsumer.fromSourceMap(aSourceMap);\n}\n\n/**\n * The version of the source mapping spec that we are consuming.\n */\nSourceMapConsumer.prototype._version = 3;\n\n// `__generatedMappings` and `__originalMappings` are arrays that hold the\n// parsed mapping coordinates from the source map's \"mappings\" attribute. They\n// are lazily instantiated, accessed via the `_generatedMappings` and\n// `_originalMappings` getters respectively, and we only parse the mappings\n// and create these arrays once queried for a source location. We jump through\n// these hoops because there can be many thousands of mappings, and parsing\n// them is expensive, so we only want to do it if we must.\n//\n// Each object in the arrays is of the form:\n//\n//     {\n//       generatedLine: The line number in the generated code,\n//       generatedColumn: The column number in the generated code,\n//       source: The path to the original source file that generated this\n//               chunk of code,\n//       originalLine: The line number in the original source that\n//                     corresponds to this chunk of generated code,\n//       originalColumn: The column number in the original source that\n//                       corresponds to this chunk of generated code,\n//       name: The name of the original symbol which generated this chunk of\n//             code.\n//     }\n//\n// All properties except for `generatedLine` and `generatedColumn` can be\n// `null`.\n//\n// `_generatedMappings` is ordered by the generated positions.\n//\n// `_originalMappings` is ordered by the original positions.\n\nSourceMapConsumer.prototype.__generatedMappings = null;\nObject.defineProperty(SourceMapConsumer.prototype, '_generatedMappings', {\n  get: function () {\n    if (!this.__generatedMappings) {\n      this._parseMappings(this._mappings, this.sourceRoot);\n    }\n\n    return this.__generatedMappings;\n  }\n});\n\nSourceMapConsumer.prototype.__originalMappings = null;\nObject.defineProperty(SourceMapConsumer.prototype, '_originalMappings', {\n  get: function () {\n    if (!this.__originalMappings) {\n      this._parseMappings(this._mappings, this.sourceRoot);\n    }\n\n    return this.__originalMappings;\n  }\n});\n\nSourceMapConsumer.prototype._charIsMappingSeparator =\n  function SourceMapConsumer_charIsMappingSeparator(aStr, index) {\n    var c = aStr.charAt(index);\n    return c === \";\" || c === \",\";\n  };\n\n/**\n * Parse the mappings in a string in to a data structure which we can easily\n * query (the ordered arrays in the `this.__generatedMappings` and\n * `this.__originalMappings` properties).\n */\nSourceMapConsumer.prototype._parseMappings =\n  function SourceMapConsumer_parseMappings(aStr, aSourceRoot) {\n    throw new Error(\"Subclasses must implement _parseMappings\");\n  };\n\nSourceMapConsumer.GENERATED_ORDER = 1;\nSourceMapConsumer.ORIGINAL_ORDER = 2;\n\nSourceMapConsumer.GREATEST_LOWER_BOUND = 1;\nSourceMapConsumer.LEAST_UPPER_BOUND = 2;\n\n/**\n * Iterate over each mapping between an original source/line/column and a\n * generated line/column in this source map.\n *\n * @param Function aCallback\n *        The function that is called with each mapping.\n * @param Object aContext\n *        Optional. If specified, this object will be the value of `this` every\n *        time that `aCallback` is called.\n * @param aOrder\n *        Either `SourceMapConsumer.GENERATED_ORDER` or\n *        `SourceMapConsumer.ORIGINAL_ORDER`. Specifies whether you want to\n *        iterate over the mappings sorted by the generated file's line/column\n *        order or the original's source/line/column order, respectively. Defaults to\n *        `SourceMapConsumer.GENERATED_ORDER`.\n */\nSourceMapConsumer.prototype.eachMapping =\n  function SourceMapConsumer_eachMapping(aCallback, aContext, aOrder) {\n    var context = aContext || null;\n    var order = aOrder || SourceMapConsumer.GENERATED_ORDER;\n\n    var mappings;\n    switch (order) {\n    case SourceMapConsumer.GENERATED_ORDER:\n      mappings = this._generatedMappings;\n      break;\n    case SourceMapConsumer.ORIGINAL_ORDER:\n      mappings = this._originalMappings;\n      break;\n    default:\n      throw new Error(\"Unknown order of iteration.\");\n    }\n\n    var sourceRoot = this.sourceRoot;\n    mappings.map(function (mapping) {\n      var source = mapping.source === null ? null : this._sources.at(mapping.source);\n      if (source != null && sourceRoot != null) {\n        source = util.join(sourceRoot, source);\n      }\n      return {\n        source: source,\n        generatedLine: mapping.generatedLine,\n        generatedColumn: mapping.generatedColumn,\n        originalLine: mapping.originalLine,\n        originalColumn: mapping.originalColumn,\n        name: mapping.name === null ? null : this._names.at(mapping.name)\n      };\n    }, this).forEach(aCallback, context);\n  };\n\n/**\n * Returns all generated line and column information for the original source,\n * line, and column provided. If no column is provided, returns all mappings\n * corresponding to a either the line we are searching for or the next\n * closest line that has any mappings. Otherwise, returns all mappings\n * corresponding to the given line and either the column we are searching for\n * or the next closest column that has any offsets.\n *\n * The only argument is an object with the following properties:\n *\n *   - source: The filename of the original source.\n *   - line: The line number in the original source.\n *   - column: Optional. the column number in the original source.\n *\n * and an array of objects is returned, each with the following properties:\n *\n *   - line: The line number in the generated source, or null.\n *   - column: The column number in the generated source, or null.\n */\nSourceMapConsumer.prototype.allGeneratedPositionsFor =\n  function SourceMapConsumer_allGeneratedPositionsFor(aArgs) {\n    var line = util.getArg(aArgs, 'line');\n\n    // When there is no exact match, BasicSourceMapConsumer.prototype._findMapping\n    // returns the index of the closest mapping less than the needle. By\n    // setting needle.originalColumn to 0, we thus find the last mapping for\n    // the given line, provided such a mapping exists.\n    var needle = {\n      source: util.getArg(aArgs, 'source'),\n      originalLine: line,\n      originalColumn: util.getArg(aArgs, 'column', 0)\n    };\n\n    if (this.sourceRoot != null) {\n      needle.source = util.relative(this.sourceRoot, needle.source);\n    }\n    if (!this._sources.has(needle.source)) {\n      return [];\n    }\n    needle.source = this._sources.indexOf(needle.source);\n\n    var mappings = [];\n\n    var index = this._findMapping(needle,\n                                  this._originalMappings,\n                                  \"originalLine\",\n                                  \"originalColumn\",\n                                  util.compareByOriginalPositions,\n                                  binarySearch.LEAST_UPPER_BOUND);\n    if (index >= 0) {\n      var mapping = this._originalMappings[index];\n\n      if (aArgs.column === undefined) {\n        var originalLine = mapping.originalLine;\n\n        // Iterate until either we run out of mappings, or we run into\n        // a mapping for a different line than the one we found. Since\n        // mappings are sorted, this is guaranteed to find all mappings for\n        // the line we found.\n        while (mapping && mapping.originalLine === originalLine) {\n          mappings.push({\n            line: util.getArg(mapping, 'generatedLine', null),\n            column: util.getArg(mapping, 'generatedColumn', null),\n            lastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\n          });\n\n          mapping = this._originalMappings[++index];\n        }\n      } else {\n        var originalColumn = mapping.originalColumn;\n\n        // Iterate until either we run out of mappings, or we run into\n        // a mapping for a different line than the one we were searching for.\n        // Since mappings are sorted, this is guaranteed to find all mappings for\n        // the line we are searching for.\n        while (mapping &&\n               mapping.originalLine === line &&\n               mapping.originalColumn == originalColumn) {\n          mappings.push({\n            line: util.getArg(mapping, 'generatedLine', null),\n            column: util.getArg(mapping, 'generatedColumn', null),\n            lastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\n          });\n\n          mapping = this._originalMappings[++index];\n        }\n      }\n    }\n\n    return mappings;\n  };\n\nexports.SourceMapConsumer = SourceMapConsumer;\n\n/**\n * A BasicSourceMapConsumer instance represents a parsed source map which we can\n * query for information about the original file positions by giving it a file\n * position in the generated source.\n *\n * The only parameter is the raw source map (either as a JSON string, or\n * already parsed to an object). According to the spec, source maps have the\n * following attributes:\n *\n *   - version: Which version of the source map spec this map is following.\n *   - sources: An array of URLs to the original source files.\n *   - names: An array of identifiers which can be referrenced by individual mappings.\n *   - sourceRoot: Optional. The URL root from which all sources are relative.\n *   - sourcesContent: Optional. An array of contents of the original source files.\n *   - mappings: A string of base64 VLQs which contain the actual mappings.\n *   - file: Optional. The generated file this source map is associated with.\n *\n * Here is an example source map, taken from the source map spec[0]:\n *\n *     {\n *       version : 3,\n *       file: \"out.js\",\n *       sourceRoot : \"\",\n *       sources: [\"foo.js\", \"bar.js\"],\n *       names: [\"src\", \"maps\", \"are\", \"fun\"],\n *       mappings: \"AA,AB;;ABCDE;\"\n *     }\n *\n * [0]: https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit?pli=1#\n */\nfunction BasicSourceMapConsumer(aSourceMap) {\n  var sourceMap = aSourceMap;\n  if (typeof aSourceMap === 'string') {\n    sourceMap = JSON.parse(aSourceMap.replace(/^\\)\\]\\}'/, ''));\n  }\n\n  var version = util.getArg(sourceMap, 'version');\n  var sources = util.getArg(sourceMap, 'sources');\n  // Sass 3.3 leaves out the 'names' array, so we deviate from the spec (which\n  // requires the array) to play nice here.\n  var names = util.getArg(sourceMap, 'names', []);\n  var sourceRoot = util.getArg(sourceMap, 'sourceRoot', null);\n  var sourcesContent = util.getArg(sourceMap, 'sourcesContent', null);\n  var mappings = util.getArg(sourceMap, 'mappings');\n  var file = util.getArg(sourceMap, 'file', null);\n\n  // Once again, Sass deviates from the spec and supplies the version as a\n  // string rather than a number, so we use loose equality checking here.\n  if (version != this._version) {\n    throw new Error('Unsupported version: ' + version);\n  }\n\n  sources = sources\n    .map(String)\n    // Some source maps produce relative source paths like \"./foo.js\" instead of\n    // \"foo.js\".  Normalize these first so that future comparisons will succeed.\n    // See bugzil.la/1090768.\n    .map(util.normalize)\n    // Always ensure that absolute sources are internally stored relative to\n    // the source root, if the source root is absolute. Not doing this would\n    // be particularly problematic when the source root is a prefix of the\n    // source (valid, but why??). See github issue #199 and bugzil.la/1188982.\n    .map(function (source) {\n      return sourceRoot && util.isAbsolute(sourceRoot) && util.isAbsolute(source)\n        ? util.relative(sourceRoot, source)\n        : source;\n    });\n\n  // Pass `true` below to allow duplicate names and sources. While source maps\n  // are intended to be compressed and deduplicated, the TypeScript compiler\n  // sometimes generates source maps with duplicates in them. See Github issue\n  // #72 and bugzil.la/889492.\n  this._names = ArraySet.fromArray(names.map(String), true);\n  this._sources = ArraySet.fromArray(sources, true);\n\n  this.sourceRoot = sourceRoot;\n  this.sourcesContent = sourcesContent;\n  this._mappings = mappings;\n  this.file = file;\n}\n\nBasicSourceMapConsumer.prototype = Object.create(SourceMapConsumer.prototype);\nBasicSourceMapConsumer.prototype.consumer = SourceMapConsumer;\n\n/**\n * Create a BasicSourceMapConsumer from a SourceMapGenerator.\n *\n * @param SourceMapGenerator aSourceMap\n *        The source map that will be consumed.\n * @returns BasicSourceMapConsumer\n */\nBasicSourceMapConsumer.fromSourceMap =\n  function SourceMapConsumer_fromSourceMap(aSourceMap) {\n    var smc = Object.create(BasicSourceMapConsumer.prototype);\n\n    var names = smc._names = ArraySet.fromArray(aSourceMap._names.toArray(), true);\n    var sources = smc._sources = ArraySet.fromArray(aSourceMap._sources.toArray(), true);\n    smc.sourceRoot = aSourceMap._sourceRoot;\n    smc.sourcesContent = aSourceMap._generateSourcesContent(smc._sources.toArray(),\n                                                            smc.sourceRoot);\n    smc.file = aSourceMap._file;\n\n    // Because we are modifying the entries (by converting string sources and\n    // names to indices into the sources and names ArraySets), we have to make\n    // a copy of the entry or else bad things happen. Shared mutable state\n    // strikes again! See github issue #191.\n\n    var generatedMappings = aSourceMap._mappings.toArray().slice();\n    var destGeneratedMappings = smc.__generatedMappings = [];\n    var destOriginalMappings = smc.__originalMappings = [];\n\n    for (var i = 0, length = generatedMappings.length; i < length; i++) {\n      var srcMapping = generatedMappings[i];\n      var destMapping = new Mapping;\n      destMapping.generatedLine = srcMapping.generatedLine;\n      destMapping.generatedColumn = srcMapping.generatedColumn;\n\n      if (srcMapping.source) {\n        destMapping.source = sources.indexOf(srcMapping.source);\n        destMapping.originalLine = srcMapping.originalLine;\n        destMapping.originalColumn = srcMapping.originalColumn;\n\n        if (srcMapping.name) {\n          destMapping.name = names.indexOf(srcMapping.name);\n        }\n\n        destOriginalMappings.push(destMapping);\n      }\n\n      destGeneratedMappings.push(destMapping);\n    }\n\n    quickSort(smc.__originalMappings, util.compareByOriginalPositions);\n\n    return smc;\n  };\n\n/**\n * The version of the source mapping spec that we are consuming.\n */\nBasicSourceMapConsumer.prototype._version = 3;\n\n/**\n * The list of original sources.\n */\nObject.defineProperty(BasicSourceMapConsumer.prototype, 'sources', {\n  get: function () {\n    return this._sources.toArray().map(function (s) {\n      return this.sourceRoot != null ? util.join(this.sourceRoot, s) : s;\n    }, this);\n  }\n});\n\n/**\n * Provide the JIT with a nice shape / hidden class.\n */\nfunction Mapping() {\n  this.generatedLine = 0;\n  this.generatedColumn = 0;\n  this.source = null;\n  this.originalLine = null;\n  this.originalColumn = null;\n  this.name = null;\n}\n\n/**\n * Parse the mappings in a string in to a data structure which we can easily\n * query (the ordered arrays in the `this.__generatedMappings` and\n * `this.__originalMappings` properties).\n */\nBasicSourceMapConsumer.prototype._parseMappings =\n  function SourceMapConsumer_parseMappings(aStr, aSourceRoot) {\n    var generatedLine = 1;\n    var previousGeneratedColumn = 0;\n    var previousOriginalLine = 0;\n    var previousOriginalColumn = 0;\n    var previousSource = 0;\n    var previousName = 0;\n    var length = aStr.length;\n    var index = 0;\n    var cachedSegments = {};\n    var temp = {};\n    var originalMappings = [];\n    var generatedMappings = [];\n    var mapping, str, segment, end, value;\n\n    while (index < length) {\n      if (aStr.charAt(index) === ';') {\n        generatedLine++;\n        index++;\n        previousGeneratedColumn = 0;\n      }\n      else if (aStr.charAt(index) === ',') {\n        index++;\n      }\n      else {\n        mapping = new Mapping();\n        mapping.generatedLine = generatedLine;\n\n        // Because each offset is encoded relative to the previous one,\n        // many segments often have the same encoding. We can exploit this\n        // fact by caching the parsed variable length fields of each segment,\n        // allowing us to avoid a second parse if we encounter the same\n        // segment again.\n        for (end = index; end < length; end++) {\n          if (this._charIsMappingSeparator(aStr, end)) {\n            break;\n          }\n        }\n        str = aStr.slice(index, end);\n\n        segment = cachedSegments[str];\n        if (segment) {\n          index += str.length;\n        } else {\n          segment = [];\n          while (index < end) {\n            base64VLQ.decode(aStr, index, temp);\n            value = temp.value;\n            index = temp.rest;\n            segment.push(value);\n          }\n\n          if (segment.length === 2) {\n            throw new Error('Found a source, but no line and column');\n          }\n\n          if (segment.length === 3) {\n            throw new Error('Found a source and line, but no column');\n          }\n\n          cachedSegments[str] = segment;\n        }\n\n        // Generated column.\n        mapping.generatedColumn = previousGeneratedColumn + segment[0];\n        previousGeneratedColumn = mapping.generatedColumn;\n\n        if (segment.length > 1) {\n          // Original source.\n          mapping.source = previousSource + segment[1];\n          previousSource += segment[1];\n\n          // Original line.\n          mapping.originalLine = previousOriginalLine + segment[2];\n          previousOriginalLine = mapping.originalLine;\n          // Lines are stored 0-based\n          mapping.originalLine += 1;\n\n          // Original column.\n          mapping.originalColumn = previousOriginalColumn + segment[3];\n          previousOriginalColumn = mapping.originalColumn;\n\n          if (segment.length > 4) {\n            // Original name.\n            mapping.name = previousName + segment[4];\n            previousName += segment[4];\n          }\n        }\n\n        generatedMappings.push(mapping);\n        if (typeof mapping.originalLine === 'number') {\n          originalMappings.push(mapping);\n        }\n      }\n    }\n\n    quickSort(generatedMappings, util.compareByGeneratedPositionsDeflated);\n    this.__generatedMappings = generatedMappings;\n\n    quickSort(originalMappings, util.compareByOriginalPositions);\n    this.__originalMappings = originalMappings;\n  };\n\n/**\n * Find the mapping that best matches the hypothetical \"needle\" mapping that\n * we are searching for in the given \"haystack\" of mappings.\n */\nBasicSourceMapConsumer.prototype._findMapping =\n  function SourceMapConsumer_findMapping(aNeedle, aMappings, aLineName,\n                                         aColumnName, aComparator, aBias) {\n    // To return the position we are searching for, we must first find the\n    // mapping for the given position and then return the opposite position it\n    // points to. Because the mappings are sorted, we can use binary search to\n    // find the best mapping.\n\n    if (aNeedle[aLineName] <= 0) {\n      throw new TypeError('Line must be greater than or equal to 1, got '\n                          + aNeedle[aLineName]);\n    }\n    if (aNeedle[aColumnName] < 0) {\n      throw new TypeError('Column must be greater than or equal to 0, got '\n                          + aNeedle[aColumnName]);\n    }\n\n    return binarySearch.search(aNeedle, aMappings, aComparator, aBias);\n  };\n\n/**\n * Compute the last column for each generated mapping. The last column is\n * inclusive.\n */\nBasicSourceMapConsumer.prototype.computeColumnSpans =\n  function SourceMapConsumer_computeColumnSpans() {\n    for (var index = 0; index < this._generatedMappings.length; ++index) {\n      var mapping = this._generatedMappings[index];\n\n      // Mappings do not contain a field for the last generated columnt. We\n      // can come up with an optimistic estimate, however, by assuming that\n      // mappings are contiguous (i.e. given two consecutive mappings, the\n      // first mapping ends where the second one starts).\n      if (index + 1 < this._generatedMappings.length) {\n        var nextMapping = this._generatedMappings[index + 1];\n\n        if (mapping.generatedLine === nextMapping.generatedLine) {\n          mapping.lastGeneratedColumn = nextMapping.generatedColumn - 1;\n          continue;\n        }\n      }\n\n      // The last mapping for each line spans the entire line.\n      mapping.lastGeneratedColumn = Infinity;\n    }\n  };\n\n/**\n * Returns the original source, line, and column information for the generated\n * source's line and column positions provided. The only argument is an object\n * with the following properties:\n *\n *   - line: The line number in the generated source.\n *   - column: The column number in the generated source.\n *   - bias: Either 'SourceMapConsumer.GREATEST_LOWER_BOUND' or\n *     'SourceMapConsumer.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n *     Defaults to 'SourceMapConsumer.GREATEST_LOWER_BOUND'.\n *\n * and an object is returned with the following properties:\n *\n *   - source: The original source file, or null.\n *   - line: The line number in the original source, or null.\n *   - column: The column number in the original source, or null.\n *   - name: The original identifier, or null.\n */\nBasicSourceMapConsumer.prototype.originalPositionFor =\n  function SourceMapConsumer_originalPositionFor(aArgs) {\n    var needle = {\n      generatedLine: util.getArg(aArgs, 'line'),\n      generatedColumn: util.getArg(aArgs, 'column')\n    };\n\n    var index = this._findMapping(\n      needle,\n      this._generatedMappings,\n      \"generatedLine\",\n      \"generatedColumn\",\n      util.compareByGeneratedPositionsDeflated,\n      util.getArg(aArgs, 'bias', SourceMapConsumer.GREATEST_LOWER_BOUND)\n    );\n\n    if (index >= 0) {\n      var mapping = this._generatedMappings[index];\n\n      if (mapping.generatedLine === needle.generatedLine) {\n        var source = util.getArg(mapping, 'source', null);\n        if (source !== null) {\n          source = this._sources.at(source);\n          if (this.sourceRoot != null) {\n            source = util.join(this.sourceRoot, source);\n          }\n        }\n        var name = util.getArg(mapping, 'name', null);\n        if (name !== null) {\n          name = this._names.at(name);\n        }\n        return {\n          source: source,\n          line: util.getArg(mapping, 'originalLine', null),\n          column: util.getArg(mapping, 'originalColumn', null),\n          name: name\n        };\n      }\n    }\n\n    return {\n      source: null,\n      line: null,\n      column: null,\n      name: null\n    };\n  };\n\n/**\n * Return true if we have the source content for every source in the source\n * map, false otherwise.\n */\nBasicSourceMapConsumer.prototype.hasContentsOfAllSources =\n  function BasicSourceMapConsumer_hasContentsOfAllSources() {\n    if (!this.sourcesContent) {\n      return false;\n    }\n    return this.sourcesContent.length >= this._sources.size() &&\n      !this.sourcesContent.some(function (sc) { return sc == null; });\n  };\n\n/**\n * Returns the original source content. The only argument is the url of the\n * original source file. Returns null if no original source content is\n * available.\n */\nBasicSourceMapConsumer.prototype.sourceContentFor =\n  function SourceMapConsumer_sourceContentFor(aSource, nullOnMissing) {\n    if (!this.sourcesContent) {\n      return null;\n    }\n\n    if (this.sourceRoot != null) {\n      aSource = util.relative(this.sourceRoot, aSource);\n    }\n\n    if (this._sources.has(aSource)) {\n      return this.sourcesContent[this._sources.indexOf(aSource)];\n    }\n\n    var url;\n    if (this.sourceRoot != null\n        && (url = util.urlParse(this.sourceRoot))) {\n      // XXX: file:// URIs and absolute paths lead to unexpected behavior for\n      // many users. We can help them out when they expect file:// URIs to\n      // behave like it would if they were running a local HTTP server. See\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=885597.\n      var fileUriAbsPath = aSource.replace(/^file:\\/\\//, \"\");\n      if (url.scheme == \"file\"\n          && this._sources.has(fileUriAbsPath)) {\n        return this.sourcesContent[this._sources.indexOf(fileUriAbsPath)]\n      }\n\n      if ((!url.path || url.path == \"/\")\n          && this._sources.has(\"/\" + aSource)) {\n        return this.sourcesContent[this._sources.indexOf(\"/\" + aSource)];\n      }\n    }\n\n    // This function is used recursively from\n    // IndexedSourceMapConsumer.prototype.sourceContentFor. In that case, we\n    // don't want to throw if we can't find the source - we just want to\n    // return null, so we provide a flag to exit gracefully.\n    if (nullOnMissing) {\n      return null;\n    }\n    else {\n      throw new Error('\"' + aSource + '\" is not in the SourceMap.');\n    }\n  };\n\n/**\n * Returns the generated line and column information for the original source,\n * line, and column positions provided. The only argument is an object with\n * the following properties:\n *\n *   - source: The filename of the original source.\n *   - line: The line number in the original source.\n *   - column: The column number in the original source.\n *   - bias: Either 'SourceMapConsumer.GREATEST_LOWER_BOUND' or\n *     'SourceMapConsumer.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n *     Defaults to 'SourceMapConsumer.GREATEST_LOWER_BOUND'.\n *\n * and an object is returned with the following properties:\n *\n *   - line: The line number in the generated source, or null.\n *   - column: The column number in the generated source, or null.\n */\nBasicSourceMapConsumer.prototype.generatedPositionFor =\n  function SourceMapConsumer_generatedPositionFor(aArgs) {\n    var source = util.getArg(aArgs, 'source');\n    if (this.sourceRoot != null) {\n      source = util.relative(this.sourceRoot, source);\n    }\n    if (!this._sources.has(source)) {\n      return {\n        line: null,\n        column: null,\n        lastColumn: null\n      };\n    }\n    source = this._sources.indexOf(source);\n\n    var needle = {\n      source: source,\n      originalLine: util.getArg(aArgs, 'line'),\n      originalColumn: util.getArg(aArgs, 'column')\n    };\n\n    var index = this._findMapping(\n      needle,\n      this._originalMappings,\n      \"originalLine\",\n      \"originalColumn\",\n      util.compareByOriginalPositions,\n      util.getArg(aArgs, 'bias', SourceMapConsumer.GREATEST_LOWER_BOUND)\n    );\n\n    if (index >= 0) {\n      var mapping = this._originalMappings[index];\n\n      if (mapping.source === needle.source) {\n        return {\n          line: util.getArg(mapping, 'generatedLine', null),\n          column: util.getArg(mapping, 'generatedColumn', null),\n          lastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\n        };\n      }\n    }\n\n    return {\n      line: null,\n      column: null,\n      lastColumn: null\n    };\n  };\n\nexports.BasicSourceMapConsumer = BasicSourceMapConsumer;\n\n/**\n * An IndexedSourceMapConsumer instance represents a parsed source map which\n * we can query for information. It differs from BasicSourceMapConsumer in\n * that it takes \"indexed\" source maps (i.e. ones with a \"sections\" field) as\n * input.\n *\n * The only parameter is a raw source map (either as a JSON string, or already\n * parsed to an object). According to the spec for indexed source maps, they\n * have the following attributes:\n *\n *   - version: Which version of the source map spec this map is following.\n *   - file: Optional. The generated file this source map is associated with.\n *   - sections: A list of section definitions.\n *\n * Each value under the \"sections\" field has two fields:\n *   - offset: The offset into the original specified at which this section\n *       begins to apply, defined as an object with a \"line\" and \"column\"\n *       field.\n *   - map: A source map definition. This source map could also be indexed,\n *       but doesn't have to be.\n *\n * Instead of the \"map\" field, it's also possible to have a \"url\" field\n * specifying a URL to retrieve a source map from, but that's currently\n * unsupported.\n *\n * Here's an example source map, taken from the source map spec[0], but\n * modified to omit a section which uses the \"url\" field.\n *\n *  {\n *    version : 3,\n *    file: \"app.js\",\n *    sections: [{\n *      offset: {line:100, column:10},\n *      map: {\n *        version : 3,\n *        file: \"section.js\",\n *        sources: [\"foo.js\", \"bar.js\"],\n *        names: [\"src\", \"maps\", \"are\", \"fun\"],\n *        mappings: \"AAAA,E;;ABCDE;\"\n *      }\n *    }],\n *  }\n *\n * [0]: https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit#heading=h.535es3xeprgt\n */\nfunction IndexedSourceMapConsumer(aSourceMap) {\n  var sourceMap = aSourceMap;\n  if (typeof aSourceMap === 'string') {\n    sourceMap = JSON.parse(aSourceMap.replace(/^\\)\\]\\}'/, ''));\n  }\n\n  var version = util.getArg(sourceMap, 'version');\n  var sections = util.getArg(sourceMap, 'sections');\n\n  if (version != this._version) {\n    throw new Error('Unsupported version: ' + version);\n  }\n\n  this._sources = new ArraySet();\n  this._names = new ArraySet();\n\n  var lastOffset = {\n    line: -1,\n    column: 0\n  };\n  this._sections = sections.map(function (s) {\n    if (s.url) {\n      // The url field will require support for asynchronicity.\n      // See https://github.com/mozilla/source-map/issues/16\n      throw new Error('Support for url field in sections not implemented.');\n    }\n    var offset = util.getArg(s, 'offset');\n    var offsetLine = util.getArg(offset, 'line');\n    var offsetColumn = util.getArg(offset, 'column');\n\n    if (offsetLine < lastOffset.line ||\n        (offsetLine === lastOffset.line && offsetColumn < lastOffset.column)) {\n      throw new Error('Section offsets must be ordered and non-overlapping.');\n    }\n    lastOffset = offset;\n\n    return {\n      generatedOffset: {\n        // The offset fields are 0-based, but we use 1-based indices when\n        // encoding/decoding from VLQ.\n        generatedLine: offsetLine + 1,\n        generatedColumn: offsetColumn + 1\n      },\n      consumer: new SourceMapConsumer(util.getArg(s, 'map'))\n    }\n  });\n}\n\nIndexedSourceMapConsumer.prototype = Object.create(SourceMapConsumer.prototype);\nIndexedSourceMapConsumer.prototype.constructor = SourceMapConsumer;\n\n/**\n * The version of the source mapping spec that we are consuming.\n */\nIndexedSourceMapConsumer.prototype._version = 3;\n\n/**\n * The list of original sources.\n */\nObject.defineProperty(IndexedSourceMapConsumer.prototype, 'sources', {\n  get: function () {\n    var sources = [];\n    for (var i = 0; i < this._sections.length; i++) {\n      for (var j = 0; j < this._sections[i].consumer.sources.length; j++) {\n        sources.push(this._sections[i].consumer.sources[j]);\n      }\n    }\n    return sources;\n  }\n});\n\n/**\n * Returns the original source, line, and column information for the generated\n * source's line and column positions provided. The only argument is an object\n * with the following properties:\n *\n *   - line: The line number in the generated source.\n *   - column: The column number in the generated source.\n *\n * and an object is returned with the following properties:\n *\n *   - source: The original source file, or null.\n *   - line: The line number in the original source, or null.\n *   - column: The column number in the original source, or null.\n *   - name: The original identifier, or null.\n */\nIndexedSourceMapConsumer.prototype.originalPositionFor =\n  function IndexedSourceMapConsumer_originalPositionFor(aArgs) {\n    var needle = {\n      generatedLine: util.getArg(aArgs, 'line'),\n      generatedColumn: util.getArg(aArgs, 'column')\n    };\n\n    // Find the section containing the generated position we're trying to map\n    // to an original position.\n    var sectionIndex = binarySearch.search(needle, this._sections,\n      function(needle, section) {\n        var cmp = needle.generatedLine - section.generatedOffset.generatedLine;\n        if (cmp) {\n          return cmp;\n        }\n\n        return (needle.generatedColumn -\n                section.generatedOffset.generatedColumn);\n      });\n    var section = this._sections[sectionIndex];\n\n    if (!section) {\n      return {\n        source: null,\n        line: null,\n        column: null,\n        name: null\n      };\n    }\n\n    return section.consumer.originalPositionFor({\n      line: needle.generatedLine -\n        (section.generatedOffset.generatedLine - 1),\n      column: needle.generatedColumn -\n        (section.generatedOffset.generatedLine === needle.generatedLine\n         ? section.generatedOffset.generatedColumn - 1\n         : 0),\n      bias: aArgs.bias\n    });\n  };\n\n/**\n * Return true if we have the source content for every source in the source\n * map, false otherwise.\n */\nIndexedSourceMapConsumer.prototype.hasContentsOfAllSources =\n  function IndexedSourceMapConsumer_hasContentsOfAllSources() {\n    return this._sections.every(function (s) {\n      return s.consumer.hasContentsOfAllSources();\n    });\n  };\n\n/**\n * Returns the original source content. The only argument is the url of the\n * original source file. Returns null if no original source content is\n * available.\n */\nIndexedSourceMapConsumer.prototype.sourceContentFor =\n  function IndexedSourceMapConsumer_sourceContentFor(aSource, nullOnMissing) {\n    for (var i = 0; i < this._sections.length; i++) {\n      var section = this._sections[i];\n\n      var content = section.consumer.sourceContentFor(aSource, true);\n      if (content) {\n        return content;\n      }\n    }\n    if (nullOnMissing) {\n      return null;\n    }\n    else {\n      throw new Error('\"' + aSource + '\" is not in the SourceMap.');\n    }\n  };\n\n/**\n * Returns the generated line and column information for the original source,\n * line, and column positions provided. The only argument is an object with\n * the following properties:\n *\n *   - source: The filename of the original source.\n *   - line: The line number in the original source.\n *   - column: The column number in the original source.\n *\n * and an object is returned with the following properties:\n *\n *   - line: The line number in the generated source, or null.\n *   - column: The column number in the generated source, or null.\n */\nIndexedSourceMapConsumer.prototype.generatedPositionFor =\n  function IndexedSourceMapConsumer_generatedPositionFor(aArgs) {\n    for (var i = 0; i < this._sections.length; i++) {\n      var section = this._sections[i];\n\n      // Only consider this section if the requested source is in the list of\n      // sources of the consumer.\n      if (section.consumer.sources.indexOf(util.getArg(aArgs, 'source')) === -1) {\n        continue;\n      }\n      var generatedPosition = section.consumer.generatedPositionFor(aArgs);\n      if (generatedPosition) {\n        var ret = {\n          line: generatedPosition.line +\n            (section.generatedOffset.generatedLine - 1),\n          column: generatedPosition.column +\n            (section.generatedOffset.generatedLine === generatedPosition.line\n             ? section.generatedOffset.generatedColumn - 1\n             : 0)\n        };\n        return ret;\n      }\n    }\n\n    return {\n      line: null,\n      column: null\n    };\n  };\n\n/**\n * Parse the mappings in a string in to a data structure which we can easily\n * query (the ordered arrays in the `this.__generatedMappings` and\n * `this.__originalMappings` properties).\n */\nIndexedSourceMapConsumer.prototype._parseMappings =\n  function IndexedSourceMapConsumer_parseMappings(aStr, aSourceRoot) {\n    this.__generatedMappings = [];\n    this.__originalMappings = [];\n    for (var i = 0; i < this._sections.length; i++) {\n      var section = this._sections[i];\n      var sectionMappings = section.consumer._generatedMappings;\n      for (var j = 0; j < sectionMappings.length; j++) {\n        var mapping = sectionMappings[j];\n\n        var source = section.consumer._sources.at(mapping.source);\n        if (section.consumer.sourceRoot !== null) {\n          source = util.join(section.consumer.sourceRoot, source);\n        }\n        this._sources.add(source);\n        source = this._sources.indexOf(source);\n\n        var name = section.consumer._names.at(mapping.name);\n        this._names.add(name);\n        name = this._names.indexOf(name);\n\n        // The mappings coming from the consumer for the section have\n        // generated positions relative to the start of the section, so we\n        // need to offset them to be relative to the start of the concatenated\n        // generated file.\n        var adjustedMapping = {\n          source: source,\n          generatedLine: mapping.generatedLine +\n            (section.generatedOffset.generatedLine - 1),\n          generatedColumn: mapping.generatedColumn +\n            (section.generatedOffset.generatedLine === mapping.generatedLine\n            ? section.generatedOffset.generatedColumn - 1\n            : 0),\n          originalLine: mapping.originalLine,\n          originalColumn: mapping.originalColumn,\n          name: name\n        };\n\n        this.__generatedMappings.push(adjustedMapping);\n        if (typeof adjustedMapping.originalLine === 'number') {\n          this.__originalMappings.push(adjustedMapping);\n        }\n      }\n    }\n\n    quickSort(this.__generatedMappings, util.compareByGeneratedPositionsDeflated);\n    quickSort(this.__originalMappings, util.compareByOriginalPositions);\n  };\n\nexports.IndexedSourceMapConsumer = IndexedSourceMapConsumer;\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar SourceMapGenerator = require('./source-map-generator').SourceMapGenerator;\nvar util = require('./util');\n\n// Matches a Windows-style `\\r\\n` newline or a `\\n` newline used by all other\n// operating systems these days (capturing the result).\nvar REGEX_NEWLINE = /(\\r?\\n)/;\n\n// Newline character code for charCodeAt() comparisons\nvar NEWLINE_CODE = 10;\n\n// Private symbol for identifying `SourceNode`s when multiple versions of\n// the source-map library are loaded. This MUST NOT CHANGE across\n// versions!\nvar isSourceNode = \"$$$isSourceNode$$$\";\n\n/**\n * SourceNodes provide a way to abstract over interpolating/concatenating\n * snippets of generated JavaScript source code while maintaining the line and\n * column information associated with the original source code.\n *\n * @param aLine The original line number.\n * @param aColumn The original column number.\n * @param aSource The original source's filename.\n * @param aChunks Optional. An array of strings which are snippets of\n *        generated JS, or other SourceNodes.\n * @param aName The original identifier.\n */\nfunction SourceNode(aLine, aColumn, aSource, aChunks, aName) {\n  this.children = [];\n  this.sourceContents = {};\n  this.line = aLine == null ? null : aLine;\n  this.column = aColumn == null ? null : aColumn;\n  this.source = aSource == null ? null : aSource;\n  this.name = aName == null ? null : aName;\n  this[isSourceNode] = true;\n  if (aChunks != null) this.add(aChunks);\n}\n\n/**\n * Creates a SourceNode from generated code and a SourceMapConsumer.\n *\n * @param aGeneratedCode The generated code\n * @param aSourceMapConsumer The SourceMap for the generated code\n * @param aRelativePath Optional. The path that relative sources in the\n *        SourceMapConsumer should be relative to.\n */\nSourceNode.fromStringWithSourceMap =\n  function SourceNode_fromStringWithSourceMap(aGeneratedCode, aSourceMapConsumer, aRelativePath) {\n    // The SourceNode we want to fill with the generated code\n    // and the SourceMap\n    var node = new SourceNode();\n\n    // All even indices of this array are one line of the generated code,\n    // while all odd indices are the newlines between two adjacent lines\n    // (since `REGEX_NEWLINE` captures its match).\n    // Processed fragments are accessed by calling `shiftNextLine`.\n    var remainingLines = aGeneratedCode.split(REGEX_NEWLINE);\n    var remainingLinesIndex = 0;\n    var shiftNextLine = function() {\n      var lineContents = getNextLine();\n      // The last line of a file might not have a newline.\n      var newLine = getNextLine() || \"\";\n      return lineContents + newLine;\n\n      function getNextLine() {\n        return remainingLinesIndex < remainingLines.length ?\n            remainingLines[remainingLinesIndex++] : undefined;\n      }\n    };\n\n    // We need to remember the position of \"remainingLines\"\n    var lastGeneratedLine = 1, lastGeneratedColumn = 0;\n\n    // The generate SourceNodes we need a code range.\n    // To extract it current and last mapping is used.\n    // Here we store the last mapping.\n    var lastMapping = null;\n\n    aSourceMapConsumer.eachMapping(function (mapping) {\n      if (lastMapping !== null) {\n        // We add the code from \"lastMapping\" to \"mapping\":\n        // First check if there is a new line in between.\n        if (lastGeneratedLine < mapping.generatedLine) {\n          // Associate first line with \"lastMapping\"\n          addMappingWithCode(lastMapping, shiftNextLine());\n          lastGeneratedLine++;\n          lastGeneratedColumn = 0;\n          // The remaining code is added without mapping\n        } else {\n          // There is no new line in between.\n          // Associate the code between \"lastGeneratedColumn\" and\n          // \"mapping.generatedColumn\" with \"lastMapping\"\n          var nextLine = remainingLines[remainingLinesIndex];\n          var code = nextLine.substr(0, mapping.generatedColumn -\n                                        lastGeneratedColumn);\n          remainingLines[remainingLinesIndex] = nextLine.substr(mapping.generatedColumn -\n                                              lastGeneratedColumn);\n          lastGeneratedColumn = mapping.generatedColumn;\n          addMappingWithCode(lastMapping, code);\n          // No more remaining code, continue\n          lastMapping = mapping;\n          return;\n        }\n      }\n      // We add the generated code until the first mapping\n      // to the SourceNode without any mapping.\n      // Each line is added as separate string.\n      while (lastGeneratedLine < mapping.generatedLine) {\n        node.add(shiftNextLine());\n        lastGeneratedLine++;\n      }\n      if (lastGeneratedColumn < mapping.generatedColumn) {\n        var nextLine = remainingLines[remainingLinesIndex];\n        node.add(nextLine.substr(0, mapping.generatedColumn));\n        remainingLines[remainingLinesIndex] = nextLine.substr(mapping.generatedColumn);\n        lastGeneratedColumn = mapping.generatedColumn;\n      }\n      lastMapping = mapping;\n    }, this);\n    // We have processed all mappings.\n    if (remainingLinesIndex < remainingLines.length) {\n      if (lastMapping) {\n        // Associate the remaining code in the current line with \"lastMapping\"\n        addMappingWithCode(lastMapping, shiftNextLine());\n      }\n      // and add the remaining lines without any mapping\n      node.add(remainingLines.splice(remainingLinesIndex).join(\"\"));\n    }\n\n    // Copy sourcesContent into SourceNode\n    aSourceMapConsumer.sources.forEach(function (sourceFile) {\n      var content = aSourceMapConsumer.sourceContentFor(sourceFile);\n      if (content != null) {\n        if (aRelativePath != null) {\n          sourceFile = util.join(aRelativePath, sourceFile);\n        }\n        node.setSourceContent(sourceFile, content);\n      }\n    });\n\n    return node;\n\n    function addMappingWithCode(mapping, code) {\n      if (mapping === null || mapping.source === undefined) {\n        node.add(code);\n      } else {\n        var source = aRelativePath\n          ? util.join(aRelativePath, mapping.source)\n          : mapping.source;\n        node.add(new SourceNode(mapping.originalLine,\n                                mapping.originalColumn,\n                                source,\n                                code,\n                                mapping.name));\n      }\n    }\n  };\n\n/**\n * Add a chunk of generated JS to this source node.\n *\n * @param aChunk A string snippet of generated JS code, another instance of\n *        SourceNode, or an array where each member is one of those things.\n */\nSourceNode.prototype.add = function SourceNode_add(aChunk) {\n  if (Array.isArray(aChunk)) {\n    aChunk.forEach(function (chunk) {\n      this.add(chunk);\n    }, this);\n  }\n  else if (aChunk[isSourceNode] || typeof aChunk === \"string\") {\n    if (aChunk) {\n      this.children.push(aChunk);\n    }\n  }\n  else {\n    throw new TypeError(\n      \"Expected a SourceNode, string, or an array of SourceNodes and strings. Got \" + aChunk\n    );\n  }\n  return this;\n};\n\n/**\n * Add a chunk of generated JS to the beginning of this source node.\n *\n * @param aChunk A string snippet of generated JS code, another instance of\n *        SourceNode, or an array where each member is one of those things.\n */\nSourceNode.prototype.prepend = function SourceNode_prepend(aChunk) {\n  if (Array.isArray(aChunk)) {\n    for (var i = aChunk.length-1; i >= 0; i--) {\n      this.prepend(aChunk[i]);\n    }\n  }\n  else if (aChunk[isSourceNode] || typeof aChunk === \"string\") {\n    this.children.unshift(aChunk);\n  }\n  else {\n    throw new TypeError(\n      \"Expected a SourceNode, string, or an array of SourceNodes and strings. Got \" + aChunk\n    );\n  }\n  return this;\n};\n\n/**\n * Walk over the tree of JS snippets in this node and its children. The\n * walking function is called once for each snippet of JS and is passed that\n * snippet and the its original associated source's line/column location.\n *\n * @param aFn The traversal function.\n */\nSourceNode.prototype.walk = function SourceNode_walk(aFn) {\n  var chunk;\n  for (var i = 0, len = this.children.length; i < len; i++) {\n    chunk = this.children[i];\n    if (chunk[isSourceNode]) {\n      chunk.walk(aFn);\n    }\n    else {\n      if (chunk !== '') {\n        aFn(chunk, { source: this.source,\n                     line: this.line,\n                     column: this.column,\n                     name: this.name });\n      }\n    }\n  }\n};\n\n/**\n * Like `String.prototype.join` except for SourceNodes. Inserts `aStr` between\n * each of `this.children`.\n *\n * @param aSep The separator.\n */\nSourceNode.prototype.join = function SourceNode_join(aSep) {\n  var newChildren;\n  var i;\n  var len = this.children.length;\n  if (len > 0) {\n    newChildren = [];\n    for (i = 0; i < len-1; i++) {\n      newChildren.push(this.children[i]);\n      newChildren.push(aSep);\n    }\n    newChildren.push(this.children[i]);\n    this.children = newChildren;\n  }\n  return this;\n};\n\n/**\n * Call String.prototype.replace on the very right-most source snippet. Useful\n * for trimming whitespace from the end of a source node, etc.\n *\n * @param aPattern The pattern to replace.\n * @param aReplacement The thing to replace the pattern with.\n */\nSourceNode.prototype.replaceRight = function SourceNode_replaceRight(aPattern, aReplacement) {\n  var lastChild = this.children[this.children.length - 1];\n  if (lastChild[isSourceNode]) {\n    lastChild.replaceRight(aPattern, aReplacement);\n  }\n  else if (typeof lastChild === 'string') {\n    this.children[this.children.length - 1] = lastChild.replace(aPattern, aReplacement);\n  }\n  else {\n    this.children.push(''.replace(aPattern, aReplacement));\n  }\n  return this;\n};\n\n/**\n * Set the source content for a source file. This will be added to the SourceMapGenerator\n * in the sourcesContent field.\n *\n * @param aSourceFile The filename of the source file\n * @param aSourceContent The content of the source file\n */\nSourceNode.prototype.setSourceContent =\n  function SourceNode_setSourceContent(aSourceFile, aSourceContent) {\n    this.sourceContents[util.toSetString(aSourceFile)] = aSourceContent;\n  };\n\n/**\n * Walk over the tree of SourceNodes. The walking function is called for each\n * source file content and is passed the filename and source content.\n *\n * @param aFn The traversal function.\n */\nSourceNode.prototype.walkSourceContents =\n  function SourceNode_walkSourceContents(aFn) {\n    for (var i = 0, len = this.children.length; i < len; i++) {\n      if (this.children[i][isSourceNode]) {\n        this.children[i].walkSourceContents(aFn);\n      }\n    }\n\n    var sources = Object.keys(this.sourceContents);\n    for (var i = 0, len = sources.length; i < len; i++) {\n      aFn(util.fromSetString(sources[i]), this.sourceContents[sources[i]]);\n    }\n  };\n\n/**\n * Return the string representation of this source node. Walks over the tree\n * and concatenates all the various snippets together to one string.\n */\nSourceNode.prototype.toString = function SourceNode_toString() {\n  var str = \"\";\n  this.walk(function (chunk) {\n    str += chunk;\n  });\n  return str;\n};\n\n/**\n * Returns the string representation of this source node along with a source\n * map.\n */\nSourceNode.prototype.toStringWithSourceMap = function SourceNode_toStringWithSourceMap(aArgs) {\n  var generated = {\n    code: \"\",\n    line: 1,\n    column: 0\n  };\n  var map = new SourceMapGenerator(aArgs);\n  var sourceMappingActive = false;\n  var lastOriginalSource = null;\n  var lastOriginalLine = null;\n  var lastOriginalColumn = null;\n  var lastOriginalName = null;\n  this.walk(function (chunk, original) {\n    generated.code += chunk;\n    if (original.source !== null\n        && original.line !== null\n        && original.column !== null) {\n      if(lastOriginalSource !== original.source\n         || lastOriginalLine !== original.line\n         || lastOriginalColumn !== original.column\n         || lastOriginalName !== original.name) {\n        map.addMapping({\n          source: original.source,\n          original: {\n            line: original.line,\n            column: original.column\n          },\n          generated: {\n            line: generated.line,\n            column: generated.column\n          },\n          name: original.name\n        });\n      }\n      lastOriginalSource = original.source;\n      lastOriginalLine = original.line;\n      lastOriginalColumn = original.column;\n      lastOriginalName = original.name;\n      sourceMappingActive = true;\n    } else if (sourceMappingActive) {\n      map.addMapping({\n        generated: {\n          line: generated.line,\n          column: generated.column\n        }\n      });\n      lastOriginalSource = null;\n      sourceMappingActive = false;\n    }\n    for (var idx = 0, length = chunk.length; idx < length; idx++) {\n      if (chunk.charCodeAt(idx) === NEWLINE_CODE) {\n        generated.line++;\n        generated.column = 0;\n        // Mappings end at eol\n        if (idx + 1 === length) {\n          lastOriginalSource = null;\n          sourceMappingActive = false;\n        } else if (sourceMappingActive) {\n          map.addMapping({\n            source: original.source,\n            original: {\n              line: original.line,\n              column: original.column\n            },\n            generated: {\n              line: generated.line,\n              column: generated.column\n            },\n            name: original.name\n          });\n        }\n      } else {\n        generated.column++;\n      }\n    }\n  });\n  this.walkSourceContents(function (sourceFile, sourceContent) {\n    map.setSourceContent(sourceFile, sourceContent);\n  });\n\n  return { code: generated.code, map: map };\n};\n\nexports.SourceNode = SourceNode;\n","import './styles.js'\nimport m from 'mithril'\n\nimport app from './app'\n\nimport Model, { defaults } from './model'\nimport Actions from './actions'\nimport message from './message'\n\nlet resizeRegistrered = false\nwindow.m = m // wright hmr\nfunction Flems(dom, state = {}, runtimeUrl) {\n  const model = Model(dom, state, runtimeUrl)\n      , actions = Actions(model)\n\n  if (!resizeRegistrered) {\n    window.addEventListener('resize', () => m.redraw())\n    resizeRegistrered = true\n  }\n\n  message.listen(model, actions)\n\n  m.mount(dom, {\n    view: () => app(model, actions)\n  })\n\n  return {\n    focus: model.focus,\n    reload: () => actions.refresh({ force: true }),\n    onchange: fn => actions.onchange = fn,\n    set: actions.setState\n  }\n}\n\nFlems.defaults = defaults\nFlems.version = process.env.FLEMS_VERSION // eslint-disable-line\n\nexport default Flems\n\n","export default {\n  ai : 'alignItems',\n  b  : 'bottom',\n  bc : 'backgroundColor',\n  br : 'borderRadius',\n  bs : 'boxShadow',\n  c  : 'color',\n  d  : 'display',\n  f  : 'float',\n  fd : 'flexDirection',\n  ff : 'fontFamily',\n  fs : 'fontSize',\n  h  : 'height',\n  jc : 'justifyContent',\n  l  : 'left',\n  m  : 'margin',\n  mb : 'marginBottom',\n  ml : 'marginLeft',\n  mr : 'marginRight',\n  mt : 'marginTop',\n  o  : 'opacity',\n  p  : 'padding',\n  pb : 'paddingBottom',\n  pl : 'paddingLeft',\n  pr : 'paddingRight',\n  pt : 'paddingTop',\n  r  : 'right',\n  t  : 'top',\n  ta : 'textAlign',\n  td : 'textDecoration',\n  tt : 'textTransform',\n  w  : 'width'\n}\n","import { selectorBlock } from './utils'\nimport { insert, classPrefix } from './sheet'\n\nlet count = 0\nconst keyframeCache = {}\n\nexport default function(props) {\n  const content = Object.keys(props).map(key =>\n    selectorBlock(key, props[key].style || props[key])\n  ).join('')\n\n  if (content in keyframeCache)\n    return keyframeCache[content]\n\n  const name = classPrefix + ++count\n  keyframeCache[content] = name\n  insert('@keyframes ' + name + '{' + content + '}')\n\n  return name\n}\n","export default [\n  'active',\n  'any',\n  'checked',\n  'default',\n  'disabled',\n  'empty',\n  'enabled',\n  'first',\n  'first-child',\n  'first-of-type',\n  'fullscreen',\n  'focus',\n  'hover',\n  'indeterminate',\n  'in-range',\n  'invalid',\n  'last-child',\n  'last-of-type',\n  'left',\n  'link',\n  'only-child',\n  'only-of-type',\n  'optional',\n  'out-of-range',\n  'read-only',\n  'read-write',\n  'required',\n  'right',\n  'root',\n  'scope',\n  'target',\n  'valid',\n  'visited',\n\n  // With value\n  'dir',\n  'lang',\n  'not',\n  'nth-child',\n  'nth-last-child',\n  'nth-last-of-type',\n  'nth-of-type',\n\n  // Elements\n  'after',\n  'before',\n  'first-letter',\n  'first-line',\n  'selection',\n  'backdrop',\n  'placeholder',\n  'marker',\n  'spelling-error',\n  'grammar-error'\n]\n","import b from 'bss'\n\nb.setDebug(true)\nb.helper({\n  rel: b.position('relative'),\n  abs: b.position('absolute'),\n  resize: v => ({ resize: v })\n})\n\nb.css({\n  '.flems input, .flems textarea': b.fontFamily('inherit'),\n  '.flems': b.boxSizing('border-box'),\n  '.flems *, .flems *:before, .flems *:after': b.boxSizing('inherit'),\n  '.flems svg': b.fill('currentColor').va('middle'),\n  '.flems svg:not(:root)': b.overflow('hidden')\n})\n\nconst sheet = document.createElement('style')\nsheet.textContent = codemirrorStyles // eslint-disable-line\ndocument.head.appendChild(sheet, sheet)\n",";(function() {\n\"use strict\"\nfunction Vnode(tag, key, attrs0, children, text, dom) {\n\treturn {tag: tag, key: key, attrs: attrs0, children: children, text: text, dom: dom, domSize: undefined, state: undefined, _state: undefined, events: undefined, instance: undefined, skip: false}\n}\nVnode.normalize = function(node) {\n\tif (Array.isArray(node)) return Vnode(\"[\", undefined, undefined, Vnode.normalizeChildren(node), undefined, undefined)\n\tif (node != null && typeof node !== \"object\") return Vnode(\"#\", undefined, undefined, node === false ? \"\" : node, undefined, undefined)\n\treturn node\n}\nVnode.normalizeChildren = function normalizeChildren(children) {\n\tfor (var i = 0; i < children.length; i++) {\n\t\tchildren[i] = Vnode.normalize(children[i])\n\t}\n\treturn children\n}\nvar selectorParser = /(?:(^|#|\\.)([^#\\.\\[\\]]+))|(\\[(.+?)(?:\\s*=\\s*(\"|'|)((?:\\\\[\"'\\]]|.)*?)\\5)?\\])/g\nvar selectorCache = {}\nvar hasOwn = {}.hasOwnProperty\nfunction compileSelector(selector) {\n\tvar match, tag = \"div\", classes = [], attrs = {}\n\twhile (match = selectorParser.exec(selector)) {\n\t\tvar type = match[1], value = match[2]\n\t\tif (type === \"\" && value !== \"\") tag = value\n\t\telse if (type === \"#\") attrs.id = value\n\t\telse if (type === \".\") classes.push(value)\n\t\telse if (match[3][0] === \"[\") {\n\t\t\tvar attrValue = match[6]\n\t\t\tif (attrValue) attrValue = attrValue.replace(/\\\\([\"'])/g, \"$1\").replace(/\\\\\\\\/g, \"\\\\\")\n\t\t\tif (match[4] === \"class\") classes.push(attrValue)\n\t\t\telse attrs[match[4]] = attrValue === \"\" ? attrValue : attrValue || true\n\t\t}\n\t}\n\tif (classes.length > 0) attrs.className = classes.join(\" \")\n\treturn selectorCache[selector] = {tag: tag, attrs: attrs}\n}\nfunction execSelector(state, attrs, children) {\n\tvar hasAttrs = false, childList, text\n\tvar className = attrs.className || attrs.class\n\tfor (var key in state.attrs) {\n\t\tif (hasOwn.call(state.attrs, key)) {\n\t\t\tattrs[key] = state.attrs[key]\n\t\t}\n\t}\n\tif (className !== undefined) {\n\t\tif (attrs.class !== undefined) {\n\t\t\tattrs.class = undefined\n\t\t\tattrs.className = className\n\t\t}\n\t\tif (state.attrs.className != null) {\n\t\t\tattrs.className = state.attrs.className + \" \" + className\n\t\t}\n\t}\n\tfor (var key in attrs) {\n\t\tif (hasOwn.call(attrs, key) && key !== \"key\") {\n\t\t\thasAttrs = true\n\t\t\tbreak\n\t\t}\n\t}\n\tif (Array.isArray(children) && children.length === 1 && children[0] != null && children[0].tag === \"#\") {\n\t\ttext = children[0].children\n\t} else {\n\t\tchildList = children\n\t}\n\treturn Vnode(state.tag, attrs.key, hasAttrs ? attrs : undefined, childList, text)\n}\nfunction hyperscript(selector) {\n\t// Because sloppy mode sucks\n\tvar attrs = arguments[1], start = 2, children\n\tif (selector == null || typeof selector !== \"string\" && typeof selector !== \"function\" && typeof selector.view !== \"function\") {\n\t\tthrow Error(\"The selector must be either a string or a component.\");\n\t}\n\tif (typeof selector === \"string\") {\n\t\tvar cached = selectorCache[selector] || compileSelector(selector)\n\t}\n\tif (attrs == null) {\n\t\tattrs = {}\n\t} else if (typeof attrs !== \"object\" || attrs.tag != null || Array.isArray(attrs)) {\n\t\tattrs = {}\n\t\tstart = 1\n\t}\n\tif (arguments.length === start + 1) {\n\t\tchildren = arguments[start]\n\t\tif (!Array.isArray(children)) children = [children]\n\t} else {\n\t\tchildren = []\n\t\twhile (start < arguments.length) children.push(arguments[start++])\n\t}\n\tvar normalized = Vnode.normalizeChildren(children)\n\tif (typeof selector === \"string\") {\n\t\treturn execSelector(cached, attrs, normalized)\n\t} else {\n\t\treturn Vnode(selector, attrs.key, attrs, normalized)\n\t}\n}\nhyperscript.trust = function(html) {\n\tif (html == null) html = \"\"\n\treturn Vnode(\"<\", undefined, undefined, html, undefined, undefined)\n}\nhyperscript.fragment = function(attrs1, children) {\n\treturn Vnode(\"[\", attrs1.key, attrs1, Vnode.normalizeChildren(children), undefined, undefined)\n}\nvar m = hyperscript\n/** @constructor */\nvar PromisePolyfill = function(executor) {\n\tif (!(this instanceof PromisePolyfill)) throw new Error(\"Promise must be called with `new`\")\n\tif (typeof executor !== \"function\") throw new TypeError(\"executor must be a function\")\n\tvar self = this, resolvers = [], rejectors = [], resolveCurrent = handler(resolvers, true), rejectCurrent = handler(rejectors, false)\n\tvar instance = self._instance = {resolvers: resolvers, rejectors: rejectors}\n\tvar callAsync = typeof setImmediate === \"function\" ? setImmediate : setTimeout\n\tfunction handler(list, shouldAbsorb) {\n\t\treturn function execute(value) {\n\t\t\tvar then\n\t\t\ttry {\n\t\t\t\tif (shouldAbsorb && value != null && (typeof value === \"object\" || typeof value === \"function\") && typeof (then = value.then) === \"function\") {\n\t\t\t\t\tif (value === self) throw new TypeError(\"Promise can't be resolved w/ itself\")\n\t\t\t\t\texecuteOnce(then.bind(value))\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcallAsync(function() {\n\t\t\t\t\t\tif (!shouldAbsorb && list.length === 0) console.error(\"Possible unhandled promise rejection:\", value)\n\t\t\t\t\t\tfor (var i = 0; i < list.length; i++) list[i](value)\n\t\t\t\t\t\tresolvers.length = 0, rejectors.length = 0\n\t\t\t\t\t\tinstance.state = shouldAbsorb\n\t\t\t\t\t\tinstance.retry = function() {execute(value)}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\trejectCurrent(e)\n\t\t\t}\n\t\t}\n\t}\n\tfunction executeOnce(then) {\n\t\tvar runs = 0\n\t\tfunction run(fn) {\n\t\t\treturn function(value) {\n\t\t\t\tif (runs++ > 0) return\n\t\t\t\tfn(value)\n\t\t\t}\n\t\t}\n\t\tvar onerror = run(rejectCurrent)\n\t\ttry {then(run(resolveCurrent), onerror)} catch (e) {onerror(e)}\n\t}\n\texecuteOnce(executor)\n}\nPromisePolyfill.prototype.then = function(onFulfilled, onRejection) {\n\tvar self = this, instance = self._instance\n\tfunction handle(callback, list, next, state) {\n\t\tlist.push(function(value) {\n\t\t\tif (typeof callback !== \"function\") next(value)\n\t\t\telse try {resolveNext(callback(value))} catch (e) {if (rejectNext) rejectNext(e)}\n\t\t})\n\t\tif (typeof instance.retry === \"function\" && state === instance.state) instance.retry()\n\t}\n\tvar resolveNext, rejectNext\n\tvar promise = new PromisePolyfill(function(resolve, reject) {resolveNext = resolve, rejectNext = reject})\n\thandle(onFulfilled, instance.resolvers, resolveNext, true), handle(onRejection, instance.rejectors, rejectNext, false)\n\treturn promise\n}\nPromisePolyfill.prototype.catch = function(onRejection) {\n\treturn this.then(null, onRejection)\n}\nPromisePolyfill.resolve = function(value) {\n\tif (value instanceof PromisePolyfill) return value\n\treturn new PromisePolyfill(function(resolve) {resolve(value)})\n}\nPromisePolyfill.reject = function(value) {\n\treturn new PromisePolyfill(function(resolve, reject) {reject(value)})\n}\nPromisePolyfill.all = function(list) {\n\treturn new PromisePolyfill(function(resolve, reject) {\n\t\tvar total = list.length, count = 0, values = []\n\t\tif (list.length === 0) resolve([])\n\t\telse for (var i = 0; i < list.length; i++) {\n\t\t\t(function(i) {\n\t\t\t\tfunction consume(value) {\n\t\t\t\t\tcount++\n\t\t\t\t\tvalues[i] = value\n\t\t\t\t\tif (count === total) resolve(values)\n\t\t\t\t}\n\t\t\t\tif (list[i] != null && (typeof list[i] === \"object\" || typeof list[i] === \"function\") && typeof list[i].then === \"function\") {\n\t\t\t\t\tlist[i].then(consume, reject)\n\t\t\t\t}\n\t\t\t\telse consume(list[i])\n\t\t\t})(i)\n\t\t}\n\t})\n}\nPromisePolyfill.race = function(list) {\n\treturn new PromisePolyfill(function(resolve, reject) {\n\t\tfor (var i = 0; i < list.length; i++) {\n\t\t\tlist[i].then(resolve, reject)\n\t\t}\n\t})\n}\nif (typeof window !== \"undefined\") {\n\tif (typeof window.Promise === \"undefined\") window.Promise = PromisePolyfill\n\tvar PromisePolyfill = window.Promise\n} else if (typeof global !== \"undefined\") {\n\tif (typeof global.Promise === \"undefined\") global.Promise = PromisePolyfill\n\tvar PromisePolyfill = global.Promise\n} else {\n}\nvar buildQueryString = function(object) {\n\tif (Object.prototype.toString.call(object) !== \"[object Object]\") return \"\"\n\tvar args = []\n\tfor (var key0 in object) {\n\t\tdestructure(key0, object[key0])\n\t}\n\treturn args.join(\"&\")\n\tfunction destructure(key0, value) {\n\t\tif (Array.isArray(value)) {\n\t\t\tfor (var i = 0; i < value.length; i++) {\n\t\t\t\tdestructure(key0 + \"[\" + i + \"]\", value[i])\n\t\t\t}\n\t\t}\n\t\telse if (Object.prototype.toString.call(value) === \"[object Object]\") {\n\t\t\tfor (var i in value) {\n\t\t\t\tdestructure(key0 + \"[\" + i + \"]\", value[i])\n\t\t\t}\n\t\t}\n\t\telse args.push(encodeURIComponent(key0) + (value != null && value !== \"\" ? \"=\" + encodeURIComponent(value) : \"\"))\n\t}\n}\nvar FILE_PROTOCOL_REGEX = new RegExp(\"^file://\", \"i\")\nvar _8 = function($window, Promise) {\n\tvar callbackCount = 0\n\tvar oncompletion\n\tfunction setCompletionCallback(callback) {oncompletion = callback}\n\tfunction finalizer() {\n\t\tvar count = 0\n\t\tfunction complete() {if (--count === 0 && typeof oncompletion === \"function\") oncompletion()}\n\t\treturn function finalize(promise0) {\n\t\t\tvar then0 = promise0.then\n\t\t\tpromise0.then = function() {\n\t\t\t\tcount++\n\t\t\t\tvar next = then0.apply(promise0, arguments)\n\t\t\t\tnext.then(complete, function(e) {\n\t\t\t\t\tcomplete()\n\t\t\t\t\tif (count === 0) throw e\n\t\t\t\t})\n\t\t\t\treturn finalize(next)\n\t\t\t}\n\t\t\treturn promise0\n\t\t}\n\t}\n\tfunction normalize(args, extra) {\n\t\tif (typeof args === \"string\") {\n\t\t\tvar url = args\n\t\t\targs = extra || {}\n\t\t\tif (args.url == null) args.url = url\n\t\t}\n\t\treturn args\n\t}\n\tfunction request(args, extra) {\n\t\tvar finalize = finalizer()\n\t\targs = normalize(args, extra)\n\t\tvar promise0 = new Promise(function(resolve, reject) {\n\t\t\tif (args.method == null) args.method = \"GET\"\n\t\t\targs.method = args.method.toUpperCase()\n\t\t\tvar useBody = (args.method === \"GET\" || args.method === \"TRACE\") ? false : (typeof args.useBody === \"boolean\" ? args.useBody : true)\n\t\t\tif (typeof args.serialize !== \"function\") args.serialize = typeof FormData !== \"undefined\" && args.data instanceof FormData ? function(value) {return value} : JSON.stringify\n\t\t\tif (typeof args.deserialize !== \"function\") args.deserialize = deserialize\n\t\t\tif (typeof args.extract !== \"function\") args.extract = extract\n\t\t\targs.url = interpolate(args.url, args.data)\n\t\t\tif (useBody) args.data = args.serialize(args.data)\n\t\t\telse args.url = assemble(args.url, args.data)\n\t\t\tvar xhr = new $window.XMLHttpRequest(),\n\t\t\t\taborted = false,\n\t\t\t\t_abort = xhr.abort\n\t\t\txhr.abort = function abort() {\n\t\t\t\taborted = true\n\t\t\t\t_abort.call(xhr)\n\t\t\t}\n\t\t\txhr.open(args.method, args.url, typeof args.async === \"boolean\" ? args.async : true, typeof args.user === \"string\" ? args.user : undefined, typeof args.password === \"string\" ? args.password : undefined)\n\t\t\tif (args.serialize === JSON.stringify && useBody) {\n\t\t\t\txhr.setRequestHeader(\"Content-Type\", \"application/json; charset=utf-8\")\n\t\t\t}\n\t\t\tif (args.deserialize === deserialize) {\n\t\t\t\txhr.setRequestHeader(\"Accept\", \"application/json, text/*\")\n\t\t\t}\n\t\t\tif (args.withCredentials) xhr.withCredentials = args.withCredentials\n\t\t\tfor (var key in args.headers) if ({}.hasOwnProperty.call(args.headers, key)) {\n\t\t\t\txhr.setRequestHeader(key, args.headers[key])\n\t\t\t}\n\t\t\tif (typeof args.config === \"function\") xhr = args.config(xhr, args) || xhr\n\t\t\txhr.onreadystatechange = function() {\n\t\t\t\t// Don't throw errors on xhr.abort().\n\t\t\t\tif(aborted) return\n\t\t\t\tif (xhr.readyState === 4) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar response = (args.extract !== extract) ? args.extract(xhr, args) : args.deserialize(args.extract(xhr, args))\n\t\t\t\t\t\tif ((xhr.status >= 200 && xhr.status < 300) || xhr.status === 304 || FILE_PROTOCOL_REGEX.test(args.url)) {\n\t\t\t\t\t\t\tresolve(cast(args.type, response))\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tvar error = new Error(xhr.responseText)\n\t\t\t\t\t\t\tfor (var key in response) error[key] = response[key]\n\t\t\t\t\t\t\treject(error)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\treject(e)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (useBody && (args.data != null)) xhr.send(args.data)\n\t\t\telse xhr.send()\n\t\t})\n\t\treturn args.background === true ? promise0 : finalize(promise0)\n\t}\n\tfunction jsonp(args, extra) {\n\t\tvar finalize = finalizer()\n\t\targs = normalize(args, extra)\n\t\tvar promise0 = new Promise(function(resolve, reject) {\n\t\t\tvar callbackName = args.callbackName || \"_mithril_\" + Math.round(Math.random() * 1e16) + \"_\" + callbackCount++\n\t\t\tvar script = $window.document.createElement(\"script\")\n\t\t\t$window[callbackName] = function(data) {\n\t\t\t\tscript.parentNode.removeChild(script)\n\t\t\t\tresolve(cast(args.type, data))\n\t\t\t\tdelete $window[callbackName]\n\t\t\t}\n\t\t\tscript.onerror = function() {\n\t\t\t\tscript.parentNode.removeChild(script)\n\t\t\t\treject(new Error(\"JSONP request failed\"))\n\t\t\t\tdelete $window[callbackName]\n\t\t\t}\n\t\t\tif (args.data == null) args.data = {}\n\t\t\targs.url = interpolate(args.url, args.data)\n\t\t\targs.data[args.callbackKey || \"callback\"] = callbackName\n\t\t\tscript.src = assemble(args.url, args.data)\n\t\t\t$window.document.documentElement.appendChild(script)\n\t\t})\n\t\treturn args.background === true? promise0 : finalize(promise0)\n\t}\n\tfunction interpolate(url, data) {\n\t\tif (data == null) return url\n\t\tvar tokens = url.match(/:[^\\/]+/gi) || []\n\t\tfor (var i = 0; i < tokens.length; i++) {\n\t\t\tvar key = tokens[i].slice(1)\n\t\t\tif (data[key] != null) {\n\t\t\t\turl = url.replace(tokens[i], data[key])\n\t\t\t}\n\t\t}\n\t\treturn url\n\t}\n\tfunction assemble(url, data) {\n\t\tvar querystring = buildQueryString(data)\n\t\tif (querystring !== \"\") {\n\t\t\tvar prefix = url.indexOf(\"?\") < 0 ? \"?\" : \"&\"\n\t\t\turl += prefix + querystring\n\t\t}\n\t\treturn url\n\t}\n\tfunction deserialize(data) {\n\t\ttry {return data !== \"\" ? JSON.parse(data) : null}\n\t\tcatch (e) {throw new Error(data)}\n\t}\n\tfunction extract(xhr) {return xhr.responseText}\n\tfunction cast(type0, data) {\n\t\tif (typeof type0 === \"function\") {\n\t\t\tif (Array.isArray(data)) {\n\t\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\t\tdata[i] = new type0(data[i])\n\t\t\t\t}\n\t\t\t}\n\t\t\telse return new type0(data)\n\t\t}\n\t\treturn data\n\t}\n\treturn {request: request, jsonp: jsonp, setCompletionCallback: setCompletionCallback}\n}\nvar requestService = _8(window, PromisePolyfill)\nvar coreRenderer = function($window) {\n\tvar $doc = $window.document\n\tvar $emptyFragment = $doc.createDocumentFragment()\n\tvar nameSpace = {\n\t\tsvg: \"http://www.w3.org/2000/svg\",\n\t\tmath: \"http://www.w3.org/1998/Math/MathML\"\n\t}\n\tvar onevent\n\tfunction setEventCallback(callback) {return onevent = callback}\n\tfunction getNameSpace(vnode) {\n\t\treturn vnode.attrs && vnode.attrs.xmlns || nameSpace[vnode.tag]\n\t}\n\t//create\n\tfunction createNodes(parent, vnodes, start, end, hooks, nextSibling, ns) {\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) {\n\t\t\t\tcreateNode(parent, vnode, hooks, ns, nextSibling)\n\t\t\t}\n\t\t}\n\t}\n\tfunction createNode(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar tag = vnode.tag\n\t\tif (typeof tag === \"string\") {\n\t\t\tvnode.state = {}\n\t\t\tif (vnode.attrs != null) initLifecycle(vnode.attrs, vnode, hooks)\n\t\t\tswitch (tag) {\n\t\t\t\tcase \"#\": return createText(parent, vnode, nextSibling)\n\t\t\t\tcase \"<\": return createHTML(parent, vnode, nextSibling)\n\t\t\t\tcase \"[\": return createFragment(parent, vnode, hooks, ns, nextSibling)\n\t\t\t\tdefault: return createElement(parent, vnode, hooks, ns, nextSibling)\n\t\t\t}\n\t\t}\n\t\telse return createComponent(parent, vnode, hooks, ns, nextSibling)\n\t}\n\tfunction createText(parent, vnode, nextSibling) {\n\t\tvnode.dom = $doc.createTextNode(vnode.children)\n\t\tinsertNode(parent, vnode.dom, nextSibling)\n\t\treturn vnode.dom\n\t}\n\tfunction createHTML(parent, vnode, nextSibling) {\n\t\tvar match1 = vnode.children.match(/^\\s*?<(\\w+)/im) || []\n\t\tvar parent1 = {caption: \"table\", thead: \"table\", tbody: \"table\", tfoot: \"table\", tr: \"tbody\", th: \"tr\", td: \"tr\", colgroup: \"table\", col: \"colgroup\"}[match1[1]] || \"div\"\n\t\tvar temp = $doc.createElement(parent1)\n\t\ttemp.innerHTML = vnode.children\n\t\tvnode.dom = temp.firstChild\n\t\tvnode.domSize = temp.childNodes.length\n\t\tvar fragment = $doc.createDocumentFragment()\n\t\tvar child\n\t\twhile (child = temp.firstChild) {\n\t\t\tfragment.appendChild(child)\n\t\t}\n\t\tinsertNode(parent, fragment, nextSibling)\n\t\treturn fragment\n\t}\n\tfunction createFragment(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar fragment = $doc.createDocumentFragment()\n\t\tif (vnode.children != null) {\n\t\t\tvar children = vnode.children\n\t\t\tcreateNodes(fragment, children, 0, children.length, hooks, null, ns)\n\t\t}\n\t\tvnode.dom = fragment.firstChild\n\t\tvnode.domSize = fragment.childNodes.length\n\t\tinsertNode(parent, fragment, nextSibling)\n\t\treturn fragment\n\t}\n\tfunction createElement(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar tag = vnode.tag\n\t\tvar attrs2 = vnode.attrs\n\t\tvar is = attrs2 && attrs2.is\n\t\tns = getNameSpace(vnode) || ns\n\t\tvar element = ns ?\n\t\t\tis ? $doc.createElementNS(ns, tag, {is: is}) : $doc.createElementNS(ns, tag) :\n\t\t\tis ? $doc.createElement(tag, {is: is}) : $doc.createElement(tag)\n\t\tvnode.dom = element\n\t\tif (attrs2 != null) {\n\t\t\tsetAttrs(vnode, attrs2, ns)\n\t\t}\n\t\tinsertNode(parent, element, nextSibling)\n\t\tif (vnode.attrs != null && vnode.attrs.contenteditable != null) {\n\t\t\tsetContentEditable(vnode)\n\t\t}\n\t\telse {\n\t\t\tif (vnode.text != null) {\n\t\t\t\tif (vnode.text !== \"\") element.textContent = vnode.text\n\t\t\t\telse vnode.children = [Vnode(\"#\", undefined, undefined, vnode.text, undefined, undefined)]\n\t\t\t}\n\t\t\tif (vnode.children != null) {\n\t\t\t\tvar children = vnode.children\n\t\t\t\tcreateNodes(element, children, 0, children.length, hooks, null, ns)\n\t\t\t\tsetLateAttrs(vnode)\n\t\t\t}\n\t\t}\n\t\treturn element\n\t}\n\tfunction initComponent(vnode, hooks) {\n\t\tvar sentinel\n\t\tif (typeof vnode.tag.view === \"function\") {\n\t\t\tvnode.state = Object.create(vnode.tag)\n\t\t\tsentinel = vnode.state.view\n\t\t\tif (sentinel.$$reentrantLock$$ != null) return $emptyFragment\n\t\t\tsentinel.$$reentrantLock$$ = true\n\t\t} else {\n\t\t\tvnode.state = void 0\n\t\t\tsentinel = vnode.tag\n\t\t\tif (sentinel.$$reentrantLock$$ != null) return $emptyFragment\n\t\t\tsentinel.$$reentrantLock$$ = true\n\t\t\tvnode.state = (vnode.tag.prototype != null && typeof vnode.tag.prototype.view === \"function\") ? new vnode.tag(vnode) : vnode.tag(vnode)\n\t\t}\n\t\tvnode._state = vnode.state\n\t\tif (vnode.attrs != null) initLifecycle(vnode.attrs, vnode, hooks)\n\t\tinitLifecycle(vnode._state, vnode, hooks)\n\t\tvnode.instance = Vnode.normalize(vnode._state.view.call(vnode.state, vnode))\n\t\tif (vnode.instance === vnode) throw Error(\"A view cannot return the vnode it received as argument\")\n\t\tsentinel.$$reentrantLock$$ = null\n\t}\n\tfunction createComponent(parent, vnode, hooks, ns, nextSibling) {\n\t\tinitComponent(vnode, hooks)\n\t\tif (vnode.instance != null) {\n\t\t\tvar element = createNode(parent, vnode.instance, hooks, ns, nextSibling)\n\t\t\tvnode.dom = vnode.instance.dom\n\t\t\tvnode.domSize = vnode.dom != null ? vnode.instance.domSize : 0\n\t\t\tinsertNode(parent, element, nextSibling)\n\t\t\treturn element\n\t\t}\n\t\telse {\n\t\t\tvnode.domSize = 0\n\t\t\treturn $emptyFragment\n\t\t}\n\t}\n\t//update\n\tfunction updateNodes(parent, old, vnodes, recycling, hooks, nextSibling, ns) {\n\t\tif (old === vnodes || old == null && vnodes == null) return\n\t\telse if (old == null) createNodes(parent, vnodes, 0, vnodes.length, hooks, nextSibling, ns)\n\t\telse if (vnodes == null) removeNodes(old, 0, old.length, vnodes)\n\t\telse {\n\t\t\tif (old.length === vnodes.length) {\n\t\t\t\tvar isUnkeyed = false\n\t\t\t\tfor (var i = 0; i < vnodes.length; i++) {\n\t\t\t\t\tif (vnodes[i] != null && old[i] != null) {\n\t\t\t\t\t\tisUnkeyed = vnodes[i].key == null && old[i].key == null\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (isUnkeyed) {\n\t\t\t\t\tfor (var i = 0; i < old.length; i++) {\n\t\t\t\t\t\tif (old[i] === vnodes[i]) continue\n\t\t\t\t\t\telse if (old[i] == null && vnodes[i] != null) createNode(parent, vnodes[i], hooks, ns, getNextSibling(old, i + 1, nextSibling))\n\t\t\t\t\t\telse if (vnodes[i] == null) removeNodes(old, i, i + 1, vnodes)\n\t\t\t\t\t\telse updateNode(parent, old[i], vnodes[i], hooks, getNextSibling(old, i + 1, nextSibling), recycling, ns)\n\t\t\t\t\t}\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t}\n\t\t\trecycling = recycling || isRecyclable(old, vnodes)\n\t\t\tif (recycling) {\n\t\t\t\tvar pool = old.pool\n\t\t\t\told = old.concat(old.pool)\n\t\t\t}\n\t\t\tvar oldStart = 0, start = 0, oldEnd = old.length - 1, end = vnodes.length - 1, map\n\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\tvar o = old[oldStart], v = vnodes[start]\n\t\t\t\tif (o === v && !recycling) oldStart++, start++\n\t\t\t\telse if (o == null) oldStart++\n\t\t\t\telse if (v == null) start++\n\t\t\t\telse if (o.key === v.key) {\n\t\t\t\t\tvar shouldRecycle = (pool != null && oldStart >= old.length - pool.length) || ((pool == null) && recycling)\n\t\t\t\t\toldStart++, start++\n\t\t\t\t\tupdateNode(parent, o, v, hooks, getNextSibling(old, oldStart, nextSibling), shouldRecycle, ns)\n\t\t\t\t\tif (recycling && o.tag === v.tag) insertNode(parent, toFragment(o), nextSibling)\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvar o = old[oldEnd]\n\t\t\t\t\tif (o === v && !recycling) oldEnd--, start++\n\t\t\t\t\telse if (o == null) oldEnd--\n\t\t\t\t\telse if (v == null) start++\n\t\t\t\t\telse if (o.key === v.key) {\n\t\t\t\t\t\tvar shouldRecycle = (pool != null && oldEnd >= old.length - pool.length) || ((pool == null) && recycling)\n\t\t\t\t\t\tupdateNode(parent, o, v, hooks, getNextSibling(old, oldEnd + 1, nextSibling), shouldRecycle, ns)\n\t\t\t\t\t\tif (recycling || start < end) insertNode(parent, toFragment(o), getNextSibling(old, oldStart, nextSibling))\n\t\t\t\t\t\toldEnd--, start++\n\t\t\t\t\t}\n\t\t\t\t\telse break\n\t\t\t\t}\n\t\t\t}\n\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\tvar o = old[oldEnd], v = vnodes[end]\n\t\t\t\tif (o === v && !recycling) oldEnd--, end--\n\t\t\t\telse if (o == null) oldEnd--\n\t\t\t\telse if (v == null) end--\n\t\t\t\telse if (o.key === v.key) {\n\t\t\t\t\tvar shouldRecycle = (pool != null && oldEnd >= old.length - pool.length) || ((pool == null) && recycling)\n\t\t\t\t\tupdateNode(parent, o, v, hooks, getNextSibling(old, oldEnd + 1, nextSibling), shouldRecycle, ns)\n\t\t\t\t\tif (recycling && o.tag === v.tag) insertNode(parent, toFragment(o), nextSibling)\n\t\t\t\t\tif (o.dom != null) nextSibling = o.dom\n\t\t\t\t\toldEnd--, end--\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (!map) map = getKeyMap(old, oldEnd)\n\t\t\t\t\tif (v != null) {\n\t\t\t\t\t\tvar oldIndex = map[v.key]\n\t\t\t\t\t\tif (oldIndex != null) {\n\t\t\t\t\t\t\tvar movable = old[oldIndex]\n\t\t\t\t\t\t\tvar shouldRecycle = (pool != null && oldIndex >= old.length - pool.length) || ((pool == null) && recycling)\n\t\t\t\t\t\t\tupdateNode(parent, movable, v, hooks, getNextSibling(old, oldEnd + 1, nextSibling), recycling, ns)\n\t\t\t\t\t\t\tinsertNode(parent, toFragment(movable), nextSibling)\n\t\t\t\t\t\t\told[oldIndex].skip = true\n\t\t\t\t\t\t\tif (movable.dom != null) nextSibling = movable.dom\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tvar dom = createNode(parent, v, hooks, ns, nextSibling)\n\t\t\t\t\t\t\tnextSibling = dom\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tend--\n\t\t\t\t}\n\t\t\t\tif (end < start) break\n\t\t\t}\n\t\t\tcreateNodes(parent, vnodes, start, end + 1, hooks, nextSibling, ns)\n\t\t\tremoveNodes(old, oldStart, oldEnd + 1, vnodes)\n\t\t}\n\t}\n\tfunction updateNode(parent, old, vnode, hooks, nextSibling, recycling, ns) {\n\t\tvar oldTag = old.tag, tag = vnode.tag\n\t\tif (oldTag === tag) {\n\t\t\tvnode.state = old.state\n\t\t\tvnode._state = old._state\n\t\t\tvnode.events = old.events\n\t\t\tif (!recycling && shouldNotUpdate(vnode, old)) return\n\t\t\tif (typeof oldTag === \"string\") {\n\t\t\t\tif (vnode.attrs != null) {\n\t\t\t\t\tif (recycling) {\n\t\t\t\t\t\tvnode.state = {}\n\t\t\t\t\t\tinitLifecycle(vnode.attrs, vnode, hooks)\n\t\t\t\t\t}\n\t\t\t\t\telse updateLifecycle(vnode.attrs, vnode, hooks)\n\t\t\t\t}\n\t\t\t\tswitch (oldTag) {\n\t\t\t\t\tcase \"#\": updateText(old, vnode); break\n\t\t\t\t\tcase \"<\": updateHTML(parent, old, vnode, nextSibling); break\n\t\t\t\t\tcase \"[\": updateFragment(parent, old, vnode, recycling, hooks, nextSibling, ns); break\n\t\t\t\t\tdefault: updateElement(old, vnode, recycling, hooks, ns)\n\t\t\t\t}\n\t\t\t}\n\t\t\telse updateComponent(parent, old, vnode, hooks, nextSibling, recycling, ns)\n\t\t}\n\t\telse {\n\t\t\tremoveNode(old, null)\n\t\t\tcreateNode(parent, vnode, hooks, ns, nextSibling)\n\t\t}\n\t}\n\tfunction updateText(old, vnode) {\n\t\tif (old.children.toString() !== vnode.children.toString()) {\n\t\t\told.dom.nodeValue = vnode.children\n\t\t}\n\t\tvnode.dom = old.dom\n\t}\n\tfunction updateHTML(parent, old, vnode, nextSibling) {\n\t\tif (old.children !== vnode.children) {\n\t\t\ttoFragment(old)\n\t\t\tcreateHTML(parent, vnode, nextSibling)\n\t\t}\n\t\telse vnode.dom = old.dom, vnode.domSize = old.domSize\n\t}\n\tfunction updateFragment(parent, old, vnode, recycling, hooks, nextSibling, ns) {\n\t\tupdateNodes(parent, old.children, vnode.children, recycling, hooks, nextSibling, ns)\n\t\tvar domSize = 0, children = vnode.children\n\t\tvnode.dom = null\n\t\tif (children != null) {\n\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\tvar child = children[i]\n\t\t\t\tif (child != null && child.dom != null) {\n\t\t\t\t\tif (vnode.dom == null) vnode.dom = child.dom\n\t\t\t\t\tdomSize += child.domSize || 1\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (domSize !== 1) vnode.domSize = domSize\n\t\t}\n\t}\n\tfunction updateElement(old, vnode, recycling, hooks, ns) {\n\t\tvar element = vnode.dom = old.dom\n\t\tns = getNameSpace(vnode) || ns\n\t\tif (vnode.tag === \"textarea\") {\n\t\t\tif (vnode.attrs == null) vnode.attrs = {}\n\t\t\tif (vnode.text != null) {\n\t\t\t\tvnode.attrs.value = vnode.text //FIXME handle0 multiple children\n\t\t\t\tvnode.text = undefined\n\t\t\t}\n\t\t}\n\t\tupdateAttrs(vnode, old.attrs, vnode.attrs, ns)\n\t\tif (vnode.attrs != null && vnode.attrs.contenteditable != null) {\n\t\t\tsetContentEditable(vnode)\n\t\t}\n\t\telse if (old.text != null && vnode.text != null && vnode.text !== \"\") {\n\t\t\tif (old.text.toString() !== vnode.text.toString()) old.dom.firstChild.nodeValue = vnode.text\n\t\t}\n\t\telse {\n\t\t\tif (old.text != null) old.children = [Vnode(\"#\", undefined, undefined, old.text, undefined, old.dom.firstChild)]\n\t\t\tif (vnode.text != null) vnode.children = [Vnode(\"#\", undefined, undefined, vnode.text, undefined, undefined)]\n\t\t\tupdateNodes(element, old.children, vnode.children, recycling, hooks, null, ns)\n\t\t}\n\t}\n\tfunction updateComponent(parent, old, vnode, hooks, nextSibling, recycling, ns) {\n\t\tif (recycling) {\n\t\t\tinitComponent(vnode, hooks)\n\t\t} else {\n\t\t\tvnode.instance = Vnode.normalize(vnode._state.view.call(vnode.state, vnode))\n\t\t\tif (vnode.instance === vnode) throw Error(\"A view cannot return the vnode it received as argument\")\n\t\t\tif (vnode.attrs != null) updateLifecycle(vnode.attrs, vnode, hooks)\n\t\t\tupdateLifecycle(vnode._state, vnode, hooks)\n\t\t}\n\t\tif (vnode.instance != null) {\n\t\t\tif (old.instance == null) createNode(parent, vnode.instance, hooks, ns, nextSibling)\n\t\t\telse updateNode(parent, old.instance, vnode.instance, hooks, nextSibling, recycling, ns)\n\t\t\tvnode.dom = vnode.instance.dom\n\t\t\tvnode.domSize = vnode.instance.domSize\n\t\t}\n\t\telse if (old.instance != null) {\n\t\t\tremoveNode(old.instance, null)\n\t\t\tvnode.dom = undefined\n\t\t\tvnode.domSize = 0\n\t\t}\n\t\telse {\n\t\t\tvnode.dom = old.dom\n\t\t\tvnode.domSize = old.domSize\n\t\t}\n\t}\n\tfunction isRecyclable(old, vnodes) {\n\t\tif (old.pool != null && Math.abs(old.pool.length - vnodes.length) <= Math.abs(old.length - vnodes.length)) {\n\t\t\tvar oldChildrenLength = old[0] && old[0].children && old[0].children.length || 0\n\t\t\tvar poolChildrenLength = old.pool[0] && old.pool[0].children && old.pool[0].children.length || 0\n\t\t\tvar vnodesChildrenLength = vnodes[0] && vnodes[0].children && vnodes[0].children.length || 0\n\t\t\tif (Math.abs(poolChildrenLength - vnodesChildrenLength) <= Math.abs(oldChildrenLength - vnodesChildrenLength)) {\n\t\t\t\treturn true\n\t\t\t}\n\t\t}\n\t\treturn false\n\t}\n\tfunction getKeyMap(vnodes, end) {\n\t\tvar map = {}, i = 0\n\t\tfor (var i = 0; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) {\n\t\t\t\tvar key2 = vnode.key\n\t\t\t\tif (key2 != null) map[key2] = i\n\t\t\t}\n\t\t}\n\t\treturn map\n\t}\n\tfunction toFragment(vnode) {\n\t\tvar count0 = vnode.domSize\n\t\tif (count0 != null || vnode.dom == null) {\n\t\t\tvar fragment = $doc.createDocumentFragment()\n\t\t\tif (count0 > 0) {\n\t\t\t\tvar dom = vnode.dom\n\t\t\t\twhile (--count0) fragment.appendChild(dom.nextSibling)\n\t\t\t\tfragment.insertBefore(dom, fragment.firstChild)\n\t\t\t}\n\t\t\treturn fragment\n\t\t}\n\t\telse return vnode.dom\n\t}\n\tfunction getNextSibling(vnodes, i, nextSibling) {\n\t\tfor (; i < vnodes.length; i++) {\n\t\t\tif (vnodes[i] != null && vnodes[i].dom != null) return vnodes[i].dom\n\t\t}\n\t\treturn nextSibling\n\t}\n\tfunction insertNode(parent, dom, nextSibling) {\n\t\tif (nextSibling && nextSibling.parentNode) parent.insertBefore(dom, nextSibling)\n\t\telse parent.appendChild(dom)\n\t}\n\tfunction setContentEditable(vnode) {\n\t\tvar children = vnode.children\n\t\tif (children != null && children.length === 1 && children[0].tag === \"<\") {\n\t\t\tvar content = children[0].children\n\t\t\tif (vnode.dom.innerHTML !== content) vnode.dom.innerHTML = content\n\t\t}\n\t\telse if (vnode.text != null || children != null && children.length !== 0) throw new Error(\"Child node of a contenteditable must be trusted\")\n\t}\n\t//remove\n\tfunction removeNodes(vnodes, start, end, context) {\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) {\n\t\t\t\tif (vnode.skip) vnode.skip = false\n\t\t\t\telse removeNode(vnode, context)\n\t\t\t}\n\t\t}\n\t}\n\tfunction removeNode(vnode, context) {\n\t\tvar expected = 1, called = 0\n\t\tif (vnode.attrs && typeof vnode.attrs.onbeforeremove === \"function\") {\n\t\t\tvar result = vnode.attrs.onbeforeremove.call(vnode.state, vnode)\n\t\t\tif (result != null && typeof result.then === \"function\") {\n\t\t\t\texpected++\n\t\t\t\tresult.then(continuation, continuation)\n\t\t\t}\n\t\t}\n\t\tif (typeof vnode.tag !== \"string\" && typeof vnode._state.onbeforeremove === \"function\") {\n\t\t\tvar result = vnode._state.onbeforeremove.call(vnode.state, vnode)\n\t\t\tif (result != null && typeof result.then === \"function\") {\n\t\t\t\texpected++\n\t\t\t\tresult.then(continuation, continuation)\n\t\t\t}\n\t\t}\n\t\tcontinuation()\n\t\tfunction continuation() {\n\t\t\tif (++called === expected) {\n\t\t\t\tonremove(vnode)\n\t\t\t\tif (vnode.dom) {\n\t\t\t\t\tvar count0 = vnode.domSize || 1\n\t\t\t\t\tif (count0 > 1) {\n\t\t\t\t\t\tvar dom = vnode.dom\n\t\t\t\t\t\twhile (--count0) {\n\t\t\t\t\t\t\tremoveNodeFromDOM(dom.nextSibling)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tremoveNodeFromDOM(vnode.dom)\n\t\t\t\t\tif (context != null && vnode.domSize == null && !hasIntegrationMethods(vnode.attrs) && typeof vnode.tag === \"string\") { //TODO test custom elements\n\t\t\t\t\t\tif (!context.pool) context.pool = [vnode]\n\t\t\t\t\t\telse context.pool.push(vnode)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction removeNodeFromDOM(node) {\n\t\tvar parent = node.parentNode\n\t\tif (parent != null) parent.removeChild(node)\n\t}\n\tfunction onremove(vnode) {\n\t\tif (vnode.attrs && typeof vnode.attrs.onremove === \"function\") vnode.attrs.onremove.call(vnode.state, vnode)\n\t\tif (typeof vnode.tag !== \"string\" && typeof vnode._state.onremove === \"function\") vnode._state.onremove.call(vnode.state, vnode)\n\t\tif (vnode.instance != null) onremove(vnode.instance)\n\t\telse {\n\t\t\tvar children = vnode.children\n\t\t\tif (Array.isArray(children)) {\n\t\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t\tvar child = children[i]\n\t\t\t\t\tif (child != null) onremove(child)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t//attrs2\n\tfunction setAttrs(vnode, attrs2, ns) {\n\t\tfor (var key2 in attrs2) {\n\t\t\tsetAttr(vnode, key2, null, attrs2[key2], ns)\n\t\t}\n\t}\n\tfunction setAttr(vnode, key2, old, value, ns) {\n\t\tvar element = vnode.dom\n\t\tif (key2 === \"key\" || key2 === \"is\" || (old === value && !isFormAttribute(vnode, key2)) && typeof value !== \"object\" || typeof value === \"undefined\" || isLifecycleMethod(key2)) return\n\t\tvar nsLastIndex = key2.indexOf(\":\")\n\t\tif (nsLastIndex > -1 && key2.substr(0, nsLastIndex) === \"xlink\") {\n\t\t\telement.setAttributeNS(\"http://www.w3.org/1999/xlink\", key2.slice(nsLastIndex + 1), value)\n\t\t}\n\t\telse if (key2[0] === \"o\" && key2[1] === \"n\" && typeof value === \"function\") updateEvent(vnode, key2, value)\n\t\telse if (key2 === \"style\") updateStyle(element, old, value)\n\t\telse if (key2 in element && !isAttribute(key2) && ns === undefined && !isCustomElement(vnode)) {\n\t\t\tif (key2 === \"value\") {\n\t\t\t\tvar normalized0 = \"\" + value // eslint-disable-line no-implicit-coercion\n\t\t\t\t//setting input[value] to same value by typing on focused element moves cursor to end in Chrome\n\t\t\t\tif ((vnode.tag === \"input\" || vnode.tag === \"textarea\") && vnode.dom.value === normalized0 && vnode.dom === $doc.activeElement) return\n\t\t\t\t//setting select[value] to same value while having select open blinks select dropdown in Chrome\n\t\t\t\tif (vnode.tag === \"select\") {\n\t\t\t\t\tif (value === null) {\n\t\t\t\t\t\tif (vnode.dom.selectedIndex === -1 && vnode.dom === $doc.activeElement) return\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (old !== null && vnode.dom.value === normalized0 && vnode.dom === $doc.activeElement) return\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t//setting option[value] to same value while having select open blinks select dropdown in Chrome\n\t\t\t\tif (vnode.tag === \"option\" && old != null && vnode.dom.value === normalized0) return\n\t\t\t}\n\t\t\t// If you assign an input type1 that is not supported by IE 11 with an assignment expression, an error0 will occur.\n\t\t\tif (vnode.tag === \"input\" && key2 === \"type\") {\n\t\t\t\telement.setAttribute(key2, value)\n\t\t\t\treturn\n\t\t\t}\n\t\t\telement[key2] = value\n\t\t}\n\t\telse {\n\t\t\tif (typeof value === \"boolean\") {\n\t\t\t\tif (value) element.setAttribute(key2, \"\")\n\t\t\t\telse element.removeAttribute(key2)\n\t\t\t}\n\t\t\telse element.setAttribute(key2 === \"className\" ? \"class\" : key2, value)\n\t\t}\n\t}\n\tfunction setLateAttrs(vnode) {\n\t\tvar attrs2 = vnode.attrs\n\t\tif (vnode.tag === \"select\" && attrs2 != null) {\n\t\t\tif (\"value\" in attrs2) setAttr(vnode, \"value\", null, attrs2.value, undefined)\n\t\t\tif (\"selectedIndex\" in attrs2) setAttr(vnode, \"selectedIndex\", null, attrs2.selectedIndex, undefined)\n\t\t}\n\t}\n\tfunction updateAttrs(vnode, old, attrs2, ns) {\n\t\tif (attrs2 != null) {\n\t\t\tfor (var key2 in attrs2) {\n\t\t\t\tsetAttr(vnode, key2, old && old[key2], attrs2[key2], ns)\n\t\t\t}\n\t\t}\n\t\tif (old != null) {\n\t\t\tfor (var key2 in old) {\n\t\t\t\tif (attrs2 == null || !(key2 in attrs2)) {\n\t\t\t\t\tif (key2 === \"className\") key2 = \"class\"\n\t\t\t\t\tif (key2[0] === \"o\" && key2[1] === \"n\" && !isLifecycleMethod(key2)) updateEvent(vnode, key2, undefined)\n\t\t\t\t\telse if (key2 !== \"key\") vnode.dom.removeAttribute(key2)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction isFormAttribute(vnode, attr) {\n\t\treturn attr === \"value\" || attr === \"checked\" || attr === \"selectedIndex\" || attr === \"selected\" && vnode.dom === $doc.activeElement\n\t}\n\tfunction isLifecycleMethod(attr) {\n\t\treturn attr === \"oninit\" || attr === \"oncreate\" || attr === \"onupdate\" || attr === \"onremove\" || attr === \"onbeforeremove\" || attr === \"onbeforeupdate\"\n\t}\n\tfunction isAttribute(attr) {\n\t\treturn attr === \"href\" || attr === \"list\" || attr === \"form\" || attr === \"width\" || attr === \"height\"// || attr === \"type\"\n\t}\n\tfunction isCustomElement(vnode){\n\t\treturn vnode.attrs.is || vnode.tag.indexOf(\"-\") > -1\n\t}\n\tfunction hasIntegrationMethods(source) {\n\t\treturn source != null && (source.oncreate || source.onupdate || source.onbeforeremove || source.onremove)\n\t}\n\t//style\n\tfunction updateStyle(element, old, style) {\n\t\tif (old === style) element.style.cssText = \"\", old = null\n\t\tif (style == null) element.style.cssText = \"\"\n\t\telse if (typeof style === \"string\") element.style.cssText = style\n\t\telse {\n\t\t\tif (typeof old === \"string\") element.style.cssText = \"\"\n\t\t\tfor (var key2 in style) {\n\t\t\t\telement.style[key2] = style[key2]\n\t\t\t}\n\t\t\tif (old != null && typeof old !== \"string\") {\n\t\t\t\tfor (var key2 in old) {\n\t\t\t\t\tif (!(key2 in style)) element.style[key2] = \"\"\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t//event\n\tfunction updateEvent(vnode, key2, value) {\n\t\tvar element = vnode.dom\n\t\tvar callback = typeof onevent !== \"function\" ? value : function(e) {\n\t\t\tvar result = value.call(element, e)\n\t\t\tonevent.call(element, e)\n\t\t\treturn result\n\t\t}\n\t\tif (key2 in element) element[key2] = typeof value === \"function\" ? callback : null\n\t\telse {\n\t\t\tvar eventName = key2.slice(2)\n\t\t\tif (vnode.events === undefined) vnode.events = {}\n\t\t\tif (vnode.events[key2] === callback) return\n\t\t\tif (vnode.events[key2] != null) element.removeEventListener(eventName, vnode.events[key2], false)\n\t\t\tif (typeof value === \"function\") {\n\t\t\t\tvnode.events[key2] = callback\n\t\t\t\telement.addEventListener(eventName, vnode.events[key2], false)\n\t\t\t}\n\t\t}\n\t}\n\t//lifecycle\n\tfunction initLifecycle(source, vnode, hooks) {\n\t\tif (typeof source.oninit === \"function\") source.oninit.call(vnode.state, vnode)\n\t\tif (typeof source.oncreate === \"function\") hooks.push(source.oncreate.bind(vnode.state, vnode))\n\t}\n\tfunction updateLifecycle(source, vnode, hooks) {\n\t\tif (typeof source.onupdate === \"function\") hooks.push(source.onupdate.bind(vnode.state, vnode))\n\t}\n\tfunction shouldNotUpdate(vnode, old) {\n\t\tvar forceVnodeUpdate, forceComponentUpdate\n\t\tif (vnode.attrs != null && typeof vnode.attrs.onbeforeupdate === \"function\") forceVnodeUpdate = vnode.attrs.onbeforeupdate.call(vnode.state, vnode, old)\n\t\tif (typeof vnode.tag !== \"string\" && typeof vnode._state.onbeforeupdate === \"function\") forceComponentUpdate = vnode._state.onbeforeupdate.call(vnode.state, vnode, old)\n\t\tif (!(forceVnodeUpdate === undefined && forceComponentUpdate === undefined) && !forceVnodeUpdate && !forceComponentUpdate) {\n\t\t\tvnode.dom = old.dom\n\t\t\tvnode.domSize = old.domSize\n\t\t\tvnode.instance = old.instance\n\t\t\treturn true\n\t\t}\n\t\treturn false\n\t}\n\tfunction render(dom, vnodes) {\n\t\tif (!dom) throw new Error(\"Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.\")\n\t\tvar hooks = []\n\t\tvar active = $doc.activeElement\n\t\tvar namespace = dom.namespaceURI\n\t\t// First time0 rendering into a node clears it out\n\t\tif (dom.vnodes == null) dom.textContent = \"\"\n\t\tif (!Array.isArray(vnodes)) vnodes = [vnodes]\n\t\tupdateNodes(dom, dom.vnodes, Vnode.normalizeChildren(vnodes), false, hooks, null, namespace === \"http://www.w3.org/1999/xhtml\" ? undefined : namespace)\n\t\tdom.vnodes = vnodes\n\t\tfor (var i = 0; i < hooks.length; i++) hooks[i]()\n\t\tif ($doc.activeElement !== active) active.focus()\n\t}\n\treturn {render: render, setEventCallback: setEventCallback}\n}\nfunction throttle(callback) {\n\t//60fps translates to 16.6ms, round it down since setTimeout requires int\n\tvar time = 16\n\tvar last = 0, pending = null\n\tvar timeout = typeof requestAnimationFrame === \"function\" ? requestAnimationFrame : setTimeout\n\treturn function() {\n\t\tvar now = Date.now()\n\t\tif (last === 0 || now - last >= time) {\n\t\t\tlast = now\n\t\t\tcallback()\n\t\t}\n\t\telse if (pending === null) {\n\t\t\tpending = timeout(function() {\n\t\t\t\tpending = null\n\t\t\t\tcallback()\n\t\t\t\tlast = Date.now()\n\t\t\t}, time - (now - last))\n\t\t}\n\t}\n}\nvar _11 = function($window) {\n\tvar renderService = coreRenderer($window)\n\trenderService.setEventCallback(function(e) {\n\t\tif (e.redraw === false) e.redraw = undefined\n\t\telse redraw()\n\t})\n\tvar callbacks = []\n\tfunction subscribe(key1, callback) {\n\t\tunsubscribe(key1)\n\t\tcallbacks.push(key1, throttle(callback))\n\t}\n\tfunction unsubscribe(key1) {\n\t\tvar index = callbacks.indexOf(key1)\n\t\tif (index > -1) callbacks.splice(index, 2)\n\t}\n\tfunction redraw() {\n\t\tfor (var i = 1; i < callbacks.length; i += 2) {\n\t\t\tcallbacks[i]()\n\t\t}\n\t}\n\treturn {subscribe: subscribe, unsubscribe: unsubscribe, redraw: redraw, render: renderService.render}\n}\nvar redrawService = _11(window)\nrequestService.setCompletionCallback(redrawService.redraw)\nvar _16 = function(redrawService0) {\n\treturn function(root, component) {\n\t\tif (component === null) {\n\t\t\tredrawService0.render(root, [])\n\t\t\tredrawService0.unsubscribe(root)\n\t\t\treturn\n\t\t}\n\t\t\n\t\tif (component.view == null && typeof component !== \"function\") throw new Error(\"m.mount(element, component) expects a component, not a vnode\")\n\t\t\n\t\tvar run0 = function() {\n\t\t\tredrawService0.render(root, Vnode(component))\n\t\t}\n\t\tredrawService0.subscribe(root, run0)\n\t\tredrawService0.redraw()\n\t}\n}\nm.mount = _16(redrawService)\nvar Promise = PromisePolyfill\nvar parseQueryString = function(string) {\n\tif (string === \"\" || string == null) return {}\n\tif (string.charAt(0) === \"?\") string = string.slice(1)\n\tvar entries = string.split(\"&\"), data0 = {}, counters = {}\n\tfor (var i = 0; i < entries.length; i++) {\n\t\tvar entry = entries[i].split(\"=\")\n\t\tvar key5 = decodeURIComponent(entry[0])\n\t\tvar value = entry.length === 2 ? decodeURIComponent(entry[1]) : \"\"\n\t\tif (value === \"true\") value = true\n\t\telse if (value === \"false\") value = false\n\t\tvar levels = key5.split(/\\]\\[?|\\[/)\n\t\tvar cursor = data0\n\t\tif (key5.indexOf(\"[\") > -1) levels.pop()\n\t\tfor (var j = 0; j < levels.length; j++) {\n\t\t\tvar level = levels[j], nextLevel = levels[j + 1]\n\t\t\tvar isNumber = nextLevel == \"\" || !isNaN(parseInt(nextLevel, 10))\n\t\t\tvar isValue = j === levels.length - 1\n\t\t\tif (level === \"\") {\n\t\t\t\tvar key5 = levels.slice(0, j).join()\n\t\t\t\tif (counters[key5] == null) counters[key5] = 0\n\t\t\t\tlevel = counters[key5]++\n\t\t\t}\n\t\t\tif (cursor[level] == null) {\n\t\t\t\tcursor[level] = isValue ? value : isNumber ? [] : {}\n\t\t\t}\n\t\t\tcursor = cursor[level]\n\t\t}\n\t}\n\treturn data0\n}\nvar coreRouter = function($window) {\n\tvar supportsPushState = typeof $window.history.pushState === \"function\"\n\tvar callAsync0 = typeof setImmediate === \"function\" ? setImmediate : setTimeout\n\tfunction normalize1(fragment0) {\n\t\tvar data = $window.location[fragment0].replace(/(?:%[a-f89][a-f0-9])+/gim, decodeURIComponent)\n\t\tif (fragment0 === \"pathname\" && data[0] !== \"/\") data = \"/\" + data\n\t\treturn data\n\t}\n\tvar asyncId\n\tfunction debounceAsync(callback0) {\n\t\treturn function() {\n\t\t\tif (asyncId != null) return\n\t\t\tasyncId = callAsync0(function() {\n\t\t\t\tasyncId = null\n\t\t\t\tcallback0()\n\t\t\t})\n\t\t}\n\t}\n\tfunction parsePath(path, queryData, hashData) {\n\t\tvar queryIndex = path.indexOf(\"?\")\n\t\tvar hashIndex = path.indexOf(\"#\")\n\t\tvar pathEnd = queryIndex > -1 ? queryIndex : hashIndex > -1 ? hashIndex : path.length\n\t\tif (queryIndex > -1) {\n\t\t\tvar queryEnd = hashIndex > -1 ? hashIndex : path.length\n\t\t\tvar queryParams = parseQueryString(path.slice(queryIndex + 1, queryEnd))\n\t\t\tfor (var key4 in queryParams) queryData[key4] = queryParams[key4]\n\t\t}\n\t\tif (hashIndex > -1) {\n\t\t\tvar hashParams = parseQueryString(path.slice(hashIndex + 1))\n\t\t\tfor (var key4 in hashParams) hashData[key4] = hashParams[key4]\n\t\t}\n\t\treturn path.slice(0, pathEnd)\n\t}\n\tvar router = {prefix: \"#!\"}\n\trouter.getPath = function() {\n\t\tvar type2 = router.prefix.charAt(0)\n\t\tswitch (type2) {\n\t\t\tcase \"#\": return normalize1(\"hash\").slice(router.prefix.length)\n\t\t\tcase \"?\": return normalize1(\"search\").slice(router.prefix.length) + normalize1(\"hash\")\n\t\t\tdefault: return normalize1(\"pathname\").slice(router.prefix.length) + normalize1(\"search\") + normalize1(\"hash\")\n\t\t}\n\t}\n\trouter.setPath = function(path, data, options) {\n\t\tvar queryData = {}, hashData = {}\n\t\tpath = parsePath(path, queryData, hashData)\n\t\tif (data != null) {\n\t\t\tfor (var key4 in data) queryData[key4] = data[key4]\n\t\t\tpath = path.replace(/:([^\\/]+)/g, function(match2, token) {\n\t\t\t\tdelete queryData[token]\n\t\t\t\treturn data[token]\n\t\t\t})\n\t\t}\n\t\tvar query = buildQueryString(queryData)\n\t\tif (query) path += \"?\" + query\n\t\tvar hash = buildQueryString(hashData)\n\t\tif (hash) path += \"#\" + hash\n\t\tif (supportsPushState) {\n\t\t\tvar state = options ? options.state : null\n\t\t\tvar title = options ? options.title : null\n\t\t\t$window.onpopstate()\n\t\t\tif (options && options.replace) $window.history.replaceState(state, title, router.prefix + path)\n\t\t\telse $window.history.pushState(state, title, router.prefix + path)\n\t\t}\n\t\telse $window.location.href = router.prefix + path\n\t}\n\trouter.defineRoutes = function(routes, resolve, reject) {\n\t\tfunction resolveRoute() {\n\t\t\tvar path = router.getPath()\n\t\t\tvar params = {}\n\t\t\tvar pathname = parsePath(path, params, params)\n\t\t\tvar state = $window.history.state\n\t\t\tif (state != null) {\n\t\t\t\tfor (var k in state) params[k] = state[k]\n\t\t\t}\n\t\t\tfor (var route0 in routes) {\n\t\t\t\tvar matcher = new RegExp(\"^\" + route0.replace(/:[^\\/]+?\\.{3}/g, \"(.*?)\").replace(/:[^\\/]+/g, \"([^\\\\/]+)\") + \"\\/?$\")\n\t\t\t\tif (matcher.test(pathname)) {\n\t\t\t\t\tpathname.replace(matcher, function() {\n\t\t\t\t\t\tvar keys = route0.match(/:[^\\/]+/g) || []\n\t\t\t\t\t\tvar values = [].slice.call(arguments, 1, -2)\n\t\t\t\t\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\t\t\t\t\tparams[keys[i].replace(/:|\\./g, \"\")] = decodeURIComponent(values[i])\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve(routes[route0], params, path, route0)\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t}\n\t\t\treject(path, params)\n\t\t}\n\t\tif (supportsPushState) $window.onpopstate = debounceAsync(resolveRoute)\n\t\telse if (router.prefix.charAt(0) === \"#\") $window.onhashchange = resolveRoute\n\t\tresolveRoute()\n\t}\n\treturn router\n}\nvar _20 = function($window, redrawService0) {\n\tvar routeService = coreRouter($window)\n\tvar identity = function(v) {return v}\n\tvar render1, component, attrs3, currentPath, lastUpdate\n\tvar route = function(root, defaultRoute, routes) {\n\t\tif (root == null) throw new Error(\"Ensure the DOM element that was passed to `m.route` is not undefined\")\n\t\tvar run1 = function() {\n\t\t\tif (render1 != null) redrawService0.render(root, render1(Vnode(component, attrs3.key, attrs3)))\n\t\t}\n\t\tvar bail = function(path) {\n\t\t\tif (path !== defaultRoute) routeService.setPath(defaultRoute, null, {replace: true})\n\t\t\telse throw new Error(\"Could not resolve default route \" + defaultRoute)\n\t\t}\n\t\trouteService.defineRoutes(routes, function(payload, params, path) {\n\t\t\tvar update = lastUpdate = function(routeResolver, comp) {\n\t\t\t\tif (update !== lastUpdate) return\n\t\t\t\tcomponent = comp != null && (typeof comp.view === \"function\" || typeof comp === \"function\")? comp : \"div\"\n\t\t\t\tattrs3 = params, currentPath = path, lastUpdate = null\n\t\t\t\trender1 = (routeResolver.render || identity).bind(routeResolver)\n\t\t\t\trun1()\n\t\t\t}\n\t\t\tif (payload.view || typeof payload === \"function\") update({}, payload)\n\t\t\telse {\n\t\t\t\tif (payload.onmatch) {\n\t\t\t\t\tPromise.resolve(payload.onmatch(params, path)).then(function(resolved) {\n\t\t\t\t\t\tupdate(payload, resolved)\n\t\t\t\t\t}, bail)\n\t\t\t\t}\n\t\t\t\telse update(payload, \"div\")\n\t\t\t}\n\t\t}, bail)\n\t\tredrawService0.subscribe(root, run1)\n\t}\n\troute.set = function(path, data, options) {\n\t\tif (lastUpdate != null) {\n\t\t\toptions = options || {}\n\t\t\toptions.replace = true\n\t\t}\n\t\tlastUpdate = null\n\t\trouteService.setPath(path, data, options)\n\t}\n\troute.get = function() {return currentPath}\n\troute.prefix = function(prefix0) {routeService.prefix = prefix0}\n\troute.link = function(vnode1) {\n\t\tvnode1.dom.setAttribute(\"href\", routeService.prefix + vnode1.attrs.href)\n\t\tvnode1.dom.onclick = function(e) {\n\t\t\tif (e.ctrlKey || e.metaKey || e.shiftKey || e.which === 2) return\n\t\t\te.preventDefault()\n\t\t\te.redraw = false\n\t\t\tvar href = this.getAttribute(\"href\")\n\t\t\tif (href.indexOf(routeService.prefix) === 0) href = href.slice(routeService.prefix.length)\n\t\t\troute.set(href, undefined, undefined)\n\t\t}\n\t}\n\troute.param = function(key3) {\n\t\tif(typeof attrs3 !== \"undefined\" && typeof key3 !== \"undefined\") return attrs3[key3]\n\t\treturn attrs3\n\t}\n\treturn route\n}\nm.route = _20(window, redrawService)\nm.withAttr = function(attrName, callback1, context) {\n\treturn function(e) {\n\t\tcallback1.call(context || this, attrName in e.currentTarget ? e.currentTarget[attrName] : e.currentTarget.getAttribute(attrName))\n\t}\n}\nvar _28 = coreRenderer(window)\nm.render = _28.render\nm.redraw = redrawService.redraw\nm.request = requestService.request\nm.jsonp = requestService.jsonp\nm.parseQueryString = parseQueryString\nm.buildQueryString = buildQueryString\nm.version = \"1.1.3\"\nm.vnode = Vnode\nif (typeof module !== \"undefined\") module[\"exports\"] = m\nelse window.m = m\n}());","// Copyright (c) 2013 Pieroxy <pieroxy@pieroxy.net>\n// This work is free. You can redistribute it and/or modify it\n// under the terms of the WTFPL, Version 2\n// For more information see LICENSE.txt or http://www.wtfpl.net/\n//\n// For more information, the home page:\n// http://pieroxy.net/blog/pages/lz-string/testing.html\n//\n// LZ-based compression algorithm, version 1.4.4\nvar LZString = (function() {\n\n// private property\nvar f = String.fromCharCode;\nvar keyStrBase64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\nvar keyStrUriSafe = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$\";\nvar baseReverseDic = {};\n\nfunction getBaseValue(alphabet, character) {\n  if (!baseReverseDic[alphabet]) {\n    baseReverseDic[alphabet] = {};\n    for (var i=0 ; i<alphabet.length ; i++) {\n      baseReverseDic[alphabet][alphabet.charAt(i)] = i;\n    }\n  }\n  return baseReverseDic[alphabet][character];\n}\n\nvar LZString = {\n  compressToBase64 : function (input) {\n    if (input == null) return \"\";\n    var res = LZString._compress(input, 6, function(a){return keyStrBase64.charAt(a);});\n    switch (res.length % 4) { // To produce valid Base64\n    default: // When could this happen ?\n    case 0 : return res;\n    case 1 : return res+\"===\";\n    case 2 : return res+\"==\";\n    case 3 : return res+\"=\";\n    }\n  },\n\n  decompressFromBase64 : function (input) {\n    if (input == null) return \"\";\n    if (input == \"\") return null;\n    return LZString._decompress(input.length, 32, function(index) { return getBaseValue(keyStrBase64, input.charAt(index)); });\n  },\n\n  compressToUTF16 : function (input) {\n    if (input == null) return \"\";\n    return LZString._compress(input, 15, function(a){return f(a+32);}) + \" \";\n  },\n\n  decompressFromUTF16: function (compressed) {\n    if (compressed == null) return \"\";\n    if (compressed == \"\") return null;\n    return LZString._decompress(compressed.length, 16384, function(index) { return compressed.charCodeAt(index) - 32; });\n  },\n\n  //compress into uint8array (UCS-2 big endian format)\n  compressToUint8Array: function (uncompressed) {\n    var compressed = LZString.compress(uncompressed);\n    var buf=new Uint8Array(compressed.length*2); // 2 bytes per character\n\n    for (var i=0, TotalLen=compressed.length; i<TotalLen; i++) {\n      var current_value = compressed.charCodeAt(i);\n      buf[i*2] = current_value >>> 8;\n      buf[i*2+1] = current_value % 256;\n    }\n    return buf;\n  },\n\n  //decompress from uint8array (UCS-2 big endian format)\n  decompressFromUint8Array:function (compressed) {\n    if (compressed===null || compressed===undefined){\n        return LZString.decompress(compressed);\n    } else {\n        var buf=new Array(compressed.length/2); // 2 bytes per character\n        for (var i=0, TotalLen=buf.length; i<TotalLen; i++) {\n          buf[i]=compressed[i*2]*256+compressed[i*2+1];\n        }\n\n        var result = [];\n        buf.forEach(function (c) {\n          result.push(f(c));\n        });\n        return LZString.decompress(result.join(''));\n\n    }\n\n  },\n\n\n  //compress into a string that is already URI encoded\n  compressToEncodedURIComponent: function (input) {\n    if (input == null) return \"\";\n    return LZString._compress(input, 6, function(a){return keyStrUriSafe.charAt(a);});\n  },\n\n  //decompress from an output of compressToEncodedURIComponent\n  decompressFromEncodedURIComponent:function (input) {\n    if (input == null) return \"\";\n    if (input == \"\") return null;\n    input = input.replace(/ /g, \"+\");\n    return LZString._decompress(input.length, 32, function(index) { return getBaseValue(keyStrUriSafe, input.charAt(index)); });\n  },\n\n  compress: function (uncompressed) {\n    return LZString._compress(uncompressed, 16, function(a){return f(a);});\n  },\n  _compress: function (uncompressed, bitsPerChar, getCharFromInt) {\n    if (uncompressed == null) return \"\";\n    var i, value,\n        context_dictionary= {},\n        context_dictionaryToCreate= {},\n        context_c=\"\",\n        context_wc=\"\",\n        context_w=\"\",\n        context_enlargeIn= 2, // Compensate for the first entry which should not count\n        context_dictSize= 3,\n        context_numBits= 2,\n        context_data=[],\n        context_data_val=0,\n        context_data_position=0,\n        ii;\n\n    for (ii = 0; ii < uncompressed.length; ii += 1) {\n      context_c = uncompressed.charAt(ii);\n      if (!Object.prototype.hasOwnProperty.call(context_dictionary,context_c)) {\n        context_dictionary[context_c] = context_dictSize++;\n        context_dictionaryToCreate[context_c] = true;\n      }\n\n      context_wc = context_w + context_c;\n      if (Object.prototype.hasOwnProperty.call(context_dictionary,context_wc)) {\n        context_w = context_wc;\n      } else {\n        if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)) {\n          if (context_w.charCodeAt(0)<256) {\n            for (i=0 ; i<context_numBits ; i++) {\n              context_data_val = (context_data_val << 1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n            }\n            value = context_w.charCodeAt(0);\n            for (i=0 ; i<8 ; i++) {\n              context_data_val = (context_data_val << 1) | (value&1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = value >> 1;\n            }\n          } else {\n            value = 1;\n            for (i=0 ; i<context_numBits ; i++) {\n              context_data_val = (context_data_val << 1) | value;\n              if (context_data_position ==bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = 0;\n            }\n            value = context_w.charCodeAt(0);\n            for (i=0 ; i<16 ; i++) {\n              context_data_val = (context_data_val << 1) | (value&1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = value >> 1;\n            }\n          }\n          context_enlargeIn--;\n          if (context_enlargeIn == 0) {\n            context_enlargeIn = Math.pow(2, context_numBits);\n            context_numBits++;\n          }\n          delete context_dictionaryToCreate[context_w];\n        } else {\n          value = context_dictionary[context_w];\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n\n\n        }\n        context_enlargeIn--;\n        if (context_enlargeIn == 0) {\n          context_enlargeIn = Math.pow(2, context_numBits);\n          context_numBits++;\n        }\n        // Add wc to the dictionary.\n        context_dictionary[context_wc] = context_dictSize++;\n        context_w = String(context_c);\n      }\n    }\n\n    // Output the code for w.\n    if (context_w !== \"\") {\n      if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)) {\n        if (context_w.charCodeAt(0)<256) {\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n          }\n          value = context_w.charCodeAt(0);\n          for (i=0 ; i<8 ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n        } else {\n          value = 1;\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1) | value;\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = 0;\n          }\n          value = context_w.charCodeAt(0);\n          for (i=0 ; i<16 ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n        }\n        context_enlargeIn--;\n        if (context_enlargeIn == 0) {\n          context_enlargeIn = Math.pow(2, context_numBits);\n          context_numBits++;\n        }\n        delete context_dictionaryToCreate[context_w];\n      } else {\n        value = context_dictionary[context_w];\n        for (i=0 ; i<context_numBits ; i++) {\n          context_data_val = (context_data_val << 1) | (value&1);\n          if (context_data_position == bitsPerChar-1) {\n            context_data_position = 0;\n            context_data.push(getCharFromInt(context_data_val));\n            context_data_val = 0;\n          } else {\n            context_data_position++;\n          }\n          value = value >> 1;\n        }\n\n\n      }\n      context_enlargeIn--;\n      if (context_enlargeIn == 0) {\n        context_enlargeIn = Math.pow(2, context_numBits);\n        context_numBits++;\n      }\n    }\n\n    // Mark the end of the stream\n    value = 2;\n    for (i=0 ; i<context_numBits ; i++) {\n      context_data_val = (context_data_val << 1) | (value&1);\n      if (context_data_position == bitsPerChar-1) {\n        context_data_position = 0;\n        context_data.push(getCharFromInt(context_data_val));\n        context_data_val = 0;\n      } else {\n        context_data_position++;\n      }\n      value = value >> 1;\n    }\n\n    // Flush the last char\n    while (true) {\n      context_data_val = (context_data_val << 1);\n      if (context_data_position == bitsPerChar-1) {\n        context_data.push(getCharFromInt(context_data_val));\n        break;\n      }\n      else context_data_position++;\n    }\n    return context_data.join('');\n  },\n\n  decompress: function (compressed) {\n    if (compressed == null) return \"\";\n    if (compressed == \"\") return null;\n    return LZString._decompress(compressed.length, 32768, function(index) { return compressed.charCodeAt(index); });\n  },\n\n  _decompress: function (length, resetValue, getNextValue) {\n    var dictionary = [],\n        next,\n        enlargeIn = 4,\n        dictSize = 4,\n        numBits = 3,\n        entry = \"\",\n        result = [],\n        i,\n        w,\n        bits, resb, maxpower, power,\n        c,\n        data = {val:getNextValue(0), position:resetValue, index:1};\n\n    for (i = 0; i < 3; i += 1) {\n      dictionary[i] = i;\n    }\n\n    bits = 0;\n    maxpower = Math.pow(2,2);\n    power=1;\n    while (power!=maxpower) {\n      resb = data.val & data.position;\n      data.position >>= 1;\n      if (data.position == 0) {\n        data.position = resetValue;\n        data.val = getNextValue(data.index++);\n      }\n      bits |= (resb>0 ? 1 : 0) * power;\n      power <<= 1;\n    }\n\n    switch (next = bits) {\n      case 0:\n          bits = 0;\n          maxpower = Math.pow(2,8);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n        c = f(bits);\n        break;\n      case 1:\n          bits = 0;\n          maxpower = Math.pow(2,16);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n        c = f(bits);\n        break;\n      case 2:\n        return \"\";\n    }\n    dictionary[3] = c;\n    w = c;\n    result.push(c);\n    while (true) {\n      if (data.index > length) {\n        return \"\";\n      }\n\n      bits = 0;\n      maxpower = Math.pow(2,numBits);\n      power=1;\n      while (power!=maxpower) {\n        resb = data.val & data.position;\n        data.position >>= 1;\n        if (data.position == 0) {\n          data.position = resetValue;\n          data.val = getNextValue(data.index++);\n        }\n        bits |= (resb>0 ? 1 : 0) * power;\n        power <<= 1;\n      }\n\n      switch (c = bits) {\n        case 0:\n          bits = 0;\n          maxpower = Math.pow(2,8);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n\n          dictionary[dictSize++] = f(bits);\n          c = dictSize-1;\n          enlargeIn--;\n          break;\n        case 1:\n          bits = 0;\n          maxpower = Math.pow(2,16);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n          dictionary[dictSize++] = f(bits);\n          c = dictSize-1;\n          enlargeIn--;\n          break;\n        case 2:\n          return result.join('');\n      }\n\n      if (enlargeIn == 0) {\n        enlargeIn = Math.pow(2, numBits);\n        numBits++;\n      }\n\n      if (dictionary[c]) {\n        entry = dictionary[c];\n      } else {\n        if (c === dictSize) {\n          entry = w + w.charAt(0);\n        } else {\n          return null;\n        }\n      }\n      result.push(entry);\n\n      // Add w+entry[0] to the dictionary.\n      dictionary[dictSize++] = w + entry.charAt(0);\n      enlargeIn--;\n\n      w = entry;\n\n      if (enlargeIn == 0) {\n        enlargeIn = Math.pow(2, numBits);\n        numBits++;\n      }\n\n    }\n  }\n};\n  return LZString;\n})();\n\nif (typeof define === 'function' && define.amd) {\n  define(function () { return LZString; });\n} else if( typeof module !== 'undefined' && module != null ) {\n  module.exports = LZString\n}\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n// This is CodeMirror (http://codemirror.net), a code editor\n// implemented in JavaScript on top of the browser's DOM.\n//\n// You can find some technical background for some of the code below\n// at http://marijnhaverbeke.nl/blog/#cm-internals .\n\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.CodeMirror = factory());\n}(this, (function () { 'use strict';\n\n// Kludges for bugs and behavior differences that can't be feature\n// detected are enabled based on userAgent etc sniffing.\nvar userAgent = navigator.userAgent;\nvar platform = navigator.platform;\n\nvar gecko = /gecko\\/\\d/i.test(userAgent);\nvar ie_upto10 = /MSIE \\d/.test(userAgent);\nvar ie_11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(userAgent);\nvar edge = /Edge\\/(\\d+)/.exec(userAgent);\nvar ie = ie_upto10 || ie_11up || edge;\nvar ie_version = ie && (ie_upto10 ? document.documentMode || 6 : +(edge || ie_11up)[1]);\nvar webkit = !edge && /WebKit\\//.test(userAgent);\nvar qtwebkit = webkit && /Qt\\/\\d+\\.\\d+/.test(userAgent);\nvar chrome = !edge && /Chrome\\//.test(userAgent);\nvar presto = /Opera\\//.test(userAgent);\nvar safari = /Apple Computer/.test(navigator.vendor);\nvar mac_geMountainLion = /Mac OS X 1\\d\\D([8-9]|\\d\\d)\\D/.test(userAgent);\nvar phantom = /PhantomJS/.test(userAgent);\n\nvar ios = !edge && /AppleWebKit/.test(userAgent) && /Mobile\\/\\w+/.test(userAgent);\nvar android = /Android/.test(userAgent);\n// This is woefully incomplete. Suggestions for alternative methods welcome.\nvar mobile = ios || android || /webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);\nvar mac = ios || /Mac/.test(platform);\nvar chromeOS = /\\bCrOS\\b/.test(userAgent);\nvar windows = /win/i.test(platform);\n\nvar presto_version = presto && userAgent.match(/Version\\/(\\d*\\.\\d*)/);\nif (presto_version) { presto_version = Number(presto_version[1]); }\nif (presto_version && presto_version >= 15) { presto = false; webkit = true; }\n// Some browsers use the wrong event properties to signal cmd/ctrl on OS X\nvar flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11));\nvar captureRightClick = gecko || (ie && ie_version >= 9);\n\nfunction classTest(cls) { return new RegExp(\"(^|\\\\s)\" + cls + \"(?:$|\\\\s)\\\\s*\") }\n\nvar rmClass = function(node, cls) {\n  var current = node.className;\n  var match = classTest(cls).exec(current);\n  if (match) {\n    var after = current.slice(match.index + match[0].length);\n    node.className = current.slice(0, match.index) + (after ? match[1] + after : \"\");\n  }\n};\n\nfunction removeChildren(e) {\n  for (var count = e.childNodes.length; count > 0; --count)\n    { e.removeChild(e.firstChild); }\n  return e\n}\n\nfunction removeChildrenAndAdd(parent, e) {\n  return removeChildren(parent).appendChild(e)\n}\n\nfunction elt(tag, content, className, style) {\n  var e = document.createElement(tag);\n  if (className) { e.className = className; }\n  if (style) { e.style.cssText = style; }\n  if (typeof content == \"string\") { e.appendChild(document.createTextNode(content)); }\n  else if (content) { for (var i = 0; i < content.length; ++i) { e.appendChild(content[i]); } }\n  return e\n}\n// wrapper for elt, which removes the elt from the accessibility tree\nfunction eltP(tag, content, className, style) {\n  var e = elt(tag, content, className, style);\n  e.setAttribute(\"role\", \"presentation\");\n  return e\n}\n\nvar range;\nif (document.createRange) { range = function(node, start, end, endNode) {\n  var r = document.createRange();\n  r.setEnd(endNode || node, end);\n  r.setStart(node, start);\n  return r\n}; }\nelse { range = function(node, start, end) {\n  var r = document.body.createTextRange();\n  try { r.moveToElementText(node.parentNode); }\n  catch(e) { return r }\n  r.collapse(true);\n  r.moveEnd(\"character\", end);\n  r.moveStart(\"character\", start);\n  return r\n}; }\n\nfunction contains(parent, child) {\n  if (child.nodeType == 3) // Android browser always returns false when child is a textnode\n    { child = child.parentNode; }\n  if (parent.contains)\n    { return parent.contains(child) }\n  do {\n    if (child.nodeType == 11) { child = child.host; }\n    if (child == parent) { return true }\n  } while (child = child.parentNode)\n}\n\nfunction activeElt() {\n  // IE and Edge may throw an \"Unspecified Error\" when accessing document.activeElement.\n  // IE < 10 will throw when accessed while the page is loading or in an iframe.\n  // IE > 9 and Edge will throw when accessed in an iframe if document.body is unavailable.\n  var activeElement;\n  try {\n    activeElement = document.activeElement;\n  } catch(e) {\n    activeElement = document.body || null;\n  }\n  while (activeElement && activeElement.shadowRoot && activeElement.shadowRoot.activeElement)\n    { activeElement = activeElement.shadowRoot.activeElement; }\n  return activeElement\n}\n\nfunction addClass(node, cls) {\n  var current = node.className;\n  if (!classTest(cls).test(current)) { node.className += (current ? \" \" : \"\") + cls; }\n}\nfunction joinClasses(a, b) {\n  var as = a.split(\" \");\n  for (var i = 0; i < as.length; i++)\n    { if (as[i] && !classTest(as[i]).test(b)) { b += \" \" + as[i]; } }\n  return b\n}\n\nvar selectInput = function(node) { node.select(); };\nif (ios) // Mobile Safari apparently has a bug where select() is broken.\n  { selectInput = function(node) { node.selectionStart = 0; node.selectionEnd = node.value.length; }; }\nelse if (ie) // Suppress mysterious IE10 errors\n  { selectInput = function(node) { try { node.select(); } catch(_e) {} }; }\n\nfunction bind(f) {\n  var args = Array.prototype.slice.call(arguments, 1);\n  return function(){return f.apply(null, args)}\n}\n\nfunction copyObj(obj, target, overwrite) {\n  if (!target) { target = {}; }\n  for (var prop in obj)\n    { if (obj.hasOwnProperty(prop) && (overwrite !== false || !target.hasOwnProperty(prop)))\n      { target[prop] = obj[prop]; } }\n  return target\n}\n\n// Counts the column offset in a string, taking tabs into account.\n// Used mostly to find indentation.\nfunction countColumn(string, end, tabSize, startIndex, startValue) {\n  if (end == null) {\n    end = string.search(/[^\\s\\u00a0]/);\n    if (end == -1) { end = string.length; }\n  }\n  for (var i = startIndex || 0, n = startValue || 0;;) {\n    var nextTab = string.indexOf(\"\\t\", i);\n    if (nextTab < 0 || nextTab >= end)\n      { return n + (end - i) }\n    n += nextTab - i;\n    n += tabSize - (n % tabSize);\n    i = nextTab + 1;\n  }\n}\n\nvar Delayed = function() {this.id = null;};\nDelayed.prototype.set = function (ms, f) {\n  clearTimeout(this.id);\n  this.id = setTimeout(f, ms);\n};\n\nfunction indexOf(array, elt) {\n  for (var i = 0; i < array.length; ++i)\n    { if (array[i] == elt) { return i } }\n  return -1\n}\n\n// Number of pixels added to scroller and sizer to hide scrollbar\nvar scrollerGap = 30;\n\n// Returned or thrown by various protocols to signal 'I'm not\n// handling this'.\nvar Pass = {toString: function(){return \"CodeMirror.Pass\"}};\n\n// Reused option objects for setSelection & friends\nvar sel_dontScroll = {scroll: false};\nvar sel_mouse = {origin: \"*mouse\"};\nvar sel_move = {origin: \"+move\"};\n\n// The inverse of countColumn -- find the offset that corresponds to\n// a particular column.\nfunction findColumn(string, goal, tabSize) {\n  for (var pos = 0, col = 0;;) {\n    var nextTab = string.indexOf(\"\\t\", pos);\n    if (nextTab == -1) { nextTab = string.length; }\n    var skipped = nextTab - pos;\n    if (nextTab == string.length || col + skipped >= goal)\n      { return pos + Math.min(skipped, goal - col) }\n    col += nextTab - pos;\n    col += tabSize - (col % tabSize);\n    pos = nextTab + 1;\n    if (col >= goal) { return pos }\n  }\n}\n\nvar spaceStrs = [\"\"];\nfunction spaceStr(n) {\n  while (spaceStrs.length <= n)\n    { spaceStrs.push(lst(spaceStrs) + \" \"); }\n  return spaceStrs[n]\n}\n\nfunction lst(arr) { return arr[arr.length-1] }\n\nfunction map(array, f) {\n  var out = [];\n  for (var i = 0; i < array.length; i++) { out[i] = f(array[i], i); }\n  return out\n}\n\nfunction insertSorted(array, value, score) {\n  var pos = 0, priority = score(value);\n  while (pos < array.length && score(array[pos]) <= priority) { pos++; }\n  array.splice(pos, 0, value);\n}\n\nfunction nothing() {}\n\nfunction createObj(base, props) {\n  var inst;\n  if (Object.create) {\n    inst = Object.create(base);\n  } else {\n    nothing.prototype = base;\n    inst = new nothing();\n  }\n  if (props) { copyObj(props, inst); }\n  return inst\n}\n\nvar nonASCIISingleCaseWordChar = /[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/;\nfunction isWordCharBasic(ch) {\n  return /\\w/.test(ch) || ch > \"\\x80\" &&\n    (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch))\n}\nfunction isWordChar(ch, helper) {\n  if (!helper) { return isWordCharBasic(ch) }\n  if (helper.source.indexOf(\"\\\\w\") > -1 && isWordCharBasic(ch)) { return true }\n  return helper.test(ch)\n}\n\nfunction isEmpty(obj) {\n  for (var n in obj) { if (obj.hasOwnProperty(n) && obj[n]) { return false } }\n  return true\n}\n\n// Extending unicode characters. A series of a non-extending char +\n// any number of extending chars is treated as a single unit as far\n// as editing and measuring is concerned. This is not fully correct,\n// since some scripts/fonts/browsers also treat other configurations\n// of code points as a group.\nvar extendingChars = /[\\u0300-\\u036f\\u0483-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065e\\u0670\\u06d6-\\u06dc\\u06de-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0900-\\u0902\\u093c\\u0941-\\u0948\\u094d\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2\\u09e3\\u0a01\\u0a02\\u0a3c\\u0a41\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70\\u0a71\\u0a75\\u0a81\\u0a82\\u0abc\\u0ac1-\\u0ac5\\u0ac7\\u0ac8\\u0acd\\u0ae2\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0d3e\\u0d41-\\u0d44\\u0d4d\\u0d57\\u0d62\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0f18\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86\\u0f87\\u0f90-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039\\u103a\\u103d\\u103e\\u1058\\u1059\\u105e-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108d\\u109d\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193b\\u1a17\\u1a18\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1b00-\\u1b03\\u1b34\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80\\u1b81\\u1ba2-\\u1ba5\\u1ba8\\u1ba9\\u1c2c-\\u1c33\\u1c36\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1dc0-\\u1de6\\u1dfd-\\u1dff\\u200c\\u200d\\u20d0-\\u20f0\\u2cef-\\u2cf1\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua66f-\\ua672\\ua67c\\ua67d\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua825\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc\\uaa29-\\uaa2e\\uaa31\\uaa32\\uaa35\\uaa36\\uaa43\\uaa4c\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uabe5\\uabe8\\uabed\\udc00-\\udfff\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\uff9e\\uff9f]/;\nfunction isExtendingChar(ch) { return ch.charCodeAt(0) >= 768 && extendingChars.test(ch) }\n\n// Returns a number from the range [`0`; `str.length`] unless `pos` is outside that range.\nfunction skipExtendingChars(str, pos, dir) {\n  while ((dir < 0 ? pos > 0 : pos < str.length) && isExtendingChar(str.charAt(pos))) { pos += dir; }\n  return pos\n}\n\n// Returns the value from the range [`from`; `to`] that satisfies\n// `pred` and is closest to `from`. Assumes that at least `to` satisfies `pred`.\nfunction findFirst(pred, from, to) {\n  for (;;) {\n    if (Math.abs(from - to) <= 1) { return pred(from) ? from : to }\n    var mid = Math.floor((from + to) / 2);\n    if (pred(mid)) { to = mid; }\n    else { from = mid; }\n  }\n}\n\n// The display handles the DOM integration, both for input reading\n// and content drawing. It holds references to DOM nodes and\n// display-related state.\n\nfunction Display(place, doc, input) {\n  var d = this;\n  this.input = input;\n\n  // Covers bottom-right square when both scrollbars are present.\n  d.scrollbarFiller = elt(\"div\", null, \"CodeMirror-scrollbar-filler\");\n  d.scrollbarFiller.setAttribute(\"cm-not-content\", \"true\");\n  // Covers bottom of gutter when coverGutterNextToScrollbar is on\n  // and h scrollbar is present.\n  d.gutterFiller = elt(\"div\", null, \"CodeMirror-gutter-filler\");\n  d.gutterFiller.setAttribute(\"cm-not-content\", \"true\");\n  // Will contain the actual code, positioned to cover the viewport.\n  d.lineDiv = eltP(\"div\", null, \"CodeMirror-code\");\n  // Elements are added to these to represent selection and cursors.\n  d.selectionDiv = elt(\"div\", null, null, \"position: relative; z-index: 1\");\n  d.cursorDiv = elt(\"div\", null, \"CodeMirror-cursors\");\n  // A visibility: hidden element used to find the size of things.\n  d.measure = elt(\"div\", null, \"CodeMirror-measure\");\n  // When lines outside of the viewport are measured, they are drawn in this.\n  d.lineMeasure = elt(\"div\", null, \"CodeMirror-measure\");\n  // Wraps everything that needs to exist inside the vertically-padded coordinate system\n  d.lineSpace = eltP(\"div\", [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv],\n                    null, \"position: relative; outline: none\");\n  var lines = eltP(\"div\", [d.lineSpace], \"CodeMirror-lines\");\n  // Moved around its parent to cover visible view.\n  d.mover = elt(\"div\", [lines], null, \"position: relative\");\n  // Set to the height of the document, allowing scrolling.\n  d.sizer = elt(\"div\", [d.mover], \"CodeMirror-sizer\");\n  d.sizerWidth = null;\n  // Behavior of elts with overflow: auto and padding is\n  // inconsistent across browsers. This is used to ensure the\n  // scrollable area is big enough.\n  d.heightForcer = elt(\"div\", null, null, \"position: absolute; height: \" + scrollerGap + \"px; width: 1px;\");\n  // Will contain the gutters, if any.\n  d.gutters = elt(\"div\", null, \"CodeMirror-gutters\");\n  d.lineGutter = null;\n  // Actual scrollable element.\n  d.scroller = elt(\"div\", [d.sizer, d.heightForcer, d.gutters], \"CodeMirror-scroll\");\n  d.scroller.setAttribute(\"tabIndex\", \"-1\");\n  // The element in which the editor lives.\n  d.wrapper = elt(\"div\", [d.scrollbarFiller, d.gutterFiller, d.scroller], \"CodeMirror\");\n\n  // Work around IE7 z-index bug (not perfect, hence IE7 not really being supported)\n  if (ie && ie_version < 8) { d.gutters.style.zIndex = -1; d.scroller.style.paddingRight = 0; }\n  if (!webkit && !(gecko && mobile)) { d.scroller.draggable = true; }\n\n  if (place) {\n    if (place.appendChild) { place.appendChild(d.wrapper); }\n    else { place(d.wrapper); }\n  }\n\n  // Current rendered range (may be bigger than the view window).\n  d.viewFrom = d.viewTo = doc.first;\n  d.reportedViewFrom = d.reportedViewTo = doc.first;\n  // Information about the rendered lines.\n  d.view = [];\n  d.renderedView = null;\n  // Holds info about a single rendered line when it was rendered\n  // for measurement, while not in view.\n  d.externalMeasured = null;\n  // Empty space (in pixels) above the view\n  d.viewOffset = 0;\n  d.lastWrapHeight = d.lastWrapWidth = 0;\n  d.updateLineNumbers = null;\n\n  d.nativeBarWidth = d.barHeight = d.barWidth = 0;\n  d.scrollbarsClipped = false;\n\n  // Used to only resize the line number gutter when necessary (when\n  // the amount of lines crosses a boundary that makes its width change)\n  d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null;\n  // Set to true when a non-horizontal-scrolling line widget is\n  // added. As an optimization, line widget aligning is skipped when\n  // this is false.\n  d.alignWidgets = false;\n\n  d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n\n  // Tracks the maximum line length so that the horizontal scrollbar\n  // can be kept static when scrolling.\n  d.maxLine = null;\n  d.maxLineLength = 0;\n  d.maxLineChanged = false;\n\n  // Used for measuring wheel scrolling granularity\n  d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null;\n\n  // True when shift is held down.\n  d.shift = false;\n\n  // Used to track whether anything happened since the context menu\n  // was opened.\n  d.selForContextMenu = null;\n\n  d.activeTouch = null;\n\n  input.init(d);\n}\n\n// Find the line object corresponding to the given line number.\nfunction getLine(doc, n) {\n  n -= doc.first;\n  if (n < 0 || n >= doc.size) { throw new Error(\"There is no line \" + (n + doc.first) + \" in the document.\") }\n  var chunk = doc;\n  while (!chunk.lines) {\n    for (var i = 0;; ++i) {\n      var child = chunk.children[i], sz = child.chunkSize();\n      if (n < sz) { chunk = child; break }\n      n -= sz;\n    }\n  }\n  return chunk.lines[n]\n}\n\n// Get the part of a document between two positions, as an array of\n// strings.\nfunction getBetween(doc, start, end) {\n  var out = [], n = start.line;\n  doc.iter(start.line, end.line + 1, function (line) {\n    var text = line.text;\n    if (n == end.line) { text = text.slice(0, end.ch); }\n    if (n == start.line) { text = text.slice(start.ch); }\n    out.push(text);\n    ++n;\n  });\n  return out\n}\n// Get the lines between from and to, as array of strings.\nfunction getLines(doc, from, to) {\n  var out = [];\n  doc.iter(from, to, function (line) { out.push(line.text); }); // iter aborts when callback returns truthy value\n  return out\n}\n\n// Update the height of a line, propagating the height change\n// upwards to parent nodes.\nfunction updateLineHeight(line, height) {\n  var diff = height - line.height;\n  if (diff) { for (var n = line; n; n = n.parent) { n.height += diff; } }\n}\n\n// Given a line object, find its line number by walking up through\n// its parent links.\nfunction lineNo(line) {\n  if (line.parent == null) { return null }\n  var cur = line.parent, no = indexOf(cur.lines, line);\n  for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {\n    for (var i = 0;; ++i) {\n      if (chunk.children[i] == cur) { break }\n      no += chunk.children[i].chunkSize();\n    }\n  }\n  return no + cur.first\n}\n\n// Find the line at the given vertical position, using the height\n// information in the document tree.\nfunction lineAtHeight(chunk, h) {\n  var n = chunk.first;\n  outer: do {\n    for (var i$1 = 0; i$1 < chunk.children.length; ++i$1) {\n      var child = chunk.children[i$1], ch = child.height;\n      if (h < ch) { chunk = child; continue outer }\n      h -= ch;\n      n += child.chunkSize();\n    }\n    return n\n  } while (!chunk.lines)\n  var i = 0;\n  for (; i < chunk.lines.length; ++i) {\n    var line = chunk.lines[i], lh = line.height;\n    if (h < lh) { break }\n    h -= lh;\n  }\n  return n + i\n}\n\nfunction isLine(doc, l) {return l >= doc.first && l < doc.first + doc.size}\n\nfunction lineNumberFor(options, i) {\n  return String(options.lineNumberFormatter(i + options.firstLineNumber))\n}\n\n// A Pos instance represents a position within the text.\nfunction Pos(line, ch, sticky) {\n  if ( sticky === void 0 ) sticky = null;\n\n  if (!(this instanceof Pos)) { return new Pos(line, ch, sticky) }\n  this.line = line;\n  this.ch = ch;\n  this.sticky = sticky;\n}\n\n// Compare two positions, return 0 if they are the same, a negative\n// number when a is less, and a positive number otherwise.\nfunction cmp(a, b) { return a.line - b.line || a.ch - b.ch }\n\nfunction equalCursorPos(a, b) { return a.sticky == b.sticky && cmp(a, b) == 0 }\n\nfunction copyPos(x) {return Pos(x.line, x.ch)}\nfunction maxPos(a, b) { return cmp(a, b) < 0 ? b : a }\nfunction minPos(a, b) { return cmp(a, b) < 0 ? a : b }\n\n// Most of the external API clips given positions to make sure they\n// actually exist within the document.\nfunction clipLine(doc, n) {return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1))}\nfunction clipPos(doc, pos) {\n  if (pos.line < doc.first) { return Pos(doc.first, 0) }\n  var last = doc.first + doc.size - 1;\n  if (pos.line > last) { return Pos(last, getLine(doc, last).text.length) }\n  return clipToLen(pos, getLine(doc, pos.line).text.length)\n}\nfunction clipToLen(pos, linelen) {\n  var ch = pos.ch;\n  if (ch == null || ch > linelen) { return Pos(pos.line, linelen) }\n  else if (ch < 0) { return Pos(pos.line, 0) }\n  else { return pos }\n}\nfunction clipPosArray(doc, array) {\n  var out = [];\n  for (var i = 0; i < array.length; i++) { out[i] = clipPos(doc, array[i]); }\n  return out\n}\n\n// Optimize some code when these features are not used.\nvar sawReadOnlySpans = false;\nvar sawCollapsedSpans = false;\n\nfunction seeReadOnlySpans() {\n  sawReadOnlySpans = true;\n}\n\nfunction seeCollapsedSpans() {\n  sawCollapsedSpans = true;\n}\n\n// TEXTMARKER SPANS\n\nfunction MarkedSpan(marker, from, to) {\n  this.marker = marker;\n  this.from = from; this.to = to;\n}\n\n// Search an array of spans for a span matching the given marker.\nfunction getMarkedSpanFor(spans, marker) {\n  if (spans) { for (var i = 0; i < spans.length; ++i) {\n    var span = spans[i];\n    if (span.marker == marker) { return span }\n  } }\n}\n// Remove a span from an array, returning undefined if no spans are\n// left (we don't store arrays for lines without spans).\nfunction removeMarkedSpan(spans, span) {\n  var r;\n  for (var i = 0; i < spans.length; ++i)\n    { if (spans[i] != span) { (r || (r = [])).push(spans[i]); } }\n  return r\n}\n// Add a span to a line.\nfunction addMarkedSpan(line, span) {\n  line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span];\n  span.marker.attachLine(line);\n}\n\n// Used for the algorithm that adjusts markers for a change in the\n// document. These functions cut an array of spans at a given\n// character position, returning an array of remaining chunks (or\n// undefined if nothing remains).\nfunction markedSpansBefore(old, startCh, isInsert) {\n  var nw;\n  if (old) { for (var i = 0; i < old.length; ++i) {\n    var span = old[i], marker = span.marker;\n    var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh);\n    if (startsBefore || span.from == startCh && marker.type == \"bookmark\" && (!isInsert || !span.marker.insertLeft)) {\n      var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh);(nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to));\n    }\n  } }\n  return nw\n}\nfunction markedSpansAfter(old, endCh, isInsert) {\n  var nw;\n  if (old) { for (var i = 0; i < old.length; ++i) {\n    var span = old[i], marker = span.marker;\n    var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh);\n    if (endsAfter || span.from == endCh && marker.type == \"bookmark\" && (!isInsert || span.marker.insertLeft)) {\n      var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh);(nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh,\n                                            span.to == null ? null : span.to - endCh));\n    }\n  } }\n  return nw\n}\n\n// Given a change object, compute the new set of marker spans that\n// cover the line in which the change took place. Removes spans\n// entirely within the change, reconnects spans belonging to the\n// same marker that appear on both sides of the change, and cuts off\n// spans partially within the change. Returns an array of span\n// arrays with one element for each line in (after) the change.\nfunction stretchSpansOverChange(doc, change) {\n  if (change.full) { return null }\n  var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans;\n  var oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans;\n  if (!oldFirst && !oldLast) { return null }\n\n  var startCh = change.from.ch, endCh = change.to.ch, isInsert = cmp(change.from, change.to) == 0;\n  // Get the spans that 'stick out' on both sides\n  var first = markedSpansBefore(oldFirst, startCh, isInsert);\n  var last = markedSpansAfter(oldLast, endCh, isInsert);\n\n  // Next, merge those two ends\n  var sameLine = change.text.length == 1, offset = lst(change.text).length + (sameLine ? startCh : 0);\n  if (first) {\n    // Fix up .to properties of first\n    for (var i = 0; i < first.length; ++i) {\n      var span = first[i];\n      if (span.to == null) {\n        var found = getMarkedSpanFor(last, span.marker);\n        if (!found) { span.to = startCh; }\n        else if (sameLine) { span.to = found.to == null ? null : found.to + offset; }\n      }\n    }\n  }\n  if (last) {\n    // Fix up .from in last (or move them into first in case of sameLine)\n    for (var i$1 = 0; i$1 < last.length; ++i$1) {\n      var span$1 = last[i$1];\n      if (span$1.to != null) { span$1.to += offset; }\n      if (span$1.from == null) {\n        var found$1 = getMarkedSpanFor(first, span$1.marker);\n        if (!found$1) {\n          span$1.from = offset;\n          if (sameLine) { (first || (first = [])).push(span$1); }\n        }\n      } else {\n        span$1.from += offset;\n        if (sameLine) { (first || (first = [])).push(span$1); }\n      }\n    }\n  }\n  // Make sure we didn't create any zero-length spans\n  if (first) { first = clearEmptySpans(first); }\n  if (last && last != first) { last = clearEmptySpans(last); }\n\n  var newMarkers = [first];\n  if (!sameLine) {\n    // Fill gap with whole-line-spans\n    var gap = change.text.length - 2, gapMarkers;\n    if (gap > 0 && first)\n      { for (var i$2 = 0; i$2 < first.length; ++i$2)\n        { if (first[i$2].to == null)\n          { (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i$2].marker, null, null)); } } }\n    for (var i$3 = 0; i$3 < gap; ++i$3)\n      { newMarkers.push(gapMarkers); }\n    newMarkers.push(last);\n  }\n  return newMarkers\n}\n\n// Remove spans that are empty and don't have a clearWhenEmpty\n// option of false.\nfunction clearEmptySpans(spans) {\n  for (var i = 0; i < spans.length; ++i) {\n    var span = spans[i];\n    if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false)\n      { spans.splice(i--, 1); }\n  }\n  if (!spans.length) { return null }\n  return spans\n}\n\n// Used to 'clip' out readOnly ranges when making a change.\nfunction removeReadOnlyRanges(doc, from, to) {\n  var markers = null;\n  doc.iter(from.line, to.line + 1, function (line) {\n    if (line.markedSpans) { for (var i = 0; i < line.markedSpans.length; ++i) {\n      var mark = line.markedSpans[i].marker;\n      if (mark.readOnly && (!markers || indexOf(markers, mark) == -1))\n        { (markers || (markers = [])).push(mark); }\n    } }\n  });\n  if (!markers) { return null }\n  var parts = [{from: from, to: to}];\n  for (var i = 0; i < markers.length; ++i) {\n    var mk = markers[i], m = mk.find(0);\n    for (var j = 0; j < parts.length; ++j) {\n      var p = parts[j];\n      if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0) { continue }\n      var newParts = [j, 1], dfrom = cmp(p.from, m.from), dto = cmp(p.to, m.to);\n      if (dfrom < 0 || !mk.inclusiveLeft && !dfrom)\n        { newParts.push({from: p.from, to: m.from}); }\n      if (dto > 0 || !mk.inclusiveRight && !dto)\n        { newParts.push({from: m.to, to: p.to}); }\n      parts.splice.apply(parts, newParts);\n      j += newParts.length - 3;\n    }\n  }\n  return parts\n}\n\n// Connect or disconnect spans from a line.\nfunction detachMarkedSpans(line) {\n  var spans = line.markedSpans;\n  if (!spans) { return }\n  for (var i = 0; i < spans.length; ++i)\n    { spans[i].marker.detachLine(line); }\n  line.markedSpans = null;\n}\nfunction attachMarkedSpans(line, spans) {\n  if (!spans) { return }\n  for (var i = 0; i < spans.length; ++i)\n    { spans[i].marker.attachLine(line); }\n  line.markedSpans = spans;\n}\n\n// Helpers used when computing which overlapping collapsed span\n// counts as the larger one.\nfunction extraLeft(marker) { return marker.inclusiveLeft ? -1 : 0 }\nfunction extraRight(marker) { return marker.inclusiveRight ? 1 : 0 }\n\n// Returns a number indicating which of two overlapping collapsed\n// spans is larger (and thus includes the other). Falls back to\n// comparing ids when the spans cover exactly the same range.\nfunction compareCollapsedMarkers(a, b) {\n  var lenDiff = a.lines.length - b.lines.length;\n  if (lenDiff != 0) { return lenDiff }\n  var aPos = a.find(), bPos = b.find();\n  var fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b);\n  if (fromCmp) { return -fromCmp }\n  var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b);\n  if (toCmp) { return toCmp }\n  return b.id - a.id\n}\n\n// Find out whether a line ends or starts in a collapsed span. If\n// so, return the marker for that span.\nfunction collapsedSpanAtSide(line, start) {\n  var sps = sawCollapsedSpans && line.markedSpans, found;\n  if (sps) { for (var sp = (void 0), i = 0; i < sps.length; ++i) {\n    sp = sps[i];\n    if (sp.marker.collapsed && (start ? sp.from : sp.to) == null &&\n        (!found || compareCollapsedMarkers(found, sp.marker) < 0))\n      { found = sp.marker; }\n  } }\n  return found\n}\nfunction collapsedSpanAtStart(line) { return collapsedSpanAtSide(line, true) }\nfunction collapsedSpanAtEnd(line) { return collapsedSpanAtSide(line, false) }\n\n// Test whether there exists a collapsed span that partially\n// overlaps (covers the start or end, but not both) of a new span.\n// Such overlap is not allowed.\nfunction conflictingCollapsedRange(doc, lineNo$$1, from, to, marker) {\n  var line = getLine(doc, lineNo$$1);\n  var sps = sawCollapsedSpans && line.markedSpans;\n  if (sps) { for (var i = 0; i < sps.length; ++i) {\n    var sp = sps[i];\n    if (!sp.marker.collapsed) { continue }\n    var found = sp.marker.find(0);\n    var fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker);\n    var toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker);\n    if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0) { continue }\n    if (fromCmp <= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.to, from) >= 0 : cmp(found.to, from) > 0) ||\n        fromCmp >= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.from, to) <= 0 : cmp(found.from, to) < 0))\n      { return true }\n  } }\n}\n\n// A visual line is a line as drawn on the screen. Folding, for\n// example, can cause multiple logical lines to appear on the same\n// visual line. This finds the start of the visual line that the\n// given line is part of (usually that is the line itself).\nfunction visualLine(line) {\n  var merged;\n  while (merged = collapsedSpanAtStart(line))\n    { line = merged.find(-1, true).line; }\n  return line\n}\n\nfunction visualLineEnd(line) {\n  var merged;\n  while (merged = collapsedSpanAtEnd(line))\n    { line = merged.find(1, true).line; }\n  return line\n}\n\n// Returns an array of logical lines that continue the visual line\n// started by the argument, or undefined if there are no such lines.\nfunction visualLineContinued(line) {\n  var merged, lines;\n  while (merged = collapsedSpanAtEnd(line)) {\n    line = merged.find(1, true).line\n    ;(lines || (lines = [])).push(line);\n  }\n  return lines\n}\n\n// Get the line number of the start of the visual line that the\n// given line number is part of.\nfunction visualLineNo(doc, lineN) {\n  var line = getLine(doc, lineN), vis = visualLine(line);\n  if (line == vis) { return lineN }\n  return lineNo(vis)\n}\n\n// Get the line number of the start of the next visual line after\n// the given line.\nfunction visualLineEndNo(doc, lineN) {\n  if (lineN > doc.lastLine()) { return lineN }\n  var line = getLine(doc, lineN), merged;\n  if (!lineIsHidden(doc, line)) { return lineN }\n  while (merged = collapsedSpanAtEnd(line))\n    { line = merged.find(1, true).line; }\n  return lineNo(line) + 1\n}\n\n// Compute whether a line is hidden. Lines count as hidden when they\n// are part of a visual line that starts with another line, or when\n// they are entirely covered by collapsed, non-widget span.\nfunction lineIsHidden(doc, line) {\n  var sps = sawCollapsedSpans && line.markedSpans;\n  if (sps) { for (var sp = (void 0), i = 0; i < sps.length; ++i) {\n    sp = sps[i];\n    if (!sp.marker.collapsed) { continue }\n    if (sp.from == null) { return true }\n    if (sp.marker.widgetNode) { continue }\n    if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp))\n      { return true }\n  } }\n}\nfunction lineIsHiddenInner(doc, line, span) {\n  if (span.to == null) {\n    var end = span.marker.find(1, true);\n    return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker))\n  }\n  if (span.marker.inclusiveRight && span.to == line.text.length)\n    { return true }\n  for (var sp = (void 0), i = 0; i < line.markedSpans.length; ++i) {\n    sp = line.markedSpans[i];\n    if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to &&\n        (sp.to == null || sp.to != span.from) &&\n        (sp.marker.inclusiveLeft || span.marker.inclusiveRight) &&\n        lineIsHiddenInner(doc, line, sp)) { return true }\n  }\n}\n\n// Find the height above the given line.\nfunction heightAtLine(lineObj) {\n  lineObj = visualLine(lineObj);\n\n  var h = 0, chunk = lineObj.parent;\n  for (var i = 0; i < chunk.lines.length; ++i) {\n    var line = chunk.lines[i];\n    if (line == lineObj) { break }\n    else { h += line.height; }\n  }\n  for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {\n    for (var i$1 = 0; i$1 < p.children.length; ++i$1) {\n      var cur = p.children[i$1];\n      if (cur == chunk) { break }\n      else { h += cur.height; }\n    }\n  }\n  return h\n}\n\n// Compute the character length of a line, taking into account\n// collapsed ranges (see markText) that might hide parts, and join\n// other lines onto it.\nfunction lineLength(line) {\n  if (line.height == 0) { return 0 }\n  var len = line.text.length, merged, cur = line;\n  while (merged = collapsedSpanAtStart(cur)) {\n    var found = merged.find(0, true);\n    cur = found.from.line;\n    len += found.from.ch - found.to.ch;\n  }\n  cur = line;\n  while (merged = collapsedSpanAtEnd(cur)) {\n    var found$1 = merged.find(0, true);\n    len -= cur.text.length - found$1.from.ch;\n    cur = found$1.to.line;\n    len += cur.text.length - found$1.to.ch;\n  }\n  return len\n}\n\n// Find the longest line in the document.\nfunction findMaxLine(cm) {\n  var d = cm.display, doc = cm.doc;\n  d.maxLine = getLine(doc, doc.first);\n  d.maxLineLength = lineLength(d.maxLine);\n  d.maxLineChanged = true;\n  doc.iter(function (line) {\n    var len = lineLength(line);\n    if (len > d.maxLineLength) {\n      d.maxLineLength = len;\n      d.maxLine = line;\n    }\n  });\n}\n\n// BIDI HELPERS\n\nfunction iterateBidiSections(order, from, to, f) {\n  if (!order) { return f(from, to, \"ltr\") }\n  var found = false;\n  for (var i = 0; i < order.length; ++i) {\n    var part = order[i];\n    if (part.from < to && part.to > from || from == to && part.to == from) {\n      f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? \"rtl\" : \"ltr\");\n      found = true;\n    }\n  }\n  if (!found) { f(from, to, \"ltr\"); }\n}\n\nvar bidiOther = null;\nfunction getBidiPartAt(order, ch, sticky) {\n  var found;\n  bidiOther = null;\n  for (var i = 0; i < order.length; ++i) {\n    var cur = order[i];\n    if (cur.from < ch && cur.to > ch) { return i }\n    if (cur.to == ch) {\n      if (cur.from != cur.to && sticky == \"before\") { found = i; }\n      else { bidiOther = i; }\n    }\n    if (cur.from == ch) {\n      if (cur.from != cur.to && sticky != \"before\") { found = i; }\n      else { bidiOther = i; }\n    }\n  }\n  return found != null ? found : bidiOther\n}\n\n// Bidirectional ordering algorithm\n// See http://unicode.org/reports/tr9/tr9-13.html for the algorithm\n// that this (partially) implements.\n\n// One-char codes used for character types:\n// L (L):   Left-to-Right\n// R (R):   Right-to-Left\n// r (AL):  Right-to-Left Arabic\n// 1 (EN):  European Number\n// + (ES):  European Number Separator\n// % (ET):  European Number Terminator\n// n (AN):  Arabic Number\n// , (CS):  Common Number Separator\n// m (NSM): Non-Spacing Mark\n// b (BN):  Boundary Neutral\n// s (B):   Paragraph Separator\n// t (S):   Segment Separator\n// w (WS):  Whitespace\n// N (ON):  Other Neutrals\n\n// Returns null if characters are ordered as they appear\n// (left-to-right), or an array of sections ({from, to, level}\n// objects) in the order in which they occur visually.\nvar bidiOrdering = (function() {\n  // Character types for codepoints 0 to 0xff\n  var lowTypes = \"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN\";\n  // Character types for codepoints 0x600 to 0x6f9\n  var arabicTypes = \"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111\";\n  function charType(code) {\n    if (code <= 0xf7) { return lowTypes.charAt(code) }\n    else if (0x590 <= code && code <= 0x5f4) { return \"R\" }\n    else if (0x600 <= code && code <= 0x6f9) { return arabicTypes.charAt(code - 0x600) }\n    else if (0x6ee <= code && code <= 0x8ac) { return \"r\" }\n    else if (0x2000 <= code && code <= 0x200b) { return \"w\" }\n    else if (code == 0x200c) { return \"b\" }\n    else { return \"L\" }\n  }\n\n  var bidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/;\n  var isNeutral = /[stwN]/, isStrong = /[LRr]/, countsAsLeft = /[Lb1n]/, countsAsNum = /[1n]/;\n\n  function BidiSpan(level, from, to) {\n    this.level = level;\n    this.from = from; this.to = to;\n  }\n\n  return function(str, direction) {\n    var outerType = direction == \"ltr\" ? \"L\" : \"R\";\n\n    if (str.length == 0 || direction == \"ltr\" && !bidiRE.test(str)) { return false }\n    var len = str.length, types = [];\n    for (var i = 0; i < len; ++i)\n      { types.push(charType(str.charCodeAt(i))); }\n\n    // W1. Examine each non-spacing mark (NSM) in the level run, and\n    // change the type of the NSM to the type of the previous\n    // character. If the NSM is at the start of the level run, it will\n    // get the type of sor.\n    for (var i$1 = 0, prev = outerType; i$1 < len; ++i$1) {\n      var type = types[i$1];\n      if (type == \"m\") { types[i$1] = prev; }\n      else { prev = type; }\n    }\n\n    // W2. Search backwards from each instance of a European number\n    // until the first strong type (R, L, AL, or sor) is found. If an\n    // AL is found, change the type of the European number to Arabic\n    // number.\n    // W3. Change all ALs to R.\n    for (var i$2 = 0, cur = outerType; i$2 < len; ++i$2) {\n      var type$1 = types[i$2];\n      if (type$1 == \"1\" && cur == \"r\") { types[i$2] = \"n\"; }\n      else if (isStrong.test(type$1)) { cur = type$1; if (type$1 == \"r\") { types[i$2] = \"R\"; } }\n    }\n\n    // W4. A single European separator between two European numbers\n    // changes to a European number. A single common separator between\n    // two numbers of the same type changes to that type.\n    for (var i$3 = 1, prev$1 = types[0]; i$3 < len - 1; ++i$3) {\n      var type$2 = types[i$3];\n      if (type$2 == \"+\" && prev$1 == \"1\" && types[i$3+1] == \"1\") { types[i$3] = \"1\"; }\n      else if (type$2 == \",\" && prev$1 == types[i$3+1] &&\n               (prev$1 == \"1\" || prev$1 == \"n\")) { types[i$3] = prev$1; }\n      prev$1 = type$2;\n    }\n\n    // W5. A sequence of European terminators adjacent to European\n    // numbers changes to all European numbers.\n    // W6. Otherwise, separators and terminators change to Other\n    // Neutral.\n    for (var i$4 = 0; i$4 < len; ++i$4) {\n      var type$3 = types[i$4];\n      if (type$3 == \",\") { types[i$4] = \"N\"; }\n      else if (type$3 == \"%\") {\n        var end = (void 0);\n        for (end = i$4 + 1; end < len && types[end] == \"%\"; ++end) {}\n        var replace = (i$4 && types[i$4-1] == \"!\") || (end < len && types[end] == \"1\") ? \"1\" : \"N\";\n        for (var j = i$4; j < end; ++j) { types[j] = replace; }\n        i$4 = end - 1;\n      }\n    }\n\n    // W7. Search backwards from each instance of a European number\n    // until the first strong type (R, L, or sor) is found. If an L is\n    // found, then change the type of the European number to L.\n    for (var i$5 = 0, cur$1 = outerType; i$5 < len; ++i$5) {\n      var type$4 = types[i$5];\n      if (cur$1 == \"L\" && type$4 == \"1\") { types[i$5] = \"L\"; }\n      else if (isStrong.test(type$4)) { cur$1 = type$4; }\n    }\n\n    // N1. A sequence of neutrals takes the direction of the\n    // surrounding strong text if the text on both sides has the same\n    // direction. European and Arabic numbers act as if they were R in\n    // terms of their influence on neutrals. Start-of-level-run (sor)\n    // and end-of-level-run (eor) are used at level run boundaries.\n    // N2. Any remaining neutrals take the embedding direction.\n    for (var i$6 = 0; i$6 < len; ++i$6) {\n      if (isNeutral.test(types[i$6])) {\n        var end$1 = (void 0);\n        for (end$1 = i$6 + 1; end$1 < len && isNeutral.test(types[end$1]); ++end$1) {}\n        var before = (i$6 ? types[i$6-1] : outerType) == \"L\";\n        var after = (end$1 < len ? types[end$1] : outerType) == \"L\";\n        var replace$1 = before == after ? (before ? \"L\" : \"R\") : outerType;\n        for (var j$1 = i$6; j$1 < end$1; ++j$1) { types[j$1] = replace$1; }\n        i$6 = end$1 - 1;\n      }\n    }\n\n    // Here we depart from the documented algorithm, in order to avoid\n    // building up an actual levels array. Since there are only three\n    // levels (0, 1, 2) in an implementation that doesn't take\n    // explicit embedding into account, we can build up the order on\n    // the fly, without following the level-based algorithm.\n    var order = [], m;\n    for (var i$7 = 0; i$7 < len;) {\n      if (countsAsLeft.test(types[i$7])) {\n        var start = i$7;\n        for (++i$7; i$7 < len && countsAsLeft.test(types[i$7]); ++i$7) {}\n        order.push(new BidiSpan(0, start, i$7));\n      } else {\n        var pos = i$7, at = order.length;\n        for (++i$7; i$7 < len && types[i$7] != \"L\"; ++i$7) {}\n        for (var j$2 = pos; j$2 < i$7;) {\n          if (countsAsNum.test(types[j$2])) {\n            if (pos < j$2) { order.splice(at, 0, new BidiSpan(1, pos, j$2)); }\n            var nstart = j$2;\n            for (++j$2; j$2 < i$7 && countsAsNum.test(types[j$2]); ++j$2) {}\n            order.splice(at, 0, new BidiSpan(2, nstart, j$2));\n            pos = j$2;\n          } else { ++j$2; }\n        }\n        if (pos < i$7) { order.splice(at, 0, new BidiSpan(1, pos, i$7)); }\n      }\n    }\n    if (order[0].level == 1 && (m = str.match(/^\\s+/))) {\n      order[0].from = m[0].length;\n      order.unshift(new BidiSpan(0, 0, m[0].length));\n    }\n    if (lst(order).level == 1 && (m = str.match(/\\s+$/))) {\n      lst(order).to -= m[0].length;\n      order.push(new BidiSpan(0, len - m[0].length, len));\n    }\n\n    return direction == \"rtl\" ? order.reverse() : order\n  }\n})();\n\n// Get the bidi ordering for the given line (and cache it). Returns\n// false for lines that are fully left-to-right, and an array of\n// BidiSpan objects otherwise.\nfunction getOrder(line, direction) {\n  var order = line.order;\n  if (order == null) { order = line.order = bidiOrdering(line.text, direction); }\n  return order\n}\n\nfunction moveCharLogically(line, ch, dir) {\n  var target = skipExtendingChars(line.text, ch + dir, dir);\n  return target < 0 || target > line.text.length ? null : target\n}\n\nfunction moveLogically(line, start, dir) {\n  var ch = moveCharLogically(line, start.ch, dir);\n  return ch == null ? null : new Pos(start.line, ch, dir < 0 ? \"after\" : \"before\")\n}\n\nfunction endOfLine(visually, cm, lineObj, lineNo, dir) {\n  if (visually) {\n    var order = getOrder(lineObj, cm.doc.direction);\n    if (order) {\n      var part = dir < 0 ? lst(order) : order[0];\n      var moveInStorageOrder = (dir < 0) == (part.level == 1);\n      var sticky = moveInStorageOrder ? \"after\" : \"before\";\n      var ch;\n      // With a wrapped rtl chunk (possibly spanning multiple bidi parts),\n      // it could be that the last bidi part is not on the last visual line,\n      // since visual lines contain content order-consecutive chunks.\n      // Thus, in rtl, we are looking for the first (content-order) character\n      // in the rtl chunk that is on the last line (that is, the same line\n      // as the last (content-order) character).\n      if (part.level > 0) {\n        var prep = prepareMeasureForLine(cm, lineObj);\n        ch = dir < 0 ? lineObj.text.length - 1 : 0;\n        var targetTop = measureCharPrepared(cm, prep, ch).top;\n        ch = findFirst(function (ch) { return measureCharPrepared(cm, prep, ch).top == targetTop; }, (dir < 0) == (part.level == 1) ? part.from : part.to - 1, ch);\n        if (sticky == \"before\") { ch = moveCharLogically(lineObj, ch, 1); }\n      } else { ch = dir < 0 ? part.to : part.from; }\n      return new Pos(lineNo, ch, sticky)\n    }\n  }\n  return new Pos(lineNo, dir < 0 ? lineObj.text.length : 0, dir < 0 ? \"before\" : \"after\")\n}\n\nfunction moveVisually(cm, line, start, dir) {\n  var bidi = getOrder(line, cm.doc.direction);\n  if (!bidi) { return moveLogically(line, start, dir) }\n  if (start.ch >= line.text.length) {\n    start.ch = line.text.length;\n    start.sticky = \"before\";\n  } else if (start.ch <= 0) {\n    start.ch = 0;\n    start.sticky = \"after\";\n  }\n  var partPos = getBidiPartAt(bidi, start.ch, start.sticky), part = bidi[partPos];\n  if (cm.doc.direction == \"ltr\" && part.level % 2 == 0 && (dir > 0 ? part.to > start.ch : part.from < start.ch)) {\n    // Case 1: We move within an ltr part in an ltr editor. Even with wrapped lines,\n    // nothing interesting happens.\n    return moveLogically(line, start, dir)\n  }\n\n  var mv = function (pos, dir) { return moveCharLogically(line, pos instanceof Pos ? pos.ch : pos, dir); };\n  var prep;\n  var getWrappedLineExtent = function (ch) {\n    if (!cm.options.lineWrapping) { return {begin: 0, end: line.text.length} }\n    prep = prep || prepareMeasureForLine(cm, line);\n    return wrappedLineExtentChar(cm, line, prep, ch)\n  };\n  var wrappedLineExtent = getWrappedLineExtent(start.sticky == \"before\" ? mv(start, -1) : start.ch);\n\n  if (cm.doc.direction == \"rtl\" || part.level == 1) {\n    var moveInStorageOrder = (part.level == 1) == (dir < 0);\n    var ch = mv(start, moveInStorageOrder ? 1 : -1);\n    if (ch != null && (!moveInStorageOrder ? ch >= part.from && ch >= wrappedLineExtent.begin : ch <= part.to && ch <= wrappedLineExtent.end)) {\n      // Case 2: We move within an rtl part or in an rtl editor on the same visual line\n      var sticky = moveInStorageOrder ? \"before\" : \"after\";\n      return new Pos(start.line, ch, sticky)\n    }\n  }\n\n  // Case 3: Could not move within this bidi part in this visual line, so leave\n  // the current bidi part\n\n  var searchInVisualLine = function (partPos, dir, wrappedLineExtent) {\n    var getRes = function (ch, moveInStorageOrder) { return moveInStorageOrder\n      ? new Pos(start.line, mv(ch, 1), \"before\")\n      : new Pos(start.line, ch, \"after\"); };\n\n    for (; partPos >= 0 && partPos < bidi.length; partPos += dir) {\n      var part = bidi[partPos];\n      var moveInStorageOrder = (dir > 0) == (part.level != 1);\n      var ch = moveInStorageOrder ? wrappedLineExtent.begin : mv(wrappedLineExtent.end, -1);\n      if (part.from <= ch && ch < part.to) { return getRes(ch, moveInStorageOrder) }\n      ch = moveInStorageOrder ? part.from : mv(part.to, -1);\n      if (wrappedLineExtent.begin <= ch && ch < wrappedLineExtent.end) { return getRes(ch, moveInStorageOrder) }\n    }\n  };\n\n  // Case 3a: Look for other bidi parts on the same visual line\n  var res = searchInVisualLine(partPos + dir, dir, wrappedLineExtent);\n  if (res) { return res }\n\n  // Case 3b: Look for other bidi parts on the next visual line\n  var nextCh = dir > 0 ? wrappedLineExtent.end : mv(wrappedLineExtent.begin, -1);\n  if (nextCh != null && !(dir > 0 && nextCh == line.text.length)) {\n    res = searchInVisualLine(dir > 0 ? 0 : bidi.length - 1, dir, getWrappedLineExtent(nextCh));\n    if (res) { return res }\n  }\n\n  // Case 4: Nowhere to move\n  return null\n}\n\n// EVENT HANDLING\n\n// Lightweight event framework. on/off also work on DOM nodes,\n// registering native DOM handlers.\n\nvar noHandlers = [];\n\nvar on = function(emitter, type, f) {\n  if (emitter.addEventListener) {\n    emitter.addEventListener(type, f, false);\n  } else if (emitter.attachEvent) {\n    emitter.attachEvent(\"on\" + type, f);\n  } else {\n    var map$$1 = emitter._handlers || (emitter._handlers = {});\n    map$$1[type] = (map$$1[type] || noHandlers).concat(f);\n  }\n};\n\nfunction getHandlers(emitter, type) {\n  return emitter._handlers && emitter._handlers[type] || noHandlers\n}\n\nfunction off(emitter, type, f) {\n  if (emitter.removeEventListener) {\n    emitter.removeEventListener(type, f, false);\n  } else if (emitter.detachEvent) {\n    emitter.detachEvent(\"on\" + type, f);\n  } else {\n    var map$$1 = emitter._handlers, arr = map$$1 && map$$1[type];\n    if (arr) {\n      var index = indexOf(arr, f);\n      if (index > -1)\n        { map$$1[type] = arr.slice(0, index).concat(arr.slice(index + 1)); }\n    }\n  }\n}\n\nfunction signal(emitter, type /*, values...*/) {\n  var handlers = getHandlers(emitter, type);\n  if (!handlers.length) { return }\n  var args = Array.prototype.slice.call(arguments, 2);\n  for (var i = 0; i < handlers.length; ++i) { handlers[i].apply(null, args); }\n}\n\n// The DOM events that CodeMirror handles can be overridden by\n// registering a (non-DOM) handler on the editor for the event name,\n// and preventDefault-ing the event in that handler.\nfunction signalDOMEvent(cm, e, override) {\n  if (typeof e == \"string\")\n    { e = {type: e, preventDefault: function() { this.defaultPrevented = true; }}; }\n  signal(cm, override || e.type, cm, e);\n  return e_defaultPrevented(e) || e.codemirrorIgnore\n}\n\nfunction signalCursorActivity(cm) {\n  var arr = cm._handlers && cm._handlers.cursorActivity;\n  if (!arr) { return }\n  var set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = []);\n  for (var i = 0; i < arr.length; ++i) { if (indexOf(set, arr[i]) == -1)\n    { set.push(arr[i]); } }\n}\n\nfunction hasHandler(emitter, type) {\n  return getHandlers(emitter, type).length > 0\n}\n\n// Add on and off methods to a constructor's prototype, to make\n// registering events on such objects more convenient.\nfunction eventMixin(ctor) {\n  ctor.prototype.on = function(type, f) {on(this, type, f);};\n  ctor.prototype.off = function(type, f) {off(this, type, f);};\n}\n\n// Due to the fact that we still support jurassic IE versions, some\n// compatibility wrappers are needed.\n\nfunction e_preventDefault(e) {\n  if (e.preventDefault) { e.preventDefault(); }\n  else { e.returnValue = false; }\n}\nfunction e_stopPropagation(e) {\n  if (e.stopPropagation) { e.stopPropagation(); }\n  else { e.cancelBubble = true; }\n}\nfunction e_defaultPrevented(e) {\n  return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false\n}\nfunction e_stop(e) {e_preventDefault(e); e_stopPropagation(e);}\n\nfunction e_target(e) {return e.target || e.srcElement}\nfunction e_button(e) {\n  var b = e.which;\n  if (b == null) {\n    if (e.button & 1) { b = 1; }\n    else if (e.button & 2) { b = 3; }\n    else if (e.button & 4) { b = 2; }\n  }\n  if (mac && e.ctrlKey && b == 1) { b = 3; }\n  return b\n}\n\n// Detect drag-and-drop\nvar dragAndDrop = function() {\n  // There is *some* kind of drag-and-drop support in IE6-8, but I\n  // couldn't get it to work yet.\n  if (ie && ie_version < 9) { return false }\n  var div = elt('div');\n  return \"draggable\" in div || \"dragDrop\" in div\n}();\n\nvar zwspSupported;\nfunction zeroWidthElement(measure) {\n  if (zwspSupported == null) {\n    var test = elt(\"span\", \"\\u200b\");\n    removeChildrenAndAdd(measure, elt(\"span\", [test, document.createTextNode(\"x\")]));\n    if (measure.firstChild.offsetHeight != 0)\n      { zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8); }\n  }\n  var node = zwspSupported ? elt(\"span\", \"\\u200b\") :\n    elt(\"span\", \"\\u00a0\", null, \"display: inline-block; width: 1px; margin-right: -1px\");\n  node.setAttribute(\"cm-text\", \"\");\n  return node\n}\n\n// Feature-detect IE's crummy client rect reporting for bidi text\nvar badBidiRects;\nfunction hasBadBidiRects(measure) {\n  if (badBidiRects != null) { return badBidiRects }\n  var txt = removeChildrenAndAdd(measure, document.createTextNode(\"A\\u062eA\"));\n  var r0 = range(txt, 0, 1).getBoundingClientRect();\n  var r1 = range(txt, 1, 2).getBoundingClientRect();\n  removeChildren(measure);\n  if (!r0 || r0.left == r0.right) { return false } // Safari returns null in some cases (#2780)\n  return badBidiRects = (r1.right - r0.right < 3)\n}\n\n// See if \"\".split is the broken IE version, if so, provide an\n// alternative way to split lines.\nvar splitLinesAuto = \"\\n\\nb\".split(/\\n/).length != 3 ? function (string) {\n  var pos = 0, result = [], l = string.length;\n  while (pos <= l) {\n    var nl = string.indexOf(\"\\n\", pos);\n    if (nl == -1) { nl = string.length; }\n    var line = string.slice(pos, string.charAt(nl - 1) == \"\\r\" ? nl - 1 : nl);\n    var rt = line.indexOf(\"\\r\");\n    if (rt != -1) {\n      result.push(line.slice(0, rt));\n      pos += rt + 1;\n    } else {\n      result.push(line);\n      pos = nl + 1;\n    }\n  }\n  return result\n} : function (string) { return string.split(/\\r\\n?|\\n/); };\n\nvar hasSelection = window.getSelection ? function (te) {\n  try { return te.selectionStart != te.selectionEnd }\n  catch(e) { return false }\n} : function (te) {\n  var range$$1;\n  try {range$$1 = te.ownerDocument.selection.createRange();}\n  catch(e) {}\n  if (!range$$1 || range$$1.parentElement() != te) { return false }\n  return range$$1.compareEndPoints(\"StartToEnd\", range$$1) != 0\n};\n\nvar hasCopyEvent = (function () {\n  var e = elt(\"div\");\n  if (\"oncopy\" in e) { return true }\n  e.setAttribute(\"oncopy\", \"return;\");\n  return typeof e.oncopy == \"function\"\n})();\n\nvar badZoomedRects = null;\nfunction hasBadZoomedRects(measure) {\n  if (badZoomedRects != null) { return badZoomedRects }\n  var node = removeChildrenAndAdd(measure, elt(\"span\", \"x\"));\n  var normal = node.getBoundingClientRect();\n  var fromRange = range(node, 0, 1).getBoundingClientRect();\n  return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1\n}\n\n// Known modes, by name and by MIME\nvar modes = {};\nvar mimeModes = {};\n\n// Extra arguments are stored as the mode's dependencies, which is\n// used by (legacy) mechanisms like loadmode.js to automatically\n// load a mode. (Preferred mechanism is the require/define calls.)\nfunction defineMode(name, mode) {\n  if (arguments.length > 2)\n    { mode.dependencies = Array.prototype.slice.call(arguments, 2); }\n  modes[name] = mode;\n}\n\nfunction defineMIME(mime, spec) {\n  mimeModes[mime] = spec;\n}\n\n// Given a MIME type, a {name, ...options} config object, or a name\n// string, return a mode config object.\nfunction resolveMode(spec) {\n  if (typeof spec == \"string\" && mimeModes.hasOwnProperty(spec)) {\n    spec = mimeModes[spec];\n  } else if (spec && typeof spec.name == \"string\" && mimeModes.hasOwnProperty(spec.name)) {\n    var found = mimeModes[spec.name];\n    if (typeof found == \"string\") { found = {name: found}; }\n    spec = createObj(found, spec);\n    spec.name = found.name;\n  } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+xml$/.test(spec)) {\n    return resolveMode(\"application/xml\")\n  } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+json$/.test(spec)) {\n    return resolveMode(\"application/json\")\n  }\n  if (typeof spec == \"string\") { return {name: spec} }\n  else { return spec || {name: \"null\"} }\n}\n\n// Given a mode spec (anything that resolveMode accepts), find and\n// initialize an actual mode object.\nfunction getMode(options, spec) {\n  spec = resolveMode(spec);\n  var mfactory = modes[spec.name];\n  if (!mfactory) { return getMode(options, \"text/plain\") }\n  var modeObj = mfactory(options, spec);\n  if (modeExtensions.hasOwnProperty(spec.name)) {\n    var exts = modeExtensions[spec.name];\n    for (var prop in exts) {\n      if (!exts.hasOwnProperty(prop)) { continue }\n      if (modeObj.hasOwnProperty(prop)) { modeObj[\"_\" + prop] = modeObj[prop]; }\n      modeObj[prop] = exts[prop];\n    }\n  }\n  modeObj.name = spec.name;\n  if (spec.helperType) { modeObj.helperType = spec.helperType; }\n  if (spec.modeProps) { for (var prop$1 in spec.modeProps)\n    { modeObj[prop$1] = spec.modeProps[prop$1]; } }\n\n  return modeObj\n}\n\n// This can be used to attach properties to mode objects from\n// outside the actual mode definition.\nvar modeExtensions = {};\nfunction extendMode(mode, properties) {\n  var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : (modeExtensions[mode] = {});\n  copyObj(properties, exts);\n}\n\nfunction copyState(mode, state) {\n  if (state === true) { return state }\n  if (mode.copyState) { return mode.copyState(state) }\n  var nstate = {};\n  for (var n in state) {\n    var val = state[n];\n    if (val instanceof Array) { val = val.concat([]); }\n    nstate[n] = val;\n  }\n  return nstate\n}\n\n// Given a mode and a state (for that mode), find the inner mode and\n// state at the position that the state refers to.\nfunction innerMode(mode, state) {\n  var info;\n  while (mode.innerMode) {\n    info = mode.innerMode(state);\n    if (!info || info.mode == mode) { break }\n    state = info.state;\n    mode = info.mode;\n  }\n  return info || {mode: mode, state: state}\n}\n\nfunction startState(mode, a1, a2) {\n  return mode.startState ? mode.startState(a1, a2) : true\n}\n\n// STRING STREAM\n\n// Fed to the mode parsers, provides helper functions to make\n// parsers more succinct.\n\nvar StringStream = function(string, tabSize, lineOracle) {\n  this.pos = this.start = 0;\n  this.string = string;\n  this.tabSize = tabSize || 8;\n  this.lastColumnPos = this.lastColumnValue = 0;\n  this.lineStart = 0;\n  this.lineOracle = lineOracle;\n};\n\nStringStream.prototype.eol = function () {return this.pos >= this.string.length};\nStringStream.prototype.sol = function () {return this.pos == this.lineStart};\nStringStream.prototype.peek = function () {return this.string.charAt(this.pos) || undefined};\nStringStream.prototype.next = function () {\n  if (this.pos < this.string.length)\n    { return this.string.charAt(this.pos++) }\n};\nStringStream.prototype.eat = function (match) {\n  var ch = this.string.charAt(this.pos);\n  var ok;\n  if (typeof match == \"string\") { ok = ch == match; }\n  else { ok = ch && (match.test ? match.test(ch) : match(ch)); }\n  if (ok) {++this.pos; return ch}\n};\nStringStream.prototype.eatWhile = function (match) {\n  var start = this.pos;\n  while (this.eat(match)){}\n  return this.pos > start\n};\nStringStream.prototype.eatSpace = function () {\n    var this$1 = this;\n\n  var start = this.pos;\n  while (/[\\s\\u00a0]/.test(this.string.charAt(this.pos))) { ++this$1.pos; }\n  return this.pos > start\n};\nStringStream.prototype.skipToEnd = function () {this.pos = this.string.length;};\nStringStream.prototype.skipTo = function (ch) {\n  var found = this.string.indexOf(ch, this.pos);\n  if (found > -1) {this.pos = found; return true}\n};\nStringStream.prototype.backUp = function (n) {this.pos -= n;};\nStringStream.prototype.column = function () {\n  if (this.lastColumnPos < this.start) {\n    this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);\n    this.lastColumnPos = this.start;\n  }\n  return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0)\n};\nStringStream.prototype.indentation = function () {\n  return countColumn(this.string, null, this.tabSize) -\n    (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0)\n};\nStringStream.prototype.match = function (pattern, consume, caseInsensitive) {\n  if (typeof pattern == \"string\") {\n    var cased = function (str) { return caseInsensitive ? str.toLowerCase() : str; };\n    var substr = this.string.substr(this.pos, pattern.length);\n    if (cased(substr) == cased(pattern)) {\n      if (consume !== false) { this.pos += pattern.length; }\n      return true\n    }\n  } else {\n    var match = this.string.slice(this.pos).match(pattern);\n    if (match && match.index > 0) { return null }\n    if (match && consume !== false) { this.pos += match[0].length; }\n    return match\n  }\n};\nStringStream.prototype.current = function (){return this.string.slice(this.start, this.pos)};\nStringStream.prototype.hideFirstChars = function (n, inner) {\n  this.lineStart += n;\n  try { return inner() }\n  finally { this.lineStart -= n; }\n};\nStringStream.prototype.lookAhead = function (n) {\n  var oracle = this.lineOracle;\n  return oracle && oracle.lookAhead(n)\n};\n\nvar SavedContext = function(state, lookAhead) {\n  this.state = state;\n  this.lookAhead = lookAhead;\n};\n\nvar Context = function(doc, state, line, lookAhead) {\n  this.state = state;\n  this.doc = doc;\n  this.line = line;\n  this.maxLookAhead = lookAhead || 0;\n};\n\nContext.prototype.lookAhead = function (n) {\n  var line = this.doc.getLine(this.line + n);\n  if (line != null && n > this.maxLookAhead) { this.maxLookAhead = n; }\n  return line\n};\n\nContext.prototype.nextLine = function () {\n  this.line++;\n  if (this.maxLookAhead > 0) { this.maxLookAhead--; }\n};\n\nContext.fromSaved = function (doc, saved, line) {\n  if (saved instanceof SavedContext)\n    { return new Context(doc, copyState(doc.mode, saved.state), line, saved.lookAhead) }\n  else\n    { return new Context(doc, copyState(doc.mode, saved), line) }\n};\n\nContext.prototype.save = function (copy) {\n  var state = copy !== false ? copyState(this.doc.mode, this.state) : this.state;\n  return this.maxLookAhead > 0 ? new SavedContext(state, this.maxLookAhead) : state\n};\n\n\n// Compute a style array (an array starting with a mode generation\n// -- for invalidation -- followed by pairs of end positions and\n// style strings), which is used to highlight the tokens on the\n// line.\nfunction highlightLine(cm, line, context, forceToEnd) {\n  // A styles array always starts with a number identifying the\n  // mode/overlays that it is based on (for easy invalidation).\n  var st = [cm.state.modeGen], lineClasses = {};\n  // Compute the base array of styles\n  runMode(cm, line.text, cm.doc.mode, context, function (end, style) { return st.push(end, style); },\n          lineClasses, forceToEnd);\n  var state = context.state;\n\n  // Run overlays, adjust style array.\n  var loop = function ( o ) {\n    var overlay = cm.state.overlays[o], i = 1, at = 0;\n    context.state = true;\n    runMode(cm, line.text, overlay.mode, context, function (end, style) {\n      var start = i;\n      // Ensure there's a token end at the current position, and that i points at it\n      while (at < end) {\n        var i_end = st[i];\n        if (i_end > end)\n          { st.splice(i, 1, end, st[i+1], i_end); }\n        i += 2;\n        at = Math.min(end, i_end);\n      }\n      if (!style) { return }\n      if (overlay.opaque) {\n        st.splice(start, i - start, end, \"overlay \" + style);\n        i = start + 2;\n      } else {\n        for (; start < i; start += 2) {\n          var cur = st[start+1];\n          st[start+1] = (cur ? cur + \" \" : \"\") + \"overlay \" + style;\n        }\n      }\n    }, lineClasses);\n  };\n\n  for (var o = 0; o < cm.state.overlays.length; ++o) loop( o );\n  context.state = state;\n\n  return {styles: st, classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null}\n}\n\nfunction getLineStyles(cm, line, updateFrontier) {\n  if (!line.styles || line.styles[0] != cm.state.modeGen) {\n    var context = getContextBefore(cm, lineNo(line));\n    var resetState = line.text.length > cm.options.maxHighlightLength && copyState(cm.doc.mode, context.state);\n    var result = highlightLine(cm, line, context);\n    if (resetState) { context.state = resetState; }\n    line.stateAfter = context.save(!resetState);\n    line.styles = result.styles;\n    if (result.classes) { line.styleClasses = result.classes; }\n    else if (line.styleClasses) { line.styleClasses = null; }\n    if (updateFrontier === cm.doc.highlightFrontier)\n      { cm.doc.modeFrontier = Math.max(cm.doc.modeFrontier, ++cm.doc.highlightFrontier); }\n  }\n  return line.styles\n}\n\nfunction getContextBefore(cm, n, precise) {\n  var doc = cm.doc, display = cm.display;\n  if (!doc.mode.startState) { return new Context(doc, true, n) }\n  var start = findStartLine(cm, n, precise);\n  var saved = start > doc.first && getLine(doc, start - 1).stateAfter;\n  var context = saved ? Context.fromSaved(doc, saved, start) : new Context(doc, startState(doc.mode), start);\n\n  doc.iter(start, n, function (line) {\n    processLine(cm, line.text, context);\n    var pos = context.line;\n    line.stateAfter = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo ? context.save() : null;\n    context.nextLine();\n  });\n  if (precise) { doc.modeFrontier = context.line; }\n  return context\n}\n\n// Lightweight form of highlight -- proceed over this line and\n// update state, but don't save a style array. Used for lines that\n// aren't currently visible.\nfunction processLine(cm, text, context, startAt) {\n  var mode = cm.doc.mode;\n  var stream = new StringStream(text, cm.options.tabSize, context);\n  stream.start = stream.pos = startAt || 0;\n  if (text == \"\") { callBlankLine(mode, context.state); }\n  while (!stream.eol()) {\n    readToken(mode, stream, context.state);\n    stream.start = stream.pos;\n  }\n}\n\nfunction callBlankLine(mode, state) {\n  if (mode.blankLine) { return mode.blankLine(state) }\n  if (!mode.innerMode) { return }\n  var inner = innerMode(mode, state);\n  if (inner.mode.blankLine) { return inner.mode.blankLine(inner.state) }\n}\n\nfunction readToken(mode, stream, state, inner) {\n  for (var i = 0; i < 10; i++) {\n    if (inner) { inner[0] = innerMode(mode, state).mode; }\n    var style = mode.token(stream, state);\n    if (stream.pos > stream.start) { return style }\n  }\n  throw new Error(\"Mode \" + mode.name + \" failed to advance stream.\")\n}\n\nvar Token = function(stream, type, state) {\n  this.start = stream.start; this.end = stream.pos;\n  this.string = stream.current();\n  this.type = type || null;\n  this.state = state;\n};\n\n// Utility for getTokenAt and getLineTokens\nfunction takeToken(cm, pos, precise, asArray) {\n  var doc = cm.doc, mode = doc.mode, style;\n  pos = clipPos(doc, pos);\n  var line = getLine(doc, pos.line), context = getContextBefore(cm, pos.line, precise);\n  var stream = new StringStream(line.text, cm.options.tabSize, context), tokens;\n  if (asArray) { tokens = []; }\n  while ((asArray || stream.pos < pos.ch) && !stream.eol()) {\n    stream.start = stream.pos;\n    style = readToken(mode, stream, context.state);\n    if (asArray) { tokens.push(new Token(stream, style, copyState(doc.mode, context.state))); }\n  }\n  return asArray ? tokens : new Token(stream, style, context.state)\n}\n\nfunction extractLineClasses(type, output) {\n  if (type) { for (;;) {\n    var lineClass = type.match(/(?:^|\\s+)line-(background-)?(\\S+)/);\n    if (!lineClass) { break }\n    type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length);\n    var prop = lineClass[1] ? \"bgClass\" : \"textClass\";\n    if (output[prop] == null)\n      { output[prop] = lineClass[2]; }\n    else if (!(new RegExp(\"(?:^|\\s)\" + lineClass[2] + \"(?:$|\\s)\")).test(output[prop]))\n      { output[prop] += \" \" + lineClass[2]; }\n  } }\n  return type\n}\n\n// Run the given mode's parser over a line, calling f for each token.\nfunction runMode(cm, text, mode, context, f, lineClasses, forceToEnd) {\n  var flattenSpans = mode.flattenSpans;\n  if (flattenSpans == null) { flattenSpans = cm.options.flattenSpans; }\n  var curStart = 0, curStyle = null;\n  var stream = new StringStream(text, cm.options.tabSize, context), style;\n  var inner = cm.options.addModeClass && [null];\n  if (text == \"\") { extractLineClasses(callBlankLine(mode, context.state), lineClasses); }\n  while (!stream.eol()) {\n    if (stream.pos > cm.options.maxHighlightLength) {\n      flattenSpans = false;\n      if (forceToEnd) { processLine(cm, text, context, stream.pos); }\n      stream.pos = text.length;\n      style = null;\n    } else {\n      style = extractLineClasses(readToken(mode, stream, context.state, inner), lineClasses);\n    }\n    if (inner) {\n      var mName = inner[0].name;\n      if (mName) { style = \"m-\" + (style ? mName + \" \" + style : mName); }\n    }\n    if (!flattenSpans || curStyle != style) {\n      while (curStart < stream.start) {\n        curStart = Math.min(stream.start, curStart + 5000);\n        f(curStart, curStyle);\n      }\n      curStyle = style;\n    }\n    stream.start = stream.pos;\n  }\n  while (curStart < stream.pos) {\n    // Webkit seems to refuse to render text nodes longer than 57444\n    // characters, and returns inaccurate measurements in nodes\n    // starting around 5000 chars.\n    var pos = Math.min(stream.pos, curStart + 5000);\n    f(pos, curStyle);\n    curStart = pos;\n  }\n}\n\n// Finds the line to start with when starting a parse. Tries to\n// find a line with a stateAfter, so that it can start with a\n// valid state. If that fails, it returns the line with the\n// smallest indentation, which tends to need the least context to\n// parse correctly.\nfunction findStartLine(cm, n, precise) {\n  var minindent, minline, doc = cm.doc;\n  var lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1000 : 100);\n  for (var search = n; search > lim; --search) {\n    if (search <= doc.first) { return doc.first }\n    var line = getLine(doc, search - 1), after = line.stateAfter;\n    if (after && (!precise || search + (after instanceof SavedContext ? after.lookAhead : 0) <= doc.modeFrontier))\n      { return search }\n    var indented = countColumn(line.text, null, cm.options.tabSize);\n    if (minline == null || minindent > indented) {\n      minline = search - 1;\n      minindent = indented;\n    }\n  }\n  return minline\n}\n\nfunction retreatFrontier(doc, n) {\n  doc.modeFrontier = Math.min(doc.modeFrontier, n);\n  if (doc.highlightFrontier < n - 10) { return }\n  var start = doc.first;\n  for (var line = n - 1; line > start; line--) {\n    var saved = getLine(doc, line).stateAfter;\n    // change is on 3\n    // state on line 1 looked ahead 2 -- so saw 3\n    // test 1 + 2 < 3 should cover this\n    if (saved && (!(saved instanceof SavedContext) || line + saved.lookAhead < n)) {\n      start = line + 1;\n      break\n    }\n  }\n  doc.highlightFrontier = Math.min(doc.highlightFrontier, start);\n}\n\n// LINE DATA STRUCTURE\n\n// Line objects. These hold state related to a line, including\n// highlighting info (the styles array).\nvar Line = function(text, markedSpans, estimateHeight) {\n  this.text = text;\n  attachMarkedSpans(this, markedSpans);\n  this.height = estimateHeight ? estimateHeight(this) : 1;\n};\n\nLine.prototype.lineNo = function () { return lineNo(this) };\neventMixin(Line);\n\n// Change the content (text, markers) of a line. Automatically\n// invalidates cached information and tries to re-estimate the\n// line's height.\nfunction updateLine(line, text, markedSpans, estimateHeight) {\n  line.text = text;\n  if (line.stateAfter) { line.stateAfter = null; }\n  if (line.styles) { line.styles = null; }\n  if (line.order != null) { line.order = null; }\n  detachMarkedSpans(line);\n  attachMarkedSpans(line, markedSpans);\n  var estHeight = estimateHeight ? estimateHeight(line) : 1;\n  if (estHeight != line.height) { updateLineHeight(line, estHeight); }\n}\n\n// Detach a line from the document tree and its markers.\nfunction cleanUpLine(line) {\n  line.parent = null;\n  detachMarkedSpans(line);\n}\n\n// Convert a style as returned by a mode (either null, or a string\n// containing one or more styles) to a CSS style. This is cached,\n// and also looks for line-wide styles.\nvar styleToClassCache = {};\nvar styleToClassCacheWithMode = {};\nfunction interpretTokenStyle(style, options) {\n  if (!style || /^\\s*$/.test(style)) { return null }\n  var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache;\n  return cache[style] ||\n    (cache[style] = style.replace(/\\S+/g, \"cm-$&\"))\n}\n\n// Render the DOM representation of the text of a line. Also builds\n// up a 'line map', which points at the DOM nodes that represent\n// specific stretches of text, and is used by the measuring code.\n// The returned object contains the DOM node, this map, and\n// information about line-wide styles that were set by the mode.\nfunction buildLineContent(cm, lineView) {\n  // The padding-right forces the element to have a 'border', which\n  // is needed on Webkit to be able to get line-level bounding\n  // rectangles for it (in measureChar).\n  var content = eltP(\"span\", null, null, webkit ? \"padding-right: .1px\" : null);\n  var builder = {pre: eltP(\"pre\", [content], \"CodeMirror-line\"), content: content,\n                 col: 0, pos: 0, cm: cm,\n                 trailingSpace: false,\n                 splitSpaces: (ie || webkit) && cm.getOption(\"lineWrapping\")};\n  lineView.measure = {};\n\n  // Iterate over the logical lines that make up this visual line.\n  for (var i = 0; i <= (lineView.rest ? lineView.rest.length : 0); i++) {\n    var line = i ? lineView.rest[i - 1] : lineView.line, order = (void 0);\n    builder.pos = 0;\n    builder.addToken = buildToken;\n    // Optionally wire in some hacks into the token-rendering\n    // algorithm, to deal with browser quirks.\n    if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line, cm.doc.direction)))\n      { builder.addToken = buildTokenBadBidi(builder.addToken, order); }\n    builder.map = [];\n    var allowFrontierUpdate = lineView != cm.display.externalMeasured && lineNo(line);\n    insertLineContent(line, builder, getLineStyles(cm, line, allowFrontierUpdate));\n    if (line.styleClasses) {\n      if (line.styleClasses.bgClass)\n        { builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || \"\"); }\n      if (line.styleClasses.textClass)\n        { builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || \"\"); }\n    }\n\n    // Ensure at least a single node is present, for measuring.\n    if (builder.map.length == 0)\n      { builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure))); }\n\n    // Store the map and a cache object for the current logical line\n    if (i == 0) {\n      lineView.measure.map = builder.map;\n      lineView.measure.cache = {};\n    } else {\n      (lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map)\n      ;(lineView.measure.caches || (lineView.measure.caches = [])).push({});\n    }\n  }\n\n  // See issue #2901\n  if (webkit) {\n    var last = builder.content.lastChild;\n    if (/\\bcm-tab\\b/.test(last.className) || (last.querySelector && last.querySelector(\".cm-tab\")))\n      { builder.content.className = \"cm-tab-wrap-hack\"; }\n  }\n\n  signal(cm, \"renderLine\", cm, lineView.line, builder.pre);\n  if (builder.pre.className)\n    { builder.textClass = joinClasses(builder.pre.className, builder.textClass || \"\"); }\n\n  return builder\n}\n\nfunction defaultSpecialCharPlaceholder(ch) {\n  var token = elt(\"span\", \"\\u2022\", \"cm-invalidchar\");\n  token.title = \"\\\\u\" + ch.charCodeAt(0).toString(16);\n  token.setAttribute(\"aria-label\", token.title);\n  return token\n}\n\n// Build up the DOM representation for a single token, and add it to\n// the line map. Takes care to render special characters separately.\nfunction buildToken(builder, text, style, startStyle, endStyle, title, css) {\n  if (!text) { return }\n  var displayText = builder.splitSpaces ? splitSpaces(text, builder.trailingSpace) : text;\n  var special = builder.cm.state.specialChars, mustWrap = false;\n  var content;\n  if (!special.test(text)) {\n    builder.col += text.length;\n    content = document.createTextNode(displayText);\n    builder.map.push(builder.pos, builder.pos + text.length, content);\n    if (ie && ie_version < 9) { mustWrap = true; }\n    builder.pos += text.length;\n  } else {\n    content = document.createDocumentFragment();\n    var pos = 0;\n    while (true) {\n      special.lastIndex = pos;\n      var m = special.exec(text);\n      var skipped = m ? m.index - pos : text.length - pos;\n      if (skipped) {\n        var txt = document.createTextNode(displayText.slice(pos, pos + skipped));\n        if (ie && ie_version < 9) { content.appendChild(elt(\"span\", [txt])); }\n        else { content.appendChild(txt); }\n        builder.map.push(builder.pos, builder.pos + skipped, txt);\n        builder.col += skipped;\n        builder.pos += skipped;\n      }\n      if (!m) { break }\n      pos += skipped + 1;\n      var txt$1 = (void 0);\n      if (m[0] == \"\\t\") {\n        var tabSize = builder.cm.options.tabSize, tabWidth = tabSize - builder.col % tabSize;\n        txt$1 = content.appendChild(elt(\"span\", spaceStr(tabWidth), \"cm-tab\"));\n        txt$1.setAttribute(\"role\", \"presentation\");\n        txt$1.setAttribute(\"cm-text\", \"\\t\");\n        builder.col += tabWidth;\n      } else if (m[0] == \"\\r\" || m[0] == \"\\n\") {\n        txt$1 = content.appendChild(elt(\"span\", m[0] == \"\\r\" ? \"\\u240d\" : \"\\u2424\", \"cm-invalidchar\"));\n        txt$1.setAttribute(\"cm-text\", m[0]);\n        builder.col += 1;\n      } else {\n        txt$1 = builder.cm.options.specialCharPlaceholder(m[0]);\n        txt$1.setAttribute(\"cm-text\", m[0]);\n        if (ie && ie_version < 9) { content.appendChild(elt(\"span\", [txt$1])); }\n        else { content.appendChild(txt$1); }\n        builder.col += 1;\n      }\n      builder.map.push(builder.pos, builder.pos + 1, txt$1);\n      builder.pos++;\n    }\n  }\n  builder.trailingSpace = displayText.charCodeAt(text.length - 1) == 32;\n  if (style || startStyle || endStyle || mustWrap || css) {\n    var fullStyle = style || \"\";\n    if (startStyle) { fullStyle += startStyle; }\n    if (endStyle) { fullStyle += endStyle; }\n    var token = elt(\"span\", [content], fullStyle, css);\n    if (title) { token.title = title; }\n    return builder.content.appendChild(token)\n  }\n  builder.content.appendChild(content);\n}\n\nfunction splitSpaces(text, trailingBefore) {\n  if (text.length > 1 && !/  /.test(text)) { return text }\n  var spaceBefore = trailingBefore, result = \"\";\n  for (var i = 0; i < text.length; i++) {\n    var ch = text.charAt(i);\n    if (ch == \" \" && spaceBefore && (i == text.length - 1 || text.charCodeAt(i + 1) == 32))\n      { ch = \"\\u00a0\"; }\n    result += ch;\n    spaceBefore = ch == \" \";\n  }\n  return result\n}\n\n// Work around nonsense dimensions being reported for stretches of\n// right-to-left text.\nfunction buildTokenBadBidi(inner, order) {\n  return function (builder, text, style, startStyle, endStyle, title, css) {\n    style = style ? style + \" cm-force-border\" : \"cm-force-border\";\n    var start = builder.pos, end = start + text.length;\n    for (;;) {\n      // Find the part that overlaps with the start of this text\n      var part = (void 0);\n      for (var i = 0; i < order.length; i++) {\n        part = order[i];\n        if (part.to > start && part.from <= start) { break }\n      }\n      if (part.to >= end) { return inner(builder, text, style, startStyle, endStyle, title, css) }\n      inner(builder, text.slice(0, part.to - start), style, startStyle, null, title, css);\n      startStyle = null;\n      text = text.slice(part.to - start);\n      start = part.to;\n    }\n  }\n}\n\nfunction buildCollapsedSpan(builder, size, marker, ignoreWidget) {\n  var widget = !ignoreWidget && marker.widgetNode;\n  if (widget) { builder.map.push(builder.pos, builder.pos + size, widget); }\n  if (!ignoreWidget && builder.cm.display.input.needsContentAttribute) {\n    if (!widget)\n      { widget = builder.content.appendChild(document.createElement(\"span\")); }\n    widget.setAttribute(\"cm-marker\", marker.id);\n  }\n  if (widget) {\n    builder.cm.display.input.setUneditable(widget);\n    builder.content.appendChild(widget);\n  }\n  builder.pos += size;\n  builder.trailingSpace = false;\n}\n\n// Outputs a number of spans to make up a line, taking highlighting\n// and marked text into account.\nfunction insertLineContent(line, builder, styles) {\n  var spans = line.markedSpans, allText = line.text, at = 0;\n  if (!spans) {\n    for (var i$1 = 1; i$1 < styles.length; i$1+=2)\n      { builder.addToken(builder, allText.slice(at, at = styles[i$1]), interpretTokenStyle(styles[i$1+1], builder.cm.options)); }\n    return\n  }\n\n  var len = allText.length, pos = 0, i = 1, text = \"\", style, css;\n  var nextChange = 0, spanStyle, spanEndStyle, spanStartStyle, title, collapsed;\n  for (;;) {\n    if (nextChange == pos) { // Update current marker set\n      spanStyle = spanEndStyle = spanStartStyle = title = css = \"\";\n      collapsed = null; nextChange = Infinity;\n      var foundBookmarks = [], endStyles = (void 0);\n      for (var j = 0; j < spans.length; ++j) {\n        var sp = spans[j], m = sp.marker;\n        if (m.type == \"bookmark\" && sp.from == pos && m.widgetNode) {\n          foundBookmarks.push(m);\n        } else if (sp.from <= pos && (sp.to == null || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos)) {\n          if (sp.to != null && sp.to != pos && nextChange > sp.to) {\n            nextChange = sp.to;\n            spanEndStyle = \"\";\n          }\n          if (m.className) { spanStyle += \" \" + m.className; }\n          if (m.css) { css = (css ? css + \";\" : \"\") + m.css; }\n          if (m.startStyle && sp.from == pos) { spanStartStyle += \" \" + m.startStyle; }\n          if (m.endStyle && sp.to == nextChange) { (endStyles || (endStyles = [])).push(m.endStyle, sp.to); }\n          if (m.title && !title) { title = m.title; }\n          if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0))\n            { collapsed = sp; }\n        } else if (sp.from > pos && nextChange > sp.from) {\n          nextChange = sp.from;\n        }\n      }\n      if (endStyles) { for (var j$1 = 0; j$1 < endStyles.length; j$1 += 2)\n        { if (endStyles[j$1 + 1] == nextChange) { spanEndStyle += \" \" + endStyles[j$1]; } } }\n\n      if (!collapsed || collapsed.from == pos) { for (var j$2 = 0; j$2 < foundBookmarks.length; ++j$2)\n        { buildCollapsedSpan(builder, 0, foundBookmarks[j$2]); } }\n      if (collapsed && (collapsed.from || 0) == pos) {\n        buildCollapsedSpan(builder, (collapsed.to == null ? len + 1 : collapsed.to) - pos,\n                           collapsed.marker, collapsed.from == null);\n        if (collapsed.to == null) { return }\n        if (collapsed.to == pos) { collapsed = false; }\n      }\n    }\n    if (pos >= len) { break }\n\n    var upto = Math.min(len, nextChange);\n    while (true) {\n      if (text) {\n        var end = pos + text.length;\n        if (!collapsed) {\n          var tokenText = end > upto ? text.slice(0, upto - pos) : text;\n          builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle,\n                           spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : \"\", title, css);\n        }\n        if (end >= upto) {text = text.slice(upto - pos); pos = upto; break}\n        pos = end;\n        spanStartStyle = \"\";\n      }\n      text = allText.slice(at, at = styles[i++]);\n      style = interpretTokenStyle(styles[i++], builder.cm.options);\n    }\n  }\n}\n\n\n// These objects are used to represent the visible (currently drawn)\n// part of the document. A LineView may correspond to multiple\n// logical lines, if those are connected by collapsed ranges.\nfunction LineView(doc, line, lineN) {\n  // The starting line\n  this.line = line;\n  // Continuing lines, if any\n  this.rest = visualLineContinued(line);\n  // Number of logical lines in this visual line\n  this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1;\n  this.node = this.text = null;\n  this.hidden = lineIsHidden(doc, line);\n}\n\n// Create a range of LineView objects for the given lines.\nfunction buildViewArray(cm, from, to) {\n  var array = [], nextPos;\n  for (var pos = from; pos < to; pos = nextPos) {\n    var view = new LineView(cm.doc, getLine(cm.doc, pos), pos);\n    nextPos = pos + view.size;\n    array.push(view);\n  }\n  return array\n}\n\nvar operationGroup = null;\n\nfunction pushOperation(op) {\n  if (operationGroup) {\n    operationGroup.ops.push(op);\n  } else {\n    op.ownsGroup = operationGroup = {\n      ops: [op],\n      delayedCallbacks: []\n    };\n  }\n}\n\nfunction fireCallbacksForOps(group) {\n  // Calls delayed callbacks and cursorActivity handlers until no\n  // new ones appear\n  var callbacks = group.delayedCallbacks, i = 0;\n  do {\n    for (; i < callbacks.length; i++)\n      { callbacks[i].call(null); }\n    for (var j = 0; j < group.ops.length; j++) {\n      var op = group.ops[j];\n      if (op.cursorActivityHandlers)\n        { while (op.cursorActivityCalled < op.cursorActivityHandlers.length)\n          { op.cursorActivityHandlers[op.cursorActivityCalled++].call(null, op.cm); } }\n    }\n  } while (i < callbacks.length)\n}\n\nfunction finishOperation(op, endCb) {\n  var group = op.ownsGroup;\n  if (!group) { return }\n\n  try { fireCallbacksForOps(group); }\n  finally {\n    operationGroup = null;\n    endCb(group);\n  }\n}\n\nvar orphanDelayedCallbacks = null;\n\n// Often, we want to signal events at a point where we are in the\n// middle of some work, but don't want the handler to start calling\n// other methods on the editor, which might be in an inconsistent\n// state or simply not expect any other events to happen.\n// signalLater looks whether there are any handlers, and schedules\n// them to be executed when the last operation ends, or, if no\n// operation is active, when a timeout fires.\nfunction signalLater(emitter, type /*, values...*/) {\n  var arr = getHandlers(emitter, type);\n  if (!arr.length) { return }\n  var args = Array.prototype.slice.call(arguments, 2), list;\n  if (operationGroup) {\n    list = operationGroup.delayedCallbacks;\n  } else if (orphanDelayedCallbacks) {\n    list = orphanDelayedCallbacks;\n  } else {\n    list = orphanDelayedCallbacks = [];\n    setTimeout(fireOrphanDelayed, 0);\n  }\n  var loop = function ( i ) {\n    list.push(function () { return arr[i].apply(null, args); });\n  };\n\n  for (var i = 0; i < arr.length; ++i)\n    loop( i );\n}\n\nfunction fireOrphanDelayed() {\n  var delayed = orphanDelayedCallbacks;\n  orphanDelayedCallbacks = null;\n  for (var i = 0; i < delayed.length; ++i) { delayed[i](); }\n}\n\n// When an aspect of a line changes, a string is added to\n// lineView.changes. This updates the relevant part of the line's\n// DOM structure.\nfunction updateLineForChanges(cm, lineView, lineN, dims) {\n  for (var j = 0; j < lineView.changes.length; j++) {\n    var type = lineView.changes[j];\n    if (type == \"text\") { updateLineText(cm, lineView); }\n    else if (type == \"gutter\") { updateLineGutter(cm, lineView, lineN, dims); }\n    else if (type == \"class\") { updateLineClasses(cm, lineView); }\n    else if (type == \"widget\") { updateLineWidgets(cm, lineView, dims); }\n  }\n  lineView.changes = null;\n}\n\n// Lines with gutter elements, widgets or a background class need to\n// be wrapped, and have the extra elements added to the wrapper div\nfunction ensureLineWrapped(lineView) {\n  if (lineView.node == lineView.text) {\n    lineView.node = elt(\"div\", null, null, \"position: relative\");\n    if (lineView.text.parentNode)\n      { lineView.text.parentNode.replaceChild(lineView.node, lineView.text); }\n    lineView.node.appendChild(lineView.text);\n    if (ie && ie_version < 8) { lineView.node.style.zIndex = 2; }\n  }\n  return lineView.node\n}\n\nfunction updateLineBackground(cm, lineView) {\n  var cls = lineView.bgClass ? lineView.bgClass + \" \" + (lineView.line.bgClass || \"\") : lineView.line.bgClass;\n  if (cls) { cls += \" CodeMirror-linebackground\"; }\n  if (lineView.background) {\n    if (cls) { lineView.background.className = cls; }\n    else { lineView.background.parentNode.removeChild(lineView.background); lineView.background = null; }\n  } else if (cls) {\n    var wrap = ensureLineWrapped(lineView);\n    lineView.background = wrap.insertBefore(elt(\"div\", null, cls), wrap.firstChild);\n    cm.display.input.setUneditable(lineView.background);\n  }\n}\n\n// Wrapper around buildLineContent which will reuse the structure\n// in display.externalMeasured when possible.\nfunction getLineContent(cm, lineView) {\n  var ext = cm.display.externalMeasured;\n  if (ext && ext.line == lineView.line) {\n    cm.display.externalMeasured = null;\n    lineView.measure = ext.measure;\n    return ext.built\n  }\n  return buildLineContent(cm, lineView)\n}\n\n// Redraw the line's text. Interacts with the background and text\n// classes because the mode may output tokens that influence these\n// classes.\nfunction updateLineText(cm, lineView) {\n  var cls = lineView.text.className;\n  var built = getLineContent(cm, lineView);\n  if (lineView.text == lineView.node) { lineView.node = built.pre; }\n  lineView.text.parentNode.replaceChild(built.pre, lineView.text);\n  lineView.text = built.pre;\n  if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {\n    lineView.bgClass = built.bgClass;\n    lineView.textClass = built.textClass;\n    updateLineClasses(cm, lineView);\n  } else if (cls) {\n    lineView.text.className = cls;\n  }\n}\n\nfunction updateLineClasses(cm, lineView) {\n  updateLineBackground(cm, lineView);\n  if (lineView.line.wrapClass)\n    { ensureLineWrapped(lineView).className = lineView.line.wrapClass; }\n  else if (lineView.node != lineView.text)\n    { lineView.node.className = \"\"; }\n  var textClass = lineView.textClass ? lineView.textClass + \" \" + (lineView.line.textClass || \"\") : lineView.line.textClass;\n  lineView.text.className = textClass || \"\";\n}\n\nfunction updateLineGutter(cm, lineView, lineN, dims) {\n  if (lineView.gutter) {\n    lineView.node.removeChild(lineView.gutter);\n    lineView.gutter = null;\n  }\n  if (lineView.gutterBackground) {\n    lineView.node.removeChild(lineView.gutterBackground);\n    lineView.gutterBackground = null;\n  }\n  if (lineView.line.gutterClass) {\n    var wrap = ensureLineWrapped(lineView);\n    lineView.gutterBackground = elt(\"div\", null, \"CodeMirror-gutter-background \" + lineView.line.gutterClass,\n                                    (\"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px; width: \" + (dims.gutterTotalWidth) + \"px\"));\n    cm.display.input.setUneditable(lineView.gutterBackground);\n    wrap.insertBefore(lineView.gutterBackground, lineView.text);\n  }\n  var markers = lineView.line.gutterMarkers;\n  if (cm.options.lineNumbers || markers) {\n    var wrap$1 = ensureLineWrapped(lineView);\n    var gutterWrap = lineView.gutter = elt(\"div\", null, \"CodeMirror-gutter-wrapper\", (\"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px\"));\n    cm.display.input.setUneditable(gutterWrap);\n    wrap$1.insertBefore(gutterWrap, lineView.text);\n    if (lineView.line.gutterClass)\n      { gutterWrap.className += \" \" + lineView.line.gutterClass; }\n    if (cm.options.lineNumbers && (!markers || !markers[\"CodeMirror-linenumbers\"]))\n      { lineView.lineNumber = gutterWrap.appendChild(\n        elt(\"div\", lineNumberFor(cm.options, lineN),\n            \"CodeMirror-linenumber CodeMirror-gutter-elt\",\n            (\"left: \" + (dims.gutterLeft[\"CodeMirror-linenumbers\"]) + \"px; width: \" + (cm.display.lineNumInnerWidth) + \"px\"))); }\n    if (markers) { for (var k = 0; k < cm.options.gutters.length; ++k) {\n      var id = cm.options.gutters[k], found = markers.hasOwnProperty(id) && markers[id];\n      if (found)\n        { gutterWrap.appendChild(elt(\"div\", [found], \"CodeMirror-gutter-elt\",\n                                   (\"left: \" + (dims.gutterLeft[id]) + \"px; width: \" + (dims.gutterWidth[id]) + \"px\"))); }\n    } }\n  }\n}\n\nfunction updateLineWidgets(cm, lineView, dims) {\n  if (lineView.alignable) { lineView.alignable = null; }\n  for (var node = lineView.node.firstChild, next = (void 0); node; node = next) {\n    next = node.nextSibling;\n    if (node.className == \"CodeMirror-linewidget\")\n      { lineView.node.removeChild(node); }\n  }\n  insertLineWidgets(cm, lineView, dims);\n}\n\n// Build a line's DOM representation from scratch\nfunction buildLineElement(cm, lineView, lineN, dims) {\n  var built = getLineContent(cm, lineView);\n  lineView.text = lineView.node = built.pre;\n  if (built.bgClass) { lineView.bgClass = built.bgClass; }\n  if (built.textClass) { lineView.textClass = built.textClass; }\n\n  updateLineClasses(cm, lineView);\n  updateLineGutter(cm, lineView, lineN, dims);\n  insertLineWidgets(cm, lineView, dims);\n  return lineView.node\n}\n\n// A lineView may contain multiple logical lines (when merged by\n// collapsed spans). The widgets for all of them need to be drawn.\nfunction insertLineWidgets(cm, lineView, dims) {\n  insertLineWidgetsFor(cm, lineView.line, lineView, dims, true);\n  if (lineView.rest) { for (var i = 0; i < lineView.rest.length; i++)\n    { insertLineWidgetsFor(cm, lineView.rest[i], lineView, dims, false); } }\n}\n\nfunction insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {\n  if (!line.widgets) { return }\n  var wrap = ensureLineWrapped(lineView);\n  for (var i = 0, ws = line.widgets; i < ws.length; ++i) {\n    var widget = ws[i], node = elt(\"div\", [widget.node], \"CodeMirror-linewidget\");\n    if (!widget.handleMouseEvents) { node.setAttribute(\"cm-ignore-events\", \"true\"); }\n    positionLineWidget(widget, node, lineView, dims);\n    cm.display.input.setUneditable(node);\n    if (allowAbove && widget.above)\n      { wrap.insertBefore(node, lineView.gutter || lineView.text); }\n    else\n      { wrap.appendChild(node); }\n    signalLater(widget, \"redraw\");\n  }\n}\n\nfunction positionLineWidget(widget, node, lineView, dims) {\n  if (widget.noHScroll) {\n    (lineView.alignable || (lineView.alignable = [])).push(node);\n    var width = dims.wrapperWidth;\n    node.style.left = dims.fixedPos + \"px\";\n    if (!widget.coverGutter) {\n      width -= dims.gutterTotalWidth;\n      node.style.paddingLeft = dims.gutterTotalWidth + \"px\";\n    }\n    node.style.width = width + \"px\";\n  }\n  if (widget.coverGutter) {\n    node.style.zIndex = 5;\n    node.style.position = \"relative\";\n    if (!widget.noHScroll) { node.style.marginLeft = -dims.gutterTotalWidth + \"px\"; }\n  }\n}\n\nfunction widgetHeight(widget) {\n  if (widget.height != null) { return widget.height }\n  var cm = widget.doc.cm;\n  if (!cm) { return 0 }\n  if (!contains(document.body, widget.node)) {\n    var parentStyle = \"position: relative;\";\n    if (widget.coverGutter)\n      { parentStyle += \"margin-left: -\" + cm.display.gutters.offsetWidth + \"px;\"; }\n    if (widget.noHScroll)\n      { parentStyle += \"width: \" + cm.display.wrapper.clientWidth + \"px;\"; }\n    removeChildrenAndAdd(cm.display.measure, elt(\"div\", [widget.node], null, parentStyle));\n  }\n  return widget.height = widget.node.parentNode.offsetHeight\n}\n\n// Return true when the given mouse event happened in a widget\nfunction eventInWidget(display, e) {\n  for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {\n    if (!n || (n.nodeType == 1 && n.getAttribute(\"cm-ignore-events\") == \"true\") ||\n        (n.parentNode == display.sizer && n != display.mover))\n      { return true }\n  }\n}\n\n// POSITION MEASUREMENT\n\nfunction paddingTop(display) {return display.lineSpace.offsetTop}\nfunction paddingVert(display) {return display.mover.offsetHeight - display.lineSpace.offsetHeight}\nfunction paddingH(display) {\n  if (display.cachedPaddingH) { return display.cachedPaddingH }\n  var e = removeChildrenAndAdd(display.measure, elt(\"pre\", \"x\"));\n  var style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle;\n  var data = {left: parseInt(style.paddingLeft), right: parseInt(style.paddingRight)};\n  if (!isNaN(data.left) && !isNaN(data.right)) { display.cachedPaddingH = data; }\n  return data\n}\n\nfunction scrollGap(cm) { return scrollerGap - cm.display.nativeBarWidth }\nfunction displayWidth(cm) {\n  return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth\n}\nfunction displayHeight(cm) {\n  return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight\n}\n\n// Ensure the lineView.wrapping.heights array is populated. This is\n// an array of bottom offsets for the lines that make up a drawn\n// line. When lineWrapping is on, there might be more than one\n// height.\nfunction ensureLineHeights(cm, lineView, rect) {\n  var wrapping = cm.options.lineWrapping;\n  var curWidth = wrapping && displayWidth(cm);\n  if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {\n    var heights = lineView.measure.heights = [];\n    if (wrapping) {\n      lineView.measure.width = curWidth;\n      var rects = lineView.text.firstChild.getClientRects();\n      for (var i = 0; i < rects.length - 1; i++) {\n        var cur = rects[i], next = rects[i + 1];\n        if (Math.abs(cur.bottom - next.bottom) > 2)\n          { heights.push((cur.bottom + next.top) / 2 - rect.top); }\n      }\n    }\n    heights.push(rect.bottom - rect.top);\n  }\n}\n\n// Find a line map (mapping character offsets to text nodes) and a\n// measurement cache for the given line number. (A line view might\n// contain multiple lines when collapsed ranges are present.)\nfunction mapFromLineView(lineView, line, lineN) {\n  if (lineView.line == line)\n    { return {map: lineView.measure.map, cache: lineView.measure.cache} }\n  for (var i = 0; i < lineView.rest.length; i++)\n    { if (lineView.rest[i] == line)\n      { return {map: lineView.measure.maps[i], cache: lineView.measure.caches[i]} } }\n  for (var i$1 = 0; i$1 < lineView.rest.length; i$1++)\n    { if (lineNo(lineView.rest[i$1]) > lineN)\n      { return {map: lineView.measure.maps[i$1], cache: lineView.measure.caches[i$1], before: true} } }\n}\n\n// Render a line into the hidden node display.externalMeasured. Used\n// when measurement is needed for a line that's not in the viewport.\nfunction updateExternalMeasurement(cm, line) {\n  line = visualLine(line);\n  var lineN = lineNo(line);\n  var view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN);\n  view.lineN = lineN;\n  var built = view.built = buildLineContent(cm, view);\n  view.text = built.pre;\n  removeChildrenAndAdd(cm.display.lineMeasure, built.pre);\n  return view\n}\n\n// Get a {top, bottom, left, right} box (in line-local coordinates)\n// for a given character.\nfunction measureChar(cm, line, ch, bias) {\n  return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias)\n}\n\n// Find a line view that corresponds to the given line number.\nfunction findViewForLine(cm, lineN) {\n  if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo)\n    { return cm.display.view[findViewIndex(cm, lineN)] }\n  var ext = cm.display.externalMeasured;\n  if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size)\n    { return ext }\n}\n\n// Measurement can be split in two steps, the set-up work that\n// applies to the whole line, and the measurement of the actual\n// character. Functions like coordsChar, that need to do a lot of\n// measurements in a row, can thus ensure that the set-up work is\n// only done once.\nfunction prepareMeasureForLine(cm, line) {\n  var lineN = lineNo(line);\n  var view = findViewForLine(cm, lineN);\n  if (view && !view.text) {\n    view = null;\n  } else if (view && view.changes) {\n    updateLineForChanges(cm, view, lineN, getDimensions(cm));\n    cm.curOp.forceUpdate = true;\n  }\n  if (!view)\n    { view = updateExternalMeasurement(cm, line); }\n\n  var info = mapFromLineView(view, line, lineN);\n  return {\n    line: line, view: view, rect: null,\n    map: info.map, cache: info.cache, before: info.before,\n    hasHeights: false\n  }\n}\n\n// Given a prepared measurement object, measures the position of an\n// actual character (or fetches it from the cache).\nfunction measureCharPrepared(cm, prepared, ch, bias, varHeight) {\n  if (prepared.before) { ch = -1; }\n  var key = ch + (bias || \"\"), found;\n  if (prepared.cache.hasOwnProperty(key)) {\n    found = prepared.cache[key];\n  } else {\n    if (!prepared.rect)\n      { prepared.rect = prepared.view.text.getBoundingClientRect(); }\n    if (!prepared.hasHeights) {\n      ensureLineHeights(cm, prepared.view, prepared.rect);\n      prepared.hasHeights = true;\n    }\n    found = measureCharInner(cm, prepared, ch, bias);\n    if (!found.bogus) { prepared.cache[key] = found; }\n  }\n  return {left: found.left, right: found.right,\n          top: varHeight ? found.rtop : found.top,\n          bottom: varHeight ? found.rbottom : found.bottom}\n}\n\nvar nullRect = {left: 0, right: 0, top: 0, bottom: 0};\n\nfunction nodeAndOffsetInLineMap(map$$1, ch, bias) {\n  var node, start, end, collapse, mStart, mEnd;\n  // First, search the line map for the text node corresponding to,\n  // or closest to, the target character.\n  for (var i = 0; i < map$$1.length; i += 3) {\n    mStart = map$$1[i];\n    mEnd = map$$1[i + 1];\n    if (ch < mStart) {\n      start = 0; end = 1;\n      collapse = \"left\";\n    } else if (ch < mEnd) {\n      start = ch - mStart;\n      end = start + 1;\n    } else if (i == map$$1.length - 3 || ch == mEnd && map$$1[i + 3] > ch) {\n      end = mEnd - mStart;\n      start = end - 1;\n      if (ch >= mEnd) { collapse = \"right\"; }\n    }\n    if (start != null) {\n      node = map$$1[i + 2];\n      if (mStart == mEnd && bias == (node.insertLeft ? \"left\" : \"right\"))\n        { collapse = bias; }\n      if (bias == \"left\" && start == 0)\n        { while (i && map$$1[i - 2] == map$$1[i - 3] && map$$1[i - 1].insertLeft) {\n          node = map$$1[(i -= 3) + 2];\n          collapse = \"left\";\n        } }\n      if (bias == \"right\" && start == mEnd - mStart)\n        { while (i < map$$1.length - 3 && map$$1[i + 3] == map$$1[i + 4] && !map$$1[i + 5].insertLeft) {\n          node = map$$1[(i += 3) + 2];\n          collapse = \"right\";\n        } }\n      break\n    }\n  }\n  return {node: node, start: start, end: end, collapse: collapse, coverStart: mStart, coverEnd: mEnd}\n}\n\nfunction getUsefulRect(rects, bias) {\n  var rect = nullRect;\n  if (bias == \"left\") { for (var i = 0; i < rects.length; i++) {\n    if ((rect = rects[i]).left != rect.right) { break }\n  } } else { for (var i$1 = rects.length - 1; i$1 >= 0; i$1--) {\n    if ((rect = rects[i$1]).left != rect.right) { break }\n  } }\n  return rect\n}\n\nfunction measureCharInner(cm, prepared, ch, bias) {\n  var place = nodeAndOffsetInLineMap(prepared.map, ch, bias);\n  var node = place.node, start = place.start, end = place.end, collapse = place.collapse;\n\n  var rect;\n  if (node.nodeType == 3) { // If it is a text node, use a range to retrieve the coordinates.\n    for (var i$1 = 0; i$1 < 4; i$1++) { // Retry a maximum of 4 times when nonsense rectangles are returned\n      while (start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start))) { --start; }\n      while (place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end))) { ++end; }\n      if (ie && ie_version < 9 && start == 0 && end == place.coverEnd - place.coverStart)\n        { rect = node.parentNode.getBoundingClientRect(); }\n      else\n        { rect = getUsefulRect(range(node, start, end).getClientRects(), bias); }\n      if (rect.left || rect.right || start == 0) { break }\n      end = start;\n      start = start - 1;\n      collapse = \"right\";\n    }\n    if (ie && ie_version < 11) { rect = maybeUpdateRectForZooming(cm.display.measure, rect); }\n  } else { // If it is a widget, simply get the box for the whole widget.\n    if (start > 0) { collapse = bias = \"right\"; }\n    var rects;\n    if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1)\n      { rect = rects[bias == \"right\" ? rects.length - 1 : 0]; }\n    else\n      { rect = node.getBoundingClientRect(); }\n  }\n  if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {\n    var rSpan = node.parentNode.getClientRects()[0];\n    if (rSpan)\n      { rect = {left: rSpan.left, right: rSpan.left + charWidth(cm.display), top: rSpan.top, bottom: rSpan.bottom}; }\n    else\n      { rect = nullRect; }\n  }\n\n  var rtop = rect.top - prepared.rect.top, rbot = rect.bottom - prepared.rect.top;\n  var mid = (rtop + rbot) / 2;\n  var heights = prepared.view.measure.heights;\n  var i = 0;\n  for (; i < heights.length - 1; i++)\n    { if (mid < heights[i]) { break } }\n  var top = i ? heights[i - 1] : 0, bot = heights[i];\n  var result = {left: (collapse == \"right\" ? rect.right : rect.left) - prepared.rect.left,\n                right: (collapse == \"left\" ? rect.left : rect.right) - prepared.rect.left,\n                top: top, bottom: bot};\n  if (!rect.left && !rect.right) { result.bogus = true; }\n  if (!cm.options.singleCursorHeightPerLine) { result.rtop = rtop; result.rbottom = rbot; }\n\n  return result\n}\n\n// Work around problem with bounding client rects on ranges being\n// returned incorrectly when zoomed on IE10 and below.\nfunction maybeUpdateRectForZooming(measure, rect) {\n  if (!window.screen || screen.logicalXDPI == null ||\n      screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure))\n    { return rect }\n  var scaleX = screen.logicalXDPI / screen.deviceXDPI;\n  var scaleY = screen.logicalYDPI / screen.deviceYDPI;\n  return {left: rect.left * scaleX, right: rect.right * scaleX,\n          top: rect.top * scaleY, bottom: rect.bottom * scaleY}\n}\n\nfunction clearLineMeasurementCacheFor(lineView) {\n  if (lineView.measure) {\n    lineView.measure.cache = {};\n    lineView.measure.heights = null;\n    if (lineView.rest) { for (var i = 0; i < lineView.rest.length; i++)\n      { lineView.measure.caches[i] = {}; } }\n  }\n}\n\nfunction clearLineMeasurementCache(cm) {\n  cm.display.externalMeasure = null;\n  removeChildren(cm.display.lineMeasure);\n  for (var i = 0; i < cm.display.view.length; i++)\n    { clearLineMeasurementCacheFor(cm.display.view[i]); }\n}\n\nfunction clearCaches(cm) {\n  clearLineMeasurementCache(cm);\n  cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null;\n  if (!cm.options.lineWrapping) { cm.display.maxLineChanged = true; }\n  cm.display.lineNumChars = null;\n}\n\nfunction pageScrollX() {\n  // Work around https://bugs.chromium.org/p/chromium/issues/detail?id=489206\n  // which causes page_Offset and bounding client rects to use\n  // different reference viewports and invalidate our calculations.\n  if (chrome && android) { return -(document.body.getBoundingClientRect().left - parseInt(getComputedStyle(document.body).marginLeft)) }\n  return window.pageXOffset || (document.documentElement || document.body).scrollLeft\n}\nfunction pageScrollY() {\n  if (chrome && android) { return -(document.body.getBoundingClientRect().top - parseInt(getComputedStyle(document.body).marginTop)) }\n  return window.pageYOffset || (document.documentElement || document.body).scrollTop\n}\n\n// Converts a {top, bottom, left, right} box from line-local\n// coordinates into another coordinate system. Context may be one of\n// \"line\", \"div\" (display.lineDiv), \"local\"./null (editor), \"window\",\n// or \"page\".\nfunction intoCoordSystem(cm, lineObj, rect, context, includeWidgets) {\n  if (!includeWidgets && lineObj.widgets) { for (var i = 0; i < lineObj.widgets.length; ++i) { if (lineObj.widgets[i].above) {\n    var size = widgetHeight(lineObj.widgets[i]);\n    rect.top += size; rect.bottom += size;\n  } } }\n  if (context == \"line\") { return rect }\n  if (!context) { context = \"local\"; }\n  var yOff = heightAtLine(lineObj);\n  if (context == \"local\") { yOff += paddingTop(cm.display); }\n  else { yOff -= cm.display.viewOffset; }\n  if (context == \"page\" || context == \"window\") {\n    var lOff = cm.display.lineSpace.getBoundingClientRect();\n    yOff += lOff.top + (context == \"window\" ? 0 : pageScrollY());\n    var xOff = lOff.left + (context == \"window\" ? 0 : pageScrollX());\n    rect.left += xOff; rect.right += xOff;\n  }\n  rect.top += yOff; rect.bottom += yOff;\n  return rect\n}\n\n// Coverts a box from \"div\" coords to another coordinate system.\n// Context may be \"window\", \"page\", \"div\", or \"local\"./null.\nfunction fromCoordSystem(cm, coords, context) {\n  if (context == \"div\") { return coords }\n  var left = coords.left, top = coords.top;\n  // First move into \"page\" coordinate system\n  if (context == \"page\") {\n    left -= pageScrollX();\n    top -= pageScrollY();\n  } else if (context == \"local\" || !context) {\n    var localBox = cm.display.sizer.getBoundingClientRect();\n    left += localBox.left;\n    top += localBox.top;\n  }\n\n  var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect();\n  return {left: left - lineSpaceBox.left, top: top - lineSpaceBox.top}\n}\n\nfunction charCoords(cm, pos, context, lineObj, bias) {\n  if (!lineObj) { lineObj = getLine(cm.doc, pos.line); }\n  return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context)\n}\n\n// Returns a box for a given cursor position, which may have an\n// 'other' property containing the position of the secondary cursor\n// on a bidi boundary.\n// A cursor Pos(line, char, \"before\") is on the same visual line as `char - 1`\n// and after `char - 1` in writing order of `char - 1`\n// A cursor Pos(line, char, \"after\") is on the same visual line as `char`\n// and before `char` in writing order of `char`\n// Examples (upper-case letters are RTL, lower-case are LTR):\n//     Pos(0, 1, ...)\n//     before   after\n// ab     a|b     a|b\n// aB     a|B     aB|\n// Ab     |Ab     A|b\n// AB     B|A     B|A\n// Every position after the last character on a line is considered to stick\n// to the last character on the line.\nfunction cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {\n  lineObj = lineObj || getLine(cm.doc, pos.line);\n  if (!preparedMeasure) { preparedMeasure = prepareMeasureForLine(cm, lineObj); }\n  function get(ch, right) {\n    var m = measureCharPrepared(cm, preparedMeasure, ch, right ? \"right\" : \"left\", varHeight);\n    if (right) { m.left = m.right; } else { m.right = m.left; }\n    return intoCoordSystem(cm, lineObj, m, context)\n  }\n  var order = getOrder(lineObj, cm.doc.direction), ch = pos.ch, sticky = pos.sticky;\n  if (ch >= lineObj.text.length) {\n    ch = lineObj.text.length;\n    sticky = \"before\";\n  } else if (ch <= 0) {\n    ch = 0;\n    sticky = \"after\";\n  }\n  if (!order) { return get(sticky == \"before\" ? ch - 1 : ch, sticky == \"before\") }\n\n  function getBidi(ch, partPos, invert) {\n    var part = order[partPos], right = (part.level % 2) != 0;\n    return get(invert ? ch - 1 : ch, right != invert)\n  }\n  var partPos = getBidiPartAt(order, ch, sticky);\n  var other = bidiOther;\n  var val = getBidi(ch, partPos, sticky == \"before\");\n  if (other != null) { val.other = getBidi(ch, other, sticky != \"before\"); }\n  return val\n}\n\n// Used to cheaply estimate the coordinates for a position. Used for\n// intermediate scroll updates.\nfunction estimateCoords(cm, pos) {\n  var left = 0;\n  pos = clipPos(cm.doc, pos);\n  if (!cm.options.lineWrapping) { left = charWidth(cm.display) * pos.ch; }\n  var lineObj = getLine(cm.doc, pos.line);\n  var top = heightAtLine(lineObj) + paddingTop(cm.display);\n  return {left: left, right: left, top: top, bottom: top + lineObj.height}\n}\n\n// Positions returned by coordsChar contain some extra information.\n// xRel is the relative x position of the input coordinates compared\n// to the found position (so xRel > 0 means the coordinates are to\n// the right of the character position, for example). When outside\n// is true, that means the coordinates lie outside the line's\n// vertical range.\nfunction PosWithInfo(line, ch, sticky, outside, xRel) {\n  var pos = Pos(line, ch, sticky);\n  pos.xRel = xRel;\n  if (outside) { pos.outside = true; }\n  return pos\n}\n\n// Compute the character position closest to the given coordinates.\n// Input must be lineSpace-local (\"div\" coordinate system).\nfunction coordsChar(cm, x, y) {\n  var doc = cm.doc;\n  y += cm.display.viewOffset;\n  if (y < 0) { return PosWithInfo(doc.first, 0, null, true, -1) }\n  var lineN = lineAtHeight(doc, y), last = doc.first + doc.size - 1;\n  if (lineN > last)\n    { return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, null, true, 1) }\n  if (x < 0) { x = 0; }\n\n  var lineObj = getLine(doc, lineN);\n  for (;;) {\n    var found = coordsCharInner(cm, lineObj, lineN, x, y);\n    var merged = collapsedSpanAtEnd(lineObj);\n    var mergedPos = merged && merged.find(0, true);\n    if (merged && (found.ch > mergedPos.from.ch || found.ch == mergedPos.from.ch && found.xRel > 0))\n      { lineN = lineNo(lineObj = mergedPos.to.line); }\n    else\n      { return found }\n  }\n}\n\nfunction wrappedLineExtent(cm, lineObj, preparedMeasure, y) {\n  var measure = function (ch) { return intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, ch), \"line\"); };\n  var end = lineObj.text.length;\n  var begin = findFirst(function (ch) { return measure(ch - 1).bottom <= y; }, end, 0);\n  end = findFirst(function (ch) { return measure(ch).top > y; }, begin, end);\n  return {begin: begin, end: end}\n}\n\nfunction wrappedLineExtentChar(cm, lineObj, preparedMeasure, target) {\n  var targetTop = intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, target), \"line\").top;\n  return wrappedLineExtent(cm, lineObj, preparedMeasure, targetTop)\n}\n\nfunction coordsCharInner(cm, lineObj, lineNo$$1, x, y) {\n  y -= heightAtLine(lineObj);\n  var begin = 0, end = lineObj.text.length;\n  var preparedMeasure = prepareMeasureForLine(cm, lineObj);\n  var pos;\n  var order = getOrder(lineObj, cm.doc.direction);\n  if (order) {\n    if (cm.options.lineWrapping) {\n      var assign;\n      ((assign = wrappedLineExtent(cm, lineObj, preparedMeasure, y), begin = assign.begin, end = assign.end, assign));\n    }\n    pos = new Pos(lineNo$$1, Math.floor(begin + (end - begin) / 2));\n    var beginLeft = cursorCoords(cm, pos, \"line\", lineObj, preparedMeasure).left;\n    var dir = beginLeft < x ? 1 : -1;\n    var prevDiff, diff = beginLeft - x, prevPos;\n    var steps = Math.ceil((end - begin) / 4);\n    outer: do {\n      prevDiff = diff;\n      prevPos = pos;\n      var i = 0;\n      for (; i < steps; ++i) {\n        var prevPos$1 = pos;\n        pos = moveVisually(cm, lineObj, pos, dir);\n        if (pos == null || pos.ch < begin || end <= (pos.sticky == \"before\" ? pos.ch - 1 : pos.ch)) {\n          pos = prevPos$1;\n          break outer\n        }\n      }\n      diff = cursorCoords(cm, pos, \"line\", lineObj, preparedMeasure).left - x;\n      if (steps > 1) {\n        var diff_change_per_step = Math.abs(diff - prevDiff) / steps;\n        steps = Math.min(steps, Math.ceil(Math.abs(diff) / diff_change_per_step));\n        dir = diff < 0 ? 1 : -1;\n      }\n    } while (diff != 0 && (steps > 1 || ((dir < 0) != (diff < 0) && (Math.abs(diff) <= Math.abs(prevDiff)))))\n    if (Math.abs(diff) > Math.abs(prevDiff)) {\n      if ((diff < 0) == (prevDiff < 0)) { throw new Error(\"Broke out of infinite loop in coordsCharInner\") }\n      pos = prevPos;\n    }\n  } else {\n    var ch = findFirst(function (ch) {\n      var box = intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, ch), \"line\");\n      if (box.top > y) {\n        // For the cursor stickiness\n        end = Math.min(ch, end);\n        return true\n      }\n      else if (box.bottom <= y) { return false }\n      else if (box.left > x) { return true }\n      else if (box.right < x) { return false }\n      else { return (x - box.left < box.right - x) }\n    }, begin, end);\n    ch = skipExtendingChars(lineObj.text, ch, 1);\n    pos = new Pos(lineNo$$1, ch, ch == end ? \"before\" : \"after\");\n  }\n  var coords = cursorCoords(cm, pos, \"line\", lineObj, preparedMeasure);\n  if (y < coords.top || coords.bottom < y) { pos.outside = true; }\n  pos.xRel = x < coords.left ? -1 : (x > coords.right ? 1 : 0);\n  return pos\n}\n\nvar measureText;\n// Compute the default text height.\nfunction textHeight(display) {\n  if (display.cachedTextHeight != null) { return display.cachedTextHeight }\n  if (measureText == null) {\n    measureText = elt(\"pre\");\n    // Measure a bunch of lines, for browsers that compute\n    // fractional heights.\n    for (var i = 0; i < 49; ++i) {\n      measureText.appendChild(document.createTextNode(\"x\"));\n      measureText.appendChild(elt(\"br\"));\n    }\n    measureText.appendChild(document.createTextNode(\"x\"));\n  }\n  removeChildrenAndAdd(display.measure, measureText);\n  var height = measureText.offsetHeight / 50;\n  if (height > 3) { display.cachedTextHeight = height; }\n  removeChildren(display.measure);\n  return height || 1\n}\n\n// Compute the default character width.\nfunction charWidth(display) {\n  if (display.cachedCharWidth != null) { return display.cachedCharWidth }\n  var anchor = elt(\"span\", \"xxxxxxxxxx\");\n  var pre = elt(\"pre\", [anchor]);\n  removeChildrenAndAdd(display.measure, pre);\n  var rect = anchor.getBoundingClientRect(), width = (rect.right - rect.left) / 10;\n  if (width > 2) { display.cachedCharWidth = width; }\n  return width || 10\n}\n\n// Do a bulk-read of the DOM positions and sizes needed to draw the\n// view, so that we don't interleave reading and writing to the DOM.\nfunction getDimensions(cm) {\n  var d = cm.display, left = {}, width = {};\n  var gutterLeft = d.gutters.clientLeft;\n  for (var n = d.gutters.firstChild, i = 0; n; n = n.nextSibling, ++i) {\n    left[cm.options.gutters[i]] = n.offsetLeft + n.clientLeft + gutterLeft;\n    width[cm.options.gutters[i]] = n.clientWidth;\n  }\n  return {fixedPos: compensateForHScroll(d),\n          gutterTotalWidth: d.gutters.offsetWidth,\n          gutterLeft: left,\n          gutterWidth: width,\n          wrapperWidth: d.wrapper.clientWidth}\n}\n\n// Computes display.scroller.scrollLeft + display.gutters.offsetWidth,\n// but using getBoundingClientRect to get a sub-pixel-accurate\n// result.\nfunction compensateForHScroll(display) {\n  return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left\n}\n\n// Returns a function that estimates the height of a line, to use as\n// first approximation until the line becomes visible (and is thus\n// properly measurable).\nfunction estimateHeight(cm) {\n  var th = textHeight(cm.display), wrapping = cm.options.lineWrapping;\n  var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);\n  return function (line) {\n    if (lineIsHidden(cm.doc, line)) { return 0 }\n\n    var widgetsHeight = 0;\n    if (line.widgets) { for (var i = 0; i < line.widgets.length; i++) {\n      if (line.widgets[i].height) { widgetsHeight += line.widgets[i].height; }\n    } }\n\n    if (wrapping)\n      { return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th }\n    else\n      { return widgetsHeight + th }\n  }\n}\n\nfunction estimateLineHeights(cm) {\n  var doc = cm.doc, est = estimateHeight(cm);\n  doc.iter(function (line) {\n    var estHeight = est(line);\n    if (estHeight != line.height) { updateLineHeight(line, estHeight); }\n  });\n}\n\n// Given a mouse event, find the corresponding position. If liberal\n// is false, it checks whether a gutter or scrollbar was clicked,\n// and returns null if it was. forRect is used by rectangular\n// selections, and tries to estimate a character position even for\n// coordinates beyond the right of the text.\nfunction posFromMouse(cm, e, liberal, forRect) {\n  var display = cm.display;\n  if (!liberal && e_target(e).getAttribute(\"cm-not-content\") == \"true\") { return null }\n\n  var x, y, space = display.lineSpace.getBoundingClientRect();\n  // Fails unpredictably on IE[67] when mouse is dragged around quickly.\n  try { x = e.clientX - space.left; y = e.clientY - space.top; }\n  catch (e) { return null }\n  var coords = coordsChar(cm, x, y), line;\n  if (forRect && coords.xRel == 1 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {\n    var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length;\n    coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff));\n  }\n  return coords\n}\n\n// Find the view element corresponding to a given line. Return null\n// when the line isn't visible.\nfunction findViewIndex(cm, n) {\n  if (n >= cm.display.viewTo) { return null }\n  n -= cm.display.viewFrom;\n  if (n < 0) { return null }\n  var view = cm.display.view;\n  for (var i = 0; i < view.length; i++) {\n    n -= view[i].size;\n    if (n < 0) { return i }\n  }\n}\n\nfunction updateSelection(cm) {\n  cm.display.input.showSelection(cm.display.input.prepareSelection());\n}\n\nfunction prepareSelection(cm, primary) {\n  var doc = cm.doc, result = {};\n  var curFragment = result.cursors = document.createDocumentFragment();\n  var selFragment = result.selection = document.createDocumentFragment();\n\n  for (var i = 0; i < doc.sel.ranges.length; i++) {\n    if (primary === false && i == doc.sel.primIndex) { continue }\n    var range$$1 = doc.sel.ranges[i];\n    if (range$$1.from().line >= cm.display.viewTo || range$$1.to().line < cm.display.viewFrom) { continue }\n    var collapsed = range$$1.empty();\n    if (collapsed || cm.options.showCursorWhenSelecting)\n      { drawSelectionCursor(cm, range$$1.head, curFragment); }\n    if (!collapsed)\n      { drawSelectionRange(cm, range$$1, selFragment); }\n  }\n  return result\n}\n\n// Draws a cursor for the given range\nfunction drawSelectionCursor(cm, head, output) {\n  var pos = cursorCoords(cm, head, \"div\", null, null, !cm.options.singleCursorHeightPerLine);\n\n  var cursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor\"));\n  cursor.style.left = pos.left + \"px\";\n  cursor.style.top = pos.top + \"px\";\n  cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + \"px\";\n\n  if (pos.other) {\n    // Secondary cursor, shown when on a 'jump' in bi-directional text\n    var otherCursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor CodeMirror-secondarycursor\"));\n    otherCursor.style.display = \"\";\n    otherCursor.style.left = pos.other.left + \"px\";\n    otherCursor.style.top = pos.other.top + \"px\";\n    otherCursor.style.height = (pos.other.bottom - pos.other.top) * .85 + \"px\";\n  }\n}\n\n// Draws the given range as a highlighted selection\nfunction drawSelectionRange(cm, range$$1, output) {\n  var display = cm.display, doc = cm.doc;\n  var fragment = document.createDocumentFragment();\n  var padding = paddingH(cm.display), leftSide = padding.left;\n  var rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right;\n\n  function add(left, top, width, bottom) {\n    if (top < 0) { top = 0; }\n    top = Math.round(top);\n    bottom = Math.round(bottom);\n    fragment.appendChild(elt(\"div\", null, \"CodeMirror-selected\", (\"position: absolute; left: \" + left + \"px;\\n                             top: \" + top + \"px; width: \" + (width == null ? rightSide - left : width) + \"px;\\n                             height: \" + (bottom - top) + \"px\")));\n  }\n\n  function drawForLine(line, fromArg, toArg) {\n    var lineObj = getLine(doc, line);\n    var lineLen = lineObj.text.length;\n    var start, end;\n    function coords(ch, bias) {\n      return charCoords(cm, Pos(line, ch), \"div\", lineObj, bias)\n    }\n\n    iterateBidiSections(getOrder(lineObj, doc.direction), fromArg || 0, toArg == null ? lineLen : toArg, function (from, to, dir) {\n      var leftPos = coords(from, \"left\"), rightPos, left, right;\n      if (from == to) {\n        rightPos = leftPos;\n        left = right = leftPos.left;\n      } else {\n        rightPos = coords(to - 1, \"right\");\n        if (dir == \"rtl\") { var tmp = leftPos; leftPos = rightPos; rightPos = tmp; }\n        left = leftPos.left;\n        right = rightPos.right;\n      }\n      if (fromArg == null && from == 0) { left = leftSide; }\n      if (rightPos.top - leftPos.top > 3) { // Different lines, draw top part\n        add(left, leftPos.top, null, leftPos.bottom);\n        left = leftSide;\n        if (leftPos.bottom < rightPos.top) { add(left, leftPos.bottom, null, rightPos.top); }\n      }\n      if (toArg == null && to == lineLen) { right = rightSide; }\n      if (!start || leftPos.top < start.top || leftPos.top == start.top && leftPos.left < start.left)\n        { start = leftPos; }\n      if (!end || rightPos.bottom > end.bottom || rightPos.bottom == end.bottom && rightPos.right > end.right)\n        { end = rightPos; }\n      if (left < leftSide + 1) { left = leftSide; }\n      add(left, rightPos.top, right - left, rightPos.bottom);\n    });\n    return {start: start, end: end}\n  }\n\n  var sFrom = range$$1.from(), sTo = range$$1.to();\n  if (sFrom.line == sTo.line) {\n    drawForLine(sFrom.line, sFrom.ch, sTo.ch);\n  } else {\n    var fromLine = getLine(doc, sFrom.line), toLine = getLine(doc, sTo.line);\n    var singleVLine = visualLine(fromLine) == visualLine(toLine);\n    var leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end;\n    var rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start;\n    if (singleVLine) {\n      if (leftEnd.top < rightStart.top - 2) {\n        add(leftEnd.right, leftEnd.top, null, leftEnd.bottom);\n        add(leftSide, rightStart.top, rightStart.left, rightStart.bottom);\n      } else {\n        add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom);\n      }\n    }\n    if (leftEnd.bottom < rightStart.top)\n      { add(leftSide, leftEnd.bottom, null, rightStart.top); }\n  }\n\n  output.appendChild(fragment);\n}\n\n// Cursor-blinking\nfunction restartBlink(cm) {\n  if (!cm.state.focused) { return }\n  var display = cm.display;\n  clearInterval(display.blinker);\n  var on = true;\n  display.cursorDiv.style.visibility = \"\";\n  if (cm.options.cursorBlinkRate > 0)\n    { display.blinker = setInterval(function () { return display.cursorDiv.style.visibility = (on = !on) ? \"\" : \"hidden\"; },\n      cm.options.cursorBlinkRate); }\n  else if (cm.options.cursorBlinkRate < 0)\n    { display.cursorDiv.style.visibility = \"hidden\"; }\n}\n\nfunction ensureFocus(cm) {\n  if (!cm.state.focused) { cm.display.input.focus(); onFocus(cm); }\n}\n\nfunction delayBlurEvent(cm) {\n  cm.state.delayingBlurEvent = true;\n  setTimeout(function () { if (cm.state.delayingBlurEvent) {\n    cm.state.delayingBlurEvent = false;\n    onBlur(cm);\n  } }, 100);\n}\n\nfunction onFocus(cm, e) {\n  if (cm.state.delayingBlurEvent) { cm.state.delayingBlurEvent = false; }\n\n  if (cm.options.readOnly == \"nocursor\") { return }\n  if (!cm.state.focused) {\n    signal(cm, \"focus\", cm, e);\n    cm.state.focused = true;\n    addClass(cm.display.wrapper, \"CodeMirror-focused\");\n    // This test prevents this from firing when a context\n    // menu is closed (since the input reset would kill the\n    // select-all detection hack)\n    if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {\n      cm.display.input.reset();\n      if (webkit) { setTimeout(function () { return cm.display.input.reset(true); }, 20); } // Issue #1730\n    }\n    cm.display.input.receivedFocus();\n  }\n  restartBlink(cm);\n}\nfunction onBlur(cm, e) {\n  if (cm.state.delayingBlurEvent) { return }\n\n  if (cm.state.focused) {\n    signal(cm, \"blur\", cm, e);\n    cm.state.focused = false;\n    rmClass(cm.display.wrapper, \"CodeMirror-focused\");\n  }\n  clearInterval(cm.display.blinker);\n  setTimeout(function () { if (!cm.state.focused) { cm.display.shift = false; } }, 150);\n}\n\n// Read the actual heights of the rendered lines, and update their\n// stored heights to match.\nfunction updateHeightsInViewport(cm) {\n  var display = cm.display;\n  var prevBottom = display.lineDiv.offsetTop;\n  for (var i = 0; i < display.view.length; i++) {\n    var cur = display.view[i], height = (void 0);\n    if (cur.hidden) { continue }\n    if (ie && ie_version < 8) {\n      var bot = cur.node.offsetTop + cur.node.offsetHeight;\n      height = bot - prevBottom;\n      prevBottom = bot;\n    } else {\n      var box = cur.node.getBoundingClientRect();\n      height = box.bottom - box.top;\n    }\n    var diff = cur.line.height - height;\n    if (height < 2) { height = textHeight(display); }\n    if (diff > .005 || diff < -.005) {\n      updateLineHeight(cur.line, height);\n      updateWidgetHeight(cur.line);\n      if (cur.rest) { for (var j = 0; j < cur.rest.length; j++)\n        { updateWidgetHeight(cur.rest[j]); } }\n    }\n  }\n}\n\n// Read and store the height of line widgets associated with the\n// given line.\nfunction updateWidgetHeight(line) {\n  if (line.widgets) { for (var i = 0; i < line.widgets.length; ++i)\n    { line.widgets[i].height = line.widgets[i].node.parentNode.offsetHeight; } }\n}\n\n// Compute the lines that are visible in a given viewport (defaults\n// the the current scroll position). viewport may contain top,\n// height, and ensure (see op.scrollToPos) properties.\nfunction visibleLines(display, doc, viewport) {\n  var top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop;\n  top = Math.floor(top - paddingTop(display));\n  var bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight;\n\n  var from = lineAtHeight(doc, top), to = lineAtHeight(doc, bottom);\n  // Ensure is a {from: {line, ch}, to: {line, ch}} object, and\n  // forces those lines into the viewport (if possible).\n  if (viewport && viewport.ensure) {\n    var ensureFrom = viewport.ensure.from.line, ensureTo = viewport.ensure.to.line;\n    if (ensureFrom < from) {\n      from = ensureFrom;\n      to = lineAtHeight(doc, heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight);\n    } else if (Math.min(ensureTo, doc.lastLine()) >= to) {\n      from = lineAtHeight(doc, heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight);\n      to = ensureTo;\n    }\n  }\n  return {from: from, to: Math.max(to, from + 1)}\n}\n\n// Re-align line numbers and gutter marks to compensate for\n// horizontal scrolling.\nfunction alignHorizontally(cm) {\n  var display = cm.display, view = display.view;\n  if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter)) { return }\n  var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft;\n  var gutterW = display.gutters.offsetWidth, left = comp + \"px\";\n  for (var i = 0; i < view.length; i++) { if (!view[i].hidden) {\n    if (cm.options.fixedGutter) {\n      if (view[i].gutter)\n        { view[i].gutter.style.left = left; }\n      if (view[i].gutterBackground)\n        { view[i].gutterBackground.style.left = left; }\n    }\n    var align = view[i].alignable;\n    if (align) { for (var j = 0; j < align.length; j++)\n      { align[j].style.left = left; } }\n  } }\n  if (cm.options.fixedGutter)\n    { display.gutters.style.left = (comp + gutterW) + \"px\"; }\n}\n\n// Used to ensure that the line number gutter is still the right\n// size for the current document size. Returns true when an update\n// is needed.\nfunction maybeUpdateLineNumberWidth(cm) {\n  if (!cm.options.lineNumbers) { return false }\n  var doc = cm.doc, last = lineNumberFor(cm.options, doc.first + doc.size - 1), display = cm.display;\n  if (last.length != display.lineNumChars) {\n    var test = display.measure.appendChild(elt(\"div\", [elt(\"div\", last)],\n                                               \"CodeMirror-linenumber CodeMirror-gutter-elt\"));\n    var innerW = test.firstChild.offsetWidth, padding = test.offsetWidth - innerW;\n    display.lineGutter.style.width = \"\";\n    display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1;\n    display.lineNumWidth = display.lineNumInnerWidth + padding;\n    display.lineNumChars = display.lineNumInnerWidth ? last.length : -1;\n    display.lineGutter.style.width = display.lineNumWidth + \"px\";\n    updateGutterSpace(cm);\n    return true\n  }\n  return false\n}\n\n// SCROLLING THINGS INTO VIEW\n\n// If an editor sits on the top or bottom of the window, partially\n// scrolled out of view, this ensures that the cursor is visible.\nfunction maybeScrollWindow(cm, rect) {\n  if (signalDOMEvent(cm, \"scrollCursorIntoView\")) { return }\n\n  var display = cm.display, box = display.sizer.getBoundingClientRect(), doScroll = null;\n  if (rect.top + box.top < 0) { doScroll = true; }\n  else if (rect.bottom + box.top > (window.innerHeight || document.documentElement.clientHeight)) { doScroll = false; }\n  if (doScroll != null && !phantom) {\n    var scrollNode = elt(\"div\", \"\\u200b\", null, (\"position: absolute;\\n                         top: \" + (rect.top - display.viewOffset - paddingTop(cm.display)) + \"px;\\n                         height: \" + (rect.bottom - rect.top + scrollGap(cm) + display.barHeight) + \"px;\\n                         left: \" + (rect.left) + \"px; width: \" + (Math.max(2, rect.right - rect.left)) + \"px;\"));\n    cm.display.lineSpace.appendChild(scrollNode);\n    scrollNode.scrollIntoView(doScroll);\n    cm.display.lineSpace.removeChild(scrollNode);\n  }\n}\n\n// Scroll a given position into view (immediately), verifying that\n// it actually became visible (as line heights are accurately\n// measured, the position of something may 'drift' during drawing).\nfunction scrollPosIntoView(cm, pos, end, margin) {\n  if (margin == null) { margin = 0; }\n  var rect;\n  if (!cm.options.lineWrapping && pos == end) {\n    // Set pos and end to the cursor positions around the character pos sticks to\n    // If pos.sticky == \"before\", that is around pos.ch - 1, otherwise around pos.ch\n    // If pos == Pos(_, 0, \"before\"), pos and end are unchanged\n    pos = pos.ch ? Pos(pos.line, pos.sticky == \"before\" ? pos.ch - 1 : pos.ch, \"after\") : pos;\n    end = pos.sticky == \"before\" ? Pos(pos.line, pos.ch + 1, \"before\") : pos;\n  }\n  for (var limit = 0; limit < 5; limit++) {\n    var changed = false;\n    var coords = cursorCoords(cm, pos);\n    var endCoords = !end || end == pos ? coords : cursorCoords(cm, end);\n    rect = {left: Math.min(coords.left, endCoords.left),\n            top: Math.min(coords.top, endCoords.top) - margin,\n            right: Math.max(coords.left, endCoords.left),\n            bottom: Math.max(coords.bottom, endCoords.bottom) + margin};\n    var scrollPos = calculateScrollPos(cm, rect);\n    var startTop = cm.doc.scrollTop, startLeft = cm.doc.scrollLeft;\n    if (scrollPos.scrollTop != null) {\n      updateScrollTop(cm, scrollPos.scrollTop);\n      if (Math.abs(cm.doc.scrollTop - startTop) > 1) { changed = true; }\n    }\n    if (scrollPos.scrollLeft != null) {\n      setScrollLeft(cm, scrollPos.scrollLeft);\n      if (Math.abs(cm.doc.scrollLeft - startLeft) > 1) { changed = true; }\n    }\n    if (!changed) { break }\n  }\n  return rect\n}\n\n// Scroll a given set of coordinates into view (immediately).\nfunction scrollIntoView(cm, rect) {\n  var scrollPos = calculateScrollPos(cm, rect);\n  if (scrollPos.scrollTop != null) { updateScrollTop(cm, scrollPos.scrollTop); }\n  if (scrollPos.scrollLeft != null) { setScrollLeft(cm, scrollPos.scrollLeft); }\n}\n\n// Calculate a new scroll position needed to scroll the given\n// rectangle into view. Returns an object with scrollTop and\n// scrollLeft properties. When these are undefined, the\n// vertical/horizontal position does not need to be adjusted.\nfunction calculateScrollPos(cm, rect) {\n  var display = cm.display, snapMargin = textHeight(cm.display);\n  if (rect.top < 0) { rect.top = 0; }\n  var screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop;\n  var screen = displayHeight(cm), result = {};\n  if (rect.bottom - rect.top > screen) { rect.bottom = rect.top + screen; }\n  var docBottom = cm.doc.height + paddingVert(display);\n  var atTop = rect.top < snapMargin, atBottom = rect.bottom > docBottom - snapMargin;\n  if (rect.top < screentop) {\n    result.scrollTop = atTop ? 0 : rect.top;\n  } else if (rect.bottom > screentop + screen) {\n    var newTop = Math.min(rect.top, (atBottom ? docBottom : rect.bottom) - screen);\n    if (newTop != screentop) { result.scrollTop = newTop; }\n  }\n\n  var screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft;\n  var screenw = displayWidth(cm) - (cm.options.fixedGutter ? display.gutters.offsetWidth : 0);\n  var tooWide = rect.right - rect.left > screenw;\n  if (tooWide) { rect.right = rect.left + screenw; }\n  if (rect.left < 10)\n    { result.scrollLeft = 0; }\n  else if (rect.left < screenleft)\n    { result.scrollLeft = Math.max(0, rect.left - (tooWide ? 0 : 10)); }\n  else if (rect.right > screenw + screenleft - 3)\n    { result.scrollLeft = rect.right + (tooWide ? 0 : 10) - screenw; }\n  return result\n}\n\n// Store a relative adjustment to the scroll position in the current\n// operation (to be applied when the operation finishes).\nfunction addToScrollTop(cm, top) {\n  if (top == null) { return }\n  resolveScrollToPos(cm);\n  cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top;\n}\n\n// Make sure that at the end of the operation the current cursor is\n// shown.\nfunction ensureCursorVisible(cm) {\n  resolveScrollToPos(cm);\n  var cur = cm.getCursor();\n  cm.curOp.scrollToPos = {from: cur, to: cur, margin: cm.options.cursorScrollMargin};\n}\n\nfunction scrollToCoords(cm, x, y) {\n  if (x != null || y != null) { resolveScrollToPos(cm); }\n  if (x != null) { cm.curOp.scrollLeft = x; }\n  if (y != null) { cm.curOp.scrollTop = y; }\n}\n\nfunction scrollToRange(cm, range$$1) {\n  resolveScrollToPos(cm);\n  cm.curOp.scrollToPos = range$$1;\n}\n\n// When an operation has its scrollToPos property set, and another\n// scroll action is applied before the end of the operation, this\n// 'simulates' scrolling that position into view in a cheap way, so\n// that the effect of intermediate scroll commands is not ignored.\nfunction resolveScrollToPos(cm) {\n  var range$$1 = cm.curOp.scrollToPos;\n  if (range$$1) {\n    cm.curOp.scrollToPos = null;\n    var from = estimateCoords(cm, range$$1.from), to = estimateCoords(cm, range$$1.to);\n    scrollToCoordsRange(cm, from, to, range$$1.margin);\n  }\n}\n\nfunction scrollToCoordsRange(cm, from, to, margin) {\n  var sPos = calculateScrollPos(cm, {\n    left: Math.min(from.left, to.left),\n    top: Math.min(from.top, to.top) - margin,\n    right: Math.max(from.right, to.right),\n    bottom: Math.max(from.bottom, to.bottom) + margin\n  });\n  scrollToCoords(cm, sPos.scrollLeft, sPos.scrollTop);\n}\n\n// Sync the scrollable area and scrollbars, ensure the viewport\n// covers the visible area.\nfunction updateScrollTop(cm, val) {\n  if (Math.abs(cm.doc.scrollTop - val) < 2) { return }\n  if (!gecko) { updateDisplaySimple(cm, {top: val}); }\n  setScrollTop(cm, val, true);\n  if (gecko) { updateDisplaySimple(cm); }\n  startWorker(cm, 100);\n}\n\nfunction setScrollTop(cm, val, forceScroll) {\n  val = Math.min(cm.display.scroller.scrollHeight - cm.display.scroller.clientHeight, val);\n  if (cm.display.scroller.scrollTop == val && !forceScroll) { return }\n  cm.doc.scrollTop = val;\n  cm.display.scrollbars.setScrollTop(val);\n  if (cm.display.scroller.scrollTop != val) { cm.display.scroller.scrollTop = val; }\n}\n\n// Sync scroller and scrollbar, ensure the gutter elements are\n// aligned.\nfunction setScrollLeft(cm, val, isScroller, forceScroll) {\n  val = Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth);\n  if ((isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) && !forceScroll) { return }\n  cm.doc.scrollLeft = val;\n  alignHorizontally(cm);\n  if (cm.display.scroller.scrollLeft != val) { cm.display.scroller.scrollLeft = val; }\n  cm.display.scrollbars.setScrollLeft(val);\n}\n\n// SCROLLBARS\n\n// Prepare DOM reads needed to update the scrollbars. Done in one\n// shot to minimize update/measure roundtrips.\nfunction measureForScrollbars(cm) {\n  var d = cm.display, gutterW = d.gutters.offsetWidth;\n  var docH = Math.round(cm.doc.height + paddingVert(cm.display));\n  return {\n    clientHeight: d.scroller.clientHeight,\n    viewHeight: d.wrapper.clientHeight,\n    scrollWidth: d.scroller.scrollWidth, clientWidth: d.scroller.clientWidth,\n    viewWidth: d.wrapper.clientWidth,\n    barLeft: cm.options.fixedGutter ? gutterW : 0,\n    docHeight: docH,\n    scrollHeight: docH + scrollGap(cm) + d.barHeight,\n    nativeBarWidth: d.nativeBarWidth,\n    gutterWidth: gutterW\n  }\n}\n\nvar NativeScrollbars = function(place, scroll, cm) {\n  this.cm = cm;\n  var vert = this.vert = elt(\"div\", [elt(\"div\", null, null, \"min-width: 1px\")], \"CodeMirror-vscrollbar\");\n  var horiz = this.horiz = elt(\"div\", [elt(\"div\", null, null, \"height: 100%; min-height: 1px\")], \"CodeMirror-hscrollbar\");\n  place(vert); place(horiz);\n\n  on(vert, \"scroll\", function () {\n    if (vert.clientHeight) { scroll(vert.scrollTop, \"vertical\"); }\n  });\n  on(horiz, \"scroll\", function () {\n    if (horiz.clientWidth) { scroll(horiz.scrollLeft, \"horizontal\"); }\n  });\n\n  this.checkedZeroWidth = false;\n  // Need to set a minimum width to see the scrollbar on IE7 (but must not set it on IE8).\n  if (ie && ie_version < 8) { this.horiz.style.minHeight = this.vert.style.minWidth = \"18px\"; }\n};\n\nNativeScrollbars.prototype.update = function (measure) {\n  var needsH = measure.scrollWidth > measure.clientWidth + 1;\n  var needsV = measure.scrollHeight > measure.clientHeight + 1;\n  var sWidth = measure.nativeBarWidth;\n\n  if (needsV) {\n    this.vert.style.display = \"block\";\n    this.vert.style.bottom = needsH ? sWidth + \"px\" : \"0\";\n    var totalHeight = measure.viewHeight - (needsH ? sWidth : 0);\n    // A bug in IE8 can cause this value to be negative, so guard it.\n    this.vert.firstChild.style.height =\n      Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + \"px\";\n  } else {\n    this.vert.style.display = \"\";\n    this.vert.firstChild.style.height = \"0\";\n  }\n\n  if (needsH) {\n    this.horiz.style.display = \"block\";\n    this.horiz.style.right = needsV ? sWidth + \"px\" : \"0\";\n    this.horiz.style.left = measure.barLeft + \"px\";\n    var totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0);\n    this.horiz.firstChild.style.width =\n      Math.max(0, measure.scrollWidth - measure.clientWidth + totalWidth) + \"px\";\n  } else {\n    this.horiz.style.display = \"\";\n    this.horiz.firstChild.style.width = \"0\";\n  }\n\n  if (!this.checkedZeroWidth && measure.clientHeight > 0) {\n    if (sWidth == 0) { this.zeroWidthHack(); }\n    this.checkedZeroWidth = true;\n  }\n\n  return {right: needsV ? sWidth : 0, bottom: needsH ? sWidth : 0}\n};\n\nNativeScrollbars.prototype.setScrollLeft = function (pos) {\n  if (this.horiz.scrollLeft != pos) { this.horiz.scrollLeft = pos; }\n  if (this.disableHoriz) { this.enableZeroWidthBar(this.horiz, this.disableHoriz, \"horiz\"); }\n};\n\nNativeScrollbars.prototype.setScrollTop = function (pos) {\n  if (this.vert.scrollTop != pos) { this.vert.scrollTop = pos; }\n  if (this.disableVert) { this.enableZeroWidthBar(this.vert, this.disableVert, \"vert\"); }\n};\n\nNativeScrollbars.prototype.zeroWidthHack = function () {\n  var w = mac && !mac_geMountainLion ? \"12px\" : \"18px\";\n  this.horiz.style.height = this.vert.style.width = w;\n  this.horiz.style.pointerEvents = this.vert.style.pointerEvents = \"none\";\n  this.disableHoriz = new Delayed;\n  this.disableVert = new Delayed;\n};\n\nNativeScrollbars.prototype.enableZeroWidthBar = function (bar, delay, type) {\n  bar.style.pointerEvents = \"auto\";\n  function maybeDisable() {\n    // To find out whether the scrollbar is still visible, we\n    // check whether the element under the pixel in the bottom\n    // right corner of the scrollbar box is the scrollbar box\n    // itself (when the bar is still visible) or its filler child\n    // (when the bar is hidden). If it is still visible, we keep\n    // it enabled, if it's hidden, we disable pointer events.\n    var box = bar.getBoundingClientRect();\n    var elt$$1 = type == \"vert\" ? document.elementFromPoint(box.right - 1, (box.top + box.bottom) / 2)\n        : document.elementFromPoint((box.right + box.left) / 2, box.bottom - 1);\n    if (elt$$1 != bar) { bar.style.pointerEvents = \"none\"; }\n    else { delay.set(1000, maybeDisable); }\n  }\n  delay.set(1000, maybeDisable);\n};\n\nNativeScrollbars.prototype.clear = function () {\n  var parent = this.horiz.parentNode;\n  parent.removeChild(this.horiz);\n  parent.removeChild(this.vert);\n};\n\nvar NullScrollbars = function () {};\n\nNullScrollbars.prototype.update = function () { return {bottom: 0, right: 0} };\nNullScrollbars.prototype.setScrollLeft = function () {};\nNullScrollbars.prototype.setScrollTop = function () {};\nNullScrollbars.prototype.clear = function () {};\n\nfunction updateScrollbars(cm, measure) {\n  if (!measure) { measure = measureForScrollbars(cm); }\n  var startWidth = cm.display.barWidth, startHeight = cm.display.barHeight;\n  updateScrollbarsInner(cm, measure);\n  for (var i = 0; i < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i++) {\n    if (startWidth != cm.display.barWidth && cm.options.lineWrapping)\n      { updateHeightsInViewport(cm); }\n    updateScrollbarsInner(cm, measureForScrollbars(cm));\n    startWidth = cm.display.barWidth; startHeight = cm.display.barHeight;\n  }\n}\n\n// Re-synchronize the fake scrollbars with the actual size of the\n// content.\nfunction updateScrollbarsInner(cm, measure) {\n  var d = cm.display;\n  var sizes = d.scrollbars.update(measure);\n\n  d.sizer.style.paddingRight = (d.barWidth = sizes.right) + \"px\";\n  d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + \"px\";\n  d.heightForcer.style.borderBottom = sizes.bottom + \"px solid transparent\";\n\n  if (sizes.right && sizes.bottom) {\n    d.scrollbarFiller.style.display = \"block\";\n    d.scrollbarFiller.style.height = sizes.bottom + \"px\";\n    d.scrollbarFiller.style.width = sizes.right + \"px\";\n  } else { d.scrollbarFiller.style.display = \"\"; }\n  if (sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {\n    d.gutterFiller.style.display = \"block\";\n    d.gutterFiller.style.height = sizes.bottom + \"px\";\n    d.gutterFiller.style.width = measure.gutterWidth + \"px\";\n  } else { d.gutterFiller.style.display = \"\"; }\n}\n\nvar scrollbarModel = {\"native\": NativeScrollbars, \"null\": NullScrollbars};\n\nfunction initScrollbars(cm) {\n  if (cm.display.scrollbars) {\n    cm.display.scrollbars.clear();\n    if (cm.display.scrollbars.addClass)\n      { rmClass(cm.display.wrapper, cm.display.scrollbars.addClass); }\n  }\n\n  cm.display.scrollbars = new scrollbarModel[cm.options.scrollbarStyle](function (node) {\n    cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller);\n    // Prevent clicks in the scrollbars from killing focus\n    on(node, \"mousedown\", function () {\n      if (cm.state.focused) { setTimeout(function () { return cm.display.input.focus(); }, 0); }\n    });\n    node.setAttribute(\"cm-not-content\", \"true\");\n  }, function (pos, axis) {\n    if (axis == \"horizontal\") { setScrollLeft(cm, pos); }\n    else { updateScrollTop(cm, pos); }\n  }, cm);\n  if (cm.display.scrollbars.addClass)\n    { addClass(cm.display.wrapper, cm.display.scrollbars.addClass); }\n}\n\n// Operations are used to wrap a series of changes to the editor\n// state in such a way that each change won't have to update the\n// cursor and display (which would be awkward, slow, and\n// error-prone). Instead, display updates are batched and then all\n// combined and executed at once.\n\nvar nextOpId = 0;\n// Start a new operation.\nfunction startOperation(cm) {\n  cm.curOp = {\n    cm: cm,\n    viewChanged: false,      // Flag that indicates that lines might need to be redrawn\n    startHeight: cm.doc.height, // Used to detect need to update scrollbar\n    forceUpdate: false,      // Used to force a redraw\n    updateInput: null,       // Whether to reset the input textarea\n    typing: false,           // Whether this reset should be careful to leave existing text (for compositing)\n    changeObjs: null,        // Accumulated changes, for firing change events\n    cursorActivityHandlers: null, // Set of handlers to fire cursorActivity on\n    cursorActivityCalled: 0, // Tracks which cursorActivity handlers have been called already\n    selectionChanged: false, // Whether the selection needs to be redrawn\n    updateMaxLine: false,    // Set when the widest line needs to be determined anew\n    scrollLeft: null, scrollTop: null, // Intermediate scroll position, not pushed to DOM yet\n    scrollToPos: null,       // Used to scroll to a specific position\n    focus: false,\n    id: ++nextOpId           // Unique ID\n  };\n  pushOperation(cm.curOp);\n}\n\n// Finish an operation, updating the display and signalling delayed events\nfunction endOperation(cm) {\n  var op = cm.curOp;\n  finishOperation(op, function (group) {\n    for (var i = 0; i < group.ops.length; i++)\n      { group.ops[i].cm.curOp = null; }\n    endOperations(group);\n  });\n}\n\n// The DOM updates done when an operation finishes are batched so\n// that the minimum number of relayouts are required.\nfunction endOperations(group) {\n  var ops = group.ops;\n  for (var i = 0; i < ops.length; i++) // Read DOM\n    { endOperation_R1(ops[i]); }\n  for (var i$1 = 0; i$1 < ops.length; i$1++) // Write DOM (maybe)\n    { endOperation_W1(ops[i$1]); }\n  for (var i$2 = 0; i$2 < ops.length; i$2++) // Read DOM\n    { endOperation_R2(ops[i$2]); }\n  for (var i$3 = 0; i$3 < ops.length; i$3++) // Write DOM (maybe)\n    { endOperation_W2(ops[i$3]); }\n  for (var i$4 = 0; i$4 < ops.length; i$4++) // Read DOM\n    { endOperation_finish(ops[i$4]); }\n}\n\nfunction endOperation_R1(op) {\n  var cm = op.cm, display = cm.display;\n  maybeClipScrollbars(cm);\n  if (op.updateMaxLine) { findMaxLine(cm); }\n\n  op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null ||\n    op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom ||\n                       op.scrollToPos.to.line >= display.viewTo) ||\n    display.maxLineChanged && cm.options.lineWrapping;\n  op.update = op.mustUpdate &&\n    new DisplayUpdate(cm, op.mustUpdate && {top: op.scrollTop, ensure: op.scrollToPos}, op.forceUpdate);\n}\n\nfunction endOperation_W1(op) {\n  op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update);\n}\n\nfunction endOperation_R2(op) {\n  var cm = op.cm, display = cm.display;\n  if (op.updatedDisplay) { updateHeightsInViewport(cm); }\n\n  op.barMeasure = measureForScrollbars(cm);\n\n  // If the max line changed since it was last measured, measure it,\n  // and ensure the document's width matches it.\n  // updateDisplay_W2 will use these properties to do the actual resizing\n  if (display.maxLineChanged && !cm.options.lineWrapping) {\n    op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3;\n    cm.display.sizerWidth = op.adjustWidthTo;\n    op.barMeasure.scrollWidth =\n      Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth);\n    op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm));\n  }\n\n  if (op.updatedDisplay || op.selectionChanged)\n    { op.preparedSelection = display.input.prepareSelection(op.focus); }\n}\n\nfunction endOperation_W2(op) {\n  var cm = op.cm;\n\n  if (op.adjustWidthTo != null) {\n    cm.display.sizer.style.minWidth = op.adjustWidthTo + \"px\";\n    if (op.maxScrollLeft < cm.doc.scrollLeft)\n      { setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true); }\n    cm.display.maxLineChanged = false;\n  }\n\n  var takeFocus = op.focus && op.focus == activeElt() && (!document.hasFocus || document.hasFocus());\n  if (op.preparedSelection)\n    { cm.display.input.showSelection(op.preparedSelection, takeFocus); }\n  if (op.updatedDisplay || op.startHeight != cm.doc.height)\n    { updateScrollbars(cm, op.barMeasure); }\n  if (op.updatedDisplay)\n    { setDocumentHeight(cm, op.barMeasure); }\n\n  if (op.selectionChanged) { restartBlink(cm); }\n\n  if (cm.state.focused && op.updateInput)\n    { cm.display.input.reset(op.typing); }\n  if (takeFocus) { ensureFocus(op.cm); }\n}\n\nfunction endOperation_finish(op) {\n  var cm = op.cm, display = cm.display, doc = cm.doc;\n\n  if (op.updatedDisplay) { postUpdateDisplay(cm, op.update); }\n\n  // Abort mouse wheel delta measurement, when scrolling explicitly\n  if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos))\n    { display.wheelStartX = display.wheelStartY = null; }\n\n  // Propagate the scroll position to the actual DOM scroller\n  if (op.scrollTop != null) { setScrollTop(cm, op.scrollTop, op.forceScroll); }\n\n  if (op.scrollLeft != null) { setScrollLeft(cm, op.scrollLeft, true, true); }\n  // If we need to scroll a specific position into view, do so.\n  if (op.scrollToPos) {\n    var rect = scrollPosIntoView(cm, clipPos(doc, op.scrollToPos.from),\n                                 clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin);\n    maybeScrollWindow(cm, rect);\n  }\n\n  // Fire events for markers that are hidden/unidden by editing or\n  // undoing\n  var hidden = op.maybeHiddenMarkers, unhidden = op.maybeUnhiddenMarkers;\n  if (hidden) { for (var i = 0; i < hidden.length; ++i)\n    { if (!hidden[i].lines.length) { signal(hidden[i], \"hide\"); } } }\n  if (unhidden) { for (var i$1 = 0; i$1 < unhidden.length; ++i$1)\n    { if (unhidden[i$1].lines.length) { signal(unhidden[i$1], \"unhide\"); } } }\n\n  if (display.wrapper.offsetHeight)\n    { doc.scrollTop = cm.display.scroller.scrollTop; }\n\n  // Fire change events, and delayed event handlers\n  if (op.changeObjs)\n    { signal(cm, \"changes\", cm, op.changeObjs); }\n  if (op.update)\n    { op.update.finish(); }\n}\n\n// Run the given function in an operation\nfunction runInOp(cm, f) {\n  if (cm.curOp) { return f() }\n  startOperation(cm);\n  try { return f() }\n  finally { endOperation(cm); }\n}\n// Wraps a function in an operation. Returns the wrapped function.\nfunction operation(cm, f) {\n  return function() {\n    if (cm.curOp) { return f.apply(cm, arguments) }\n    startOperation(cm);\n    try { return f.apply(cm, arguments) }\n    finally { endOperation(cm); }\n  }\n}\n// Used to add methods to editor and doc instances, wrapping them in\n// operations.\nfunction methodOp(f) {\n  return function() {\n    if (this.curOp) { return f.apply(this, arguments) }\n    startOperation(this);\n    try { return f.apply(this, arguments) }\n    finally { endOperation(this); }\n  }\n}\nfunction docMethodOp(f) {\n  return function() {\n    var cm = this.cm;\n    if (!cm || cm.curOp) { return f.apply(this, arguments) }\n    startOperation(cm);\n    try { return f.apply(this, arguments) }\n    finally { endOperation(cm); }\n  }\n}\n\n// Updates the display.view data structure for a given change to the\n// document. From and to are in pre-change coordinates. Lendiff is\n// the amount of lines added or subtracted by the change. This is\n// used for changes that span multiple lines, or change the way\n// lines are divided into visual lines. regLineChange (below)\n// registers single-line changes.\nfunction regChange(cm, from, to, lendiff) {\n  if (from == null) { from = cm.doc.first; }\n  if (to == null) { to = cm.doc.first + cm.doc.size; }\n  if (!lendiff) { lendiff = 0; }\n\n  var display = cm.display;\n  if (lendiff && to < display.viewTo &&\n      (display.updateLineNumbers == null || display.updateLineNumbers > from))\n    { display.updateLineNumbers = from; }\n\n  cm.curOp.viewChanged = true;\n\n  if (from >= display.viewTo) { // Change after\n    if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo)\n      { resetView(cm); }\n  } else if (to <= display.viewFrom) { // Change before\n    if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {\n      resetView(cm);\n    } else {\n      display.viewFrom += lendiff;\n      display.viewTo += lendiff;\n    }\n  } else if (from <= display.viewFrom && to >= display.viewTo) { // Full overlap\n    resetView(cm);\n  } else if (from <= display.viewFrom) { // Top overlap\n    var cut = viewCuttingPoint(cm, to, to + lendiff, 1);\n    if (cut) {\n      display.view = display.view.slice(cut.index);\n      display.viewFrom = cut.lineN;\n      display.viewTo += lendiff;\n    } else {\n      resetView(cm);\n    }\n  } else if (to >= display.viewTo) { // Bottom overlap\n    var cut$1 = viewCuttingPoint(cm, from, from, -1);\n    if (cut$1) {\n      display.view = display.view.slice(0, cut$1.index);\n      display.viewTo = cut$1.lineN;\n    } else {\n      resetView(cm);\n    }\n  } else { // Gap in the middle\n    var cutTop = viewCuttingPoint(cm, from, from, -1);\n    var cutBot = viewCuttingPoint(cm, to, to + lendiff, 1);\n    if (cutTop && cutBot) {\n      display.view = display.view.slice(0, cutTop.index)\n        .concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN))\n        .concat(display.view.slice(cutBot.index));\n      display.viewTo += lendiff;\n    } else {\n      resetView(cm);\n    }\n  }\n\n  var ext = display.externalMeasured;\n  if (ext) {\n    if (to < ext.lineN)\n      { ext.lineN += lendiff; }\n    else if (from < ext.lineN + ext.size)\n      { display.externalMeasured = null; }\n  }\n}\n\n// Register a change to a single line. Type must be one of \"text\",\n// \"gutter\", \"class\", \"widget\"\nfunction regLineChange(cm, line, type) {\n  cm.curOp.viewChanged = true;\n  var display = cm.display, ext = cm.display.externalMeasured;\n  if (ext && line >= ext.lineN && line < ext.lineN + ext.size)\n    { display.externalMeasured = null; }\n\n  if (line < display.viewFrom || line >= display.viewTo) { return }\n  var lineView = display.view[findViewIndex(cm, line)];\n  if (lineView.node == null) { return }\n  var arr = lineView.changes || (lineView.changes = []);\n  if (indexOf(arr, type) == -1) { arr.push(type); }\n}\n\n// Clear the view.\nfunction resetView(cm) {\n  cm.display.viewFrom = cm.display.viewTo = cm.doc.first;\n  cm.display.view = [];\n  cm.display.viewOffset = 0;\n}\n\nfunction viewCuttingPoint(cm, oldN, newN, dir) {\n  var index = findViewIndex(cm, oldN), diff, view = cm.display.view;\n  if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size)\n    { return {index: index, lineN: newN} }\n  var n = cm.display.viewFrom;\n  for (var i = 0; i < index; i++)\n    { n += view[i].size; }\n  if (n != oldN) {\n    if (dir > 0) {\n      if (index == view.length - 1) { return null }\n      diff = (n + view[index].size) - oldN;\n      index++;\n    } else {\n      diff = n - oldN;\n    }\n    oldN += diff; newN += diff;\n  }\n  while (visualLineNo(cm.doc, newN) != newN) {\n    if (index == (dir < 0 ? 0 : view.length - 1)) { return null }\n    newN += dir * view[index - (dir < 0 ? 1 : 0)].size;\n    index += dir;\n  }\n  return {index: index, lineN: newN}\n}\n\n// Force the view to cover a given range, adding empty view element\n// or clipping off existing ones as needed.\nfunction adjustView(cm, from, to) {\n  var display = cm.display, view = display.view;\n  if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {\n    display.view = buildViewArray(cm, from, to);\n    display.viewFrom = from;\n  } else {\n    if (display.viewFrom > from)\n      { display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view); }\n    else if (display.viewFrom < from)\n      { display.view = display.view.slice(findViewIndex(cm, from)); }\n    display.viewFrom = from;\n    if (display.viewTo < to)\n      { display.view = display.view.concat(buildViewArray(cm, display.viewTo, to)); }\n    else if (display.viewTo > to)\n      { display.view = display.view.slice(0, findViewIndex(cm, to)); }\n  }\n  display.viewTo = to;\n}\n\n// Count the number of lines in the view whose DOM representation is\n// out of date (or nonexistent).\nfunction countDirtyView(cm) {\n  var view = cm.display.view, dirty = 0;\n  for (var i = 0; i < view.length; i++) {\n    var lineView = view[i];\n    if (!lineView.hidden && (!lineView.node || lineView.changes)) { ++dirty; }\n  }\n  return dirty\n}\n\n// HIGHLIGHT WORKER\n\nfunction startWorker(cm, time) {\n  if (cm.doc.highlightFrontier < cm.display.viewTo)\n    { cm.state.highlight.set(time, bind(highlightWorker, cm)); }\n}\n\nfunction highlightWorker(cm) {\n  var doc = cm.doc;\n  if (doc.highlightFrontier >= cm.display.viewTo) { return }\n  var end = +new Date + cm.options.workTime;\n  var context = getContextBefore(cm, doc.highlightFrontier);\n  var changedLines = [];\n\n  doc.iter(context.line, Math.min(doc.first + doc.size, cm.display.viewTo + 500), function (line) {\n    if (context.line >= cm.display.viewFrom) { // Visible\n      var oldStyles = line.styles;\n      var resetState = line.text.length > cm.options.maxHighlightLength ? copyState(doc.mode, context.state) : null;\n      var highlighted = highlightLine(cm, line, context, true);\n      if (resetState) { context.state = resetState; }\n      line.styles = highlighted.styles;\n      var oldCls = line.styleClasses, newCls = highlighted.classes;\n      if (newCls) { line.styleClasses = newCls; }\n      else if (oldCls) { line.styleClasses = null; }\n      var ischange = !oldStyles || oldStyles.length != line.styles.length ||\n        oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass);\n      for (var i = 0; !ischange && i < oldStyles.length; ++i) { ischange = oldStyles[i] != line.styles[i]; }\n      if (ischange) { changedLines.push(context.line); }\n      line.stateAfter = context.save();\n      context.nextLine();\n    } else {\n      if (line.text.length <= cm.options.maxHighlightLength)\n        { processLine(cm, line.text, context); }\n      line.stateAfter = context.line % 5 == 0 ? context.save() : null;\n      context.nextLine();\n    }\n    if (+new Date > end) {\n      startWorker(cm, cm.options.workDelay);\n      return true\n    }\n  });\n  doc.highlightFrontier = context.line;\n  doc.modeFrontier = Math.max(doc.modeFrontier, context.line);\n  if (changedLines.length) { runInOp(cm, function () {\n    for (var i = 0; i < changedLines.length; i++)\n      { regLineChange(cm, changedLines[i], \"text\"); }\n  }); }\n}\n\n// DISPLAY DRAWING\n\nvar DisplayUpdate = function(cm, viewport, force) {\n  var display = cm.display;\n\n  this.viewport = viewport;\n  // Store some values that we'll need later (but don't want to force a relayout for)\n  this.visible = visibleLines(display, cm.doc, viewport);\n  this.editorIsHidden = !display.wrapper.offsetWidth;\n  this.wrapperHeight = display.wrapper.clientHeight;\n  this.wrapperWidth = display.wrapper.clientWidth;\n  this.oldDisplayWidth = displayWidth(cm);\n  this.force = force;\n  this.dims = getDimensions(cm);\n  this.events = [];\n};\n\nDisplayUpdate.prototype.signal = function (emitter, type) {\n  if (hasHandler(emitter, type))\n    { this.events.push(arguments); }\n};\nDisplayUpdate.prototype.finish = function () {\n    var this$1 = this;\n\n  for (var i = 0; i < this.events.length; i++)\n    { signal.apply(null, this$1.events[i]); }\n};\n\nfunction maybeClipScrollbars(cm) {\n  var display = cm.display;\n  if (!display.scrollbarsClipped && display.scroller.offsetWidth) {\n    display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth;\n    display.heightForcer.style.height = scrollGap(cm) + \"px\";\n    display.sizer.style.marginBottom = -display.nativeBarWidth + \"px\";\n    display.sizer.style.borderRightWidth = scrollGap(cm) + \"px\";\n    display.scrollbarsClipped = true;\n  }\n}\n\nfunction selectionSnapshot(cm) {\n  if (cm.hasFocus()) { return null }\n  var active = activeElt();\n  if (!active || !contains(cm.display.lineDiv, active)) { return null }\n  var result = {activeElt: active};\n  if (window.getSelection) {\n    var sel = window.getSelection();\n    if (sel.anchorNode && sel.extend && contains(cm.display.lineDiv, sel.anchorNode)) {\n      result.anchorNode = sel.anchorNode;\n      result.anchorOffset = sel.anchorOffset;\n      result.focusNode = sel.focusNode;\n      result.focusOffset = sel.focusOffset;\n    }\n  }\n  return result\n}\n\nfunction restoreSelection(snapshot) {\n  if (!snapshot || !snapshot.activeElt || snapshot.activeElt == activeElt()) { return }\n  snapshot.activeElt.focus();\n  if (snapshot.anchorNode && contains(document.body, snapshot.anchorNode) && contains(document.body, snapshot.focusNode)) {\n    var sel = window.getSelection(), range$$1 = document.createRange();\n    range$$1.setEnd(snapshot.anchorNode, snapshot.anchorOffset);\n    range$$1.collapse(false);\n    sel.removeAllRanges();\n    sel.addRange(range$$1);\n    sel.extend(snapshot.focusNode, snapshot.focusOffset);\n  }\n}\n\n// Does the actual updating of the line display. Bails out\n// (returning false) when there is nothing to be done and forced is\n// false.\nfunction updateDisplayIfNeeded(cm, update) {\n  var display = cm.display, doc = cm.doc;\n\n  if (update.editorIsHidden) {\n    resetView(cm);\n    return false\n  }\n\n  // Bail out if the visible area is already rendered and nothing changed.\n  if (!update.force &&\n      update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo &&\n      (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) &&\n      display.renderedView == display.view && countDirtyView(cm) == 0)\n    { return false }\n\n  if (maybeUpdateLineNumberWidth(cm)) {\n    resetView(cm);\n    update.dims = getDimensions(cm);\n  }\n\n  // Compute a suitable new viewport (from & to)\n  var end = doc.first + doc.size;\n  var from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first);\n  var to = Math.min(end, update.visible.to + cm.options.viewportMargin);\n  if (display.viewFrom < from && from - display.viewFrom < 20) { from = Math.max(doc.first, display.viewFrom); }\n  if (display.viewTo > to && display.viewTo - to < 20) { to = Math.min(end, display.viewTo); }\n  if (sawCollapsedSpans) {\n    from = visualLineNo(cm.doc, from);\n    to = visualLineEndNo(cm.doc, to);\n  }\n\n  var different = from != display.viewFrom || to != display.viewTo ||\n    display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth;\n  adjustView(cm, from, to);\n\n  display.viewOffset = heightAtLine(getLine(cm.doc, display.viewFrom));\n  // Position the mover div to align with the current scroll position\n  cm.display.mover.style.top = display.viewOffset + \"px\";\n\n  var toUpdate = countDirtyView(cm);\n  if (!different && toUpdate == 0 && !update.force && display.renderedView == display.view &&\n      (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo))\n    { return false }\n\n  // For big changes, we hide the enclosing element during the\n  // update, since that speeds up the operations on most browsers.\n  var selSnapshot = selectionSnapshot(cm);\n  if (toUpdate > 4) { display.lineDiv.style.display = \"none\"; }\n  patchDisplay(cm, display.updateLineNumbers, update.dims);\n  if (toUpdate > 4) { display.lineDiv.style.display = \"\"; }\n  display.renderedView = display.view;\n  // There might have been a widget with a focused element that got\n  // hidden or updated, if so re-focus it.\n  restoreSelection(selSnapshot);\n\n  // Prevent selection and cursors from interfering with the scroll\n  // width and height.\n  removeChildren(display.cursorDiv);\n  removeChildren(display.selectionDiv);\n  display.gutters.style.height = display.sizer.style.minHeight = 0;\n\n  if (different) {\n    display.lastWrapHeight = update.wrapperHeight;\n    display.lastWrapWidth = update.wrapperWidth;\n    startWorker(cm, 400);\n  }\n\n  display.updateLineNumbers = null;\n\n  return true\n}\n\nfunction postUpdateDisplay(cm, update) {\n  var viewport = update.viewport;\n\n  for (var first = true;; first = false) {\n    if (!first || !cm.options.lineWrapping || update.oldDisplayWidth == displayWidth(cm)) {\n      // Clip forced viewport to actual scrollable area.\n      if (viewport && viewport.top != null)\n        { viewport = {top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top)}; }\n      // Updated line heights might result in the drawn area not\n      // actually covering the viewport. Keep looping until it does.\n      update.visible = visibleLines(cm.display, cm.doc, viewport);\n      if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo)\n        { break }\n    }\n    if (!updateDisplayIfNeeded(cm, update)) { break }\n    updateHeightsInViewport(cm);\n    var barMeasure = measureForScrollbars(cm);\n    updateSelection(cm);\n    updateScrollbars(cm, barMeasure);\n    setDocumentHeight(cm, barMeasure);\n    update.force = false;\n  }\n\n  update.signal(cm, \"update\", cm);\n  if (cm.display.viewFrom != cm.display.reportedViewFrom || cm.display.viewTo != cm.display.reportedViewTo) {\n    update.signal(cm, \"viewportChange\", cm, cm.display.viewFrom, cm.display.viewTo);\n    cm.display.reportedViewFrom = cm.display.viewFrom; cm.display.reportedViewTo = cm.display.viewTo;\n  }\n}\n\nfunction updateDisplaySimple(cm, viewport) {\n  var update = new DisplayUpdate(cm, viewport);\n  if (updateDisplayIfNeeded(cm, update)) {\n    updateHeightsInViewport(cm);\n    postUpdateDisplay(cm, update);\n    var barMeasure = measureForScrollbars(cm);\n    updateSelection(cm);\n    updateScrollbars(cm, barMeasure);\n    setDocumentHeight(cm, barMeasure);\n    update.finish();\n  }\n}\n\n// Sync the actual display DOM structure with display.view, removing\n// nodes for lines that are no longer in view, and creating the ones\n// that are not there yet, and updating the ones that are out of\n// date.\nfunction patchDisplay(cm, updateNumbersFrom, dims) {\n  var display = cm.display, lineNumbers = cm.options.lineNumbers;\n  var container = display.lineDiv, cur = container.firstChild;\n\n  function rm(node) {\n    var next = node.nextSibling;\n    // Works around a throw-scroll bug in OS X Webkit\n    if (webkit && mac && cm.display.currentWheelTarget == node)\n      { node.style.display = \"none\"; }\n    else\n      { node.parentNode.removeChild(node); }\n    return next\n  }\n\n  var view = display.view, lineN = display.viewFrom;\n  // Loop over the elements in the view, syncing cur (the DOM nodes\n  // in display.lineDiv) with the view as we go.\n  for (var i = 0; i < view.length; i++) {\n    var lineView = view[i];\n    if (lineView.hidden) {\n    } else if (!lineView.node || lineView.node.parentNode != container) { // Not drawn yet\n      var node = buildLineElement(cm, lineView, lineN, dims);\n      container.insertBefore(node, cur);\n    } else { // Already drawn\n      while (cur != lineView.node) { cur = rm(cur); }\n      var updateNumber = lineNumbers && updateNumbersFrom != null &&\n        updateNumbersFrom <= lineN && lineView.lineNumber;\n      if (lineView.changes) {\n        if (indexOf(lineView.changes, \"gutter\") > -1) { updateNumber = false; }\n        updateLineForChanges(cm, lineView, lineN, dims);\n      }\n      if (updateNumber) {\n        removeChildren(lineView.lineNumber);\n        lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)));\n      }\n      cur = lineView.node.nextSibling;\n    }\n    lineN += lineView.size;\n  }\n  while (cur) { cur = rm(cur); }\n}\n\nfunction updateGutterSpace(cm) {\n  var width = cm.display.gutters.offsetWidth;\n  cm.display.sizer.style.marginLeft = width + \"px\";\n}\n\nfunction setDocumentHeight(cm, measure) {\n  cm.display.sizer.style.minHeight = measure.docHeight + \"px\";\n  cm.display.heightForcer.style.top = measure.docHeight + \"px\";\n  cm.display.gutters.style.height = (measure.docHeight + cm.display.barHeight + scrollGap(cm)) + \"px\";\n}\n\n// Rebuild the gutter elements, ensure the margin to the left of the\n// code matches their width.\nfunction updateGutters(cm) {\n  var gutters = cm.display.gutters, specs = cm.options.gutters;\n  removeChildren(gutters);\n  var i = 0;\n  for (; i < specs.length; ++i) {\n    var gutterClass = specs[i];\n    var gElt = gutters.appendChild(elt(\"div\", null, \"CodeMirror-gutter \" + gutterClass));\n    if (gutterClass == \"CodeMirror-linenumbers\") {\n      cm.display.lineGutter = gElt;\n      gElt.style.width = (cm.display.lineNumWidth || 1) + \"px\";\n    }\n  }\n  gutters.style.display = i ? \"\" : \"none\";\n  updateGutterSpace(cm);\n}\n\n// Make sure the gutters options contains the element\n// \"CodeMirror-linenumbers\" when the lineNumbers option is true.\nfunction setGuttersForLineNumbers(options) {\n  var found = indexOf(options.gutters, \"CodeMirror-linenumbers\");\n  if (found == -1 && options.lineNumbers) {\n    options.gutters = options.gutters.concat([\"CodeMirror-linenumbers\"]);\n  } else if (found > -1 && !options.lineNumbers) {\n    options.gutters = options.gutters.slice(0);\n    options.gutters.splice(found, 1);\n  }\n}\n\n// Since the delta values reported on mouse wheel events are\n// unstandardized between browsers and even browser versions, and\n// generally horribly unpredictable, this code starts by measuring\n// the scroll effect that the first few mouse wheel events have,\n// and, from that, detects the way it can convert deltas to pixel\n// offsets afterwards.\n//\n// The reason we want to know the amount a wheel event will scroll\n// is that it gives us a chance to update the display before the\n// actual scrolling happens, reducing flickering.\n\nvar wheelSamples = 0;\nvar wheelPixelsPerUnit = null;\n// Fill in a browser-detected starting value on browsers where we\n// know one. These don't have to be accurate -- the result of them\n// being wrong would just be a slight flicker on the first wheel\n// scroll (if it is large enough).\nif (ie) { wheelPixelsPerUnit = -.53; }\nelse if (gecko) { wheelPixelsPerUnit = 15; }\nelse if (chrome) { wheelPixelsPerUnit = -.7; }\nelse if (safari) { wheelPixelsPerUnit = -1/3; }\n\nfunction wheelEventDelta(e) {\n  var dx = e.wheelDeltaX, dy = e.wheelDeltaY;\n  if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS) { dx = e.detail; }\n  if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS) { dy = e.detail; }\n  else if (dy == null) { dy = e.wheelDelta; }\n  return {x: dx, y: dy}\n}\nfunction wheelEventPixels(e) {\n  var delta = wheelEventDelta(e);\n  delta.x *= wheelPixelsPerUnit;\n  delta.y *= wheelPixelsPerUnit;\n  return delta\n}\n\nfunction onScrollWheel(cm, e) {\n  var delta = wheelEventDelta(e), dx = delta.x, dy = delta.y;\n\n  var display = cm.display, scroll = display.scroller;\n  // Quit if there's nothing to scroll here\n  var canScrollX = scroll.scrollWidth > scroll.clientWidth;\n  var canScrollY = scroll.scrollHeight > scroll.clientHeight;\n  if (!(dx && canScrollX || dy && canScrollY)) { return }\n\n  // Webkit browsers on OS X abort momentum scrolls when the target\n  // of the scroll event is removed from the scrollable element.\n  // This hack (see related code in patchDisplay) makes sure the\n  // element is kept around.\n  if (dy && mac && webkit) {\n    outer: for (var cur = e.target, view = display.view; cur != scroll; cur = cur.parentNode) {\n      for (var i = 0; i < view.length; i++) {\n        if (view[i].node == cur) {\n          cm.display.currentWheelTarget = cur;\n          break outer\n        }\n      }\n    }\n  }\n\n  // On some browsers, horizontal scrolling will cause redraws to\n  // happen before the gutter has been realigned, causing it to\n  // wriggle around in a most unseemly way. When we have an\n  // estimated pixels/delta value, we just handle horizontal\n  // scrolling entirely here. It'll be slightly off from native, but\n  // better than glitching out.\n  if (dx && !gecko && !presto && wheelPixelsPerUnit != null) {\n    if (dy && canScrollY)\n      { updateScrollTop(cm, Math.max(0, scroll.scrollTop + dy * wheelPixelsPerUnit)); }\n    setScrollLeft(cm, Math.max(0, scroll.scrollLeft + dx * wheelPixelsPerUnit));\n    // Only prevent default scrolling if vertical scrolling is\n    // actually possible. Otherwise, it causes vertical scroll\n    // jitter on OSX trackpads when deltaX is small and deltaY\n    // is large (issue #3579)\n    if (!dy || (dy && canScrollY))\n      { e_preventDefault(e); }\n    display.wheelStartX = null; // Abort measurement, if in progress\n    return\n  }\n\n  // 'Project' the visible viewport to cover the area that is being\n  // scrolled into view (if we know enough to estimate it).\n  if (dy && wheelPixelsPerUnit != null) {\n    var pixels = dy * wheelPixelsPerUnit;\n    var top = cm.doc.scrollTop, bot = top + display.wrapper.clientHeight;\n    if (pixels < 0) { top = Math.max(0, top + pixels - 50); }\n    else { bot = Math.min(cm.doc.height, bot + pixels + 50); }\n    updateDisplaySimple(cm, {top: top, bottom: bot});\n  }\n\n  if (wheelSamples < 20) {\n    if (display.wheelStartX == null) {\n      display.wheelStartX = scroll.scrollLeft; display.wheelStartY = scroll.scrollTop;\n      display.wheelDX = dx; display.wheelDY = dy;\n      setTimeout(function () {\n        if (display.wheelStartX == null) { return }\n        var movedX = scroll.scrollLeft - display.wheelStartX;\n        var movedY = scroll.scrollTop - display.wheelStartY;\n        var sample = (movedY && display.wheelDY && movedY / display.wheelDY) ||\n          (movedX && display.wheelDX && movedX / display.wheelDX);\n        display.wheelStartX = display.wheelStartY = null;\n        if (!sample) { return }\n        wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1);\n        ++wheelSamples;\n      }, 200);\n    } else {\n      display.wheelDX += dx; display.wheelDY += dy;\n    }\n  }\n}\n\n// Selection objects are immutable. A new one is created every time\n// the selection changes. A selection is one or more non-overlapping\n// (and non-touching) ranges, sorted, and an integer that indicates\n// which one is the primary selection (the one that's scrolled into\n// view, that getCursor returns, etc).\nvar Selection = function(ranges, primIndex) {\n  this.ranges = ranges;\n  this.primIndex = primIndex;\n};\n\nSelection.prototype.primary = function () { return this.ranges[this.primIndex] };\n\nSelection.prototype.equals = function (other) {\n    var this$1 = this;\n\n  if (other == this) { return true }\n  if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length) { return false }\n  for (var i = 0; i < this.ranges.length; i++) {\n    var here = this$1.ranges[i], there = other.ranges[i];\n    if (!equalCursorPos(here.anchor, there.anchor) || !equalCursorPos(here.head, there.head)) { return false }\n  }\n  return true\n};\n\nSelection.prototype.deepCopy = function () {\n    var this$1 = this;\n\n  var out = [];\n  for (var i = 0; i < this.ranges.length; i++)\n    { out[i] = new Range(copyPos(this$1.ranges[i].anchor), copyPos(this$1.ranges[i].head)); }\n  return new Selection(out, this.primIndex)\n};\n\nSelection.prototype.somethingSelected = function () {\n    var this$1 = this;\n\n  for (var i = 0; i < this.ranges.length; i++)\n    { if (!this$1.ranges[i].empty()) { return true } }\n  return false\n};\n\nSelection.prototype.contains = function (pos, end) {\n    var this$1 = this;\n\n  if (!end) { end = pos; }\n  for (var i = 0; i < this.ranges.length; i++) {\n    var range = this$1.ranges[i];\n    if (cmp(end, range.from()) >= 0 && cmp(pos, range.to()) <= 0)\n      { return i }\n  }\n  return -1\n};\n\nvar Range = function(anchor, head) {\n  this.anchor = anchor; this.head = head;\n};\n\nRange.prototype.from = function () { return minPos(this.anchor, this.head) };\nRange.prototype.to = function () { return maxPos(this.anchor, this.head) };\nRange.prototype.empty = function () { return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch };\n\n// Take an unsorted, potentially overlapping set of ranges, and\n// build a selection out of it. 'Consumes' ranges array (modifying\n// it).\nfunction normalizeSelection(ranges, primIndex) {\n  var prim = ranges[primIndex];\n  ranges.sort(function (a, b) { return cmp(a.from(), b.from()); });\n  primIndex = indexOf(ranges, prim);\n  for (var i = 1; i < ranges.length; i++) {\n    var cur = ranges[i], prev = ranges[i - 1];\n    if (cmp(prev.to(), cur.from()) >= 0) {\n      var from = minPos(prev.from(), cur.from()), to = maxPos(prev.to(), cur.to());\n      var inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head;\n      if (i <= primIndex) { --primIndex; }\n      ranges.splice(--i, 2, new Range(inv ? to : from, inv ? from : to));\n    }\n  }\n  return new Selection(ranges, primIndex)\n}\n\nfunction simpleSelection(anchor, head) {\n  return new Selection([new Range(anchor, head || anchor)], 0)\n}\n\n// Compute the position of the end of a change (its 'to' property\n// refers to the pre-change end).\nfunction changeEnd(change) {\n  if (!change.text) { return change.to }\n  return Pos(change.from.line + change.text.length - 1,\n             lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0))\n}\n\n// Adjust a position to refer to the post-change position of the\n// same text, or the end of the change if the change covers it.\nfunction adjustForChange(pos, change) {\n  if (cmp(pos, change.from) < 0) { return pos }\n  if (cmp(pos, change.to) <= 0) { return changeEnd(change) }\n\n  var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1, ch = pos.ch;\n  if (pos.line == change.to.line) { ch += changeEnd(change).ch - change.to.ch; }\n  return Pos(line, ch)\n}\n\nfunction computeSelAfterChange(doc, change) {\n  var out = [];\n  for (var i = 0; i < doc.sel.ranges.length; i++) {\n    var range = doc.sel.ranges[i];\n    out.push(new Range(adjustForChange(range.anchor, change),\n                       adjustForChange(range.head, change)));\n  }\n  return normalizeSelection(out, doc.sel.primIndex)\n}\n\nfunction offsetPos(pos, old, nw) {\n  if (pos.line == old.line)\n    { return Pos(nw.line, pos.ch - old.ch + nw.ch) }\n  else\n    { return Pos(nw.line + (pos.line - old.line), pos.ch) }\n}\n\n// Used by replaceSelections to allow moving the selection to the\n// start or around the replaced test. Hint may be \"start\" or \"around\".\nfunction computeReplacedSel(doc, changes, hint) {\n  var out = [];\n  var oldPrev = Pos(doc.first, 0), newPrev = oldPrev;\n  for (var i = 0; i < changes.length; i++) {\n    var change = changes[i];\n    var from = offsetPos(change.from, oldPrev, newPrev);\n    var to = offsetPos(changeEnd(change), oldPrev, newPrev);\n    oldPrev = change.to;\n    newPrev = to;\n    if (hint == \"around\") {\n      var range = doc.sel.ranges[i], inv = cmp(range.head, range.anchor) < 0;\n      out[i] = new Range(inv ? to : from, inv ? from : to);\n    } else {\n      out[i] = new Range(from, from);\n    }\n  }\n  return new Selection(out, doc.sel.primIndex)\n}\n\n// Used to get the editor into a consistent state again when options change.\n\nfunction loadMode(cm) {\n  cm.doc.mode = getMode(cm.options, cm.doc.modeOption);\n  resetModeState(cm);\n}\n\nfunction resetModeState(cm) {\n  cm.doc.iter(function (line) {\n    if (line.stateAfter) { line.stateAfter = null; }\n    if (line.styles) { line.styles = null; }\n  });\n  cm.doc.modeFrontier = cm.doc.highlightFrontier = cm.doc.first;\n  startWorker(cm, 100);\n  cm.state.modeGen++;\n  if (cm.curOp) { regChange(cm); }\n}\n\n// DOCUMENT DATA STRUCTURE\n\n// By default, updates that start and end at the beginning of a line\n// are treated specially, in order to make the association of line\n// widgets and marker elements with the text behave more intuitive.\nfunction isWholeLineUpdate(doc, change) {\n  return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == \"\" &&\n    (!doc.cm || doc.cm.options.wholeLineUpdateBefore)\n}\n\n// Perform a change on the document data structure.\nfunction updateDoc(doc, change, markedSpans, estimateHeight$$1) {\n  function spansFor(n) {return markedSpans ? markedSpans[n] : null}\n  function update(line, text, spans) {\n    updateLine(line, text, spans, estimateHeight$$1);\n    signalLater(line, \"change\", line, change);\n  }\n  function linesFor(start, end) {\n    var result = [];\n    for (var i = start; i < end; ++i)\n      { result.push(new Line(text[i], spansFor(i), estimateHeight$$1)); }\n    return result\n  }\n\n  var from = change.from, to = change.to, text = change.text;\n  var firstLine = getLine(doc, from.line), lastLine = getLine(doc, to.line);\n  var lastText = lst(text), lastSpans = spansFor(text.length - 1), nlines = to.line - from.line;\n\n  // Adjust the line structure\n  if (change.full) {\n    doc.insert(0, linesFor(0, text.length));\n    doc.remove(text.length, doc.size - text.length);\n  } else if (isWholeLineUpdate(doc, change)) {\n    // This is a whole-line replace. Treated specially to make\n    // sure line objects move the way they are supposed to.\n    var added = linesFor(0, text.length - 1);\n    update(lastLine, lastLine.text, lastSpans);\n    if (nlines) { doc.remove(from.line, nlines); }\n    if (added.length) { doc.insert(from.line, added); }\n  } else if (firstLine == lastLine) {\n    if (text.length == 1) {\n      update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans);\n    } else {\n      var added$1 = linesFor(1, text.length - 1);\n      added$1.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight$$1));\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n      doc.insert(from.line + 1, added$1);\n    }\n  } else if (text.length == 1) {\n    update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0));\n    doc.remove(from.line + 1, nlines);\n  } else {\n    update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n    update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);\n    var added$2 = linesFor(1, text.length - 1);\n    if (nlines > 1) { doc.remove(from.line + 1, nlines - 1); }\n    doc.insert(from.line + 1, added$2);\n  }\n\n  signalLater(doc, \"change\", doc, change);\n}\n\n// Call f for all linked documents.\nfunction linkedDocs(doc, f, sharedHistOnly) {\n  function propagate(doc, skip, sharedHist) {\n    if (doc.linked) { for (var i = 0; i < doc.linked.length; ++i) {\n      var rel = doc.linked[i];\n      if (rel.doc == skip) { continue }\n      var shared = sharedHist && rel.sharedHist;\n      if (sharedHistOnly && !shared) { continue }\n      f(rel.doc, shared);\n      propagate(rel.doc, doc, shared);\n    } }\n  }\n  propagate(doc, null, true);\n}\n\n// Attach a document to an editor.\nfunction attachDoc(cm, doc) {\n  if (doc.cm) { throw new Error(\"This document is already in use.\") }\n  cm.doc = doc;\n  doc.cm = cm;\n  estimateLineHeights(cm);\n  loadMode(cm);\n  setDirectionClass(cm);\n  if (!cm.options.lineWrapping) { findMaxLine(cm); }\n  cm.options.mode = doc.modeOption;\n  regChange(cm);\n}\n\nfunction setDirectionClass(cm) {\n  (cm.doc.direction == \"rtl\" ? addClass : rmClass)(cm.display.lineDiv, \"CodeMirror-rtl\");\n}\n\nfunction directionChanged(cm) {\n  runInOp(cm, function () {\n    setDirectionClass(cm);\n    regChange(cm);\n  });\n}\n\nfunction History(startGen) {\n  // Arrays of change events and selections. Doing something adds an\n  // event to done and clears undo. Undoing moves events from done\n  // to undone, redoing moves them in the other direction.\n  this.done = []; this.undone = [];\n  this.undoDepth = Infinity;\n  // Used to track when changes can be merged into a single undo\n  // event\n  this.lastModTime = this.lastSelTime = 0;\n  this.lastOp = this.lastSelOp = null;\n  this.lastOrigin = this.lastSelOrigin = null;\n  // Used by the isClean() method\n  this.generation = this.maxGeneration = startGen || 1;\n}\n\n// Create a history change event from an updateDoc-style change\n// object.\nfunction historyChangeFromChange(doc, change) {\n  var histChange = {from: copyPos(change.from), to: changeEnd(change), text: getBetween(doc, change.from, change.to)};\n  attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n  linkedDocs(doc, function (doc) { return attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1); }, true);\n  return histChange\n}\n\n// Pop all selection events off the end of a history array. Stop at\n// a change event.\nfunction clearSelectionEvents(array) {\n  while (array.length) {\n    var last = lst(array);\n    if (last.ranges) { array.pop(); }\n    else { break }\n  }\n}\n\n// Find the top change event in the history. Pop off selection\n// events that are in the way.\nfunction lastChangeEvent(hist, force) {\n  if (force) {\n    clearSelectionEvents(hist.done);\n    return lst(hist.done)\n  } else if (hist.done.length && !lst(hist.done).ranges) {\n    return lst(hist.done)\n  } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {\n    hist.done.pop();\n    return lst(hist.done)\n  }\n}\n\n// Register a change in the history. Merges changes that are within\n// a single operation, or are close together with an origin that\n// allows merging (starting with \"+\") into a single event.\nfunction addChangeToHistory(doc, change, selAfter, opId) {\n  var hist = doc.history;\n  hist.undone.length = 0;\n  var time = +new Date, cur;\n  var last;\n\n  if ((hist.lastOp == opId ||\n       hist.lastOrigin == change.origin && change.origin &&\n       ((change.origin.charAt(0) == \"+\" && doc.cm && hist.lastModTime > time - doc.cm.options.historyEventDelay) ||\n        change.origin.charAt(0) == \"*\")) &&\n      (cur = lastChangeEvent(hist, hist.lastOp == opId))) {\n    // Merge this change into the last event\n    last = lst(cur.changes);\n    if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {\n      // Optimized case for simple insertion -- don't want to add\n      // new changesets for every character typed\n      last.to = changeEnd(change);\n    } else {\n      // Add new sub-event\n      cur.changes.push(historyChangeFromChange(doc, change));\n    }\n  } else {\n    // Can not be merged, start a new event.\n    var before = lst(hist.done);\n    if (!before || !before.ranges)\n      { pushSelectionToHistory(doc.sel, hist.done); }\n    cur = {changes: [historyChangeFromChange(doc, change)],\n           generation: hist.generation};\n    hist.done.push(cur);\n    while (hist.done.length > hist.undoDepth) {\n      hist.done.shift();\n      if (!hist.done[0].ranges) { hist.done.shift(); }\n    }\n  }\n  hist.done.push(selAfter);\n  hist.generation = ++hist.maxGeneration;\n  hist.lastModTime = hist.lastSelTime = time;\n  hist.lastOp = hist.lastSelOp = opId;\n  hist.lastOrigin = hist.lastSelOrigin = change.origin;\n\n  if (!last) { signal(doc, \"historyAdded\"); }\n}\n\nfunction selectionEventCanBeMerged(doc, origin, prev, sel) {\n  var ch = origin.charAt(0);\n  return ch == \"*\" ||\n    ch == \"+\" &&\n    prev.ranges.length == sel.ranges.length &&\n    prev.somethingSelected() == sel.somethingSelected() &&\n    new Date - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500)\n}\n\n// Called whenever the selection changes, sets the new selection as\n// the pending selection in the history, and pushes the old pending\n// selection into the 'done' array when it was significantly\n// different (in number of selected ranges, emptiness, or time).\nfunction addSelectionToHistory(doc, sel, opId, options) {\n  var hist = doc.history, origin = options && options.origin;\n\n  // A new event is started when the previous origin does not match\n  // the current, or the origins don't allow matching. Origins\n  // starting with * are always merged, those starting with + are\n  // merged when similar and close together in time.\n  if (opId == hist.lastSelOp ||\n      (origin && hist.lastSelOrigin == origin &&\n       (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin ||\n        selectionEventCanBeMerged(doc, origin, lst(hist.done), sel))))\n    { hist.done[hist.done.length - 1] = sel; }\n  else\n    { pushSelectionToHistory(sel, hist.done); }\n\n  hist.lastSelTime = +new Date;\n  hist.lastSelOrigin = origin;\n  hist.lastSelOp = opId;\n  if (options && options.clearRedo !== false)\n    { clearSelectionEvents(hist.undone); }\n}\n\nfunction pushSelectionToHistory(sel, dest) {\n  var top = lst(dest);\n  if (!(top && top.ranges && top.equals(sel)))\n    { dest.push(sel); }\n}\n\n// Used to store marked span information in the history.\nfunction attachLocalSpans(doc, change, from, to) {\n  var existing = change[\"spans_\" + doc.id], n = 0;\n  doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function (line) {\n    if (line.markedSpans)\n      { (existing || (existing = change[\"spans_\" + doc.id] = {}))[n] = line.markedSpans; }\n    ++n;\n  });\n}\n\n// When un/re-doing restores text containing marked spans, those\n// that have been explicitly cleared should not be restored.\nfunction removeClearedSpans(spans) {\n  if (!spans) { return null }\n  var out;\n  for (var i = 0; i < spans.length; ++i) {\n    if (spans[i].marker.explicitlyCleared) { if (!out) { out = spans.slice(0, i); } }\n    else if (out) { out.push(spans[i]); }\n  }\n  return !out ? spans : out.length ? out : null\n}\n\n// Retrieve and filter the old marked spans stored in a change event.\nfunction getOldSpans(doc, change) {\n  var found = change[\"spans_\" + doc.id];\n  if (!found) { return null }\n  var nw = [];\n  for (var i = 0; i < change.text.length; ++i)\n    { nw.push(removeClearedSpans(found[i])); }\n  return nw\n}\n\n// Used for un/re-doing changes from the history. Combines the\n// result of computing the existing spans with the set of spans that\n// existed in the history (so that deleting around a span and then\n// undoing brings back the span).\nfunction mergeOldSpans(doc, change) {\n  var old = getOldSpans(doc, change);\n  var stretched = stretchSpansOverChange(doc, change);\n  if (!old) { return stretched }\n  if (!stretched) { return old }\n\n  for (var i = 0; i < old.length; ++i) {\n    var oldCur = old[i], stretchCur = stretched[i];\n    if (oldCur && stretchCur) {\n      spans: for (var j = 0; j < stretchCur.length; ++j) {\n        var span = stretchCur[j];\n        for (var k = 0; k < oldCur.length; ++k)\n          { if (oldCur[k].marker == span.marker) { continue spans } }\n        oldCur.push(span);\n      }\n    } else if (stretchCur) {\n      old[i] = stretchCur;\n    }\n  }\n  return old\n}\n\n// Used both to provide a JSON-safe object in .getHistory, and, when\n// detaching a document, to split the history in two\nfunction copyHistoryArray(events, newGroup, instantiateSel) {\n  var copy = [];\n  for (var i = 0; i < events.length; ++i) {\n    var event = events[i];\n    if (event.ranges) {\n      copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event);\n      continue\n    }\n    var changes = event.changes, newChanges = [];\n    copy.push({changes: newChanges});\n    for (var j = 0; j < changes.length; ++j) {\n      var change = changes[j], m = (void 0);\n      newChanges.push({from: change.from, to: change.to, text: change.text});\n      if (newGroup) { for (var prop in change) { if (m = prop.match(/^spans_(\\d+)$/)) {\n        if (indexOf(newGroup, Number(m[1])) > -1) {\n          lst(newChanges)[prop] = change[prop];\n          delete change[prop];\n        }\n      } } }\n    }\n  }\n  return copy\n}\n\n// The 'scroll' parameter given to many of these indicated whether\n// the new cursor position should be scrolled into view after\n// modifying the selection.\n\n// If shift is held or the extend flag is set, extends a range to\n// include a given position (and optionally a second position).\n// Otherwise, simply returns the range between the given positions.\n// Used for cursor motion and such.\nfunction extendRange(range, head, other, extend) {\n  if (extend) {\n    var anchor = range.anchor;\n    if (other) {\n      var posBefore = cmp(head, anchor) < 0;\n      if (posBefore != (cmp(other, anchor) < 0)) {\n        anchor = head;\n        head = other;\n      } else if (posBefore != (cmp(head, other) < 0)) {\n        head = other;\n      }\n    }\n    return new Range(anchor, head)\n  } else {\n    return new Range(other || head, head)\n  }\n}\n\n// Extend the primary selection range, discard the rest.\nfunction extendSelection(doc, head, other, options, extend) {\n  if (extend == null) { extend = doc.cm && (doc.cm.display.shift || doc.extend); }\n  setSelection(doc, new Selection([extendRange(doc.sel.primary(), head, other, extend)], 0), options);\n}\n\n// Extend all selections (pos is an array of selections with length\n// equal the number of selections)\nfunction extendSelections(doc, heads, options) {\n  var out = [];\n  var extend = doc.cm && (doc.cm.display.shift || doc.extend);\n  for (var i = 0; i < doc.sel.ranges.length; i++)\n    { out[i] = extendRange(doc.sel.ranges[i], heads[i], null, extend); }\n  var newSel = normalizeSelection(out, doc.sel.primIndex);\n  setSelection(doc, newSel, options);\n}\n\n// Updates a single range in the selection.\nfunction replaceOneSelection(doc, i, range, options) {\n  var ranges = doc.sel.ranges.slice(0);\n  ranges[i] = range;\n  setSelection(doc, normalizeSelection(ranges, doc.sel.primIndex), options);\n}\n\n// Reset the selection to a single range.\nfunction setSimpleSelection(doc, anchor, head, options) {\n  setSelection(doc, simpleSelection(anchor, head), options);\n}\n\n// Give beforeSelectionChange handlers a change to influence a\n// selection update.\nfunction filterSelectionChange(doc, sel, options) {\n  var obj = {\n    ranges: sel.ranges,\n    update: function(ranges) {\n      var this$1 = this;\n\n      this.ranges = [];\n      for (var i = 0; i < ranges.length; i++)\n        { this$1.ranges[i] = new Range(clipPos(doc, ranges[i].anchor),\n                                   clipPos(doc, ranges[i].head)); }\n    },\n    origin: options && options.origin\n  };\n  signal(doc, \"beforeSelectionChange\", doc, obj);\n  if (doc.cm) { signal(doc.cm, \"beforeSelectionChange\", doc.cm, obj); }\n  if (obj.ranges != sel.ranges) { return normalizeSelection(obj.ranges, obj.ranges.length - 1) }\n  else { return sel }\n}\n\nfunction setSelectionReplaceHistory(doc, sel, options) {\n  var done = doc.history.done, last = lst(done);\n  if (last && last.ranges) {\n    done[done.length - 1] = sel;\n    setSelectionNoUndo(doc, sel, options);\n  } else {\n    setSelection(doc, sel, options);\n  }\n}\n\n// Set a new selection.\nfunction setSelection(doc, sel, options) {\n  setSelectionNoUndo(doc, sel, options);\n  addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options);\n}\n\nfunction setSelectionNoUndo(doc, sel, options) {\n  if (hasHandler(doc, \"beforeSelectionChange\") || doc.cm && hasHandler(doc.cm, \"beforeSelectionChange\"))\n    { sel = filterSelectionChange(doc, sel, options); }\n\n  var bias = options && options.bias ||\n    (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1);\n  setSelectionInner(doc, skipAtomicInSelection(doc, sel, bias, true));\n\n  if (!(options && options.scroll === false) && doc.cm)\n    { ensureCursorVisible(doc.cm); }\n}\n\nfunction setSelectionInner(doc, sel) {\n  if (sel.equals(doc.sel)) { return }\n\n  doc.sel = sel;\n\n  if (doc.cm) {\n    doc.cm.curOp.updateInput = doc.cm.curOp.selectionChanged = true;\n    signalCursorActivity(doc.cm);\n  }\n  signalLater(doc, \"cursorActivity\", doc);\n}\n\n// Verify that the selection does not partially select any atomic\n// marked ranges.\nfunction reCheckSelection(doc) {\n  setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, false));\n}\n\n// Return a selection that does not partially select any atomic\n// ranges.\nfunction skipAtomicInSelection(doc, sel, bias, mayClear) {\n  var out;\n  for (var i = 0; i < sel.ranges.length; i++) {\n    var range = sel.ranges[i];\n    var old = sel.ranges.length == doc.sel.ranges.length && doc.sel.ranges[i];\n    var newAnchor = skipAtomic(doc, range.anchor, old && old.anchor, bias, mayClear);\n    var newHead = skipAtomic(doc, range.head, old && old.head, bias, mayClear);\n    if (out || newAnchor != range.anchor || newHead != range.head) {\n      if (!out) { out = sel.ranges.slice(0, i); }\n      out[i] = new Range(newAnchor, newHead);\n    }\n  }\n  return out ? normalizeSelection(out, sel.primIndex) : sel\n}\n\nfunction skipAtomicInner(doc, pos, oldPos, dir, mayClear) {\n  var line = getLine(doc, pos.line);\n  if (line.markedSpans) { for (var i = 0; i < line.markedSpans.length; ++i) {\n    var sp = line.markedSpans[i], m = sp.marker;\n    if ((sp.from == null || (m.inclusiveLeft ? sp.from <= pos.ch : sp.from < pos.ch)) &&\n        (sp.to == null || (m.inclusiveRight ? sp.to >= pos.ch : sp.to > pos.ch))) {\n      if (mayClear) {\n        signal(m, \"beforeCursorEnter\");\n        if (m.explicitlyCleared) {\n          if (!line.markedSpans) { break }\n          else {--i; continue}\n        }\n      }\n      if (!m.atomic) { continue }\n\n      if (oldPos) {\n        var near = m.find(dir < 0 ? 1 : -1), diff = (void 0);\n        if (dir < 0 ? m.inclusiveRight : m.inclusiveLeft)\n          { near = movePos(doc, near, -dir, near && near.line == pos.line ? line : null); }\n        if (near && near.line == pos.line && (diff = cmp(near, oldPos)) && (dir < 0 ? diff < 0 : diff > 0))\n          { return skipAtomicInner(doc, near, pos, dir, mayClear) }\n      }\n\n      var far = m.find(dir < 0 ? -1 : 1);\n      if (dir < 0 ? m.inclusiveLeft : m.inclusiveRight)\n        { far = movePos(doc, far, dir, far.line == pos.line ? line : null); }\n      return far ? skipAtomicInner(doc, far, pos, dir, mayClear) : null\n    }\n  } }\n  return pos\n}\n\n// Ensure a given position is not inside an atomic range.\nfunction skipAtomic(doc, pos, oldPos, bias, mayClear) {\n  var dir = bias || 1;\n  var found = skipAtomicInner(doc, pos, oldPos, dir, mayClear) ||\n      (!mayClear && skipAtomicInner(doc, pos, oldPos, dir, true)) ||\n      skipAtomicInner(doc, pos, oldPos, -dir, mayClear) ||\n      (!mayClear && skipAtomicInner(doc, pos, oldPos, -dir, true));\n  if (!found) {\n    doc.cantEdit = true;\n    return Pos(doc.first, 0)\n  }\n  return found\n}\n\nfunction movePos(doc, pos, dir, line) {\n  if (dir < 0 && pos.ch == 0) {\n    if (pos.line > doc.first) { return clipPos(doc, Pos(pos.line - 1)) }\n    else { return null }\n  } else if (dir > 0 && pos.ch == (line || getLine(doc, pos.line)).text.length) {\n    if (pos.line < doc.first + doc.size - 1) { return Pos(pos.line + 1, 0) }\n    else { return null }\n  } else {\n    return new Pos(pos.line, pos.ch + dir)\n  }\n}\n\nfunction selectAll(cm) {\n  cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll);\n}\n\n// UPDATING\n\n// Allow \"beforeChange\" event handlers to influence a change\nfunction filterChange(doc, change, update) {\n  var obj = {\n    canceled: false,\n    from: change.from,\n    to: change.to,\n    text: change.text,\n    origin: change.origin,\n    cancel: function () { return obj.canceled = true; }\n  };\n  if (update) { obj.update = function (from, to, text, origin) {\n    if (from) { obj.from = clipPos(doc, from); }\n    if (to) { obj.to = clipPos(doc, to); }\n    if (text) { obj.text = text; }\n    if (origin !== undefined) { obj.origin = origin; }\n  }; }\n  signal(doc, \"beforeChange\", doc, obj);\n  if (doc.cm) { signal(doc.cm, \"beforeChange\", doc.cm, obj); }\n\n  if (obj.canceled) { return null }\n  return {from: obj.from, to: obj.to, text: obj.text, origin: obj.origin}\n}\n\n// Apply a change to a document, and add it to the document's\n// history, and propagating it to all linked documents.\nfunction makeChange(doc, change, ignoreReadOnly) {\n  if (doc.cm) {\n    if (!doc.cm.curOp) { return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly) }\n    if (doc.cm.state.suppressEdits) { return }\n  }\n\n  if (hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\")) {\n    change = filterChange(doc, change, true);\n    if (!change) { return }\n  }\n\n  // Possibly split or suppress the update based on the presence\n  // of read-only spans in its range.\n  var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to);\n  if (split) {\n    for (var i = split.length - 1; i >= 0; --i)\n      { makeChangeInner(doc, {from: split[i].from, to: split[i].to, text: i ? [\"\"] : change.text, origin: change.origin}); }\n  } else {\n    makeChangeInner(doc, change);\n  }\n}\n\nfunction makeChangeInner(doc, change) {\n  if (change.text.length == 1 && change.text[0] == \"\" && cmp(change.from, change.to) == 0) { return }\n  var selAfter = computeSelAfterChange(doc, change);\n  addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN);\n\n  makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change));\n  var rebased = [];\n\n  linkedDocs(doc, function (doc, sharedHist) {\n    if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n      rebaseHist(doc.history, change);\n      rebased.push(doc.history);\n    }\n    makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change));\n  });\n}\n\n// Revert a change stored in a document's history.\nfunction makeChangeFromHistory(doc, type, allowSelectionOnly) {\n  if (doc.cm && doc.cm.state.suppressEdits && !allowSelectionOnly) { return }\n\n  var hist = doc.history, event, selAfter = doc.sel;\n  var source = type == \"undo\" ? hist.done : hist.undone, dest = type == \"undo\" ? hist.undone : hist.done;\n\n  // Verify that there is a useable event (so that ctrl-z won't\n  // needlessly clear selection events)\n  var i = 0;\n  for (; i < source.length; i++) {\n    event = source[i];\n    if (allowSelectionOnly ? event.ranges && !event.equals(doc.sel) : !event.ranges)\n      { break }\n  }\n  if (i == source.length) { return }\n  hist.lastOrigin = hist.lastSelOrigin = null;\n\n  for (;;) {\n    event = source.pop();\n    if (event.ranges) {\n      pushSelectionToHistory(event, dest);\n      if (allowSelectionOnly && !event.equals(doc.sel)) {\n        setSelection(doc, event, {clearRedo: false});\n        return\n      }\n      selAfter = event;\n    }\n    else { break }\n  }\n\n  // Build up a reverse change object to add to the opposite history\n  // stack (redo when undoing, and vice versa).\n  var antiChanges = [];\n  pushSelectionToHistory(selAfter, dest);\n  dest.push({changes: antiChanges, generation: hist.generation});\n  hist.generation = event.generation || ++hist.maxGeneration;\n\n  var filter = hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\");\n\n  var loop = function ( i ) {\n    var change = event.changes[i];\n    change.origin = type;\n    if (filter && !filterChange(doc, change, false)) {\n      source.length = 0;\n      return {}\n    }\n\n    antiChanges.push(historyChangeFromChange(doc, change));\n\n    var after = i ? computeSelAfterChange(doc, change) : lst(source);\n    makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change));\n    if (!i && doc.cm) { doc.cm.scrollIntoView({from: change.from, to: changeEnd(change)}); }\n    var rebased = [];\n\n    // Propagate to the linked documents\n    linkedDocs(doc, function (doc, sharedHist) {\n      if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n        rebaseHist(doc.history, change);\n        rebased.push(doc.history);\n      }\n      makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change));\n    });\n  };\n\n  for (var i$1 = event.changes.length - 1; i$1 >= 0; --i$1) {\n    var returned = loop( i$1 );\n\n    if ( returned ) return returned.v;\n  }\n}\n\n// Sub-views need their line numbers shifted when text is added\n// above or below them in the parent document.\nfunction shiftDoc(doc, distance) {\n  if (distance == 0) { return }\n  doc.first += distance;\n  doc.sel = new Selection(map(doc.sel.ranges, function (range) { return new Range(\n    Pos(range.anchor.line + distance, range.anchor.ch),\n    Pos(range.head.line + distance, range.head.ch)\n  ); }), doc.sel.primIndex);\n  if (doc.cm) {\n    regChange(doc.cm, doc.first, doc.first - distance, distance);\n    for (var d = doc.cm.display, l = d.viewFrom; l < d.viewTo; l++)\n      { regLineChange(doc.cm, l, \"gutter\"); }\n  }\n}\n\n// More lower-level change function, handling only a single document\n// (not linked ones).\nfunction makeChangeSingleDoc(doc, change, selAfter, spans) {\n  if (doc.cm && !doc.cm.curOp)\n    { return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans) }\n\n  if (change.to.line < doc.first) {\n    shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line));\n    return\n  }\n  if (change.from.line > doc.lastLine()) { return }\n\n  // Clip the change to the size of this doc\n  if (change.from.line < doc.first) {\n    var shift = change.text.length - 1 - (doc.first - change.from.line);\n    shiftDoc(doc, shift);\n    change = {from: Pos(doc.first, 0), to: Pos(change.to.line + shift, change.to.ch),\n              text: [lst(change.text)], origin: change.origin};\n  }\n  var last = doc.lastLine();\n  if (change.to.line > last) {\n    change = {from: change.from, to: Pos(last, getLine(doc, last).text.length),\n              text: [change.text[0]], origin: change.origin};\n  }\n\n  change.removed = getBetween(doc, change.from, change.to);\n\n  if (!selAfter) { selAfter = computeSelAfterChange(doc, change); }\n  if (doc.cm) { makeChangeSingleDocInEditor(doc.cm, change, spans); }\n  else { updateDoc(doc, change, spans); }\n  setSelectionNoUndo(doc, selAfter, sel_dontScroll);\n}\n\n// Handle the interaction of a change to a document with the editor\n// that this document is part of.\nfunction makeChangeSingleDocInEditor(cm, change, spans) {\n  var doc = cm.doc, display = cm.display, from = change.from, to = change.to;\n\n  var recomputeMaxLength = false, checkWidthStart = from.line;\n  if (!cm.options.lineWrapping) {\n    checkWidthStart = lineNo(visualLine(getLine(doc, from.line)));\n    doc.iter(checkWidthStart, to.line + 1, function (line) {\n      if (line == display.maxLine) {\n        recomputeMaxLength = true;\n        return true\n      }\n    });\n  }\n\n  if (doc.sel.contains(change.from, change.to) > -1)\n    { signalCursorActivity(cm); }\n\n  updateDoc(doc, change, spans, estimateHeight(cm));\n\n  if (!cm.options.lineWrapping) {\n    doc.iter(checkWidthStart, from.line + change.text.length, function (line) {\n      var len = lineLength(line);\n      if (len > display.maxLineLength) {\n        display.maxLine = line;\n        display.maxLineLength = len;\n        display.maxLineChanged = true;\n        recomputeMaxLength = false;\n      }\n    });\n    if (recomputeMaxLength) { cm.curOp.updateMaxLine = true; }\n  }\n\n  retreatFrontier(doc, from.line);\n  startWorker(cm, 400);\n\n  var lendiff = change.text.length - (to.line - from.line) - 1;\n  // Remember that these lines changed, for updating the display\n  if (change.full)\n    { regChange(cm); }\n  else if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change))\n    { regLineChange(cm, from.line, \"text\"); }\n  else\n    { regChange(cm, from.line, to.line + 1, lendiff); }\n\n  var changesHandler = hasHandler(cm, \"changes\"), changeHandler = hasHandler(cm, \"change\");\n  if (changeHandler || changesHandler) {\n    var obj = {\n      from: from, to: to,\n      text: change.text,\n      removed: change.removed,\n      origin: change.origin\n    };\n    if (changeHandler) { signalLater(cm, \"change\", cm, obj); }\n    if (changesHandler) { (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj); }\n  }\n  cm.display.selForContextMenu = null;\n}\n\nfunction replaceRange(doc, code, from, to, origin) {\n  if (!to) { to = from; }\n  if (cmp(to, from) < 0) { var tmp = to; to = from; from = tmp; }\n  if (typeof code == \"string\") { code = doc.splitLines(code); }\n  makeChange(doc, {from: from, to: to, text: code, origin: origin});\n}\n\n// Rebasing/resetting history to deal with externally-sourced changes\n\nfunction rebaseHistSelSingle(pos, from, to, diff) {\n  if (to < pos.line) {\n    pos.line += diff;\n  } else if (from < pos.line) {\n    pos.line = from;\n    pos.ch = 0;\n  }\n}\n\n// Tries to rebase an array of history events given a change in the\n// document. If the change touches the same lines as the event, the\n// event, and everything 'behind' it, is discarded. If the change is\n// before the event, the event's positions are updated. Uses a\n// copy-on-write scheme for the positions, to avoid having to\n// reallocate them all on every rebase, but also avoid problems with\n// shared position objects being unsafely updated.\nfunction rebaseHistArray(array, from, to, diff) {\n  for (var i = 0; i < array.length; ++i) {\n    var sub = array[i], ok = true;\n    if (sub.ranges) {\n      if (!sub.copied) { sub = array[i] = sub.deepCopy(); sub.copied = true; }\n      for (var j = 0; j < sub.ranges.length; j++) {\n        rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff);\n        rebaseHistSelSingle(sub.ranges[j].head, from, to, diff);\n      }\n      continue\n    }\n    for (var j$1 = 0; j$1 < sub.changes.length; ++j$1) {\n      var cur = sub.changes[j$1];\n      if (to < cur.from.line) {\n        cur.from = Pos(cur.from.line + diff, cur.from.ch);\n        cur.to = Pos(cur.to.line + diff, cur.to.ch);\n      } else if (from <= cur.to.line) {\n        ok = false;\n        break\n      }\n    }\n    if (!ok) {\n      array.splice(0, i + 1);\n      i = 0;\n    }\n  }\n}\n\nfunction rebaseHist(hist, change) {\n  var from = change.from.line, to = change.to.line, diff = change.text.length - (to - from) - 1;\n  rebaseHistArray(hist.done, from, to, diff);\n  rebaseHistArray(hist.undone, from, to, diff);\n}\n\n// Utility for applying a change to a line by handle or number,\n// returning the number and optionally registering the line as\n// changed.\nfunction changeLine(doc, handle, changeType, op) {\n  var no = handle, line = handle;\n  if (typeof handle == \"number\") { line = getLine(doc, clipLine(doc, handle)); }\n  else { no = lineNo(handle); }\n  if (no == null) { return null }\n  if (op(line, no) && doc.cm) { regLineChange(doc.cm, no, changeType); }\n  return line\n}\n\n// The document is represented as a BTree consisting of leaves, with\n// chunk of lines in them, and branches, with up to ten leaves or\n// other branch nodes below them. The top node is always a branch\n// node, and is the document object itself (meaning it has\n// additional methods and properties).\n//\n// All nodes have parent links. The tree is used both to go from\n// line numbers to line objects, and to go from objects to numbers.\n// It also indexes by height, and is used to convert between height\n// and line object, and to find the total height of the document.\n//\n// See also http://marijnhaverbeke.nl/blog/codemirror-line-tree.html\n\nfunction LeafChunk(lines) {\n  var this$1 = this;\n\n  this.lines = lines;\n  this.parent = null;\n  var height = 0;\n  for (var i = 0; i < lines.length; ++i) {\n    lines[i].parent = this$1;\n    height += lines[i].height;\n  }\n  this.height = height;\n}\n\nLeafChunk.prototype = {\n  chunkSize: function chunkSize() { return this.lines.length },\n\n  // Remove the n lines at offset 'at'.\n  removeInner: function removeInner(at, n) {\n    var this$1 = this;\n\n    for (var i = at, e = at + n; i < e; ++i) {\n      var line = this$1.lines[i];\n      this$1.height -= line.height;\n      cleanUpLine(line);\n      signalLater(line, \"delete\");\n    }\n    this.lines.splice(at, n);\n  },\n\n  // Helper used to collapse a small branch into a single leaf.\n  collapse: function collapse(lines) {\n    lines.push.apply(lines, this.lines);\n  },\n\n  // Insert the given array of lines at offset 'at', count them as\n  // having the given height.\n  insertInner: function insertInner(at, lines, height) {\n    var this$1 = this;\n\n    this.height += height;\n    this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));\n    for (var i = 0; i < lines.length; ++i) { lines[i].parent = this$1; }\n  },\n\n  // Used to iterate over a part of the tree.\n  iterN: function iterN(at, n, op) {\n    var this$1 = this;\n\n    for (var e = at + n; at < e; ++at)\n      { if (op(this$1.lines[at])) { return true } }\n  }\n};\n\nfunction BranchChunk(children) {\n  var this$1 = this;\n\n  this.children = children;\n  var size = 0, height = 0;\n  for (var i = 0; i < children.length; ++i) {\n    var ch = children[i];\n    size += ch.chunkSize(); height += ch.height;\n    ch.parent = this$1;\n  }\n  this.size = size;\n  this.height = height;\n  this.parent = null;\n}\n\nBranchChunk.prototype = {\n  chunkSize: function chunkSize() { return this.size },\n\n  removeInner: function removeInner(at, n) {\n    var this$1 = this;\n\n    this.size -= n;\n    for (var i = 0; i < this.children.length; ++i) {\n      var child = this$1.children[i], sz = child.chunkSize();\n      if (at < sz) {\n        var rm = Math.min(n, sz - at), oldHeight = child.height;\n        child.removeInner(at, rm);\n        this$1.height -= oldHeight - child.height;\n        if (sz == rm) { this$1.children.splice(i--, 1); child.parent = null; }\n        if ((n -= rm) == 0) { break }\n        at = 0;\n      } else { at -= sz; }\n    }\n    // If the result is smaller than 25 lines, ensure that it is a\n    // single leaf node.\n    if (this.size - n < 25 &&\n        (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {\n      var lines = [];\n      this.collapse(lines);\n      this.children = [new LeafChunk(lines)];\n      this.children[0].parent = this;\n    }\n  },\n\n  collapse: function collapse(lines) {\n    var this$1 = this;\n\n    for (var i = 0; i < this.children.length; ++i) { this$1.children[i].collapse(lines); }\n  },\n\n  insertInner: function insertInner(at, lines, height) {\n    var this$1 = this;\n\n    this.size += lines.length;\n    this.height += height;\n    for (var i = 0; i < this.children.length; ++i) {\n      var child = this$1.children[i], sz = child.chunkSize();\n      if (at <= sz) {\n        child.insertInner(at, lines, height);\n        if (child.lines && child.lines.length > 50) {\n          // To avoid memory thrashing when child.lines is huge (e.g. first view of a large file), it's never spliced.\n          // Instead, small slices are taken. They're taken in order because sequential memory accesses are fastest.\n          var remaining = child.lines.length % 25 + 25;\n          for (var pos = remaining; pos < child.lines.length;) {\n            var leaf = new LeafChunk(child.lines.slice(pos, pos += 25));\n            child.height -= leaf.height;\n            this$1.children.splice(++i, 0, leaf);\n            leaf.parent = this$1;\n          }\n          child.lines = child.lines.slice(0, remaining);\n          this$1.maybeSpill();\n        }\n        break\n      }\n      at -= sz;\n    }\n  },\n\n  // When a node has grown, check whether it should be split.\n  maybeSpill: function maybeSpill() {\n    if (this.children.length <= 10) { return }\n    var me = this;\n    do {\n      var spilled = me.children.splice(me.children.length - 5, 5);\n      var sibling = new BranchChunk(spilled);\n      if (!me.parent) { // Become the parent node\n        var copy = new BranchChunk(me.children);\n        copy.parent = me;\n        me.children = [copy, sibling];\n        me = copy;\n     } else {\n        me.size -= sibling.size;\n        me.height -= sibling.height;\n        var myIndex = indexOf(me.parent.children, me);\n        me.parent.children.splice(myIndex + 1, 0, sibling);\n      }\n      sibling.parent = me.parent;\n    } while (me.children.length > 10)\n    me.parent.maybeSpill();\n  },\n\n  iterN: function iterN(at, n, op) {\n    var this$1 = this;\n\n    for (var i = 0; i < this.children.length; ++i) {\n      var child = this$1.children[i], sz = child.chunkSize();\n      if (at < sz) {\n        var used = Math.min(n, sz - at);\n        if (child.iterN(at, used, op)) { return true }\n        if ((n -= used) == 0) { break }\n        at = 0;\n      } else { at -= sz; }\n    }\n  }\n};\n\n// Line widgets are block elements displayed above or below a line.\n\nvar LineWidget = function(doc, node, options) {\n  var this$1 = this;\n\n  if (options) { for (var opt in options) { if (options.hasOwnProperty(opt))\n    { this$1[opt] = options[opt]; } } }\n  this.doc = doc;\n  this.node = node;\n};\n\nLineWidget.prototype.clear = function () {\n    var this$1 = this;\n\n  var cm = this.doc.cm, ws = this.line.widgets, line = this.line, no = lineNo(line);\n  if (no == null || !ws) { return }\n  for (var i = 0; i < ws.length; ++i) { if (ws[i] == this$1) { ws.splice(i--, 1); } }\n  if (!ws.length) { line.widgets = null; }\n  var height = widgetHeight(this);\n  updateLineHeight(line, Math.max(0, line.height - height));\n  if (cm) {\n    runInOp(cm, function () {\n      adjustScrollWhenAboveVisible(cm, line, -height);\n      regLineChange(cm, no, \"widget\");\n    });\n    signalLater(cm, \"lineWidgetCleared\", cm, this, no);\n  }\n};\n\nLineWidget.prototype.changed = function () {\n    var this$1 = this;\n\n  var oldH = this.height, cm = this.doc.cm, line = this.line;\n  this.height = null;\n  var diff = widgetHeight(this) - oldH;\n  if (!diff) { return }\n  updateLineHeight(line, line.height + diff);\n  if (cm) {\n    runInOp(cm, function () {\n      cm.curOp.forceUpdate = true;\n      adjustScrollWhenAboveVisible(cm, line, diff);\n      signalLater(cm, \"lineWidgetChanged\", cm, this$1, lineNo(line));\n    });\n  }\n};\neventMixin(LineWidget);\n\nfunction adjustScrollWhenAboveVisible(cm, line, diff) {\n  if (heightAtLine(line) < ((cm.curOp && cm.curOp.scrollTop) || cm.doc.scrollTop))\n    { addToScrollTop(cm, diff); }\n}\n\nfunction addLineWidget(doc, handle, node, options) {\n  var widget = new LineWidget(doc, node, options);\n  var cm = doc.cm;\n  if (cm && widget.noHScroll) { cm.display.alignWidgets = true; }\n  changeLine(doc, handle, \"widget\", function (line) {\n    var widgets = line.widgets || (line.widgets = []);\n    if (widget.insertAt == null) { widgets.push(widget); }\n    else { widgets.splice(Math.min(widgets.length - 1, Math.max(0, widget.insertAt)), 0, widget); }\n    widget.line = line;\n    if (cm && !lineIsHidden(doc, line)) {\n      var aboveVisible = heightAtLine(line) < doc.scrollTop;\n      updateLineHeight(line, line.height + widgetHeight(widget));\n      if (aboveVisible) { addToScrollTop(cm, widget.height); }\n      cm.curOp.forceUpdate = true;\n    }\n    return true\n  });\n  signalLater(cm, \"lineWidgetAdded\", cm, widget, typeof handle == \"number\" ? handle : lineNo(handle));\n  return widget\n}\n\n// TEXTMARKERS\n\n// Created with markText and setBookmark methods. A TextMarker is a\n// handle that can be used to clear or find a marked position in the\n// document. Line objects hold arrays (markedSpans) containing\n// {from, to, marker} object pointing to such marker objects, and\n// indicating that such a marker is present on that line. Multiple\n// lines may point to the same marker when it spans across lines.\n// The spans will have null for their from/to properties when the\n// marker continues beyond the start/end of the line. Markers have\n// links back to the lines they currently touch.\n\n// Collapsed markers have unique ids, in order to be able to order\n// them, which is needed for uniquely determining an outer marker\n// when they overlap (they may nest, but not partially overlap).\nvar nextMarkerId = 0;\n\nvar TextMarker = function(doc, type) {\n  this.lines = [];\n  this.type = type;\n  this.doc = doc;\n  this.id = ++nextMarkerId;\n};\n\n// Clear the marker.\nTextMarker.prototype.clear = function () {\n    var this$1 = this;\n\n  if (this.explicitlyCleared) { return }\n  var cm = this.doc.cm, withOp = cm && !cm.curOp;\n  if (withOp) { startOperation(cm); }\n  if (hasHandler(this, \"clear\")) {\n    var found = this.find();\n    if (found) { signalLater(this, \"clear\", found.from, found.to); }\n  }\n  var min = null, max = null;\n  for (var i = 0; i < this.lines.length; ++i) {\n    var line = this$1.lines[i];\n    var span = getMarkedSpanFor(line.markedSpans, this$1);\n    if (cm && !this$1.collapsed) { regLineChange(cm, lineNo(line), \"text\"); }\n    else if (cm) {\n      if (span.to != null) { max = lineNo(line); }\n      if (span.from != null) { min = lineNo(line); }\n    }\n    line.markedSpans = removeMarkedSpan(line.markedSpans, span);\n    if (span.from == null && this$1.collapsed && !lineIsHidden(this$1.doc, line) && cm)\n      { updateLineHeight(line, textHeight(cm.display)); }\n  }\n  if (cm && this.collapsed && !cm.options.lineWrapping) { for (var i$1 = 0; i$1 < this.lines.length; ++i$1) {\n    var visual = visualLine(this$1.lines[i$1]), len = lineLength(visual);\n    if (len > cm.display.maxLineLength) {\n      cm.display.maxLine = visual;\n      cm.display.maxLineLength = len;\n      cm.display.maxLineChanged = true;\n    }\n  } }\n\n  if (min != null && cm && this.collapsed) { regChange(cm, min, max + 1); }\n  this.lines.length = 0;\n  this.explicitlyCleared = true;\n  if (this.atomic && this.doc.cantEdit) {\n    this.doc.cantEdit = false;\n    if (cm) { reCheckSelection(cm.doc); }\n  }\n  if (cm) { signalLater(cm, \"markerCleared\", cm, this, min, max); }\n  if (withOp) { endOperation(cm); }\n  if (this.parent) { this.parent.clear(); }\n};\n\n// Find the position of the marker in the document. Returns a {from,\n// to} object by default. Side can be passed to get a specific side\n// -- 0 (both), -1 (left), or 1 (right). When lineObj is true, the\n// Pos objects returned contain a line object, rather than a line\n// number (used to prevent looking up the same line twice).\nTextMarker.prototype.find = function (side, lineObj) {\n    var this$1 = this;\n\n  if (side == null && this.type == \"bookmark\") { side = 1; }\n  var from, to;\n  for (var i = 0; i < this.lines.length; ++i) {\n    var line = this$1.lines[i];\n    var span = getMarkedSpanFor(line.markedSpans, this$1);\n    if (span.from != null) {\n      from = Pos(lineObj ? line : lineNo(line), span.from);\n      if (side == -1) { return from }\n    }\n    if (span.to != null) {\n      to = Pos(lineObj ? line : lineNo(line), span.to);\n      if (side == 1) { return to }\n    }\n  }\n  return from && {from: from, to: to}\n};\n\n// Signals that the marker's widget changed, and surrounding layout\n// should be recomputed.\nTextMarker.prototype.changed = function () {\n    var this$1 = this;\n\n  var pos = this.find(-1, true), widget = this, cm = this.doc.cm;\n  if (!pos || !cm) { return }\n  runInOp(cm, function () {\n    var line = pos.line, lineN = lineNo(pos.line);\n    var view = findViewForLine(cm, lineN);\n    if (view) {\n      clearLineMeasurementCacheFor(view);\n      cm.curOp.selectionChanged = cm.curOp.forceUpdate = true;\n    }\n    cm.curOp.updateMaxLine = true;\n    if (!lineIsHidden(widget.doc, line) && widget.height != null) {\n      var oldHeight = widget.height;\n      widget.height = null;\n      var dHeight = widgetHeight(widget) - oldHeight;\n      if (dHeight)\n        { updateLineHeight(line, line.height + dHeight); }\n    }\n    signalLater(cm, \"markerChanged\", cm, this$1);\n  });\n};\n\nTextMarker.prototype.attachLine = function (line) {\n  if (!this.lines.length && this.doc.cm) {\n    var op = this.doc.cm.curOp;\n    if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1)\n      { (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this); }\n  }\n  this.lines.push(line);\n};\n\nTextMarker.prototype.detachLine = function (line) {\n  this.lines.splice(indexOf(this.lines, line), 1);\n  if (!this.lines.length && this.doc.cm) {\n    var op = this.doc.cm.curOp;(op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);\n  }\n};\neventMixin(TextMarker);\n\n// Create a marker, wire it up to the right lines, and\nfunction markText(doc, from, to, options, type) {\n  // Shared markers (across linked documents) are handled separately\n  // (markTextShared will call out to this again, once per\n  // document).\n  if (options && options.shared) { return markTextShared(doc, from, to, options, type) }\n  // Ensure we are in an operation.\n  if (doc.cm && !doc.cm.curOp) { return operation(doc.cm, markText)(doc, from, to, options, type) }\n\n  var marker = new TextMarker(doc, type), diff = cmp(from, to);\n  if (options) { copyObj(options, marker, false); }\n  // Don't connect empty markers unless clearWhenEmpty is false\n  if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false)\n    { return marker }\n  if (marker.replacedWith) {\n    // Showing up as a widget implies collapsed (widget replaces text)\n    marker.collapsed = true;\n    marker.widgetNode = eltP(\"span\", [marker.replacedWith], \"CodeMirror-widget\");\n    if (!options.handleMouseEvents) { marker.widgetNode.setAttribute(\"cm-ignore-events\", \"true\"); }\n    if (options.insertLeft) { marker.widgetNode.insertLeft = true; }\n  }\n  if (marker.collapsed) {\n    if (conflictingCollapsedRange(doc, from.line, from, to, marker) ||\n        from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker))\n      { throw new Error(\"Inserting collapsed marker partially overlapping an existing one\") }\n    seeCollapsedSpans();\n  }\n\n  if (marker.addToHistory)\n    { addChangeToHistory(doc, {from: from, to: to, origin: \"markText\"}, doc.sel, NaN); }\n\n  var curLine = from.line, cm = doc.cm, updateMaxLine;\n  doc.iter(curLine, to.line + 1, function (line) {\n    if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine)\n      { updateMaxLine = true; }\n    if (marker.collapsed && curLine != from.line) { updateLineHeight(line, 0); }\n    addMarkedSpan(line, new MarkedSpan(marker,\n                                       curLine == from.line ? from.ch : null,\n                                       curLine == to.line ? to.ch : null));\n    ++curLine;\n  });\n  // lineIsHidden depends on the presence of the spans, so needs a second pass\n  if (marker.collapsed) { doc.iter(from.line, to.line + 1, function (line) {\n    if (lineIsHidden(doc, line)) { updateLineHeight(line, 0); }\n  }); }\n\n  if (marker.clearOnEnter) { on(marker, \"beforeCursorEnter\", function () { return marker.clear(); }); }\n\n  if (marker.readOnly) {\n    seeReadOnlySpans();\n    if (doc.history.done.length || doc.history.undone.length)\n      { doc.clearHistory(); }\n  }\n  if (marker.collapsed) {\n    marker.id = ++nextMarkerId;\n    marker.atomic = true;\n  }\n  if (cm) {\n    // Sync editor state\n    if (updateMaxLine) { cm.curOp.updateMaxLine = true; }\n    if (marker.collapsed)\n      { regChange(cm, from.line, to.line + 1); }\n    else if (marker.className || marker.title || marker.startStyle || marker.endStyle || marker.css)\n      { for (var i = from.line; i <= to.line; i++) { regLineChange(cm, i, \"text\"); } }\n    if (marker.atomic) { reCheckSelection(cm.doc); }\n    signalLater(cm, \"markerAdded\", cm, marker);\n  }\n  return marker\n}\n\n// SHARED TEXTMARKERS\n\n// A shared marker spans multiple linked documents. It is\n// implemented as a meta-marker-object controlling multiple normal\n// markers.\nvar SharedTextMarker = function(markers, primary) {\n  var this$1 = this;\n\n  this.markers = markers;\n  this.primary = primary;\n  for (var i = 0; i < markers.length; ++i)\n    { markers[i].parent = this$1; }\n};\n\nSharedTextMarker.prototype.clear = function () {\n    var this$1 = this;\n\n  if (this.explicitlyCleared) { return }\n  this.explicitlyCleared = true;\n  for (var i = 0; i < this.markers.length; ++i)\n    { this$1.markers[i].clear(); }\n  signalLater(this, \"clear\");\n};\n\nSharedTextMarker.prototype.find = function (side, lineObj) {\n  return this.primary.find(side, lineObj)\n};\neventMixin(SharedTextMarker);\n\nfunction markTextShared(doc, from, to, options, type) {\n  options = copyObj(options);\n  options.shared = false;\n  var markers = [markText(doc, from, to, options, type)], primary = markers[0];\n  var widget = options.widgetNode;\n  linkedDocs(doc, function (doc) {\n    if (widget) { options.widgetNode = widget.cloneNode(true); }\n    markers.push(markText(doc, clipPos(doc, from), clipPos(doc, to), options, type));\n    for (var i = 0; i < doc.linked.length; ++i)\n      { if (doc.linked[i].isParent) { return } }\n    primary = lst(markers);\n  });\n  return new SharedTextMarker(markers, primary)\n}\n\nfunction findSharedMarkers(doc) {\n  return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())), function (m) { return m.parent; })\n}\n\nfunction copySharedMarkers(doc, markers) {\n  for (var i = 0; i < markers.length; i++) {\n    var marker = markers[i], pos = marker.find();\n    var mFrom = doc.clipPos(pos.from), mTo = doc.clipPos(pos.to);\n    if (cmp(mFrom, mTo)) {\n      var subMark = markText(doc, mFrom, mTo, marker.primary, marker.primary.type);\n      marker.markers.push(subMark);\n      subMark.parent = marker;\n    }\n  }\n}\n\nfunction detachSharedMarkers(markers) {\n  var loop = function ( i ) {\n    var marker = markers[i], linked = [marker.primary.doc];\n    linkedDocs(marker.primary.doc, function (d) { return linked.push(d); });\n    for (var j = 0; j < marker.markers.length; j++) {\n      var subMarker = marker.markers[j];\n      if (indexOf(linked, subMarker.doc) == -1) {\n        subMarker.parent = null;\n        marker.markers.splice(j--, 1);\n      }\n    }\n  };\n\n  for (var i = 0; i < markers.length; i++) loop( i );\n}\n\nvar nextDocId = 0;\nvar Doc = function(text, mode, firstLine, lineSep, direction) {\n  if (!(this instanceof Doc)) { return new Doc(text, mode, firstLine, lineSep, direction) }\n  if (firstLine == null) { firstLine = 0; }\n\n  BranchChunk.call(this, [new LeafChunk([new Line(\"\", null)])]);\n  this.first = firstLine;\n  this.scrollTop = this.scrollLeft = 0;\n  this.cantEdit = false;\n  this.cleanGeneration = 1;\n  this.modeFrontier = this.highlightFrontier = firstLine;\n  var start = Pos(firstLine, 0);\n  this.sel = simpleSelection(start);\n  this.history = new History(null);\n  this.id = ++nextDocId;\n  this.modeOption = mode;\n  this.lineSep = lineSep;\n  this.direction = (direction == \"rtl\") ? \"rtl\" : \"ltr\";\n  this.extend = false;\n\n  if (typeof text == \"string\") { text = this.splitLines(text); }\n  updateDoc(this, {from: start, to: start, text: text});\n  setSelection(this, simpleSelection(start), sel_dontScroll);\n};\n\nDoc.prototype = createObj(BranchChunk.prototype, {\n  constructor: Doc,\n  // Iterate over the document. Supports two forms -- with only one\n  // argument, it calls that for each line in the document. With\n  // three, it iterates over the range given by the first two (with\n  // the second being non-inclusive).\n  iter: function(from, to, op) {\n    if (op) { this.iterN(from - this.first, to - from, op); }\n    else { this.iterN(this.first, this.first + this.size, from); }\n  },\n\n  // Non-public interface for adding and removing lines.\n  insert: function(at, lines) {\n    var height = 0;\n    for (var i = 0; i < lines.length; ++i) { height += lines[i].height; }\n    this.insertInner(at - this.first, lines, height);\n  },\n  remove: function(at, n) { this.removeInner(at - this.first, n); },\n\n  // From here, the methods are part of the public interface. Most\n  // are also available from CodeMirror (editor) instances.\n\n  getValue: function(lineSep) {\n    var lines = getLines(this, this.first, this.first + this.size);\n    if (lineSep === false) { return lines }\n    return lines.join(lineSep || this.lineSeparator())\n  },\n  setValue: docMethodOp(function(code) {\n    var top = Pos(this.first, 0), last = this.first + this.size - 1;\n    makeChange(this, {from: top, to: Pos(last, getLine(this, last).text.length),\n                      text: this.splitLines(code), origin: \"setValue\", full: true}, true);\n    if (this.cm) { scrollToCoords(this.cm, 0, 0); }\n    setSelection(this, simpleSelection(top), sel_dontScroll);\n  }),\n  replaceRange: function(code, from, to, origin) {\n    from = clipPos(this, from);\n    to = to ? clipPos(this, to) : from;\n    replaceRange(this, code, from, to, origin);\n  },\n  getRange: function(from, to, lineSep) {\n    var lines = getBetween(this, clipPos(this, from), clipPos(this, to));\n    if (lineSep === false) { return lines }\n    return lines.join(lineSep || this.lineSeparator())\n  },\n\n  getLine: function(line) {var l = this.getLineHandle(line); return l && l.text},\n\n  getLineHandle: function(line) {if (isLine(this, line)) { return getLine(this, line) }},\n  getLineNumber: function(line) {return lineNo(line)},\n\n  getLineHandleVisualStart: function(line) {\n    if (typeof line == \"number\") { line = getLine(this, line); }\n    return visualLine(line)\n  },\n\n  lineCount: function() {return this.size},\n  firstLine: function() {return this.first},\n  lastLine: function() {return this.first + this.size - 1},\n\n  clipPos: function(pos) {return clipPos(this, pos)},\n\n  getCursor: function(start) {\n    var range$$1 = this.sel.primary(), pos;\n    if (start == null || start == \"head\") { pos = range$$1.head; }\n    else if (start == \"anchor\") { pos = range$$1.anchor; }\n    else if (start == \"end\" || start == \"to\" || start === false) { pos = range$$1.to(); }\n    else { pos = range$$1.from(); }\n    return pos\n  },\n  listSelections: function() { return this.sel.ranges },\n  somethingSelected: function() {return this.sel.somethingSelected()},\n\n  setCursor: docMethodOp(function(line, ch, options) {\n    setSimpleSelection(this, clipPos(this, typeof line == \"number\" ? Pos(line, ch || 0) : line), null, options);\n  }),\n  setSelection: docMethodOp(function(anchor, head, options) {\n    setSimpleSelection(this, clipPos(this, anchor), clipPos(this, head || anchor), options);\n  }),\n  extendSelection: docMethodOp(function(head, other, options) {\n    extendSelection(this, clipPos(this, head), other && clipPos(this, other), options);\n  }),\n  extendSelections: docMethodOp(function(heads, options) {\n    extendSelections(this, clipPosArray(this, heads), options);\n  }),\n  extendSelectionsBy: docMethodOp(function(f, options) {\n    var heads = map(this.sel.ranges, f);\n    extendSelections(this, clipPosArray(this, heads), options);\n  }),\n  setSelections: docMethodOp(function(ranges, primary, options) {\n    var this$1 = this;\n\n    if (!ranges.length) { return }\n    var out = [];\n    for (var i = 0; i < ranges.length; i++)\n      { out[i] = new Range(clipPos(this$1, ranges[i].anchor),\n                         clipPos(this$1, ranges[i].head)); }\n    if (primary == null) { primary = Math.min(ranges.length - 1, this.sel.primIndex); }\n    setSelection(this, normalizeSelection(out, primary), options);\n  }),\n  addSelection: docMethodOp(function(anchor, head, options) {\n    var ranges = this.sel.ranges.slice(0);\n    ranges.push(new Range(clipPos(this, anchor), clipPos(this, head || anchor)));\n    setSelection(this, normalizeSelection(ranges, ranges.length - 1), options);\n  }),\n\n  getSelection: function(lineSep) {\n    var this$1 = this;\n\n    var ranges = this.sel.ranges, lines;\n    for (var i = 0; i < ranges.length; i++) {\n      var sel = getBetween(this$1, ranges[i].from(), ranges[i].to());\n      lines = lines ? lines.concat(sel) : sel;\n    }\n    if (lineSep === false) { return lines }\n    else { return lines.join(lineSep || this.lineSeparator()) }\n  },\n  getSelections: function(lineSep) {\n    var this$1 = this;\n\n    var parts = [], ranges = this.sel.ranges;\n    for (var i = 0; i < ranges.length; i++) {\n      var sel = getBetween(this$1, ranges[i].from(), ranges[i].to());\n      if (lineSep !== false) { sel = sel.join(lineSep || this$1.lineSeparator()); }\n      parts[i] = sel;\n    }\n    return parts\n  },\n  replaceSelection: function(code, collapse, origin) {\n    var dup = [];\n    for (var i = 0; i < this.sel.ranges.length; i++)\n      { dup[i] = code; }\n    this.replaceSelections(dup, collapse, origin || \"+input\");\n  },\n  replaceSelections: docMethodOp(function(code, collapse, origin) {\n    var this$1 = this;\n\n    var changes = [], sel = this.sel;\n    for (var i = 0; i < sel.ranges.length; i++) {\n      var range$$1 = sel.ranges[i];\n      changes[i] = {from: range$$1.from(), to: range$$1.to(), text: this$1.splitLines(code[i]), origin: origin};\n    }\n    var newSel = collapse && collapse != \"end\" && computeReplacedSel(this, changes, collapse);\n    for (var i$1 = changes.length - 1; i$1 >= 0; i$1--)\n      { makeChange(this$1, changes[i$1]); }\n    if (newSel) { setSelectionReplaceHistory(this, newSel); }\n    else if (this.cm) { ensureCursorVisible(this.cm); }\n  }),\n  undo: docMethodOp(function() {makeChangeFromHistory(this, \"undo\");}),\n  redo: docMethodOp(function() {makeChangeFromHistory(this, \"redo\");}),\n  undoSelection: docMethodOp(function() {makeChangeFromHistory(this, \"undo\", true);}),\n  redoSelection: docMethodOp(function() {makeChangeFromHistory(this, \"redo\", true);}),\n\n  setExtending: function(val) {this.extend = val;},\n  getExtending: function() {return this.extend},\n\n  historySize: function() {\n    var hist = this.history, done = 0, undone = 0;\n    for (var i = 0; i < hist.done.length; i++) { if (!hist.done[i].ranges) { ++done; } }\n    for (var i$1 = 0; i$1 < hist.undone.length; i$1++) { if (!hist.undone[i$1].ranges) { ++undone; } }\n    return {undo: done, redo: undone}\n  },\n  clearHistory: function() {this.history = new History(this.history.maxGeneration);},\n\n  markClean: function() {\n    this.cleanGeneration = this.changeGeneration(true);\n  },\n  changeGeneration: function(forceSplit) {\n    if (forceSplit)\n      { this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null; }\n    return this.history.generation\n  },\n  isClean: function (gen) {\n    return this.history.generation == (gen || this.cleanGeneration)\n  },\n\n  getHistory: function() {\n    return {done: copyHistoryArray(this.history.done),\n            undone: copyHistoryArray(this.history.undone)}\n  },\n  setHistory: function(histData) {\n    var hist = this.history = new History(this.history.maxGeneration);\n    hist.done = copyHistoryArray(histData.done.slice(0), null, true);\n    hist.undone = copyHistoryArray(histData.undone.slice(0), null, true);\n  },\n\n  setGutterMarker: docMethodOp(function(line, gutterID, value) {\n    return changeLine(this, line, \"gutter\", function (line) {\n      var markers = line.gutterMarkers || (line.gutterMarkers = {});\n      markers[gutterID] = value;\n      if (!value && isEmpty(markers)) { line.gutterMarkers = null; }\n      return true\n    })\n  }),\n\n  clearGutter: docMethodOp(function(gutterID) {\n    var this$1 = this;\n\n    this.iter(function (line) {\n      if (line.gutterMarkers && line.gutterMarkers[gutterID]) {\n        changeLine(this$1, line, \"gutter\", function () {\n          line.gutterMarkers[gutterID] = null;\n          if (isEmpty(line.gutterMarkers)) { line.gutterMarkers = null; }\n          return true\n        });\n      }\n    });\n  }),\n\n  lineInfo: function(line) {\n    var n;\n    if (typeof line == \"number\") {\n      if (!isLine(this, line)) { return null }\n      n = line;\n      line = getLine(this, line);\n      if (!line) { return null }\n    } else {\n      n = lineNo(line);\n      if (n == null) { return null }\n    }\n    return {line: n, handle: line, text: line.text, gutterMarkers: line.gutterMarkers,\n            textClass: line.textClass, bgClass: line.bgClass, wrapClass: line.wrapClass,\n            widgets: line.widgets}\n  },\n\n  addLineClass: docMethodOp(function(handle, where, cls) {\n    return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n      var prop = where == \"text\" ? \"textClass\"\n               : where == \"background\" ? \"bgClass\"\n               : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n      if (!line[prop]) { line[prop] = cls; }\n      else if (classTest(cls).test(line[prop])) { return false }\n      else { line[prop] += \" \" + cls; }\n      return true\n    })\n  }),\n  removeLineClass: docMethodOp(function(handle, where, cls) {\n    return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n      var prop = where == \"text\" ? \"textClass\"\n               : where == \"background\" ? \"bgClass\"\n               : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n      var cur = line[prop];\n      if (!cur) { return false }\n      else if (cls == null) { line[prop] = null; }\n      else {\n        var found = cur.match(classTest(cls));\n        if (!found) { return false }\n        var end = found.index + found[0].length;\n        line[prop] = cur.slice(0, found.index) + (!found.index || end == cur.length ? \"\" : \" \") + cur.slice(end) || null;\n      }\n      return true\n    })\n  }),\n\n  addLineWidget: docMethodOp(function(handle, node, options) {\n    return addLineWidget(this, handle, node, options)\n  }),\n  removeLineWidget: function(widget) { widget.clear(); },\n\n  markText: function(from, to, options) {\n    return markText(this, clipPos(this, from), clipPos(this, to), options, options && options.type || \"range\")\n  },\n  setBookmark: function(pos, options) {\n    var realOpts = {replacedWith: options && (options.nodeType == null ? options.widget : options),\n                    insertLeft: options && options.insertLeft,\n                    clearWhenEmpty: false, shared: options && options.shared,\n                    handleMouseEvents: options && options.handleMouseEvents};\n    pos = clipPos(this, pos);\n    return markText(this, pos, pos, realOpts, \"bookmark\")\n  },\n  findMarksAt: function(pos) {\n    pos = clipPos(this, pos);\n    var markers = [], spans = getLine(this, pos.line).markedSpans;\n    if (spans) { for (var i = 0; i < spans.length; ++i) {\n      var span = spans[i];\n      if ((span.from == null || span.from <= pos.ch) &&\n          (span.to == null || span.to >= pos.ch))\n        { markers.push(span.marker.parent || span.marker); }\n    } }\n    return markers\n  },\n  findMarks: function(from, to, filter) {\n    from = clipPos(this, from); to = clipPos(this, to);\n    var found = [], lineNo$$1 = from.line;\n    this.iter(from.line, to.line + 1, function (line) {\n      var spans = line.markedSpans;\n      if (spans) { for (var i = 0; i < spans.length; i++) {\n        var span = spans[i];\n        if (!(span.to != null && lineNo$$1 == from.line && from.ch >= span.to ||\n              span.from == null && lineNo$$1 != from.line ||\n              span.from != null && lineNo$$1 == to.line && span.from >= to.ch) &&\n            (!filter || filter(span.marker)))\n          { found.push(span.marker.parent || span.marker); }\n      } }\n      ++lineNo$$1;\n    });\n    return found\n  },\n  getAllMarks: function() {\n    var markers = [];\n    this.iter(function (line) {\n      var sps = line.markedSpans;\n      if (sps) { for (var i = 0; i < sps.length; ++i)\n        { if (sps[i].from != null) { markers.push(sps[i].marker); } } }\n    });\n    return markers\n  },\n\n  posFromIndex: function(off) {\n    var ch, lineNo$$1 = this.first, sepSize = this.lineSeparator().length;\n    this.iter(function (line) {\n      var sz = line.text.length + sepSize;\n      if (sz > off) { ch = off; return true }\n      off -= sz;\n      ++lineNo$$1;\n    });\n    return clipPos(this, Pos(lineNo$$1, ch))\n  },\n  indexFromPos: function (coords) {\n    coords = clipPos(this, coords);\n    var index = coords.ch;\n    if (coords.line < this.first || coords.ch < 0) { return 0 }\n    var sepSize = this.lineSeparator().length;\n    this.iter(this.first, coords.line, function (line) { // iter aborts when callback returns a truthy value\n      index += line.text.length + sepSize;\n    });\n    return index\n  },\n\n  copy: function(copyHistory) {\n    var doc = new Doc(getLines(this, this.first, this.first + this.size),\n                      this.modeOption, this.first, this.lineSep, this.direction);\n    doc.scrollTop = this.scrollTop; doc.scrollLeft = this.scrollLeft;\n    doc.sel = this.sel;\n    doc.extend = false;\n    if (copyHistory) {\n      doc.history.undoDepth = this.history.undoDepth;\n      doc.setHistory(this.getHistory());\n    }\n    return doc\n  },\n\n  linkedDoc: function(options) {\n    if (!options) { options = {}; }\n    var from = this.first, to = this.first + this.size;\n    if (options.from != null && options.from > from) { from = options.from; }\n    if (options.to != null && options.to < to) { to = options.to; }\n    var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from, this.lineSep, this.direction);\n    if (options.sharedHist) { copy.history = this.history\n    ; }(this.linked || (this.linked = [])).push({doc: copy, sharedHist: options.sharedHist});\n    copy.linked = [{doc: this, isParent: true, sharedHist: options.sharedHist}];\n    copySharedMarkers(copy, findSharedMarkers(this));\n    return copy\n  },\n  unlinkDoc: function(other) {\n    var this$1 = this;\n\n    if (other instanceof CodeMirror$1) { other = other.doc; }\n    if (this.linked) { for (var i = 0; i < this.linked.length; ++i) {\n      var link = this$1.linked[i];\n      if (link.doc != other) { continue }\n      this$1.linked.splice(i, 1);\n      other.unlinkDoc(this$1);\n      detachSharedMarkers(findSharedMarkers(this$1));\n      break\n    } }\n    // If the histories were shared, split them again\n    if (other.history == this.history) {\n      var splitIds = [other.id];\n      linkedDocs(other, function (doc) { return splitIds.push(doc.id); }, true);\n      other.history = new History(null);\n      other.history.done = copyHistoryArray(this.history.done, splitIds);\n      other.history.undone = copyHistoryArray(this.history.undone, splitIds);\n    }\n  },\n  iterLinkedDocs: function(f) {linkedDocs(this, f);},\n\n  getMode: function() {return this.mode},\n  getEditor: function() {return this.cm},\n\n  splitLines: function(str) {\n    if (this.lineSep) { return str.split(this.lineSep) }\n    return splitLinesAuto(str)\n  },\n  lineSeparator: function() { return this.lineSep || \"\\n\" },\n\n  setDirection: docMethodOp(function (dir) {\n    if (dir != \"rtl\") { dir = \"ltr\"; }\n    if (dir == this.direction) { return }\n    this.direction = dir;\n    this.iter(function (line) { return line.order = null; });\n    if (this.cm) { directionChanged(this.cm); }\n  })\n});\n\n// Public alias.\nDoc.prototype.eachLine = Doc.prototype.iter;\n\n// Kludge to work around strange IE behavior where it'll sometimes\n// re-fire a series of drag-related events right after the drop (#1551)\nvar lastDrop = 0;\n\nfunction onDrop(e) {\n  var cm = this;\n  clearDragCursor(cm);\n  if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e))\n    { return }\n  e_preventDefault(e);\n  if (ie) { lastDrop = +new Date; }\n  var pos = posFromMouse(cm, e, true), files = e.dataTransfer.files;\n  if (!pos || cm.isReadOnly()) { return }\n  // Might be a file drop, in which case we simply extract the text\n  // and insert it.\n  if (files && files.length && window.FileReader && window.File) {\n    var n = files.length, text = Array(n), read = 0;\n    var loadFile = function (file, i) {\n      if (cm.options.allowDropFileTypes &&\n          indexOf(cm.options.allowDropFileTypes, file.type) == -1)\n        { return }\n\n      var reader = new FileReader;\n      reader.onload = operation(cm, function () {\n        var content = reader.result;\n        if (/[\\x00-\\x08\\x0e-\\x1f]{2}/.test(content)) { content = \"\"; }\n        text[i] = content;\n        if (++read == n) {\n          pos = clipPos(cm.doc, pos);\n          var change = {from: pos, to: pos,\n                        text: cm.doc.splitLines(text.join(cm.doc.lineSeparator())),\n                        origin: \"paste\"};\n          makeChange(cm.doc, change);\n          setSelectionReplaceHistory(cm.doc, simpleSelection(pos, changeEnd(change)));\n        }\n      });\n      reader.readAsText(file);\n    };\n    for (var i = 0; i < n; ++i) { loadFile(files[i], i); }\n  } else { // Normal drop\n    // Don't do a replace if the drop happened inside of the selected text.\n    if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {\n      cm.state.draggingText(e);\n      // Ensure the editor is re-focused\n      setTimeout(function () { return cm.display.input.focus(); }, 20);\n      return\n    }\n    try {\n      var text$1 = e.dataTransfer.getData(\"Text\");\n      if (text$1) {\n        var selected;\n        if (cm.state.draggingText && !cm.state.draggingText.copy)\n          { selected = cm.listSelections(); }\n        setSelectionNoUndo(cm.doc, simpleSelection(pos, pos));\n        if (selected) { for (var i$1 = 0; i$1 < selected.length; ++i$1)\n          { replaceRange(cm.doc, \"\", selected[i$1].anchor, selected[i$1].head, \"drag\"); } }\n        cm.replaceSelection(text$1, \"around\", \"paste\");\n        cm.display.input.focus();\n      }\n    }\n    catch(e){}\n  }\n}\n\nfunction onDragStart(cm, e) {\n  if (ie && (!cm.state.draggingText || +new Date - lastDrop < 100)) { e_stop(e); return }\n  if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) { return }\n\n  e.dataTransfer.setData(\"Text\", cm.getSelection());\n  e.dataTransfer.effectAllowed = \"copyMove\";\n\n  // Use dummy image instead of default browsers image.\n  // Recent Safari (~6.0.2) have a tendency to segfault when this happens, so we don't do it there.\n  if (e.dataTransfer.setDragImage && !safari) {\n    var img = elt(\"img\", null, null, \"position: fixed; left: 0; top: 0;\");\n    img.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n    if (presto) {\n      img.width = img.height = 1;\n      cm.display.wrapper.appendChild(img);\n      // Force a relayout, or Opera won't use our image for some obscure reason\n      img._top = img.offsetTop;\n    }\n    e.dataTransfer.setDragImage(img, 0, 0);\n    if (presto) { img.parentNode.removeChild(img); }\n  }\n}\n\nfunction onDragOver(cm, e) {\n  var pos = posFromMouse(cm, e);\n  if (!pos) { return }\n  var frag = document.createDocumentFragment();\n  drawSelectionCursor(cm, pos, frag);\n  if (!cm.display.dragCursor) {\n    cm.display.dragCursor = elt(\"div\", null, \"CodeMirror-cursors CodeMirror-dragcursors\");\n    cm.display.lineSpace.insertBefore(cm.display.dragCursor, cm.display.cursorDiv);\n  }\n  removeChildrenAndAdd(cm.display.dragCursor, frag);\n}\n\nfunction clearDragCursor(cm) {\n  if (cm.display.dragCursor) {\n    cm.display.lineSpace.removeChild(cm.display.dragCursor);\n    cm.display.dragCursor = null;\n  }\n}\n\n// These must be handled carefully, because naively registering a\n// handler for each editor will cause the editors to never be\n// garbage collected.\n\nfunction forEachCodeMirror(f) {\n  if (!document.getElementsByClassName) { return }\n  var byClass = document.getElementsByClassName(\"CodeMirror\");\n  for (var i = 0; i < byClass.length; i++) {\n    var cm = byClass[i].CodeMirror;\n    if (cm) { f(cm); }\n  }\n}\n\nvar globalsRegistered = false;\nfunction ensureGlobalHandlers() {\n  if (globalsRegistered) { return }\n  registerGlobalHandlers();\n  globalsRegistered = true;\n}\nfunction registerGlobalHandlers() {\n  // When the window resizes, we need to refresh active editors.\n  var resizeTimer;\n  on(window, \"resize\", function () {\n    if (resizeTimer == null) { resizeTimer = setTimeout(function () {\n      resizeTimer = null;\n      forEachCodeMirror(onResize);\n    }, 100); }\n  });\n  // When the window loses focus, we want to show the editor as blurred\n  on(window, \"blur\", function () { return forEachCodeMirror(onBlur); });\n}\n// Called when the window resizes\nfunction onResize(cm) {\n  var d = cm.display;\n  if (d.lastWrapHeight == d.wrapper.clientHeight && d.lastWrapWidth == d.wrapper.clientWidth)\n    { return }\n  // Might be a text scaling operation, clear size caches.\n  d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n  d.scrollbarsClipped = false;\n  cm.setSize();\n}\n\nvar keyNames = {\n  3: \"Enter\", 8: \"Backspace\", 9: \"Tab\", 13: \"Enter\", 16: \"Shift\", 17: \"Ctrl\", 18: \"Alt\",\n  19: \"Pause\", 20: \"CapsLock\", 27: \"Esc\", 32: \"Space\", 33: \"PageUp\", 34: \"PageDown\", 35: \"End\",\n  36: \"Home\", 37: \"Left\", 38: \"Up\", 39: \"Right\", 40: \"Down\", 44: \"PrintScrn\", 45: \"Insert\",\n  46: \"Delete\", 59: \";\", 61: \"=\", 91: \"Mod\", 92: \"Mod\", 93: \"Mod\",\n  106: \"*\", 107: \"=\", 109: \"-\", 110: \".\", 111: \"/\", 127: \"Delete\",\n  173: \"-\", 186: \";\", 187: \"=\", 188: \",\", 189: \"-\", 190: \".\", 191: \"/\", 192: \"`\", 219: \"[\", 220: \"\\\\\",\n  221: \"]\", 222: \"'\", 63232: \"Up\", 63233: \"Down\", 63234: \"Left\", 63235: \"Right\", 63272: \"Delete\",\n  63273: \"Home\", 63275: \"End\", 63276: \"PageUp\", 63277: \"PageDown\", 63302: \"Insert\"\n};\n\n// Number keys\nfor (var i = 0; i < 10; i++) { keyNames[i + 48] = keyNames[i + 96] = String(i); }\n// Alphabetic keys\nfor (var i$1 = 65; i$1 <= 90; i$1++) { keyNames[i$1] = String.fromCharCode(i$1); }\n// Function keys\nfor (var i$2 = 1; i$2 <= 12; i$2++) { keyNames[i$2 + 111] = keyNames[i$2 + 63235] = \"F\" + i$2; }\n\nvar keyMap = {};\n\nkeyMap.basic = {\n  \"Left\": \"goCharLeft\", \"Right\": \"goCharRight\", \"Up\": \"goLineUp\", \"Down\": \"goLineDown\",\n  \"End\": \"goLineEnd\", \"Home\": \"goLineStartSmart\", \"PageUp\": \"goPageUp\", \"PageDown\": \"goPageDown\",\n  \"Delete\": \"delCharAfter\", \"Backspace\": \"delCharBefore\", \"Shift-Backspace\": \"delCharBefore\",\n  \"Tab\": \"defaultTab\", \"Shift-Tab\": \"indentAuto\",\n  \"Enter\": \"newlineAndIndent\", \"Insert\": \"toggleOverwrite\",\n  \"Esc\": \"singleSelection\"\n};\n// Note that the save and find-related commands aren't defined by\n// default. User code or addons can define them. Unknown commands\n// are simply ignored.\nkeyMap.pcDefault = {\n  \"Ctrl-A\": \"selectAll\", \"Ctrl-D\": \"deleteLine\", \"Ctrl-Z\": \"undo\", \"Shift-Ctrl-Z\": \"redo\", \"Ctrl-Y\": \"redo\",\n  \"Ctrl-Home\": \"goDocStart\", \"Ctrl-End\": \"goDocEnd\", \"Ctrl-Up\": \"goLineUp\", \"Ctrl-Down\": \"goLineDown\",\n  \"Ctrl-Left\": \"goGroupLeft\", \"Ctrl-Right\": \"goGroupRight\", \"Alt-Left\": \"goLineStart\", \"Alt-Right\": \"goLineEnd\",\n  \"Ctrl-Backspace\": \"delGroupBefore\", \"Ctrl-Delete\": \"delGroupAfter\", \"Ctrl-S\": \"save\", \"Ctrl-F\": \"find\",\n  \"Ctrl-G\": \"findNext\", \"Shift-Ctrl-G\": \"findPrev\", \"Shift-Ctrl-F\": \"replace\", \"Shift-Ctrl-R\": \"replaceAll\",\n  \"Ctrl-[\": \"indentLess\", \"Ctrl-]\": \"indentMore\",\n  \"Ctrl-U\": \"undoSelection\", \"Shift-Ctrl-U\": \"redoSelection\", \"Alt-U\": \"redoSelection\",\n  fallthrough: \"basic\"\n};\n// Very basic readline/emacs-style bindings, which are standard on Mac.\nkeyMap.emacsy = {\n  \"Ctrl-F\": \"goCharRight\", \"Ctrl-B\": \"goCharLeft\", \"Ctrl-P\": \"goLineUp\", \"Ctrl-N\": \"goLineDown\",\n  \"Alt-F\": \"goWordRight\", \"Alt-B\": \"goWordLeft\", \"Ctrl-A\": \"goLineStart\", \"Ctrl-E\": \"goLineEnd\",\n  \"Ctrl-V\": \"goPageDown\", \"Shift-Ctrl-V\": \"goPageUp\", \"Ctrl-D\": \"delCharAfter\", \"Ctrl-H\": \"delCharBefore\",\n  \"Alt-D\": \"delWordAfter\", \"Alt-Backspace\": \"delWordBefore\", \"Ctrl-K\": \"killLine\", \"Ctrl-T\": \"transposeChars\",\n  \"Ctrl-O\": \"openLine\"\n};\nkeyMap.macDefault = {\n  \"Cmd-A\": \"selectAll\", \"Cmd-D\": \"deleteLine\", \"Cmd-Z\": \"undo\", \"Shift-Cmd-Z\": \"redo\", \"Cmd-Y\": \"redo\",\n  \"Cmd-Home\": \"goDocStart\", \"Cmd-Up\": \"goDocStart\", \"Cmd-End\": \"goDocEnd\", \"Cmd-Down\": \"goDocEnd\", \"Alt-Left\": \"goGroupLeft\",\n  \"Alt-Right\": \"goGroupRight\", \"Cmd-Left\": \"goLineLeft\", \"Cmd-Right\": \"goLineRight\", \"Alt-Backspace\": \"delGroupBefore\",\n  \"Ctrl-Alt-Backspace\": \"delGroupAfter\", \"Alt-Delete\": \"delGroupAfter\", \"Cmd-S\": \"save\", \"Cmd-F\": \"find\",\n  \"Cmd-G\": \"findNext\", \"Shift-Cmd-G\": \"findPrev\", \"Cmd-Alt-F\": \"replace\", \"Shift-Cmd-Alt-F\": \"replaceAll\",\n  \"Cmd-[\": \"indentLess\", \"Cmd-]\": \"indentMore\", \"Cmd-Backspace\": \"delWrappedLineLeft\", \"Cmd-Delete\": \"delWrappedLineRight\",\n  \"Cmd-U\": \"undoSelection\", \"Shift-Cmd-U\": \"redoSelection\", \"Ctrl-Up\": \"goDocStart\", \"Ctrl-Down\": \"goDocEnd\",\n  fallthrough: [\"basic\", \"emacsy\"]\n};\nkeyMap[\"default\"] = mac ? keyMap.macDefault : keyMap.pcDefault;\n\n// KEYMAP DISPATCH\n\nfunction normalizeKeyName(name) {\n  var parts = name.split(/-(?!$)/);\n  name = parts[parts.length - 1];\n  var alt, ctrl, shift, cmd;\n  for (var i = 0; i < parts.length - 1; i++) {\n    var mod = parts[i];\n    if (/^(cmd|meta|m)$/i.test(mod)) { cmd = true; }\n    else if (/^a(lt)?$/i.test(mod)) { alt = true; }\n    else if (/^(c|ctrl|control)$/i.test(mod)) { ctrl = true; }\n    else if (/^s(hift)?$/i.test(mod)) { shift = true; }\n    else { throw new Error(\"Unrecognized modifier name: \" + mod) }\n  }\n  if (alt) { name = \"Alt-\" + name; }\n  if (ctrl) { name = \"Ctrl-\" + name; }\n  if (cmd) { name = \"Cmd-\" + name; }\n  if (shift) { name = \"Shift-\" + name; }\n  return name\n}\n\n// This is a kludge to keep keymaps mostly working as raw objects\n// (backwards compatibility) while at the same time support features\n// like normalization and multi-stroke key bindings. It compiles a\n// new normalized keymap, and then updates the old object to reflect\n// this.\nfunction normalizeKeyMap(keymap) {\n  var copy = {};\n  for (var keyname in keymap) { if (keymap.hasOwnProperty(keyname)) {\n    var value = keymap[keyname];\n    if (/^(name|fallthrough|(de|at)tach)$/.test(keyname)) { continue }\n    if (value == \"...\") { delete keymap[keyname]; continue }\n\n    var keys = map(keyname.split(\" \"), normalizeKeyName);\n    for (var i = 0; i < keys.length; i++) {\n      var val = (void 0), name = (void 0);\n      if (i == keys.length - 1) {\n        name = keys.join(\" \");\n        val = value;\n      } else {\n        name = keys.slice(0, i + 1).join(\" \");\n        val = \"...\";\n      }\n      var prev = copy[name];\n      if (!prev) { copy[name] = val; }\n      else if (prev != val) { throw new Error(\"Inconsistent bindings for \" + name) }\n    }\n    delete keymap[keyname];\n  } }\n  for (var prop in copy) { keymap[prop] = copy[prop]; }\n  return keymap\n}\n\nfunction lookupKey(key, map$$1, handle, context) {\n  map$$1 = getKeyMap(map$$1);\n  var found = map$$1.call ? map$$1.call(key, context) : map$$1[key];\n  if (found === false) { return \"nothing\" }\n  if (found === \"...\") { return \"multi\" }\n  if (found != null && handle(found)) { return \"handled\" }\n\n  if (map$$1.fallthrough) {\n    if (Object.prototype.toString.call(map$$1.fallthrough) != \"[object Array]\")\n      { return lookupKey(key, map$$1.fallthrough, handle, context) }\n    for (var i = 0; i < map$$1.fallthrough.length; i++) {\n      var result = lookupKey(key, map$$1.fallthrough[i], handle, context);\n      if (result) { return result }\n    }\n  }\n}\n\n// Modifier key presses don't count as 'real' key presses for the\n// purpose of keymap fallthrough.\nfunction isModifierKey(value) {\n  var name = typeof value == \"string\" ? value : keyNames[value.keyCode];\n  return name == \"Ctrl\" || name == \"Alt\" || name == \"Shift\" || name == \"Mod\"\n}\n\nfunction addModifierNames(name, event, noShift) {\n  var base = name;\n  if (event.altKey && base != \"Alt\") { name = \"Alt-\" + name; }\n  if ((flipCtrlCmd ? event.metaKey : event.ctrlKey) && base != \"Ctrl\") { name = \"Ctrl-\" + name; }\n  if ((flipCtrlCmd ? event.ctrlKey : event.metaKey) && base != \"Cmd\") { name = \"Cmd-\" + name; }\n  if (!noShift && event.shiftKey && base != \"Shift\") { name = \"Shift-\" + name; }\n  return name\n}\n\n// Look up the name of a key as indicated by an event object.\nfunction keyName(event, noShift) {\n  if (presto && event.keyCode == 34 && event[\"char\"]) { return false }\n  var name = keyNames[event.keyCode];\n  if (name == null || event.altGraphKey) { return false }\n  return addModifierNames(name, event, noShift)\n}\n\nfunction getKeyMap(val) {\n  return typeof val == \"string\" ? keyMap[val] : val\n}\n\n// Helper for deleting text near the selection(s), used to implement\n// backspace, delete, and similar functionality.\nfunction deleteNearSelection(cm, compute) {\n  var ranges = cm.doc.sel.ranges, kill = [];\n  // Build up a set of ranges to kill first, merging overlapping\n  // ranges.\n  for (var i = 0; i < ranges.length; i++) {\n    var toKill = compute(ranges[i]);\n    while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {\n      var replaced = kill.pop();\n      if (cmp(replaced.from, toKill.from) < 0) {\n        toKill.from = replaced.from;\n        break\n      }\n    }\n    kill.push(toKill);\n  }\n  // Next, remove those actual ranges.\n  runInOp(cm, function () {\n    for (var i = kill.length - 1; i >= 0; i--)\n      { replaceRange(cm.doc, \"\", kill[i].from, kill[i].to, \"+delete\"); }\n    ensureCursorVisible(cm);\n  });\n}\n\n// Commands are parameter-less actions that can be performed on an\n// editor, mostly used for keybindings.\nvar commands = {\n  selectAll: selectAll,\n  singleSelection: function (cm) { return cm.setSelection(cm.getCursor(\"anchor\"), cm.getCursor(\"head\"), sel_dontScroll); },\n  killLine: function (cm) { return deleteNearSelection(cm, function (range) {\n    if (range.empty()) {\n      var len = getLine(cm.doc, range.head.line).text.length;\n      if (range.head.ch == len && range.head.line < cm.lastLine())\n        { return {from: range.head, to: Pos(range.head.line + 1, 0)} }\n      else\n        { return {from: range.head, to: Pos(range.head.line, len)} }\n    } else {\n      return {from: range.from(), to: range.to()}\n    }\n  }); },\n  deleteLine: function (cm) { return deleteNearSelection(cm, function (range) { return ({\n    from: Pos(range.from().line, 0),\n    to: clipPos(cm.doc, Pos(range.to().line + 1, 0))\n  }); }); },\n  delLineLeft: function (cm) { return deleteNearSelection(cm, function (range) { return ({\n    from: Pos(range.from().line, 0), to: range.from()\n  }); }); },\n  delWrappedLineLeft: function (cm) { return deleteNearSelection(cm, function (range) {\n    var top = cm.charCoords(range.head, \"div\").top + 5;\n    var leftPos = cm.coordsChar({left: 0, top: top}, \"div\");\n    return {from: leftPos, to: range.from()}\n  }); },\n  delWrappedLineRight: function (cm) { return deleteNearSelection(cm, function (range) {\n    var top = cm.charCoords(range.head, \"div\").top + 5;\n    var rightPos = cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \"div\");\n    return {from: range.from(), to: rightPos }\n  }); },\n  undo: function (cm) { return cm.undo(); },\n  redo: function (cm) { return cm.redo(); },\n  undoSelection: function (cm) { return cm.undoSelection(); },\n  redoSelection: function (cm) { return cm.redoSelection(); },\n  goDocStart: function (cm) { return cm.extendSelection(Pos(cm.firstLine(), 0)); },\n  goDocEnd: function (cm) { return cm.extendSelection(Pos(cm.lastLine())); },\n  goLineStart: function (cm) { return cm.extendSelectionsBy(function (range) { return lineStart(cm, range.head.line); },\n    {origin: \"+move\", bias: 1}\n  ); },\n  goLineStartSmart: function (cm) { return cm.extendSelectionsBy(function (range) { return lineStartSmart(cm, range.head); },\n    {origin: \"+move\", bias: 1}\n  ); },\n  goLineEnd: function (cm) { return cm.extendSelectionsBy(function (range) { return lineEnd(cm, range.head.line); },\n    {origin: \"+move\", bias: -1}\n  ); },\n  goLineRight: function (cm) { return cm.extendSelectionsBy(function (range) {\n    var top = cm.cursorCoords(range.head, \"div\").top + 5;\n    return cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \"div\")\n  }, sel_move); },\n  goLineLeft: function (cm) { return cm.extendSelectionsBy(function (range) {\n    var top = cm.cursorCoords(range.head, \"div\").top + 5;\n    return cm.coordsChar({left: 0, top: top}, \"div\")\n  }, sel_move); },\n  goLineLeftSmart: function (cm) { return cm.extendSelectionsBy(function (range) {\n    var top = cm.cursorCoords(range.head, \"div\").top + 5;\n    var pos = cm.coordsChar({left: 0, top: top}, \"div\");\n    if (pos.ch < cm.getLine(pos.line).search(/\\S/)) { return lineStartSmart(cm, range.head) }\n    return pos\n  }, sel_move); },\n  goLineUp: function (cm) { return cm.moveV(-1, \"line\"); },\n  goLineDown: function (cm) { return cm.moveV(1, \"line\"); },\n  goPageUp: function (cm) { return cm.moveV(-1, \"page\"); },\n  goPageDown: function (cm) { return cm.moveV(1, \"page\"); },\n  goCharLeft: function (cm) { return cm.moveH(-1, \"char\"); },\n  goCharRight: function (cm) { return cm.moveH(1, \"char\"); },\n  goColumnLeft: function (cm) { return cm.moveH(-1, \"column\"); },\n  goColumnRight: function (cm) { return cm.moveH(1, \"column\"); },\n  goWordLeft: function (cm) { return cm.moveH(-1, \"word\"); },\n  goGroupRight: function (cm) { return cm.moveH(1, \"group\"); },\n  goGroupLeft: function (cm) { return cm.moveH(-1, \"group\"); },\n  goWordRight: function (cm) { return cm.moveH(1, \"word\"); },\n  delCharBefore: function (cm) { return cm.deleteH(-1, \"char\"); },\n  delCharAfter: function (cm) { return cm.deleteH(1, \"char\"); },\n  delWordBefore: function (cm) { return cm.deleteH(-1, \"word\"); },\n  delWordAfter: function (cm) { return cm.deleteH(1, \"word\"); },\n  delGroupBefore: function (cm) { return cm.deleteH(-1, \"group\"); },\n  delGroupAfter: function (cm) { return cm.deleteH(1, \"group\"); },\n  indentAuto: function (cm) { return cm.indentSelection(\"smart\"); },\n  indentMore: function (cm) { return cm.indentSelection(\"add\"); },\n  indentLess: function (cm) { return cm.indentSelection(\"subtract\"); },\n  insertTab: function (cm) { return cm.replaceSelection(\"\\t\"); },\n  insertSoftTab: function (cm) {\n    var spaces = [], ranges = cm.listSelections(), tabSize = cm.options.tabSize;\n    for (var i = 0; i < ranges.length; i++) {\n      var pos = ranges[i].from();\n      var col = countColumn(cm.getLine(pos.line), pos.ch, tabSize);\n      spaces.push(spaceStr(tabSize - col % tabSize));\n    }\n    cm.replaceSelections(spaces);\n  },\n  defaultTab: function (cm) {\n    if (cm.somethingSelected()) { cm.indentSelection(\"add\"); }\n    else { cm.execCommand(\"insertTab\"); }\n  },\n  // Swap the two chars left and right of each selection's head.\n  // Move cursor behind the two swapped characters afterwards.\n  //\n  // Doesn't consider line feeds a character.\n  // Doesn't scan more than one line above to find a character.\n  // Doesn't do anything on an empty line.\n  // Doesn't do anything with non-empty selections.\n  transposeChars: function (cm) { return runInOp(cm, function () {\n    var ranges = cm.listSelections(), newSel = [];\n    for (var i = 0; i < ranges.length; i++) {\n      if (!ranges[i].empty()) { continue }\n      var cur = ranges[i].head, line = getLine(cm.doc, cur.line).text;\n      if (line) {\n        if (cur.ch == line.length) { cur = new Pos(cur.line, cur.ch - 1); }\n        if (cur.ch > 0) {\n          cur = new Pos(cur.line, cur.ch + 1);\n          cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2),\n                          Pos(cur.line, cur.ch - 2), cur, \"+transpose\");\n        } else if (cur.line > cm.doc.first) {\n          var prev = getLine(cm.doc, cur.line - 1).text;\n          if (prev) {\n            cur = new Pos(cur.line, 1);\n            cm.replaceRange(line.charAt(0) + cm.doc.lineSeparator() +\n                            prev.charAt(prev.length - 1),\n                            Pos(cur.line - 1, prev.length - 1), cur, \"+transpose\");\n          }\n        }\n      }\n      newSel.push(new Range(cur, cur));\n    }\n    cm.setSelections(newSel);\n  }); },\n  newlineAndIndent: function (cm) { return runInOp(cm, function () {\n    var sels = cm.listSelections();\n    for (var i = sels.length - 1; i >= 0; i--)\n      { cm.replaceRange(cm.doc.lineSeparator(), sels[i].anchor, sels[i].head, \"+input\"); }\n    sels = cm.listSelections();\n    for (var i$1 = 0; i$1 < sels.length; i$1++)\n      { cm.indentLine(sels[i$1].from().line, null, true); }\n    ensureCursorVisible(cm);\n  }); },\n  openLine: function (cm) { return cm.replaceSelection(\"\\n\", \"start\"); },\n  toggleOverwrite: function (cm) { return cm.toggleOverwrite(); }\n};\n\n\nfunction lineStart(cm, lineN) {\n  var line = getLine(cm.doc, lineN);\n  var visual = visualLine(line);\n  if (visual != line) { lineN = lineNo(visual); }\n  return endOfLine(true, cm, visual, lineN, 1)\n}\nfunction lineEnd(cm, lineN) {\n  var line = getLine(cm.doc, lineN);\n  var visual = visualLineEnd(line);\n  if (visual != line) { lineN = lineNo(visual); }\n  return endOfLine(true, cm, line, lineN, -1)\n}\nfunction lineStartSmart(cm, pos) {\n  var start = lineStart(cm, pos.line);\n  var line = getLine(cm.doc, start.line);\n  var order = getOrder(line, cm.doc.direction);\n  if (!order || order[0].level == 0) {\n    var firstNonWS = Math.max(0, line.text.search(/\\S/));\n    var inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch;\n    return Pos(start.line, inWS ? 0 : firstNonWS, start.sticky)\n  }\n  return start\n}\n\n// Run a handler that was bound to a key.\nfunction doHandleBinding(cm, bound, dropShift) {\n  if (typeof bound == \"string\") {\n    bound = commands[bound];\n    if (!bound) { return false }\n  }\n  // Ensure previous input has been read, so that the handler sees a\n  // consistent view of the document\n  cm.display.input.ensurePolled();\n  var prevShift = cm.display.shift, done = false;\n  try {\n    if (cm.isReadOnly()) { cm.state.suppressEdits = true; }\n    if (dropShift) { cm.display.shift = false; }\n    done = bound(cm) != Pass;\n  } finally {\n    cm.display.shift = prevShift;\n    cm.state.suppressEdits = false;\n  }\n  return done\n}\n\nfunction lookupKeyForEditor(cm, name, handle) {\n  for (var i = 0; i < cm.state.keyMaps.length; i++) {\n    var result = lookupKey(name, cm.state.keyMaps[i], handle, cm);\n    if (result) { return result }\n  }\n  return (cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm))\n    || lookupKey(name, cm.options.keyMap, handle, cm)\n}\n\n// Note that, despite the name, this function is also used to check\n// for bound mouse clicks.\n\nvar stopSeq = new Delayed;\nfunction dispatchKey(cm, name, e, handle) {\n  var seq = cm.state.keySeq;\n  if (seq) {\n    if (isModifierKey(name)) { return \"handled\" }\n    stopSeq.set(50, function () {\n      if (cm.state.keySeq == seq) {\n        cm.state.keySeq = null;\n        cm.display.input.reset();\n      }\n    });\n    name = seq + \" \" + name;\n  }\n  var result = lookupKeyForEditor(cm, name, handle);\n\n  if (result == \"multi\")\n    { cm.state.keySeq = name; }\n  if (result == \"handled\")\n    { signalLater(cm, \"keyHandled\", cm, name, e); }\n\n  if (result == \"handled\" || result == \"multi\") {\n    e_preventDefault(e);\n    restartBlink(cm);\n  }\n\n  if (seq && !result && /\\'$/.test(name)) {\n    e_preventDefault(e);\n    return true\n  }\n  return !!result\n}\n\n// Handle a key from the keydown event.\nfunction handleKeyBinding(cm, e) {\n  var name = keyName(e, true);\n  if (!name) { return false }\n\n  if (e.shiftKey && !cm.state.keySeq) {\n    // First try to resolve full name (including 'Shift-'). Failing\n    // that, see if there is a cursor-motion command (starting with\n    // 'go') bound to the keyname without 'Shift-'.\n    return dispatchKey(cm, \"Shift-\" + name, e, function (b) { return doHandleBinding(cm, b, true); })\n        || dispatchKey(cm, name, e, function (b) {\n             if (typeof b == \"string\" ? /^go[A-Z]/.test(b) : b.motion)\n               { return doHandleBinding(cm, b) }\n           })\n  } else {\n    return dispatchKey(cm, name, e, function (b) { return doHandleBinding(cm, b); })\n  }\n}\n\n// Handle a key from the keypress event\nfunction handleCharBinding(cm, e, ch) {\n  return dispatchKey(cm, \"'\" + ch + \"'\", e, function (b) { return doHandleBinding(cm, b, true); })\n}\n\nvar lastStoppedKey = null;\nfunction onKeyDown(e) {\n  var cm = this;\n  cm.curOp.focus = activeElt();\n  if (signalDOMEvent(cm, e)) { return }\n  // IE does strange things with escape.\n  if (ie && ie_version < 11 && e.keyCode == 27) { e.returnValue = false; }\n  var code = e.keyCode;\n  cm.display.shift = code == 16 || e.shiftKey;\n  var handled = handleKeyBinding(cm, e);\n  if (presto) {\n    lastStoppedKey = handled ? code : null;\n    // Opera has no cut event... we try to at least catch the key combo\n    if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey))\n      { cm.replaceSelection(\"\", null, \"cut\"); }\n  }\n\n  // Turn mouse into crosshair when Alt is held on Mac.\n  if (code == 18 && !/\\bCodeMirror-crosshair\\b/.test(cm.display.lineDiv.className))\n    { showCrossHair(cm); }\n}\n\nfunction showCrossHair(cm) {\n  var lineDiv = cm.display.lineDiv;\n  addClass(lineDiv, \"CodeMirror-crosshair\");\n\n  function up(e) {\n    if (e.keyCode == 18 || !e.altKey) {\n      rmClass(lineDiv, \"CodeMirror-crosshair\");\n      off(document, \"keyup\", up);\n      off(document, \"mouseover\", up);\n    }\n  }\n  on(document, \"keyup\", up);\n  on(document, \"mouseover\", up);\n}\n\nfunction onKeyUp(e) {\n  if (e.keyCode == 16) { this.doc.sel.shift = false; }\n  signalDOMEvent(this, e);\n}\n\nfunction onKeyPress(e) {\n  var cm = this;\n  if (eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey) { return }\n  var keyCode = e.keyCode, charCode = e.charCode;\n  if (presto && keyCode == lastStoppedKey) {lastStoppedKey = null; e_preventDefault(e); return}\n  if ((presto && (!e.which || e.which < 10)) && handleKeyBinding(cm, e)) { return }\n  var ch = String.fromCharCode(charCode == null ? keyCode : charCode);\n  // Some browsers fire keypress events for backspace\n  if (ch == \"\\x08\") { return }\n  if (handleCharBinding(cm, e, ch)) { return }\n  cm.display.input.onKeyPress(e);\n}\n\nvar DOUBLECLICK_DELAY = 400;\n\nvar PastClick = function(time, pos, button) {\n  this.time = time;\n  this.pos = pos;\n  this.button = button;\n};\n\nPastClick.prototype.compare = function (time, pos, button) {\n  return this.time + DOUBLECLICK_DELAY > time &&\n    cmp(pos, this.pos) == 0 && button == this.button\n};\n\nvar lastClick;\nvar lastDoubleClick;\nfunction clickRepeat(pos, button) {\n  var now = +new Date;\n  if (lastDoubleClick && lastDoubleClick.compare(now, pos, button)) {\n    lastClick = lastDoubleClick = null;\n    return \"triple\"\n  } else if (lastClick && lastClick.compare(now, pos, button)) {\n    lastDoubleClick = new PastClick(now, pos, button);\n    lastClick = null;\n    return \"double\"\n  } else {\n    lastClick = new PastClick(now, pos, button);\n    lastDoubleClick = null;\n    return \"single\"\n  }\n}\n\n// A mouse down can be a single click, double click, triple click,\n// start of selection drag, start of text drag, new cursor\n// (ctrl-click), rectangle drag (alt-drag), or xwin\n// middle-click-paste. Or it might be a click on something we should\n// not interfere with, such as a scrollbar or widget.\nfunction onMouseDown(e) {\n  var cm = this, display = cm.display;\n  if (signalDOMEvent(cm, e) || display.activeTouch && display.input.supportsTouch()) { return }\n  display.input.ensurePolled();\n  display.shift = e.shiftKey;\n\n  if (eventInWidget(display, e)) {\n    if (!webkit) {\n      // Briefly turn off draggability, to allow widgets to do\n      // normal dragging things.\n      display.scroller.draggable = false;\n      setTimeout(function () { return display.scroller.draggable = true; }, 100);\n    }\n    return\n  }\n  if (clickInGutter(cm, e)) { return }\n  var pos = posFromMouse(cm, e), button = e_button(e), repeat = pos ? clickRepeat(pos, button) : \"single\";\n  window.focus();\n\n  // #3261: make sure, that we're not starting a second selection\n  if (button == 1 && cm.state.selectingText)\n    { cm.state.selectingText(e); }\n\n  if (pos && handleMappedButton(cm, button, pos, repeat, e)) { return }\n\n  if (button == 1) {\n    if (pos) { leftButtonDown(cm, pos, repeat, e); }\n    else if (e_target(e) == display.scroller) { e_preventDefault(e); }\n  } else if (button == 2) {\n    if (pos) { extendSelection(cm.doc, pos); }\n    setTimeout(function () { return display.input.focus(); }, 20);\n  } else if (button == 3) {\n    if (captureRightClick) { onContextMenu(cm, e); }\n    else { delayBlurEvent(cm); }\n  }\n}\n\nfunction handleMappedButton(cm, button, pos, repeat, event) {\n  var name = \"Click\";\n  if (repeat == \"double\") { name = \"Double\" + name; }\n  else if (repeat == \"triple\") { name = \"Triple\" + name; }\n  name = (button == 1 ? \"Left\" : button == 2 ? \"Middle\" : \"Right\") + name;\n\n  return dispatchKey(cm,  addModifierNames(name, event), event, function (bound) {\n    if (typeof bound == \"string\") { bound = commands[bound]; }\n    if (!bound) { return false }\n    var done = false;\n    try {\n      if (cm.isReadOnly()) { cm.state.suppressEdits = true; }\n      done = bound(cm, pos) != Pass;\n    } finally {\n      cm.state.suppressEdits = false;\n    }\n    return done\n  })\n}\n\nfunction configureMouse(cm, repeat, event) {\n  var option = cm.getOption(\"configureMouse\");\n  var value = option ? option(cm, repeat, event) : {};\n  if (value.unit == null) {\n    var rect = chromeOS ? event.shiftKey && event.metaKey : event.altKey;\n    value.unit = rect ? \"rectangle\" : repeat == \"single\" ? \"char\" : repeat == \"double\" ? \"word\" : \"line\";\n  }\n  if (value.extend == null || cm.doc.extend) { value.extend = cm.doc.extend || event.shiftKey; }\n  if (value.addNew == null) { value.addNew = mac ? event.metaKey : event.ctrlKey; }\n  if (value.moveOnDrag == null) { value.moveOnDrag = !(mac ? event.altKey : event.ctrlKey); }\n  return value\n}\n\nfunction leftButtonDown(cm, pos, repeat, event) {\n  if (ie) { setTimeout(bind(ensureFocus, cm), 0); }\n  else { cm.curOp.focus = activeElt(); }\n\n  var behavior = configureMouse(cm, repeat, event);\n\n  var sel = cm.doc.sel, contained;\n  if (cm.options.dragDrop && dragAndDrop && !cm.isReadOnly() &&\n      repeat == \"single\" && (contained = sel.contains(pos)) > -1 &&\n      (cmp((contained = sel.ranges[contained]).from(), pos) < 0 || pos.xRel > 0) &&\n      (cmp(contained.to(), pos) > 0 || pos.xRel < 0))\n    { leftButtonStartDrag(cm, event, pos, behavior); }\n  else\n    { leftButtonSelect(cm, event, pos, behavior); }\n}\n\n// Start a text drag. When it ends, see if any dragging actually\n// happen, and treat as a click if it didn't.\nfunction leftButtonStartDrag(cm, event, pos, behavior) {\n  var display = cm.display, moved = false;\n  var dragEnd = operation(cm, function (e) {\n    if (webkit) { display.scroller.draggable = false; }\n    cm.state.draggingText = false;\n    off(document, \"mouseup\", dragEnd);\n    off(document, \"mousemove\", mouseMove);\n    off(display.scroller, \"dragstart\", dragStart);\n    off(display.scroller, \"drop\", dragEnd);\n    if (!moved) {\n      e_preventDefault(e);\n      if (!behavior.addNew)\n        { extendSelection(cm.doc, pos, null, null, behavior.extend); }\n      // Work around unexplainable focus problem in IE9 (#2127) and Chrome (#3081)\n      if (webkit || ie && ie_version == 9)\n        { setTimeout(function () {document.body.focus(); display.input.focus();}, 20); }\n      else\n        { display.input.focus(); }\n    }\n  });\n  var mouseMove = function(e2) {\n    moved = moved || Math.abs(event.clientX - e2.clientX) + Math.abs(event.clientY - e2.clientY) >= 10;\n  };\n  var dragStart = function () { return moved = true; };\n  // Let the drag handler handle this.\n  if (webkit) { display.scroller.draggable = true; }\n  cm.state.draggingText = dragEnd;\n  dragEnd.copy = !behavior.moveOnDrag;\n  // IE's approach to draggable\n  if (display.scroller.dragDrop) { display.scroller.dragDrop(); }\n  on(document, \"mouseup\", dragEnd);\n  on(document, \"mousemove\", mouseMove);\n  on(display.scroller, \"dragstart\", dragStart);\n  on(display.scroller, \"drop\", dragEnd);\n\n  delayBlurEvent(cm);\n  setTimeout(function () { return display.input.focus(); }, 20);\n}\n\nfunction rangeForUnit(cm, pos, unit) {\n  if (unit == \"char\") { return new Range(pos, pos) }\n  if (unit == \"word\") { return cm.findWordAt(pos) }\n  if (unit == \"line\") { return new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0))) }\n  var result = unit(cm, pos);\n  return new Range(result.from, result.to)\n}\n\n// Normal selection, as opposed to text dragging.\nfunction leftButtonSelect(cm, event, start, behavior) {\n  var display = cm.display, doc = cm.doc;\n  e_preventDefault(event);\n\n  var ourRange, ourIndex, startSel = doc.sel, ranges = startSel.ranges;\n  if (behavior.addNew && !behavior.extend) {\n    ourIndex = doc.sel.contains(start);\n    if (ourIndex > -1)\n      { ourRange = ranges[ourIndex]; }\n    else\n      { ourRange = new Range(start, start); }\n  } else {\n    ourRange = doc.sel.primary();\n    ourIndex = doc.sel.primIndex;\n  }\n\n  if (behavior.unit == \"rectangle\") {\n    if (!behavior.addNew) { ourRange = new Range(start, start); }\n    start = posFromMouse(cm, event, true, true);\n    ourIndex = -1;\n  } else {\n    var range$$1 = rangeForUnit(cm, start, behavior.unit);\n    if (behavior.extend)\n      { ourRange = extendRange(ourRange, range$$1.anchor, range$$1.head, behavior.extend); }\n    else\n      { ourRange = range$$1; }\n  }\n\n  if (!behavior.addNew) {\n    ourIndex = 0;\n    setSelection(doc, new Selection([ourRange], 0), sel_mouse);\n    startSel = doc.sel;\n  } else if (ourIndex == -1) {\n    ourIndex = ranges.length;\n    setSelection(doc, normalizeSelection(ranges.concat([ourRange]), ourIndex),\n                 {scroll: false, origin: \"*mouse\"});\n  } else if (ranges.length > 1 && ranges[ourIndex].empty() && behavior.unit == \"char\" && !behavior.extend) {\n    setSelection(doc, normalizeSelection(ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0),\n                 {scroll: false, origin: \"*mouse\"});\n    startSel = doc.sel;\n  } else {\n    replaceOneSelection(doc, ourIndex, ourRange, sel_mouse);\n  }\n\n  var lastPos = start;\n  function extendTo(pos) {\n    if (cmp(lastPos, pos) == 0) { return }\n    lastPos = pos;\n\n    if (behavior.unit == \"rectangle\") {\n      var ranges = [], tabSize = cm.options.tabSize;\n      var startCol = countColumn(getLine(doc, start.line).text, start.ch, tabSize);\n      var posCol = countColumn(getLine(doc, pos.line).text, pos.ch, tabSize);\n      var left = Math.min(startCol, posCol), right = Math.max(startCol, posCol);\n      for (var line = Math.min(start.line, pos.line), end = Math.min(cm.lastLine(), Math.max(start.line, pos.line));\n           line <= end; line++) {\n        var text = getLine(doc, line).text, leftPos = findColumn(text, left, tabSize);\n        if (left == right)\n          { ranges.push(new Range(Pos(line, leftPos), Pos(line, leftPos))); }\n        else if (text.length > leftPos)\n          { ranges.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize)))); }\n      }\n      if (!ranges.length) { ranges.push(new Range(start, start)); }\n      setSelection(doc, normalizeSelection(startSel.ranges.slice(0, ourIndex).concat(ranges), ourIndex),\n                   {origin: \"*mouse\", scroll: false});\n      cm.scrollIntoView(pos);\n    } else {\n      var oldRange = ourRange;\n      var range$$1 = rangeForUnit(cm, pos, behavior.unit);\n      var anchor = oldRange.anchor, head;\n      if (cmp(range$$1.anchor, anchor) > 0) {\n        head = range$$1.head;\n        anchor = minPos(oldRange.from(), range$$1.anchor);\n      } else {\n        head = range$$1.anchor;\n        anchor = maxPos(oldRange.to(), range$$1.head);\n      }\n      var ranges$1 = startSel.ranges.slice(0);\n      ranges$1[ourIndex] = new Range(clipPos(doc, anchor), head);\n      setSelection(doc, normalizeSelection(ranges$1, ourIndex), sel_mouse);\n    }\n  }\n\n  var editorSize = display.wrapper.getBoundingClientRect();\n  // Used to ensure timeout re-tries don't fire when another extend\n  // happened in the meantime (clearTimeout isn't reliable -- at\n  // least on Chrome, the timeouts still happen even when cleared,\n  // if the clear happens after their scheduled firing time).\n  var counter = 0;\n\n  function extend(e) {\n    var curCount = ++counter;\n    var cur = posFromMouse(cm, e, true, behavior.unit == \"rectangle\");\n    if (!cur) { return }\n    if (cmp(cur, lastPos) != 0) {\n      cm.curOp.focus = activeElt();\n      extendTo(cur);\n      var visible = visibleLines(display, doc);\n      if (cur.line >= visible.to || cur.line < visible.from)\n        { setTimeout(operation(cm, function () {if (counter == curCount) { extend(e); }}), 150); }\n    } else {\n      var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;\n      if (outside) { setTimeout(operation(cm, function () {\n        if (counter != curCount) { return }\n        display.scroller.scrollTop += outside;\n        extend(e);\n      }), 50); }\n    }\n  }\n\n  function done(e) {\n    cm.state.selectingText = false;\n    counter = Infinity;\n    e_preventDefault(e);\n    display.input.focus();\n    off(document, \"mousemove\", move);\n    off(document, \"mouseup\", up);\n    doc.history.lastSelOrigin = null;\n  }\n\n  var move = operation(cm, function (e) {\n    if (!e_button(e)) { done(e); }\n    else { extend(e); }\n  });\n  var up = operation(cm, done);\n  cm.state.selectingText = up;\n  on(document, \"mousemove\", move);\n  on(document, \"mouseup\", up);\n}\n\n\n// Determines whether an event happened in the gutter, and fires the\n// handlers for the corresponding event.\nfunction gutterEvent(cm, e, type, prevent) {\n  var mX, mY;\n  try { mX = e.clientX; mY = e.clientY; }\n  catch(e) { return false }\n  if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right)) { return false }\n  if (prevent) { e_preventDefault(e); }\n\n  var display = cm.display;\n  var lineBox = display.lineDiv.getBoundingClientRect();\n\n  if (mY > lineBox.bottom || !hasHandler(cm, type)) { return e_defaultPrevented(e) }\n  mY -= lineBox.top - display.viewOffset;\n\n  for (var i = 0; i < cm.options.gutters.length; ++i) {\n    var g = display.gutters.childNodes[i];\n    if (g && g.getBoundingClientRect().right >= mX) {\n      var line = lineAtHeight(cm.doc, mY);\n      var gutter = cm.options.gutters[i];\n      signal(cm, type, cm, line, gutter, e);\n      return e_defaultPrevented(e)\n    }\n  }\n}\n\nfunction clickInGutter(cm, e) {\n  return gutterEvent(cm, e, \"gutterClick\", true)\n}\n\n// CONTEXT MENU HANDLING\n\n// To make the context menu work, we need to briefly unhide the\n// textarea (making it as unobtrusive as possible) to let the\n// right-click take effect on it.\nfunction onContextMenu(cm, e) {\n  if (eventInWidget(cm.display, e) || contextMenuInGutter(cm, e)) { return }\n  if (signalDOMEvent(cm, e, \"contextmenu\")) { return }\n  cm.display.input.onContextMenu(e);\n}\n\nfunction contextMenuInGutter(cm, e) {\n  if (!hasHandler(cm, \"gutterContextMenu\")) { return false }\n  return gutterEvent(cm, e, \"gutterContextMenu\", false)\n}\n\nfunction themeChanged(cm) {\n  cm.display.wrapper.className = cm.display.wrapper.className.replace(/\\s*cm-s-\\S+/g, \"\") +\n    cm.options.theme.replace(/(^|\\s)\\s*/g, \" cm-s-\");\n  clearCaches(cm);\n}\n\nvar Init = {toString: function(){return \"CodeMirror.Init\"}};\n\nvar defaults = {};\nvar optionHandlers = {};\n\nfunction defineOptions(CodeMirror) {\n  var optionHandlers = CodeMirror.optionHandlers;\n\n  function option(name, deflt, handle, notOnInit) {\n    CodeMirror.defaults[name] = deflt;\n    if (handle) { optionHandlers[name] =\n      notOnInit ? function (cm, val, old) {if (old != Init) { handle(cm, val, old); }} : handle; }\n  }\n\n  CodeMirror.defineOption = option;\n\n  // Passed to option handlers when there is no old value.\n  CodeMirror.Init = Init;\n\n  // These two are, on init, called from the constructor because they\n  // have to be initialized before the editor can start at all.\n  option(\"value\", \"\", function (cm, val) { return cm.setValue(val); }, true);\n  option(\"mode\", null, function (cm, val) {\n    cm.doc.modeOption = val;\n    loadMode(cm);\n  }, true);\n\n  option(\"indentUnit\", 2, loadMode, true);\n  option(\"indentWithTabs\", false);\n  option(\"smartIndent\", true);\n  option(\"tabSize\", 4, function (cm) {\n    resetModeState(cm);\n    clearCaches(cm);\n    regChange(cm);\n  }, true);\n  option(\"lineSeparator\", null, function (cm, val) {\n    cm.doc.lineSep = val;\n    if (!val) { return }\n    var newBreaks = [], lineNo = cm.doc.first;\n    cm.doc.iter(function (line) {\n      for (var pos = 0;;) {\n        var found = line.text.indexOf(val, pos);\n        if (found == -1) { break }\n        pos = found + val.length;\n        newBreaks.push(Pos(lineNo, found));\n      }\n      lineNo++;\n    });\n    for (var i = newBreaks.length - 1; i >= 0; i--)\n      { replaceRange(cm.doc, val, newBreaks[i], Pos(newBreaks[i].line, newBreaks[i].ch + val.length)); }\n  });\n  option(\"specialChars\", /[\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u061c\\u200b-\\u200f\\u2028\\u2029\\ufeff]/g, function (cm, val, old) {\n    cm.state.specialChars = new RegExp(val.source + (val.test(\"\\t\") ? \"\" : \"|\\t\"), \"g\");\n    if (old != Init) { cm.refresh(); }\n  });\n  option(\"specialCharPlaceholder\", defaultSpecialCharPlaceholder, function (cm) { return cm.refresh(); }, true);\n  option(\"electricChars\", true);\n  option(\"inputStyle\", mobile ? \"contenteditable\" : \"textarea\", function () {\n    throw new Error(\"inputStyle can not (yet) be changed in a running editor\") // FIXME\n  }, true);\n  option(\"spellcheck\", false, function (cm, val) { return cm.getInputField().spellcheck = val; }, true);\n  option(\"rtlMoveVisually\", !windows);\n  option(\"wholeLineUpdateBefore\", true);\n\n  option(\"theme\", \"default\", function (cm) {\n    themeChanged(cm);\n    guttersChanged(cm);\n  }, true);\n  option(\"keyMap\", \"default\", function (cm, val, old) {\n    var next = getKeyMap(val);\n    var prev = old != Init && getKeyMap(old);\n    if (prev && prev.detach) { prev.detach(cm, next); }\n    if (next.attach) { next.attach(cm, prev || null); }\n  });\n  option(\"extraKeys\", null);\n  option(\"configureMouse\", null);\n\n  option(\"lineWrapping\", false, wrappingChanged, true);\n  option(\"gutters\", [], function (cm) {\n    setGuttersForLineNumbers(cm.options);\n    guttersChanged(cm);\n  }, true);\n  option(\"fixedGutter\", true, function (cm, val) {\n    cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + \"px\" : \"0\";\n    cm.refresh();\n  }, true);\n  option(\"coverGutterNextToScrollbar\", false, function (cm) { return updateScrollbars(cm); }, true);\n  option(\"scrollbarStyle\", \"native\", function (cm) {\n    initScrollbars(cm);\n    updateScrollbars(cm);\n    cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);\n    cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft);\n  }, true);\n  option(\"lineNumbers\", false, function (cm) {\n    setGuttersForLineNumbers(cm.options);\n    guttersChanged(cm);\n  }, true);\n  option(\"firstLineNumber\", 1, guttersChanged, true);\n  option(\"lineNumberFormatter\", function (integer) { return integer; }, guttersChanged, true);\n  option(\"showCursorWhenSelecting\", false, updateSelection, true);\n\n  option(\"resetSelectionOnContextMenu\", true);\n  option(\"lineWiseCopyCut\", true);\n  option(\"pasteLinesPerSelection\", true);\n\n  option(\"readOnly\", false, function (cm, val) {\n    if (val == \"nocursor\") {\n      onBlur(cm);\n      cm.display.input.blur();\n    }\n    cm.display.input.readOnlyChanged(val);\n  });\n  option(\"disableInput\", false, function (cm, val) {if (!val) { cm.display.input.reset(); }}, true);\n  option(\"dragDrop\", true, dragDropChanged);\n  option(\"allowDropFileTypes\", null);\n\n  option(\"cursorBlinkRate\", 530);\n  option(\"cursorScrollMargin\", 0);\n  option(\"cursorHeight\", 1, updateSelection, true);\n  option(\"singleCursorHeightPerLine\", true, updateSelection, true);\n  option(\"workTime\", 100);\n  option(\"workDelay\", 100);\n  option(\"flattenSpans\", true, resetModeState, true);\n  option(\"addModeClass\", false, resetModeState, true);\n  option(\"pollInterval\", 100);\n  option(\"undoDepth\", 200, function (cm, val) { return cm.doc.history.undoDepth = val; });\n  option(\"historyEventDelay\", 1250);\n  option(\"viewportMargin\", 10, function (cm) { return cm.refresh(); }, true);\n  option(\"maxHighlightLength\", 10000, resetModeState, true);\n  option(\"moveInputWithCursor\", true, function (cm, val) {\n    if (!val) { cm.display.input.resetPosition(); }\n  });\n\n  option(\"tabindex\", null, function (cm, val) { return cm.display.input.getField().tabIndex = val || \"\"; });\n  option(\"autofocus\", null);\n  option(\"direction\", \"ltr\", function (cm, val) { return cm.doc.setDirection(val); }, true);\n}\n\nfunction guttersChanged(cm) {\n  updateGutters(cm);\n  regChange(cm);\n  alignHorizontally(cm);\n}\n\nfunction dragDropChanged(cm, value, old) {\n  var wasOn = old && old != Init;\n  if (!value != !wasOn) {\n    var funcs = cm.display.dragFunctions;\n    var toggle = value ? on : off;\n    toggle(cm.display.scroller, \"dragstart\", funcs.start);\n    toggle(cm.display.scroller, \"dragenter\", funcs.enter);\n    toggle(cm.display.scroller, \"dragover\", funcs.over);\n    toggle(cm.display.scroller, \"dragleave\", funcs.leave);\n    toggle(cm.display.scroller, \"drop\", funcs.drop);\n  }\n}\n\nfunction wrappingChanged(cm) {\n  if (cm.options.lineWrapping) {\n    addClass(cm.display.wrapper, \"CodeMirror-wrap\");\n    cm.display.sizer.style.minWidth = \"\";\n    cm.display.sizerWidth = null;\n  } else {\n    rmClass(cm.display.wrapper, \"CodeMirror-wrap\");\n    findMaxLine(cm);\n  }\n  estimateLineHeights(cm);\n  regChange(cm);\n  clearCaches(cm);\n  setTimeout(function () { return updateScrollbars(cm); }, 100);\n}\n\n// A CodeMirror instance represents an editor. This is the object\n// that user code is usually dealing with.\n\nfunction CodeMirror$1(place, options) {\n  var this$1 = this;\n\n  if (!(this instanceof CodeMirror$1)) { return new CodeMirror$1(place, options) }\n\n  this.options = options = options ? copyObj(options) : {};\n  // Determine effective options based on given values and defaults.\n  copyObj(defaults, options, false);\n  setGuttersForLineNumbers(options);\n\n  var doc = options.value;\n  if (typeof doc == \"string\") { doc = new Doc(doc, options.mode, null, options.lineSeparator, options.direction); }\n  this.doc = doc;\n\n  var input = new CodeMirror$1.inputStyles[options.inputStyle](this);\n  var display = this.display = new Display(place, doc, input);\n  display.wrapper.CodeMirror = this;\n  updateGutters(this);\n  themeChanged(this);\n  if (options.lineWrapping)\n    { this.display.wrapper.className += \" CodeMirror-wrap\"; }\n  initScrollbars(this);\n\n  this.state = {\n    keyMaps: [],  // stores maps added by addKeyMap\n    overlays: [], // highlighting overlays, as added by addOverlay\n    modeGen: 0,   // bumped when mode/overlay changes, used to invalidate highlighting info\n    overwrite: false,\n    delayingBlurEvent: false,\n    focused: false,\n    suppressEdits: false, // used to disable editing during key handlers when in readOnly mode\n    pasteIncoming: false, cutIncoming: false, // help recognize paste/cut edits in input.poll\n    selectingText: false,\n    draggingText: false,\n    highlight: new Delayed(), // stores highlight worker timeout\n    keySeq: null,  // Unfinished key sequence\n    specialChars: null\n  };\n\n  if (options.autofocus && !mobile) { display.input.focus(); }\n\n  // Override magic textarea content restore that IE sometimes does\n  // on our hidden textarea on reload\n  if (ie && ie_version < 11) { setTimeout(function () { return this$1.display.input.reset(true); }, 20); }\n\n  registerEventHandlers(this);\n  ensureGlobalHandlers();\n\n  startOperation(this);\n  this.curOp.forceUpdate = true;\n  attachDoc(this, doc);\n\n  if ((options.autofocus && !mobile) || this.hasFocus())\n    { setTimeout(bind(onFocus, this), 20); }\n  else\n    { onBlur(this); }\n\n  for (var opt in optionHandlers) { if (optionHandlers.hasOwnProperty(opt))\n    { optionHandlers[opt](this$1, options[opt], Init); } }\n  maybeUpdateLineNumberWidth(this);\n  if (options.finishInit) { options.finishInit(this); }\n  for (var i = 0; i < initHooks.length; ++i) { initHooks[i](this$1); }\n  endOperation(this);\n  // Suppress optimizelegibility in Webkit, since it breaks text\n  // measuring on line wrapping boundaries.\n  if (webkit && options.lineWrapping &&\n      getComputedStyle(display.lineDiv).textRendering == \"optimizelegibility\")\n    { display.lineDiv.style.textRendering = \"auto\"; }\n}\n\n// The default configuration options.\nCodeMirror$1.defaults = defaults;\n// Functions to run when options are changed.\nCodeMirror$1.optionHandlers = optionHandlers;\n\n// Attach the necessary event handlers when initializing the editor\nfunction registerEventHandlers(cm) {\n  var d = cm.display;\n  on(d.scroller, \"mousedown\", operation(cm, onMouseDown));\n  // Older IE's will not fire a second mousedown for a double click\n  if (ie && ie_version < 11)\n    { on(d.scroller, \"dblclick\", operation(cm, function (e) {\n      if (signalDOMEvent(cm, e)) { return }\n      var pos = posFromMouse(cm, e);\n      if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e)) { return }\n      e_preventDefault(e);\n      var word = cm.findWordAt(pos);\n      extendSelection(cm.doc, word.anchor, word.head);\n    })); }\n  else\n    { on(d.scroller, \"dblclick\", function (e) { return signalDOMEvent(cm, e) || e_preventDefault(e); }); }\n  // Some browsers fire contextmenu *after* opening the menu, at\n  // which point we can't mess with it anymore. Context menu is\n  // handled in onMouseDown for these browsers.\n  if (!captureRightClick) { on(d.scroller, \"contextmenu\", function (e) { return onContextMenu(cm, e); }); }\n\n  // Used to suppress mouse event handling when a touch happens\n  var touchFinished, prevTouch = {end: 0};\n  function finishTouch() {\n    if (d.activeTouch) {\n      touchFinished = setTimeout(function () { return d.activeTouch = null; }, 1000);\n      prevTouch = d.activeTouch;\n      prevTouch.end = +new Date;\n    }\n  }\n  function isMouseLikeTouchEvent(e) {\n    if (e.touches.length != 1) { return false }\n    var touch = e.touches[0];\n    return touch.radiusX <= 1 && touch.radiusY <= 1\n  }\n  function farAway(touch, other) {\n    if (other.left == null) { return true }\n    var dx = other.left - touch.left, dy = other.top - touch.top;\n    return dx * dx + dy * dy > 20 * 20\n  }\n  on(d.scroller, \"touchstart\", function (e) {\n    if (!signalDOMEvent(cm, e) && !isMouseLikeTouchEvent(e)) {\n      d.input.ensurePolled();\n      clearTimeout(touchFinished);\n      var now = +new Date;\n      d.activeTouch = {start: now, moved: false,\n                       prev: now - prevTouch.end <= 300 ? prevTouch : null};\n      if (e.touches.length == 1) {\n        d.activeTouch.left = e.touches[0].pageX;\n        d.activeTouch.top = e.touches[0].pageY;\n      }\n    }\n  });\n  on(d.scroller, \"touchmove\", function () {\n    if (d.activeTouch) { d.activeTouch.moved = true; }\n  });\n  on(d.scroller, \"touchend\", function (e) {\n    var touch = d.activeTouch;\n    if (touch && !eventInWidget(d, e) && touch.left != null &&\n        !touch.moved && new Date - touch.start < 300) {\n      var pos = cm.coordsChar(d.activeTouch, \"page\"), range;\n      if (!touch.prev || farAway(touch, touch.prev)) // Single tap\n        { range = new Range(pos, pos); }\n      else if (!touch.prev.prev || farAway(touch, touch.prev.prev)) // Double tap\n        { range = cm.findWordAt(pos); }\n      else // Triple tap\n        { range = new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0))); }\n      cm.setSelection(range.anchor, range.head);\n      cm.focus();\n      e_preventDefault(e);\n    }\n    finishTouch();\n  });\n  on(d.scroller, \"touchcancel\", finishTouch);\n\n  // Sync scrolling between fake scrollbars and real scrollable\n  // area, ensure viewport is updated when scrolling.\n  on(d.scroller, \"scroll\", function () {\n    if (d.scroller.clientHeight) {\n      updateScrollTop(cm, d.scroller.scrollTop);\n      setScrollLeft(cm, d.scroller.scrollLeft, true);\n      signal(cm, \"scroll\", cm);\n    }\n  });\n\n  // Listen to wheel events in order to try and update the viewport on time.\n  on(d.scroller, \"mousewheel\", function (e) { return onScrollWheel(cm, e); });\n  on(d.scroller, \"DOMMouseScroll\", function (e) { return onScrollWheel(cm, e); });\n\n  // Prevent wrapper from ever scrolling\n  on(d.wrapper, \"scroll\", function () { return d.wrapper.scrollTop = d.wrapper.scrollLeft = 0; });\n\n  d.dragFunctions = {\n    enter: function (e) {if (!signalDOMEvent(cm, e)) { e_stop(e); }},\n    over: function (e) {if (!signalDOMEvent(cm, e)) { onDragOver(cm, e); e_stop(e); }},\n    start: function (e) { return onDragStart(cm, e); },\n    drop: operation(cm, onDrop),\n    leave: function (e) {if (!signalDOMEvent(cm, e)) { clearDragCursor(cm); }}\n  };\n\n  var inp = d.input.getField();\n  on(inp, \"keyup\", function (e) { return onKeyUp.call(cm, e); });\n  on(inp, \"keydown\", operation(cm, onKeyDown));\n  on(inp, \"keypress\", operation(cm, onKeyPress));\n  on(inp, \"focus\", function (e) { return onFocus(cm, e); });\n  on(inp, \"blur\", function (e) { return onBlur(cm, e); });\n}\n\nvar initHooks = [];\nCodeMirror$1.defineInitHook = function (f) { return initHooks.push(f); };\n\n// Indent the given line. The how parameter can be \"smart\",\n// \"add\"/null, \"subtract\", or \"prev\". When aggressive is false\n// (typically set to true for forced single-line indents), empty\n// lines are not indented, and places where the mode returns Pass\n// are left alone.\nfunction indentLine(cm, n, how, aggressive) {\n  var doc = cm.doc, state;\n  if (how == null) { how = \"add\"; }\n  if (how == \"smart\") {\n    // Fall back to \"prev\" when the mode doesn't have an indentation\n    // method.\n    if (!doc.mode.indent) { how = \"prev\"; }\n    else { state = getContextBefore(cm, n).state; }\n  }\n\n  var tabSize = cm.options.tabSize;\n  var line = getLine(doc, n), curSpace = countColumn(line.text, null, tabSize);\n  if (line.stateAfter) { line.stateAfter = null; }\n  var curSpaceString = line.text.match(/^\\s*/)[0], indentation;\n  if (!aggressive && !/\\S/.test(line.text)) {\n    indentation = 0;\n    how = \"not\";\n  } else if (how == \"smart\") {\n    indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text);\n    if (indentation == Pass || indentation > 150) {\n      if (!aggressive) { return }\n      how = \"prev\";\n    }\n  }\n  if (how == \"prev\") {\n    if (n > doc.first) { indentation = countColumn(getLine(doc, n-1).text, null, tabSize); }\n    else { indentation = 0; }\n  } else if (how == \"add\") {\n    indentation = curSpace + cm.options.indentUnit;\n  } else if (how == \"subtract\") {\n    indentation = curSpace - cm.options.indentUnit;\n  } else if (typeof how == \"number\") {\n    indentation = curSpace + how;\n  }\n  indentation = Math.max(0, indentation);\n\n  var indentString = \"\", pos = 0;\n  if (cm.options.indentWithTabs)\n    { for (var i = Math.floor(indentation / tabSize); i; --i) {pos += tabSize; indentString += \"\\t\";} }\n  if (pos < indentation) { indentString += spaceStr(indentation - pos); }\n\n  if (indentString != curSpaceString) {\n    replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), \"+input\");\n    line.stateAfter = null;\n    return true\n  } else {\n    // Ensure that, if the cursor was in the whitespace at the start\n    // of the line, it is moved to the end of that space.\n    for (var i$1 = 0; i$1 < doc.sel.ranges.length; i$1++) {\n      var range = doc.sel.ranges[i$1];\n      if (range.head.line == n && range.head.ch < curSpaceString.length) {\n        var pos$1 = Pos(n, curSpaceString.length);\n        replaceOneSelection(doc, i$1, new Range(pos$1, pos$1));\n        break\n      }\n    }\n  }\n}\n\n// This will be set to a {lineWise: bool, text: [string]} object, so\n// that, when pasting, we know what kind of selections the copied\n// text was made out of.\nvar lastCopied = null;\n\nfunction setLastCopied(newLastCopied) {\n  lastCopied = newLastCopied;\n}\n\nfunction applyTextInput(cm, inserted, deleted, sel, origin) {\n  var doc = cm.doc;\n  cm.display.shift = false;\n  if (!sel) { sel = doc.sel; }\n\n  var paste = cm.state.pasteIncoming || origin == \"paste\";\n  var textLines = splitLinesAuto(inserted), multiPaste = null;\n  // When pasing N lines into N selections, insert one line per selection\n  if (paste && sel.ranges.length > 1) {\n    if (lastCopied && lastCopied.text.join(\"\\n\") == inserted) {\n      if (sel.ranges.length % lastCopied.text.length == 0) {\n        multiPaste = [];\n        for (var i = 0; i < lastCopied.text.length; i++)\n          { multiPaste.push(doc.splitLines(lastCopied.text[i])); }\n      }\n    } else if (textLines.length == sel.ranges.length && cm.options.pasteLinesPerSelection) {\n      multiPaste = map(textLines, function (l) { return [l]; });\n    }\n  }\n\n  var updateInput;\n  // Normal behavior is to insert the new text into every selection\n  for (var i$1 = sel.ranges.length - 1; i$1 >= 0; i$1--) {\n    var range$$1 = sel.ranges[i$1];\n    var from = range$$1.from(), to = range$$1.to();\n    if (range$$1.empty()) {\n      if (deleted && deleted > 0) // Handle deletion\n        { from = Pos(from.line, from.ch - deleted); }\n      else if (cm.state.overwrite && !paste) // Handle overwrite\n        { to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length)); }\n      else if (lastCopied && lastCopied.lineWise && lastCopied.text.join(\"\\n\") == inserted)\n        { from = to = Pos(from.line, 0); }\n    }\n    updateInput = cm.curOp.updateInput;\n    var changeEvent = {from: from, to: to, text: multiPaste ? multiPaste[i$1 % multiPaste.length] : textLines,\n                       origin: origin || (paste ? \"paste\" : cm.state.cutIncoming ? \"cut\" : \"+input\")};\n    makeChange(cm.doc, changeEvent);\n    signalLater(cm, \"inputRead\", cm, changeEvent);\n  }\n  if (inserted && !paste)\n    { triggerElectric(cm, inserted); }\n\n  ensureCursorVisible(cm);\n  cm.curOp.updateInput = updateInput;\n  cm.curOp.typing = true;\n  cm.state.pasteIncoming = cm.state.cutIncoming = false;\n}\n\nfunction handlePaste(e, cm) {\n  var pasted = e.clipboardData && e.clipboardData.getData(\"Text\");\n  if (pasted) {\n    e.preventDefault();\n    if (!cm.isReadOnly() && !cm.options.disableInput)\n      { runInOp(cm, function () { return applyTextInput(cm, pasted, 0, null, \"paste\"); }); }\n    return true\n  }\n}\n\nfunction triggerElectric(cm, inserted) {\n  // When an 'electric' character is inserted, immediately trigger a reindent\n  if (!cm.options.electricChars || !cm.options.smartIndent) { return }\n  var sel = cm.doc.sel;\n\n  for (var i = sel.ranges.length - 1; i >= 0; i--) {\n    var range$$1 = sel.ranges[i];\n    if (range$$1.head.ch > 100 || (i && sel.ranges[i - 1].head.line == range$$1.head.line)) { continue }\n    var mode = cm.getModeAt(range$$1.head);\n    var indented = false;\n    if (mode.electricChars) {\n      for (var j = 0; j < mode.electricChars.length; j++)\n        { if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {\n          indented = indentLine(cm, range$$1.head.line, \"smart\");\n          break\n        } }\n    } else if (mode.electricInput) {\n      if (mode.electricInput.test(getLine(cm.doc, range$$1.head.line).text.slice(0, range$$1.head.ch)))\n        { indented = indentLine(cm, range$$1.head.line, \"smart\"); }\n    }\n    if (indented) { signalLater(cm, \"electricInput\", cm, range$$1.head.line); }\n  }\n}\n\nfunction copyableRanges(cm) {\n  var text = [], ranges = [];\n  for (var i = 0; i < cm.doc.sel.ranges.length; i++) {\n    var line = cm.doc.sel.ranges[i].head.line;\n    var lineRange = {anchor: Pos(line, 0), head: Pos(line + 1, 0)};\n    ranges.push(lineRange);\n    text.push(cm.getRange(lineRange.anchor, lineRange.head));\n  }\n  return {text: text, ranges: ranges}\n}\n\nfunction disableBrowserMagic(field, spellcheck) {\n  field.setAttribute(\"autocorrect\", \"off\");\n  field.setAttribute(\"autocapitalize\", \"off\");\n  field.setAttribute(\"spellcheck\", !!spellcheck);\n}\n\nfunction hiddenTextarea() {\n  var te = elt(\"textarea\", null, null, \"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none\");\n  var div = elt(\"div\", [te], null, \"overflow: hidden; position: relative; width: 3px; height: 0px;\");\n  // The textarea is kept positioned near the cursor to prevent the\n  // fact that it'll be scrolled into view on input from scrolling\n  // our fake cursor out of view. On webkit, when wrap=off, paste is\n  // very slow. So make the area wide instead.\n  if (webkit) { te.style.width = \"1000px\"; }\n  else { te.setAttribute(\"wrap\", \"off\"); }\n  // If border: 0; -- iOS fails to open keyboard (issue #1287)\n  if (ios) { te.style.border = \"1px solid black\"; }\n  disableBrowserMagic(te);\n  return div\n}\n\n// The publicly visible API. Note that methodOp(f) means\n// 'wrap f in an operation, performed on its `this` parameter'.\n\n// This is not the complete set of editor methods. Most of the\n// methods defined on the Doc type are also injected into\n// CodeMirror.prototype, for backwards compatibility and\n// convenience.\n\nvar addEditorMethods = function(CodeMirror) {\n  var optionHandlers = CodeMirror.optionHandlers;\n\n  var helpers = CodeMirror.helpers = {};\n\n  CodeMirror.prototype = {\n    constructor: CodeMirror,\n    focus: function(){window.focus(); this.display.input.focus();},\n\n    setOption: function(option, value) {\n      var options = this.options, old = options[option];\n      if (options[option] == value && option != \"mode\") { return }\n      options[option] = value;\n      if (optionHandlers.hasOwnProperty(option))\n        { operation(this, optionHandlers[option])(this, value, old); }\n      signal(this, \"optionChange\", this, option);\n    },\n\n    getOption: function(option) {return this.options[option]},\n    getDoc: function() {return this.doc},\n\n    addKeyMap: function(map$$1, bottom) {\n      this.state.keyMaps[bottom ? \"push\" : \"unshift\"](getKeyMap(map$$1));\n    },\n    removeKeyMap: function(map$$1) {\n      var maps = this.state.keyMaps;\n      for (var i = 0; i < maps.length; ++i)\n        { if (maps[i] == map$$1 || maps[i].name == map$$1) {\n          maps.splice(i, 1);\n          return true\n        } }\n    },\n\n    addOverlay: methodOp(function(spec, options) {\n      var mode = spec.token ? spec : CodeMirror.getMode(this.options, spec);\n      if (mode.startState) { throw new Error(\"Overlays may not be stateful.\") }\n      insertSorted(this.state.overlays,\n                   {mode: mode, modeSpec: spec, opaque: options && options.opaque,\n                    priority: (options && options.priority) || 0},\n                   function (overlay) { return overlay.priority; });\n      this.state.modeGen++;\n      regChange(this);\n    }),\n    removeOverlay: methodOp(function(spec) {\n      var this$1 = this;\n\n      var overlays = this.state.overlays;\n      for (var i = 0; i < overlays.length; ++i) {\n        var cur = overlays[i].modeSpec;\n        if (cur == spec || typeof spec == \"string\" && cur.name == spec) {\n          overlays.splice(i, 1);\n          this$1.state.modeGen++;\n          regChange(this$1);\n          return\n        }\n      }\n    }),\n\n    indentLine: methodOp(function(n, dir, aggressive) {\n      if (typeof dir != \"string\" && typeof dir != \"number\") {\n        if (dir == null) { dir = this.options.smartIndent ? \"smart\" : \"prev\"; }\n        else { dir = dir ? \"add\" : \"subtract\"; }\n      }\n      if (isLine(this.doc, n)) { indentLine(this, n, dir, aggressive); }\n    }),\n    indentSelection: methodOp(function(how) {\n      var this$1 = this;\n\n      var ranges = this.doc.sel.ranges, end = -1;\n      for (var i = 0; i < ranges.length; i++) {\n        var range$$1 = ranges[i];\n        if (!range$$1.empty()) {\n          var from = range$$1.from(), to = range$$1.to();\n          var start = Math.max(end, from.line);\n          end = Math.min(this$1.lastLine(), to.line - (to.ch ? 0 : 1)) + 1;\n          for (var j = start; j < end; ++j)\n            { indentLine(this$1, j, how); }\n          var newRanges = this$1.doc.sel.ranges;\n          if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i].from().ch > 0)\n            { replaceOneSelection(this$1.doc, i, new Range(from, newRanges[i].to()), sel_dontScroll); }\n        } else if (range$$1.head.line > end) {\n          indentLine(this$1, range$$1.head.line, how, true);\n          end = range$$1.head.line;\n          if (i == this$1.doc.sel.primIndex) { ensureCursorVisible(this$1); }\n        }\n      }\n    }),\n\n    // Fetch the parser token for a given character. Useful for hacks\n    // that want to inspect the mode state (say, for completion).\n    getTokenAt: function(pos, precise) {\n      return takeToken(this, pos, precise)\n    },\n\n    getLineTokens: function(line, precise) {\n      return takeToken(this, Pos(line), precise, true)\n    },\n\n    getTokenTypeAt: function(pos) {\n      pos = clipPos(this.doc, pos);\n      var styles = getLineStyles(this, getLine(this.doc, pos.line));\n      var before = 0, after = (styles.length - 1) / 2, ch = pos.ch;\n      var type;\n      if (ch == 0) { type = styles[2]; }\n      else { for (;;) {\n        var mid = (before + after) >> 1;\n        if ((mid ? styles[mid * 2 - 1] : 0) >= ch) { after = mid; }\n        else if (styles[mid * 2 + 1] < ch) { before = mid + 1; }\n        else { type = styles[mid * 2 + 2]; break }\n      } }\n      var cut = type ? type.indexOf(\"overlay \") : -1;\n      return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1)\n    },\n\n    getModeAt: function(pos) {\n      var mode = this.doc.mode;\n      if (!mode.innerMode) { return mode }\n      return CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode\n    },\n\n    getHelper: function(pos, type) {\n      return this.getHelpers(pos, type)[0]\n    },\n\n    getHelpers: function(pos, type) {\n      var this$1 = this;\n\n      var found = [];\n      if (!helpers.hasOwnProperty(type)) { return found }\n      var help = helpers[type], mode = this.getModeAt(pos);\n      if (typeof mode[type] == \"string\") {\n        if (help[mode[type]]) { found.push(help[mode[type]]); }\n      } else if (mode[type]) {\n        for (var i = 0; i < mode[type].length; i++) {\n          var val = help[mode[type][i]];\n          if (val) { found.push(val); }\n        }\n      } else if (mode.helperType && help[mode.helperType]) {\n        found.push(help[mode.helperType]);\n      } else if (help[mode.name]) {\n        found.push(help[mode.name]);\n      }\n      for (var i$1 = 0; i$1 < help._global.length; i$1++) {\n        var cur = help._global[i$1];\n        if (cur.pred(mode, this$1) && indexOf(found, cur.val) == -1)\n          { found.push(cur.val); }\n      }\n      return found\n    },\n\n    getStateAfter: function(line, precise) {\n      var doc = this.doc;\n      line = clipLine(doc, line == null ? doc.first + doc.size - 1: line);\n      return getContextBefore(this, line + 1, precise).state\n    },\n\n    cursorCoords: function(start, mode) {\n      var pos, range$$1 = this.doc.sel.primary();\n      if (start == null) { pos = range$$1.head; }\n      else if (typeof start == \"object\") { pos = clipPos(this.doc, start); }\n      else { pos = start ? range$$1.from() : range$$1.to(); }\n      return cursorCoords(this, pos, mode || \"page\")\n    },\n\n    charCoords: function(pos, mode) {\n      return charCoords(this, clipPos(this.doc, pos), mode || \"page\")\n    },\n\n    coordsChar: function(coords, mode) {\n      coords = fromCoordSystem(this, coords, mode || \"page\");\n      return coordsChar(this, coords.left, coords.top)\n    },\n\n    lineAtHeight: function(height, mode) {\n      height = fromCoordSystem(this, {top: height, left: 0}, mode || \"page\").top;\n      return lineAtHeight(this.doc, height + this.display.viewOffset)\n    },\n    heightAtLine: function(line, mode, includeWidgets) {\n      var end = false, lineObj;\n      if (typeof line == \"number\") {\n        var last = this.doc.first + this.doc.size - 1;\n        if (line < this.doc.first) { line = this.doc.first; }\n        else if (line > last) { line = last; end = true; }\n        lineObj = getLine(this.doc, line);\n      } else {\n        lineObj = line;\n      }\n      return intoCoordSystem(this, lineObj, {top: 0, left: 0}, mode || \"page\", includeWidgets || end).top +\n        (end ? this.doc.height - heightAtLine(lineObj) : 0)\n    },\n\n    defaultTextHeight: function() { return textHeight(this.display) },\n    defaultCharWidth: function() { return charWidth(this.display) },\n\n    getViewport: function() { return {from: this.display.viewFrom, to: this.display.viewTo}},\n\n    addWidget: function(pos, node, scroll, vert, horiz) {\n      var display = this.display;\n      pos = cursorCoords(this, clipPos(this.doc, pos));\n      var top = pos.bottom, left = pos.left;\n      node.style.position = \"absolute\";\n      node.setAttribute(\"cm-ignore-events\", \"true\");\n      this.display.input.setUneditable(node);\n      display.sizer.appendChild(node);\n      if (vert == \"over\") {\n        top = pos.top;\n      } else if (vert == \"above\" || vert == \"near\") {\n        var vspace = Math.max(display.wrapper.clientHeight, this.doc.height),\n        hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth);\n        // Default to positioning above (if specified and possible); otherwise default to positioning below\n        if ((vert == 'above' || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight)\n          { top = pos.top - node.offsetHeight; }\n        else if (pos.bottom + node.offsetHeight <= vspace)\n          { top = pos.bottom; }\n        if (left + node.offsetWidth > hspace)\n          { left = hspace - node.offsetWidth; }\n      }\n      node.style.top = top + \"px\";\n      node.style.left = node.style.right = \"\";\n      if (horiz == \"right\") {\n        left = display.sizer.clientWidth - node.offsetWidth;\n        node.style.right = \"0px\";\n      } else {\n        if (horiz == \"left\") { left = 0; }\n        else if (horiz == \"middle\") { left = (display.sizer.clientWidth - node.offsetWidth) / 2; }\n        node.style.left = left + \"px\";\n      }\n      if (scroll)\n        { scrollIntoView(this, {left: left, top: top, right: left + node.offsetWidth, bottom: top + node.offsetHeight}); }\n    },\n\n    triggerOnKeyDown: methodOp(onKeyDown),\n    triggerOnKeyPress: methodOp(onKeyPress),\n    triggerOnKeyUp: onKeyUp,\n    triggerOnMouseDown: methodOp(onMouseDown),\n\n    execCommand: function(cmd) {\n      if (commands.hasOwnProperty(cmd))\n        { return commands[cmd].call(null, this) }\n    },\n\n    triggerElectric: methodOp(function(text) { triggerElectric(this, text); }),\n\n    findPosH: function(from, amount, unit, visually) {\n      var this$1 = this;\n\n      var dir = 1;\n      if (amount < 0) { dir = -1; amount = -amount; }\n      var cur = clipPos(this.doc, from);\n      for (var i = 0; i < amount; ++i) {\n        cur = findPosH(this$1.doc, cur, dir, unit, visually);\n        if (cur.hitSide) { break }\n      }\n      return cur\n    },\n\n    moveH: methodOp(function(dir, unit) {\n      var this$1 = this;\n\n      this.extendSelectionsBy(function (range$$1) {\n        if (this$1.display.shift || this$1.doc.extend || range$$1.empty())\n          { return findPosH(this$1.doc, range$$1.head, dir, unit, this$1.options.rtlMoveVisually) }\n        else\n          { return dir < 0 ? range$$1.from() : range$$1.to() }\n      }, sel_move);\n    }),\n\n    deleteH: methodOp(function(dir, unit) {\n      var sel = this.doc.sel, doc = this.doc;\n      if (sel.somethingSelected())\n        { doc.replaceSelection(\"\", null, \"+delete\"); }\n      else\n        { deleteNearSelection(this, function (range$$1) {\n          var other = findPosH(doc, range$$1.head, dir, unit, false);\n          return dir < 0 ? {from: other, to: range$$1.head} : {from: range$$1.head, to: other}\n        }); }\n    }),\n\n    findPosV: function(from, amount, unit, goalColumn) {\n      var this$1 = this;\n\n      var dir = 1, x = goalColumn;\n      if (amount < 0) { dir = -1; amount = -amount; }\n      var cur = clipPos(this.doc, from);\n      for (var i = 0; i < amount; ++i) {\n        var coords = cursorCoords(this$1, cur, \"div\");\n        if (x == null) { x = coords.left; }\n        else { coords.left = x; }\n        cur = findPosV(this$1, coords, dir, unit);\n        if (cur.hitSide) { break }\n      }\n      return cur\n    },\n\n    moveV: methodOp(function(dir, unit) {\n      var this$1 = this;\n\n      var doc = this.doc, goals = [];\n      var collapse = !this.display.shift && !doc.extend && doc.sel.somethingSelected();\n      doc.extendSelectionsBy(function (range$$1) {\n        if (collapse)\n          { return dir < 0 ? range$$1.from() : range$$1.to() }\n        var headPos = cursorCoords(this$1, range$$1.head, \"div\");\n        if (range$$1.goalColumn != null) { headPos.left = range$$1.goalColumn; }\n        goals.push(headPos.left);\n        var pos = findPosV(this$1, headPos, dir, unit);\n        if (unit == \"page\" && range$$1 == doc.sel.primary())\n          { addToScrollTop(this$1, charCoords(this$1, pos, \"div\").top - headPos.top); }\n        return pos\n      }, sel_move);\n      if (goals.length) { for (var i = 0; i < doc.sel.ranges.length; i++)\n        { doc.sel.ranges[i].goalColumn = goals[i]; } }\n    }),\n\n    // Find the word at the given position (as returned by coordsChar).\n    findWordAt: function(pos) {\n      var doc = this.doc, line = getLine(doc, pos.line).text;\n      var start = pos.ch, end = pos.ch;\n      if (line) {\n        var helper = this.getHelper(pos, \"wordChars\");\n        if ((pos.sticky == \"before\" || end == line.length) && start) { --start; } else { ++end; }\n        var startChar = line.charAt(start);\n        var check = isWordChar(startChar, helper)\n          ? function (ch) { return isWordChar(ch, helper); }\n          : /\\s/.test(startChar) ? function (ch) { return /\\s/.test(ch); }\n          : function (ch) { return (!/\\s/.test(ch) && !isWordChar(ch)); };\n        while (start > 0 && check(line.charAt(start - 1))) { --start; }\n        while (end < line.length && check(line.charAt(end))) { ++end; }\n      }\n      return new Range(Pos(pos.line, start), Pos(pos.line, end))\n    },\n\n    toggleOverwrite: function(value) {\n      if (value != null && value == this.state.overwrite) { return }\n      if (this.state.overwrite = !this.state.overwrite)\n        { addClass(this.display.cursorDiv, \"CodeMirror-overwrite\"); }\n      else\n        { rmClass(this.display.cursorDiv, \"CodeMirror-overwrite\"); }\n\n      signal(this, \"overwriteToggle\", this, this.state.overwrite);\n    },\n    hasFocus: function() { return this.display.input.getField() == activeElt() },\n    isReadOnly: function() { return !!(this.options.readOnly || this.doc.cantEdit) },\n\n    scrollTo: methodOp(function (x, y) { scrollToCoords(this, x, y); }),\n    getScrollInfo: function() {\n      var scroller = this.display.scroller;\n      return {left: scroller.scrollLeft, top: scroller.scrollTop,\n              height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,\n              width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,\n              clientHeight: displayHeight(this), clientWidth: displayWidth(this)}\n    },\n\n    scrollIntoView: methodOp(function(range$$1, margin) {\n      if (range$$1 == null) {\n        range$$1 = {from: this.doc.sel.primary().head, to: null};\n        if (margin == null) { margin = this.options.cursorScrollMargin; }\n      } else if (typeof range$$1 == \"number\") {\n        range$$1 = {from: Pos(range$$1, 0), to: null};\n      } else if (range$$1.from == null) {\n        range$$1 = {from: range$$1, to: null};\n      }\n      if (!range$$1.to) { range$$1.to = range$$1.from; }\n      range$$1.margin = margin || 0;\n\n      if (range$$1.from.line != null) {\n        scrollToRange(this, range$$1);\n      } else {\n        scrollToCoordsRange(this, range$$1.from, range$$1.to, range$$1.margin);\n      }\n    }),\n\n    setSize: methodOp(function(width, height) {\n      var this$1 = this;\n\n      var interpret = function (val) { return typeof val == \"number\" || /^\\d+$/.test(String(val)) ? val + \"px\" : val; };\n      if (width != null) { this.display.wrapper.style.width = interpret(width); }\n      if (height != null) { this.display.wrapper.style.height = interpret(height); }\n      if (this.options.lineWrapping) { clearLineMeasurementCache(this); }\n      var lineNo$$1 = this.display.viewFrom;\n      this.doc.iter(lineNo$$1, this.display.viewTo, function (line) {\n        if (line.widgets) { for (var i = 0; i < line.widgets.length; i++)\n          { if (line.widgets[i].noHScroll) { regLineChange(this$1, lineNo$$1, \"widget\"); break } } }\n        ++lineNo$$1;\n      });\n      this.curOp.forceUpdate = true;\n      signal(this, \"refresh\", this);\n    }),\n\n    operation: function(f){return runInOp(this, f)},\n    startOperation: function(){return startOperation(this)},\n    endOperation: function(){return endOperation(this)},\n\n    refresh: methodOp(function() {\n      var oldHeight = this.display.cachedTextHeight;\n      regChange(this);\n      this.curOp.forceUpdate = true;\n      clearCaches(this);\n      scrollToCoords(this, this.doc.scrollLeft, this.doc.scrollTop);\n      updateGutterSpace(this);\n      if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > .5)\n        { estimateLineHeights(this); }\n      signal(this, \"refresh\", this);\n    }),\n\n    swapDoc: methodOp(function(doc) {\n      var old = this.doc;\n      old.cm = null;\n      attachDoc(this, doc);\n      clearCaches(this);\n      this.display.input.reset();\n      scrollToCoords(this, doc.scrollLeft, doc.scrollTop);\n      this.curOp.forceScroll = true;\n      signalLater(this, \"swapDoc\", this, old);\n      return old\n    }),\n\n    getInputField: function(){return this.display.input.getField()},\n    getWrapperElement: function(){return this.display.wrapper},\n    getScrollerElement: function(){return this.display.scroller},\n    getGutterElement: function(){return this.display.gutters}\n  };\n  eventMixin(CodeMirror);\n\n  CodeMirror.registerHelper = function(type, name, value) {\n    if (!helpers.hasOwnProperty(type)) { helpers[type] = CodeMirror[type] = {_global: []}; }\n    helpers[type][name] = value;\n  };\n  CodeMirror.registerGlobalHelper = function(type, name, predicate, value) {\n    CodeMirror.registerHelper(type, name, value);\n    helpers[type]._global.push({pred: predicate, val: value});\n  };\n};\n\n// Used for horizontal relative motion. Dir is -1 or 1 (left or\n// right), unit can be \"char\", \"column\" (like char, but doesn't\n// cross line boundaries), \"word\" (across next word), or \"group\" (to\n// the start of next group of word or non-word-non-whitespace\n// chars). The visually param controls whether, in right-to-left\n// text, direction 1 means to move towards the next index in the\n// string, or towards the character to the right of the current\n// position. The resulting position will have a hitSide=true\n// property if it reached the end of the document.\nfunction findPosH(doc, pos, dir, unit, visually) {\n  var oldPos = pos;\n  var origDir = dir;\n  var lineObj = getLine(doc, pos.line);\n  function findNextLine() {\n    var l = pos.line + dir;\n    if (l < doc.first || l >= doc.first + doc.size) { return false }\n    pos = new Pos(l, pos.ch, pos.sticky);\n    return lineObj = getLine(doc, l)\n  }\n  function moveOnce(boundToLine) {\n    var next;\n    if (visually) {\n      next = moveVisually(doc.cm, lineObj, pos, dir);\n    } else {\n      next = moveLogically(lineObj, pos, dir);\n    }\n    if (next == null) {\n      if (!boundToLine && findNextLine())\n        { pos = endOfLine(visually, doc.cm, lineObj, pos.line, dir); }\n      else\n        { return false }\n    } else {\n      pos = next;\n    }\n    return true\n  }\n\n  if (unit == \"char\") {\n    moveOnce();\n  } else if (unit == \"column\") {\n    moveOnce(true);\n  } else if (unit == \"word\" || unit == \"group\") {\n    var sawType = null, group = unit == \"group\";\n    var helper = doc.cm && doc.cm.getHelper(pos, \"wordChars\");\n    for (var first = true;; first = false) {\n      if (dir < 0 && !moveOnce(!first)) { break }\n      var cur = lineObj.text.charAt(pos.ch) || \"\\n\";\n      var type = isWordChar(cur, helper) ? \"w\"\n        : group && cur == \"\\n\" ? \"n\"\n        : !group || /\\s/.test(cur) ? null\n        : \"p\";\n      if (group && !first && !type) { type = \"s\"; }\n      if (sawType && sawType != type) {\n        if (dir < 0) {dir = 1; moveOnce(); pos.sticky = \"after\";}\n        break\n      }\n\n      if (type) { sawType = type; }\n      if (dir > 0 && !moveOnce(!first)) { break }\n    }\n  }\n  var result = skipAtomic(doc, pos, oldPos, origDir, true);\n  if (equalCursorPos(oldPos, result)) { result.hitSide = true; }\n  return result\n}\n\n// For relative vertical movement. Dir may be -1 or 1. Unit can be\n// \"page\" or \"line\". The resulting position will have a hitSide=true\n// property if it reached the end of the document.\nfunction findPosV(cm, pos, dir, unit) {\n  var doc = cm.doc, x = pos.left, y;\n  if (unit == \"page\") {\n    var pageSize = Math.min(cm.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);\n    var moveAmount = Math.max(pageSize - .5 * textHeight(cm.display), 3);\n    y = (dir > 0 ? pos.bottom : pos.top) + dir * moveAmount;\n\n  } else if (unit == \"line\") {\n    y = dir > 0 ? pos.bottom + 3 : pos.top - 3;\n  }\n  var target;\n  for (;;) {\n    target = coordsChar(cm, x, y);\n    if (!target.outside) { break }\n    if (dir < 0 ? y <= 0 : y >= doc.height) { target.hitSide = true; break }\n    y += dir * 5;\n  }\n  return target\n}\n\n// CONTENTEDITABLE INPUT STYLE\n\nvar ContentEditableInput = function(cm) {\n  this.cm = cm;\n  this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null;\n  this.polling = new Delayed();\n  this.composing = null;\n  this.gracePeriod = false;\n  this.readDOMTimeout = null;\n};\n\nContentEditableInput.prototype.init = function (display) {\n    var this$1 = this;\n\n  var input = this, cm = input.cm;\n  var div = input.div = display.lineDiv;\n  disableBrowserMagic(div, cm.options.spellcheck);\n\n  on(div, \"paste\", function (e) {\n    if (signalDOMEvent(cm, e) || handlePaste(e, cm)) { return }\n    // IE doesn't fire input events, so we schedule a read for the pasted content in this way\n    if (ie_version <= 11) { setTimeout(operation(cm, function () { return this$1.updateFromDOM(); }), 20); }\n  });\n\n  on(div, \"compositionstart\", function (e) {\n    this$1.composing = {data: e.data, done: false};\n  });\n  on(div, \"compositionupdate\", function (e) {\n    if (!this$1.composing) { this$1.composing = {data: e.data, done: false}; }\n  });\n  on(div, \"compositionend\", function (e) {\n    if (this$1.composing) {\n      if (e.data != this$1.composing.data) { this$1.readFromDOMSoon(); }\n      this$1.composing.done = true;\n    }\n  });\n\n  on(div, \"touchstart\", function () { return input.forceCompositionEnd(); });\n\n  on(div, \"input\", function () {\n    if (!this$1.composing) { this$1.readFromDOMSoon(); }\n  });\n\n  function onCopyCut(e) {\n    if (signalDOMEvent(cm, e)) { return }\n    if (cm.somethingSelected()) {\n      setLastCopied({lineWise: false, text: cm.getSelections()});\n      if (e.type == \"cut\") { cm.replaceSelection(\"\", null, \"cut\"); }\n    } else if (!cm.options.lineWiseCopyCut) {\n      return\n    } else {\n      var ranges = copyableRanges(cm);\n      setLastCopied({lineWise: true, text: ranges.text});\n      if (e.type == \"cut\") {\n        cm.operation(function () {\n          cm.setSelections(ranges.ranges, 0, sel_dontScroll);\n          cm.replaceSelection(\"\", null, \"cut\");\n        });\n      }\n    }\n    if (e.clipboardData) {\n      e.clipboardData.clearData();\n      var content = lastCopied.text.join(\"\\n\");\n      // iOS exposes the clipboard API, but seems to discard content inserted into it\n      e.clipboardData.setData(\"Text\", content);\n      if (e.clipboardData.getData(\"Text\") == content) {\n        e.preventDefault();\n        return\n      }\n    }\n    // Old-fashioned briefly-focus-a-textarea hack\n    var kludge = hiddenTextarea(), te = kludge.firstChild;\n    cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild);\n    te.value = lastCopied.text.join(\"\\n\");\n    var hadFocus = document.activeElement;\n    selectInput(te);\n    setTimeout(function () {\n      cm.display.lineSpace.removeChild(kludge);\n      hadFocus.focus();\n      if (hadFocus == div) { input.showPrimarySelection(); }\n    }, 50);\n  }\n  on(div, \"copy\", onCopyCut);\n  on(div, \"cut\", onCopyCut);\n};\n\nContentEditableInput.prototype.prepareSelection = function () {\n  var result = prepareSelection(this.cm, false);\n  result.focus = this.cm.state.focused;\n  return result\n};\n\nContentEditableInput.prototype.showSelection = function (info, takeFocus) {\n  if (!info || !this.cm.display.view.length) { return }\n  if (info.focus || takeFocus) { this.showPrimarySelection(); }\n  this.showMultipleSelections(info);\n};\n\nContentEditableInput.prototype.showPrimarySelection = function () {\n  var sel = window.getSelection(), cm = this.cm, prim = cm.doc.sel.primary();\n  var from = prim.from(), to = prim.to();\n\n  if (cm.display.viewTo == cm.display.viewFrom || from.line >= cm.display.viewTo || to.line < cm.display.viewFrom) {\n    sel.removeAllRanges();\n    return\n  }\n\n  var curAnchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n  var curFocus = domToPos(cm, sel.focusNode, sel.focusOffset);\n  if (curAnchor && !curAnchor.bad && curFocus && !curFocus.bad &&\n      cmp(minPos(curAnchor, curFocus), from) == 0 &&\n      cmp(maxPos(curAnchor, curFocus), to) == 0)\n    { return }\n\n  var view = cm.display.view;\n  var start = (from.line >= cm.display.viewFrom && posToDOM(cm, from)) ||\n      {node: view[0].measure.map[2], offset: 0};\n  var end = to.line < cm.display.viewTo && posToDOM(cm, to);\n  if (!end) {\n    var measure = view[view.length - 1].measure;\n    var map$$1 = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map;\n    end = {node: map$$1[map$$1.length - 1], offset: map$$1[map$$1.length - 2] - map$$1[map$$1.length - 3]};\n  }\n\n  if (!start || !end) {\n    sel.removeAllRanges();\n    return\n  }\n\n  var old = sel.rangeCount && sel.getRangeAt(0), rng;\n  try { rng = range(start.node, start.offset, end.offset, end.node); }\n  catch(e) {} // Our model of the DOM might be outdated, in which case the range we try to set can be impossible\n  if (rng) {\n    if (!gecko && cm.state.focused) {\n      sel.collapse(start.node, start.offset);\n      if (!rng.collapsed) {\n        sel.removeAllRanges();\n        sel.addRange(rng);\n      }\n    } else {\n      sel.removeAllRanges();\n      sel.addRange(rng);\n    }\n    if (old && sel.anchorNode == null) { sel.addRange(old); }\n    else if (gecko) { this.startGracePeriod(); }\n  }\n  this.rememberSelection();\n};\n\nContentEditableInput.prototype.startGracePeriod = function () {\n    var this$1 = this;\n\n  clearTimeout(this.gracePeriod);\n  this.gracePeriod = setTimeout(function () {\n    this$1.gracePeriod = false;\n    if (this$1.selectionChanged())\n      { this$1.cm.operation(function () { return this$1.cm.curOp.selectionChanged = true; }); }\n  }, 20);\n};\n\nContentEditableInput.prototype.showMultipleSelections = function (info) {\n  removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors);\n  removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection);\n};\n\nContentEditableInput.prototype.rememberSelection = function () {\n  var sel = window.getSelection();\n  this.lastAnchorNode = sel.anchorNode; this.lastAnchorOffset = sel.anchorOffset;\n  this.lastFocusNode = sel.focusNode; this.lastFocusOffset = sel.focusOffset;\n};\n\nContentEditableInput.prototype.selectionInEditor = function () {\n  var sel = window.getSelection();\n  if (!sel.rangeCount) { return false }\n  var node = sel.getRangeAt(0).commonAncestorContainer;\n  return contains(this.div, node)\n};\n\nContentEditableInput.prototype.focus = function () {\n  if (this.cm.options.readOnly != \"nocursor\") {\n    if (!this.selectionInEditor())\n      { this.showSelection(this.prepareSelection(), true); }\n    this.div.focus();\n  }\n};\nContentEditableInput.prototype.blur = function () { this.div.blur(); };\nContentEditableInput.prototype.getField = function () { return this.div };\n\nContentEditableInput.prototype.supportsTouch = function () { return true };\n\nContentEditableInput.prototype.receivedFocus = function () {\n  var input = this;\n  if (this.selectionInEditor())\n    { this.pollSelection(); }\n  else\n    { runInOp(this.cm, function () { return input.cm.curOp.selectionChanged = true; }); }\n\n  function poll() {\n    if (input.cm.state.focused) {\n      input.pollSelection();\n      input.polling.set(input.cm.options.pollInterval, poll);\n    }\n  }\n  this.polling.set(this.cm.options.pollInterval, poll);\n};\n\nContentEditableInput.prototype.selectionChanged = function () {\n  var sel = window.getSelection();\n  return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset ||\n    sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset\n};\n\nContentEditableInput.prototype.pollSelection = function () {\n  if (this.readDOMTimeout != null || this.gracePeriod || !this.selectionChanged()) { return }\n  var sel = window.getSelection(), cm = this.cm;\n  // On Android Chrome (version 56, at least), backspacing into an\n  // uneditable block element will put the cursor in that element,\n  // and then, because it's not editable, hide the virtual keyboard.\n  // Because Android doesn't allow us to actually detect backspace\n  // presses in a sane way, this code checks for when that happens\n  // and simulates a backspace press in this case.\n  if (android && chrome && this.cm.options.gutters.length && isInGutter(sel.anchorNode)) {\n    this.cm.triggerOnKeyDown({type: \"keydown\", keyCode: 8, preventDefault: Math.abs});\n    this.blur();\n    this.focus();\n    return\n  }\n  if (this.composing) { return }\n  this.rememberSelection();\n  var anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n  var head = domToPos(cm, sel.focusNode, sel.focusOffset);\n  if (anchor && head) { runInOp(cm, function () {\n    setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll);\n    if (anchor.bad || head.bad) { cm.curOp.selectionChanged = true; }\n  }); }\n};\n\nContentEditableInput.prototype.pollContent = function () {\n  if (this.readDOMTimeout != null) {\n    clearTimeout(this.readDOMTimeout);\n    this.readDOMTimeout = null;\n  }\n\n  var cm = this.cm, display = cm.display, sel = cm.doc.sel.primary();\n  var from = sel.from(), to = sel.to();\n  if (from.ch == 0 && from.line > cm.firstLine())\n    { from = Pos(from.line - 1, getLine(cm.doc, from.line - 1).length); }\n  if (to.ch == getLine(cm.doc, to.line).text.length && to.line < cm.lastLine())\n    { to = Pos(to.line + 1, 0); }\n  if (from.line < display.viewFrom || to.line > display.viewTo - 1) { return false }\n\n  var fromIndex, fromLine, fromNode;\n  if (from.line == display.viewFrom || (fromIndex = findViewIndex(cm, from.line)) == 0) {\n    fromLine = lineNo(display.view[0].line);\n    fromNode = display.view[0].node;\n  } else {\n    fromLine = lineNo(display.view[fromIndex].line);\n    fromNode = display.view[fromIndex - 1].node.nextSibling;\n  }\n  var toIndex = findViewIndex(cm, to.line);\n  var toLine, toNode;\n  if (toIndex == display.view.length - 1) {\n    toLine = display.viewTo - 1;\n    toNode = display.lineDiv.lastChild;\n  } else {\n    toLine = lineNo(display.view[toIndex + 1].line) - 1;\n    toNode = display.view[toIndex + 1].node.previousSibling;\n  }\n\n  if (!fromNode) { return false }\n  var newText = cm.doc.splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine));\n  var oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length));\n  while (newText.length > 1 && oldText.length > 1) {\n    if (lst(newText) == lst(oldText)) { newText.pop(); oldText.pop(); toLine--; }\n    else if (newText[0] == oldText[0]) { newText.shift(); oldText.shift(); fromLine++; }\n    else { break }\n  }\n\n  var cutFront = 0, cutEnd = 0;\n  var newTop = newText[0], oldTop = oldText[0], maxCutFront = Math.min(newTop.length, oldTop.length);\n  while (cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront))\n    { ++cutFront; }\n  var newBot = lst(newText), oldBot = lst(oldText);\n  var maxCutEnd = Math.min(newBot.length - (newText.length == 1 ? cutFront : 0),\n                           oldBot.length - (oldText.length == 1 ? cutFront : 0));\n  while (cutEnd < maxCutEnd &&\n         newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1))\n    { ++cutEnd; }\n  // Try to move start of change to start of selection if ambiguous\n  if (newText.length == 1 && oldText.length == 1 && fromLine == from.line) {\n    while (cutFront && cutFront > from.ch &&\n           newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {\n      cutFront--;\n      cutEnd++;\n    }\n  }\n\n  newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd).replace(/^\\u200b+/, \"\");\n  newText[0] = newText[0].slice(cutFront).replace(/\\u200b+$/, \"\");\n\n  var chFrom = Pos(fromLine, cutFront);\n  var chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0);\n  if (newText.length > 1 || newText[0] || cmp(chFrom, chTo)) {\n    replaceRange(cm.doc, newText, chFrom, chTo, \"+input\");\n    return true\n  }\n};\n\nContentEditableInput.prototype.ensurePolled = function () {\n  this.forceCompositionEnd();\n};\nContentEditableInput.prototype.reset = function () {\n  this.forceCompositionEnd();\n};\nContentEditableInput.prototype.forceCompositionEnd = function () {\n  if (!this.composing) { return }\n  clearTimeout(this.readDOMTimeout);\n  this.composing = null;\n  this.updateFromDOM();\n  this.div.blur();\n  this.div.focus();\n};\nContentEditableInput.prototype.readFromDOMSoon = function () {\n    var this$1 = this;\n\n  if (this.readDOMTimeout != null) { return }\n  this.readDOMTimeout = setTimeout(function () {\n    this$1.readDOMTimeout = null;\n    if (this$1.composing) {\n      if (this$1.composing.done) { this$1.composing = null; }\n      else { return }\n    }\n    this$1.updateFromDOM();\n  }, 80);\n};\n\nContentEditableInput.prototype.updateFromDOM = function () {\n    var this$1 = this;\n\n  if (this.cm.isReadOnly() || !this.pollContent())\n    { runInOp(this.cm, function () { return regChange(this$1.cm); }); }\n};\n\nContentEditableInput.prototype.setUneditable = function (node) {\n  node.contentEditable = \"false\";\n};\n\nContentEditableInput.prototype.onKeyPress = function (e) {\n  if (e.charCode == 0) { return }\n  e.preventDefault();\n  if (!this.cm.isReadOnly())\n    { operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0); }\n};\n\nContentEditableInput.prototype.readOnlyChanged = function (val) {\n  this.div.contentEditable = String(val != \"nocursor\");\n};\n\nContentEditableInput.prototype.onContextMenu = function () {};\nContentEditableInput.prototype.resetPosition = function () {};\n\nContentEditableInput.prototype.needsContentAttribute = true;\n\nfunction posToDOM(cm, pos) {\n  var view = findViewForLine(cm, pos.line);\n  if (!view || view.hidden) { return null }\n  var line = getLine(cm.doc, pos.line);\n  var info = mapFromLineView(view, line, pos.line);\n\n  var order = getOrder(line, cm.doc.direction), side = \"left\";\n  if (order) {\n    var partPos = getBidiPartAt(order, pos.ch);\n    side = partPos % 2 ? \"right\" : \"left\";\n  }\n  var result = nodeAndOffsetInLineMap(info.map, pos.ch, side);\n  result.offset = result.collapse == \"right\" ? result.end : result.start;\n  return result\n}\n\nfunction isInGutter(node) {\n  for (var scan = node; scan; scan = scan.parentNode)\n    { if (/CodeMirror-gutter-wrapper/.test(scan.className)) { return true } }\n  return false\n}\n\nfunction badPos(pos, bad) { if (bad) { pos.bad = true; } return pos }\n\nfunction domTextBetween(cm, from, to, fromLine, toLine) {\n  var text = \"\", closing = false, lineSep = cm.doc.lineSeparator();\n  function recognizeMarker(id) { return function (marker) { return marker.id == id; } }\n  function close() {\n    if (closing) {\n      text += lineSep;\n      closing = false;\n    }\n  }\n  function addText(str) {\n    if (str) {\n      close();\n      text += str;\n    }\n  }\n  function walk(node) {\n    if (node.nodeType == 1) {\n      var cmText = node.getAttribute(\"cm-text\");\n      if (cmText != null) {\n        addText(cmText || node.textContent.replace(/\\u200b/g, \"\"));\n        return\n      }\n      var markerID = node.getAttribute(\"cm-marker\"), range$$1;\n      if (markerID) {\n        var found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID));\n        if (found.length && (range$$1 = found[0].find(0)))\n          { addText(getBetween(cm.doc, range$$1.from, range$$1.to).join(lineSep)); }\n        return\n      }\n      if (node.getAttribute(\"contenteditable\") == \"false\") { return }\n      var isBlock = /^(pre|div|p)$/i.test(node.nodeName);\n      if (isBlock) { close(); }\n      for (var i = 0; i < node.childNodes.length; i++)\n        { walk(node.childNodes[i]); }\n      if (isBlock) { closing = true; }\n    } else if (node.nodeType == 3) {\n      addText(node.nodeValue);\n    }\n  }\n  for (;;) {\n    walk(from);\n    if (from == to) { break }\n    from = from.nextSibling;\n  }\n  return text\n}\n\nfunction domToPos(cm, node, offset) {\n  var lineNode;\n  if (node == cm.display.lineDiv) {\n    lineNode = cm.display.lineDiv.childNodes[offset];\n    if (!lineNode) { return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), true) }\n    node = null; offset = 0;\n  } else {\n    for (lineNode = node;; lineNode = lineNode.parentNode) {\n      if (!lineNode || lineNode == cm.display.lineDiv) { return null }\n      if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv) { break }\n    }\n  }\n  for (var i = 0; i < cm.display.view.length; i++) {\n    var lineView = cm.display.view[i];\n    if (lineView.node == lineNode)\n      { return locateNodeInLineView(lineView, node, offset) }\n  }\n}\n\nfunction locateNodeInLineView(lineView, node, offset) {\n  var wrapper = lineView.text.firstChild, bad = false;\n  if (!node || !contains(wrapper, node)) { return badPos(Pos(lineNo(lineView.line), 0), true) }\n  if (node == wrapper) {\n    bad = true;\n    node = wrapper.childNodes[offset];\n    offset = 0;\n    if (!node) {\n      var line = lineView.rest ? lst(lineView.rest) : lineView.line;\n      return badPos(Pos(lineNo(line), line.text.length), bad)\n    }\n  }\n\n  var textNode = node.nodeType == 3 ? node : null, topNode = node;\n  if (!textNode && node.childNodes.length == 1 && node.firstChild.nodeType == 3) {\n    textNode = node.firstChild;\n    if (offset) { offset = textNode.nodeValue.length; }\n  }\n  while (topNode.parentNode != wrapper) { topNode = topNode.parentNode; }\n  var measure = lineView.measure, maps = measure.maps;\n\n  function find(textNode, topNode, offset) {\n    for (var i = -1; i < (maps ? maps.length : 0); i++) {\n      var map$$1 = i < 0 ? measure.map : maps[i];\n      for (var j = 0; j < map$$1.length; j += 3) {\n        var curNode = map$$1[j + 2];\n        if (curNode == textNode || curNode == topNode) {\n          var line = lineNo(i < 0 ? lineView.line : lineView.rest[i]);\n          var ch = map$$1[j] + offset;\n          if (offset < 0 || curNode != textNode) { ch = map$$1[j + (offset ? 1 : 0)]; }\n          return Pos(line, ch)\n        }\n      }\n    }\n  }\n  var found = find(textNode, topNode, offset);\n  if (found) { return badPos(found, bad) }\n\n  // FIXME this is all really shaky. might handle the few cases it needs to handle, but likely to cause problems\n  for (var after = topNode.nextSibling, dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {\n    found = find(after, after.firstChild, 0);\n    if (found)\n      { return badPos(Pos(found.line, found.ch - dist), bad) }\n    else\n      { dist += after.textContent.length; }\n  }\n  for (var before = topNode.previousSibling, dist$1 = offset; before; before = before.previousSibling) {\n    found = find(before, before.firstChild, -1);\n    if (found)\n      { return badPos(Pos(found.line, found.ch + dist$1), bad) }\n    else\n      { dist$1 += before.textContent.length; }\n  }\n}\n\n// TEXTAREA INPUT STYLE\n\nvar TextareaInput = function(cm) {\n  this.cm = cm;\n  // See input.poll and input.reset\n  this.prevInput = \"\";\n\n  // Flag that indicates whether we expect input to appear real soon\n  // now (after some event like 'keypress' or 'input') and are\n  // polling intensively.\n  this.pollingFast = false;\n  // Self-resetting timeout for the poller\n  this.polling = new Delayed();\n  // Used to work around IE issue with selection being forgotten when focus moves away from textarea\n  this.hasSelection = false;\n  this.composing = null;\n};\n\nTextareaInput.prototype.init = function (display) {\n    var this$1 = this;\n\n  var input = this, cm = this.cm;\n\n  // Wraps and hides input textarea\n  var div = this.wrapper = hiddenTextarea();\n  // The semihidden textarea that is focused when the editor is\n  // focused, and receives input.\n  var te = this.textarea = div.firstChild;\n  display.wrapper.insertBefore(div, display.wrapper.firstChild);\n\n  // Needed to hide big blue blinking cursor on Mobile Safari (doesn't seem to work in iOS 8 anymore)\n  if (ios) { te.style.width = \"0px\"; }\n\n  on(te, \"input\", function () {\n    if (ie && ie_version >= 9 && this$1.hasSelection) { this$1.hasSelection = null; }\n    input.poll();\n  });\n\n  on(te, \"paste\", function (e) {\n    if (signalDOMEvent(cm, e) || handlePaste(e, cm)) { return }\n\n    cm.state.pasteIncoming = true;\n    input.fastPoll();\n  });\n\n  function prepareCopyCut(e) {\n    if (signalDOMEvent(cm, e)) { return }\n    if (cm.somethingSelected()) {\n      setLastCopied({lineWise: false, text: cm.getSelections()});\n    } else if (!cm.options.lineWiseCopyCut) {\n      return\n    } else {\n      var ranges = copyableRanges(cm);\n      setLastCopied({lineWise: true, text: ranges.text});\n      if (e.type == \"cut\") {\n        cm.setSelections(ranges.ranges, null, sel_dontScroll);\n      } else {\n        input.prevInput = \"\";\n        te.value = ranges.text.join(\"\\n\");\n        selectInput(te);\n      }\n    }\n    if (e.type == \"cut\") { cm.state.cutIncoming = true; }\n  }\n  on(te, \"cut\", prepareCopyCut);\n  on(te, \"copy\", prepareCopyCut);\n\n  on(display.scroller, \"paste\", function (e) {\n    if (eventInWidget(display, e) || signalDOMEvent(cm, e)) { return }\n    cm.state.pasteIncoming = true;\n    input.focus();\n  });\n\n  // Prevent normal selection in the editor (we handle our own)\n  on(display.lineSpace, \"selectstart\", function (e) {\n    if (!eventInWidget(display, e)) { e_preventDefault(e); }\n  });\n\n  on(te, \"compositionstart\", function () {\n    var start = cm.getCursor(\"from\");\n    if (input.composing) { input.composing.range.clear(); }\n    input.composing = {\n      start: start,\n      range: cm.markText(start, cm.getCursor(\"to\"), {className: \"CodeMirror-composing\"})\n    };\n  });\n  on(te, \"compositionend\", function () {\n    if (input.composing) {\n      input.poll();\n      input.composing.range.clear();\n      input.composing = null;\n    }\n  });\n};\n\nTextareaInput.prototype.prepareSelection = function () {\n  // Redraw the selection and/or cursor\n  var cm = this.cm, display = cm.display, doc = cm.doc;\n  var result = prepareSelection(cm);\n\n  // Move the hidden textarea near the cursor to prevent scrolling artifacts\n  if (cm.options.moveInputWithCursor) {\n    var headPos = cursorCoords(cm, doc.sel.primary().head, \"div\");\n    var wrapOff = display.wrapper.getBoundingClientRect(), lineOff = display.lineDiv.getBoundingClientRect();\n    result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10,\n                                        headPos.top + lineOff.top - wrapOff.top));\n    result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10,\n                                         headPos.left + lineOff.left - wrapOff.left));\n  }\n\n  return result\n};\n\nTextareaInput.prototype.showSelection = function (drawn) {\n  var cm = this.cm, display = cm.display;\n  removeChildrenAndAdd(display.cursorDiv, drawn.cursors);\n  removeChildrenAndAdd(display.selectionDiv, drawn.selection);\n  if (drawn.teTop != null) {\n    this.wrapper.style.top = drawn.teTop + \"px\";\n    this.wrapper.style.left = drawn.teLeft + \"px\";\n  }\n};\n\n// Reset the input to correspond to the selection (or to be empty,\n// when not typing and nothing is selected)\nTextareaInput.prototype.reset = function (typing) {\n  if (this.contextMenuPending || this.composing) { return }\n  var cm = this.cm;\n  if (cm.somethingSelected()) {\n    this.prevInput = \"\";\n    var content = cm.getSelection();\n    this.textarea.value = content;\n    if (cm.state.focused) { selectInput(this.textarea); }\n    if (ie && ie_version >= 9) { this.hasSelection = content; }\n  } else if (!typing) {\n    this.prevInput = this.textarea.value = \"\";\n    if (ie && ie_version >= 9) { this.hasSelection = null; }\n  }\n};\n\nTextareaInput.prototype.getField = function () { return this.textarea };\n\nTextareaInput.prototype.supportsTouch = function () { return false };\n\nTextareaInput.prototype.focus = function () {\n  if (this.cm.options.readOnly != \"nocursor\" && (!mobile || activeElt() != this.textarea)) {\n    try { this.textarea.focus(); }\n    catch (e) {} // IE8 will throw if the textarea is display: none or not in DOM\n  }\n};\n\nTextareaInput.prototype.blur = function () { this.textarea.blur(); };\n\nTextareaInput.prototype.resetPosition = function () {\n  this.wrapper.style.top = this.wrapper.style.left = 0;\n};\n\nTextareaInput.prototype.receivedFocus = function () { this.slowPoll(); };\n\n// Poll for input changes, using the normal rate of polling. This\n// runs as long as the editor is focused.\nTextareaInput.prototype.slowPoll = function () {\n    var this$1 = this;\n\n  if (this.pollingFast) { return }\n  this.polling.set(this.cm.options.pollInterval, function () {\n    this$1.poll();\n    if (this$1.cm.state.focused) { this$1.slowPoll(); }\n  });\n};\n\n// When an event has just come in that is likely to add or change\n// something in the input textarea, we poll faster, to ensure that\n// the change appears on the screen quickly.\nTextareaInput.prototype.fastPoll = function () {\n  var missed = false, input = this;\n  input.pollingFast = true;\n  function p() {\n    var changed = input.poll();\n    if (!changed && !missed) {missed = true; input.polling.set(60, p);}\n    else {input.pollingFast = false; input.slowPoll();}\n  }\n  input.polling.set(20, p);\n};\n\n// Read input from the textarea, and update the document to match.\n// When something is selected, it is present in the textarea, and\n// selected (unless it is huge, in which case a placeholder is\n// used). When nothing is selected, the cursor sits after previously\n// seen text (can be empty), which is stored in prevInput (we must\n// not reset the textarea when typing, because that breaks IME).\nTextareaInput.prototype.poll = function () {\n    var this$1 = this;\n\n  var cm = this.cm, input = this.textarea, prevInput = this.prevInput;\n  // Since this is called a *lot*, try to bail out as cheaply as\n  // possible when it is clear that nothing happened. hasSelection\n  // will be the case when there is a lot of text in the textarea,\n  // in which case reading its value would be expensive.\n  if (this.contextMenuPending || !cm.state.focused ||\n      (hasSelection(input) && !prevInput && !this.composing) ||\n      cm.isReadOnly() || cm.options.disableInput || cm.state.keySeq)\n    { return false }\n\n  var text = input.value;\n  // If nothing changed, bail.\n  if (text == prevInput && !cm.somethingSelected()) { return false }\n  // Work around nonsensical selection resetting in IE9/10, and\n  // inexplicable appearance of private area unicode characters on\n  // some key combos in Mac (#2689).\n  if (ie && ie_version >= 9 && this.hasSelection === text ||\n      mac && /[\\uf700-\\uf7ff]/.test(text)) {\n    cm.display.input.reset();\n    return false\n  }\n\n  if (cm.doc.sel == cm.display.selForContextMenu) {\n    var first = text.charCodeAt(0);\n    if (first == 0x200b && !prevInput) { prevInput = \"\\u200b\"; }\n    if (first == 0x21da) { this.reset(); return this.cm.execCommand(\"undo\") }\n  }\n  // Find the part of the input that is actually new\n  var same = 0, l = Math.min(prevInput.length, text.length);\n  while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same)) { ++same; }\n\n  runInOp(cm, function () {\n    applyTextInput(cm, text.slice(same), prevInput.length - same,\n                   null, this$1.composing ? \"*compose\" : null);\n\n    // Don't leave long text in the textarea, since it makes further polling slow\n    if (text.length > 1000 || text.indexOf(\"\\n\") > -1) { input.value = this$1.prevInput = \"\"; }\n    else { this$1.prevInput = text; }\n\n    if (this$1.composing) {\n      this$1.composing.range.clear();\n      this$1.composing.range = cm.markText(this$1.composing.start, cm.getCursor(\"to\"),\n                                         {className: \"CodeMirror-composing\"});\n    }\n  });\n  return true\n};\n\nTextareaInput.prototype.ensurePolled = function () {\n  if (this.pollingFast && this.poll()) { this.pollingFast = false; }\n};\n\nTextareaInput.prototype.onKeyPress = function () {\n  if (ie && ie_version >= 9) { this.hasSelection = null; }\n  this.fastPoll();\n};\n\nTextareaInput.prototype.onContextMenu = function (e) {\n  var input = this, cm = input.cm, display = cm.display, te = input.textarea;\n  var pos = posFromMouse(cm, e), scrollPos = display.scroller.scrollTop;\n  if (!pos || presto) { return } // Opera is difficult.\n\n  // Reset the current text selection only if the click is done outside of the selection\n  // and 'resetSelectionOnContextMenu' option is true.\n  var reset = cm.options.resetSelectionOnContextMenu;\n  if (reset && cm.doc.sel.contains(pos) == -1)\n    { operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll); }\n\n  var oldCSS = te.style.cssText, oldWrapperCSS = input.wrapper.style.cssText;\n  input.wrapper.style.cssText = \"position: absolute\";\n  var wrapperBox = input.wrapper.getBoundingClientRect();\n  te.style.cssText = \"position: absolute; width: 30px; height: 30px;\\n      top: \" + (e.clientY - wrapperBox.top - 5) + \"px; left: \" + (e.clientX - wrapperBox.left - 5) + \"px;\\n      z-index: 1000; background: \" + (ie ? \"rgba(255, 255, 255, .05)\" : \"transparent\") + \";\\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);\";\n  var oldScrollY;\n  if (webkit) { oldScrollY = window.scrollY; } // Work around Chrome issue (#2712)\n  display.input.focus();\n  if (webkit) { window.scrollTo(null, oldScrollY); }\n  display.input.reset();\n  // Adds \"Select all\" to context menu in FF\n  if (!cm.somethingSelected()) { te.value = input.prevInput = \" \"; }\n  input.contextMenuPending = true;\n  display.selForContextMenu = cm.doc.sel;\n  clearTimeout(display.detectingSelectAll);\n\n  // Select-all will be greyed out if there's nothing to select, so\n  // this adds a zero-width space so that we can later check whether\n  // it got selected.\n  function prepareSelectAllHack() {\n    if (te.selectionStart != null) {\n      var selected = cm.somethingSelected();\n      var extval = \"\\u200b\" + (selected ? te.value : \"\");\n      te.value = \"\\u21da\"; // Used to catch context-menu undo\n      te.value = extval;\n      input.prevInput = selected ? \"\" : \"\\u200b\";\n      te.selectionStart = 1; te.selectionEnd = extval.length;\n      // Re-set this, in case some other handler touched the\n      // selection in the meantime.\n      display.selForContextMenu = cm.doc.sel;\n    }\n  }\n  function rehide() {\n    input.contextMenuPending = false;\n    input.wrapper.style.cssText = oldWrapperCSS;\n    te.style.cssText = oldCSS;\n    if (ie && ie_version < 9) { display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos); }\n\n    // Try to detect the user choosing select-all\n    if (te.selectionStart != null) {\n      if (!ie || (ie && ie_version < 9)) { prepareSelectAllHack(); }\n      var i = 0, poll = function () {\n        if (display.selForContextMenu == cm.doc.sel && te.selectionStart == 0 &&\n            te.selectionEnd > 0 && input.prevInput == \"\\u200b\") {\n          operation(cm, selectAll)(cm);\n        } else if (i++ < 10) {\n          display.detectingSelectAll = setTimeout(poll, 500);\n        } else {\n          display.selForContextMenu = null;\n          display.input.reset();\n        }\n      };\n      display.detectingSelectAll = setTimeout(poll, 200);\n    }\n  }\n\n  if (ie && ie_version >= 9) { prepareSelectAllHack(); }\n  if (captureRightClick) {\n    e_stop(e);\n    var mouseup = function () {\n      off(window, \"mouseup\", mouseup);\n      setTimeout(rehide, 20);\n    };\n    on(window, \"mouseup\", mouseup);\n  } else {\n    setTimeout(rehide, 50);\n  }\n};\n\nTextareaInput.prototype.readOnlyChanged = function (val) {\n  if (!val) { this.reset(); }\n  this.textarea.disabled = val == \"nocursor\";\n};\n\nTextareaInput.prototype.setUneditable = function () {};\n\nTextareaInput.prototype.needsContentAttribute = false;\n\nfunction fromTextArea(textarea, options) {\n  options = options ? copyObj(options) : {};\n  options.value = textarea.value;\n  if (!options.tabindex && textarea.tabIndex)\n    { options.tabindex = textarea.tabIndex; }\n  if (!options.placeholder && textarea.placeholder)\n    { options.placeholder = textarea.placeholder; }\n  // Set autofocus to true if this textarea is focused, or if it has\n  // autofocus and no other element is focused.\n  if (options.autofocus == null) {\n    var hasFocus = activeElt();\n    options.autofocus = hasFocus == textarea ||\n      textarea.getAttribute(\"autofocus\") != null && hasFocus == document.body;\n  }\n\n  function save() {textarea.value = cm.getValue();}\n\n  var realSubmit;\n  if (textarea.form) {\n    on(textarea.form, \"submit\", save);\n    // Deplorable hack to make the submit method do the right thing.\n    if (!options.leaveSubmitMethodAlone) {\n      var form = textarea.form;\n      realSubmit = form.submit;\n      try {\n        var wrappedSubmit = form.submit = function () {\n          save();\n          form.submit = realSubmit;\n          form.submit();\n          form.submit = wrappedSubmit;\n        };\n      } catch(e) {}\n    }\n  }\n\n  options.finishInit = function (cm) {\n    cm.save = save;\n    cm.getTextArea = function () { return textarea; };\n    cm.toTextArea = function () {\n      cm.toTextArea = isNaN; // Prevent this from being ran twice\n      save();\n      textarea.parentNode.removeChild(cm.getWrapperElement());\n      textarea.style.display = \"\";\n      if (textarea.form) {\n        off(textarea.form, \"submit\", save);\n        if (typeof textarea.form.submit == \"function\")\n          { textarea.form.submit = realSubmit; }\n      }\n    };\n  };\n\n  textarea.style.display = \"none\";\n  var cm = CodeMirror$1(function (node) { return textarea.parentNode.insertBefore(node, textarea.nextSibling); },\n    options);\n  return cm\n}\n\nfunction addLegacyProps(CodeMirror) {\n  CodeMirror.off = off;\n  CodeMirror.on = on;\n  CodeMirror.wheelEventPixels = wheelEventPixels;\n  CodeMirror.Doc = Doc;\n  CodeMirror.splitLines = splitLinesAuto;\n  CodeMirror.countColumn = countColumn;\n  CodeMirror.findColumn = findColumn;\n  CodeMirror.isWordChar = isWordCharBasic;\n  CodeMirror.Pass = Pass;\n  CodeMirror.signal = signal;\n  CodeMirror.Line = Line;\n  CodeMirror.changeEnd = changeEnd;\n  CodeMirror.scrollbarModel = scrollbarModel;\n  CodeMirror.Pos = Pos;\n  CodeMirror.cmpPos = cmp;\n  CodeMirror.modes = modes;\n  CodeMirror.mimeModes = mimeModes;\n  CodeMirror.resolveMode = resolveMode;\n  CodeMirror.getMode = getMode;\n  CodeMirror.modeExtensions = modeExtensions;\n  CodeMirror.extendMode = extendMode;\n  CodeMirror.copyState = copyState;\n  CodeMirror.startState = startState;\n  CodeMirror.innerMode = innerMode;\n  CodeMirror.commands = commands;\n  CodeMirror.keyMap = keyMap;\n  CodeMirror.keyName = keyName;\n  CodeMirror.isModifierKey = isModifierKey;\n  CodeMirror.lookupKey = lookupKey;\n  CodeMirror.normalizeKeyMap = normalizeKeyMap;\n  CodeMirror.StringStream = StringStream;\n  CodeMirror.SharedTextMarker = SharedTextMarker;\n  CodeMirror.TextMarker = TextMarker;\n  CodeMirror.LineWidget = LineWidget;\n  CodeMirror.e_preventDefault = e_preventDefault;\n  CodeMirror.e_stopPropagation = e_stopPropagation;\n  CodeMirror.e_stop = e_stop;\n  CodeMirror.addClass = addClass;\n  CodeMirror.contains = contains;\n  CodeMirror.rmClass = rmClass;\n  CodeMirror.keyNames = keyNames;\n}\n\n// EDITOR CONSTRUCTOR\n\ndefineOptions(CodeMirror$1);\n\naddEditorMethods(CodeMirror$1);\n\n// Set up methods on CodeMirror's prototype to redirect to the editor's document.\nvar dontDelegate = \"iter insert remove copy getEditor constructor\".split(\" \");\nfor (var prop in Doc.prototype) { if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0)\n  { CodeMirror$1.prototype[prop] = (function(method) {\n    return function() {return method.apply(this.doc, arguments)}\n  })(Doc.prototype[prop]); } }\n\neventMixin(Doc);\n\n// INPUT HANDLING\n\nCodeMirror$1.inputStyles = {\"textarea\": TextareaInput, \"contenteditable\": ContentEditableInput};\n\n// MODE DEFINITION AND QUERYING\n\n// Extra arguments are stored as the mode's dependencies, which is\n// used by (legacy) mechanisms like loadmode.js to automatically\n// load a mode. (Preferred mechanism is the require/define calls.)\nCodeMirror$1.defineMode = function(name/*, mode, …*/) {\n  if (!CodeMirror$1.defaults.mode && name != \"null\") { CodeMirror$1.defaults.mode = name; }\n  defineMode.apply(this, arguments);\n};\n\nCodeMirror$1.defineMIME = defineMIME;\n\n// Minimal default mode.\nCodeMirror$1.defineMode(\"null\", function () { return ({token: function (stream) { return stream.skipToEnd(); }}); });\nCodeMirror$1.defineMIME(\"text/plain\", \"null\");\n\n// EXTENSIONS\n\nCodeMirror$1.defineExtension = function (name, func) {\n  CodeMirror$1.prototype[name] = func;\n};\nCodeMirror$1.defineDocExtension = function (name, func) {\n  Doc.prototype[name] = func;\n};\n\nCodeMirror$1.fromTextArea = fromTextArea;\n\naddLegacyProps(CodeMirror$1);\n\nCodeMirror$1.version = \"5.29.0\";\n\nreturn CodeMirror$1;\n\n})));\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.defineMode(\"javascript\", function(config, parserConfig) {\n  var indentUnit = config.indentUnit;\n  var statementIndent = parserConfig.statementIndent;\n  var jsonldMode = parserConfig.jsonld;\n  var jsonMode = parserConfig.json || jsonldMode;\n  var isTS = parserConfig.typescript;\n  var wordRE = parserConfig.wordCharacters || /[\\w$\\xa1-\\uffff]/;\n\n  // Tokenizer\n\n  var keywords = function(){\n    function kw(type) {return {type: type, style: \"keyword\"};}\n    var A = kw(\"keyword a\"), B = kw(\"keyword b\"), C = kw(\"keyword c\");\n    var operator = kw(\"operator\"), atom = {type: \"atom\", style: \"atom\"};\n\n    var jsKeywords = {\n      \"if\": kw(\"if\"), \"while\": A, \"with\": A, \"else\": B, \"do\": B, \"try\": B, \"finally\": B,\n      \"return\": C, \"break\": C, \"continue\": C, \"new\": kw(\"new\"), \"delete\": C, \"throw\": C, \"debugger\": C,\n      \"var\": kw(\"var\"), \"const\": kw(\"var\"), \"let\": kw(\"var\"),\n      \"function\": kw(\"function\"), \"catch\": kw(\"catch\"),\n      \"for\": kw(\"for\"), \"switch\": kw(\"switch\"), \"case\": kw(\"case\"), \"default\": kw(\"default\"),\n      \"in\": operator, \"typeof\": operator, \"instanceof\": operator,\n      \"true\": atom, \"false\": atom, \"null\": atom, \"undefined\": atom, \"NaN\": atom, \"Infinity\": atom,\n      \"this\": kw(\"this\"), \"class\": kw(\"class\"), \"super\": kw(\"atom\"),\n      \"yield\": C, \"export\": kw(\"export\"), \"import\": kw(\"import\"), \"extends\": C,\n      \"await\": C\n    };\n\n    // Extend the 'normal' keywords with the TypeScript language extensions\n    if (isTS) {\n      var type = {type: \"variable\", style: \"type\"};\n      var tsKeywords = {\n        // object-like things\n        \"interface\": kw(\"class\"),\n        \"implements\": C,\n        \"namespace\": C,\n        \"module\": kw(\"module\"),\n        \"enum\": kw(\"module\"),\n\n        // scope modifiers\n        \"public\": kw(\"modifier\"),\n        \"private\": kw(\"modifier\"),\n        \"protected\": kw(\"modifier\"),\n        \"abstract\": kw(\"modifier\"),\n        \"readonly\": kw(\"modifier\"),\n\n        // types\n        \"string\": type, \"number\": type, \"boolean\": type, \"any\": type\n      };\n\n      for (var attr in tsKeywords) {\n        jsKeywords[attr] = tsKeywords[attr];\n      }\n    }\n\n    return jsKeywords;\n  }();\n\n  var isOperatorChar = /[+\\-*&%=<>!?|~^@]/;\n  var isJsonldKeyword = /^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)\"/;\n\n  function readRegexp(stream) {\n    var escaped = false, next, inSet = false;\n    while ((next = stream.next()) != null) {\n      if (!escaped) {\n        if (next == \"/\" && !inSet) return;\n        if (next == \"[\") inSet = true;\n        else if (inSet && next == \"]\") inSet = false;\n      }\n      escaped = !escaped && next == \"\\\\\";\n    }\n  }\n\n  // Used as scratch variables to communicate multiple values without\n  // consing up tons of objects.\n  var type, content;\n  function ret(tp, style, cont) {\n    type = tp; content = cont;\n    return style;\n  }\n  function tokenBase(stream, state) {\n    var ch = stream.next();\n    if (ch == '\"' || ch == \"'\") {\n      state.tokenize = tokenString(ch);\n      return state.tokenize(stream, state);\n    } else if (ch == \".\" && stream.match(/^\\d+(?:[eE][+\\-]?\\d+)?/)) {\n      return ret(\"number\", \"number\");\n    } else if (ch == \".\" && stream.match(\"..\")) {\n      return ret(\"spread\", \"meta\");\n    } else if (/[\\[\\]{}\\(\\),;\\:\\.]/.test(ch)) {\n      return ret(ch);\n    } else if (ch == \"=\" && stream.eat(\">\")) {\n      return ret(\"=>\", \"operator\");\n    } else if (ch == \"0\" && stream.eat(/x/i)) {\n      stream.eatWhile(/[\\da-f]/i);\n      return ret(\"number\", \"number\");\n    } else if (ch == \"0\" && stream.eat(/o/i)) {\n      stream.eatWhile(/[0-7]/i);\n      return ret(\"number\", \"number\");\n    } else if (ch == \"0\" && stream.eat(/b/i)) {\n      stream.eatWhile(/[01]/i);\n      return ret(\"number\", \"number\");\n    } else if (/\\d/.test(ch)) {\n      stream.match(/^\\d*(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/);\n      return ret(\"number\", \"number\");\n    } else if (ch == \"/\") {\n      if (stream.eat(\"*\")) {\n        state.tokenize = tokenComment;\n        return tokenComment(stream, state);\n      } else if (stream.eat(\"/\")) {\n        stream.skipToEnd();\n        return ret(\"comment\", \"comment\");\n      } else if (expressionAllowed(stream, state, 1)) {\n        readRegexp(stream);\n        stream.match(/^\\b(([gimyu])(?![gimyu]*\\2))+\\b/);\n        return ret(\"regexp\", \"string-2\");\n      } else {\n        stream.eatWhile(isOperatorChar);\n        return ret(\"operator\", \"operator\", stream.current());\n      }\n    } else if (ch == \"`\") {\n      state.tokenize = tokenQuasi;\n      return tokenQuasi(stream, state);\n    } else if (ch == \"#\") {\n      stream.skipToEnd();\n      return ret(\"error\", \"error\");\n    } else if (isOperatorChar.test(ch)) {\n      if (ch != \">\" || !state.lexical || state.lexical.type != \">\")\n        stream.eatWhile(isOperatorChar);\n      return ret(\"operator\", \"operator\", stream.current());\n    } else if (wordRE.test(ch)) {\n      stream.eatWhile(wordRE);\n      var word = stream.current()\n      if (state.lastType != \".\") {\n        if (keywords.propertyIsEnumerable(word)) {\n          var kw = keywords[word]\n          return ret(kw.type, kw.style, word)\n        }\n        if (word == \"async\" && stream.match(/^\\s*[\\(\\w]/, false))\n          return ret(\"async\", \"keyword\", word)\n      }\n      return ret(\"variable\", \"variable\", word)\n    }\n  }\n\n  function tokenString(quote) {\n    return function(stream, state) {\n      var escaped = false, next;\n      if (jsonldMode && stream.peek() == \"@\" && stream.match(isJsonldKeyword)){\n        state.tokenize = tokenBase;\n        return ret(\"jsonld-keyword\", \"meta\");\n      }\n      while ((next = stream.next()) != null) {\n        if (next == quote && !escaped) break;\n        escaped = !escaped && next == \"\\\\\";\n      }\n      if (!escaped) state.tokenize = tokenBase;\n      return ret(\"string\", \"string\");\n    };\n  }\n\n  function tokenComment(stream, state) {\n    var maybeEnd = false, ch;\n    while (ch = stream.next()) {\n      if (ch == \"/\" && maybeEnd) {\n        state.tokenize = tokenBase;\n        break;\n      }\n      maybeEnd = (ch == \"*\");\n    }\n    return ret(\"comment\", \"comment\");\n  }\n\n  function tokenQuasi(stream, state) {\n    var escaped = false, next;\n    while ((next = stream.next()) != null) {\n      if (!escaped && (next == \"`\" || next == \"$\" && stream.eat(\"{\"))) {\n        state.tokenize = tokenBase;\n        break;\n      }\n      escaped = !escaped && next == \"\\\\\";\n    }\n    return ret(\"quasi\", \"string-2\", stream.current());\n  }\n\n  var brackets = \"([{}])\";\n  // This is a crude lookahead trick to try and notice that we're\n  // parsing the argument patterns for a fat-arrow function before we\n  // actually hit the arrow token. It only works if the arrow is on\n  // the same line as the arguments and there's no strange noise\n  // (comments) in between. Fallback is to only notice when we hit the\n  // arrow, and not declare the arguments as locals for the arrow\n  // body.\n  function findFatArrow(stream, state) {\n    if (state.fatArrowAt) state.fatArrowAt = null;\n    var arrow = stream.string.indexOf(\"=>\", stream.start);\n    if (arrow < 0) return;\n\n    if (isTS) { // Try to skip TypeScript return type declarations after the arguments\n      var m = /:\\s*(?:\\w+(?:<[^>]*>|\\[\\])?|\\{[^}]*\\})\\s*$/.exec(stream.string.slice(stream.start, arrow))\n      if (m) arrow = m.index\n    }\n\n    var depth = 0, sawSomething = false;\n    for (var pos = arrow - 1; pos >= 0; --pos) {\n      var ch = stream.string.charAt(pos);\n      var bracket = brackets.indexOf(ch);\n      if (bracket >= 0 && bracket < 3) {\n        if (!depth) { ++pos; break; }\n        if (--depth == 0) { if (ch == \"(\") sawSomething = true; break; }\n      } else if (bracket >= 3 && bracket < 6) {\n        ++depth;\n      } else if (wordRE.test(ch)) {\n        sawSomething = true;\n      } else if (/[\"'\\/]/.test(ch)) {\n        return;\n      } else if (sawSomething && !depth) {\n        ++pos;\n        break;\n      }\n    }\n    if (sawSomething && !depth) state.fatArrowAt = pos;\n  }\n\n  // Parser\n\n  var atomicTypes = {\"atom\": true, \"number\": true, \"variable\": true, \"string\": true, \"regexp\": true, \"this\": true, \"jsonld-keyword\": true};\n\n  function JSLexical(indented, column, type, align, prev, info) {\n    this.indented = indented;\n    this.column = column;\n    this.type = type;\n    this.prev = prev;\n    this.info = info;\n    if (align != null) this.align = align;\n  }\n\n  function inScope(state, varname) {\n    for (var v = state.localVars; v; v = v.next)\n      if (v.name == varname) return true;\n    for (var cx = state.context; cx; cx = cx.prev) {\n      for (var v = cx.vars; v; v = v.next)\n        if (v.name == varname) return true;\n    }\n  }\n\n  function parseJS(state, style, type, content, stream) {\n    var cc = state.cc;\n    // Communicate our context to the combinators.\n    // (Less wasteful than consing up a hundred closures on every call.)\n    cx.state = state; cx.stream = stream; cx.marked = null, cx.cc = cc; cx.style = style;\n\n    if (!state.lexical.hasOwnProperty(\"align\"))\n      state.lexical.align = true;\n\n    while(true) {\n      var combinator = cc.length ? cc.pop() : jsonMode ? expression : statement;\n      if (combinator(type, content)) {\n        while(cc.length && cc[cc.length - 1].lex)\n          cc.pop()();\n        if (cx.marked) return cx.marked;\n        if (type == \"variable\" && inScope(state, content)) return \"variable-2\";\n        return style;\n      }\n    }\n  }\n\n  // Combinator utils\n\n  var cx = {state: null, column: null, marked: null, cc: null};\n  function pass() {\n    for (var i = arguments.length - 1; i >= 0; i--) cx.cc.push(arguments[i]);\n  }\n  function cont() {\n    pass.apply(null, arguments);\n    return true;\n  }\n  function register(varname) {\n    function inList(list) {\n      for (var v = list; v; v = v.next)\n        if (v.name == varname) return true;\n      return false;\n    }\n    var state = cx.state;\n    cx.marked = \"def\";\n    if (state.context) {\n      if (inList(state.localVars)) return;\n      state.localVars = {name: varname, next: state.localVars};\n    } else {\n      if (inList(state.globalVars)) return;\n      if (parserConfig.globalVars)\n        state.globalVars = {name: varname, next: state.globalVars};\n    }\n  }\n\n  // Combinators\n\n  var defaultVars = {name: \"this\", next: {name: \"arguments\"}};\n  function pushcontext() {\n    cx.state.context = {prev: cx.state.context, vars: cx.state.localVars};\n    cx.state.localVars = defaultVars;\n  }\n  function popcontext() {\n    cx.state.localVars = cx.state.context.vars;\n    cx.state.context = cx.state.context.prev;\n  }\n  function pushlex(type, info) {\n    var result = function() {\n      var state = cx.state, indent = state.indented;\n      if (state.lexical.type == \"stat\") indent = state.lexical.indented;\n      else for (var outer = state.lexical; outer && outer.type == \")\" && outer.align; outer = outer.prev)\n        indent = outer.indented;\n      state.lexical = new JSLexical(indent, cx.stream.column(), type, null, state.lexical, info);\n    };\n    result.lex = true;\n    return result;\n  }\n  function poplex() {\n    var state = cx.state;\n    if (state.lexical.prev) {\n      if (state.lexical.type == \")\")\n        state.indented = state.lexical.indented;\n      state.lexical = state.lexical.prev;\n    }\n  }\n  poplex.lex = true;\n\n  function expect(wanted) {\n    function exp(type) {\n      if (type == wanted) return cont();\n      else if (wanted == \";\") return pass();\n      else return cont(exp);\n    };\n    return exp;\n  }\n\n  function statement(type, value) {\n    if (type == \"var\") return cont(pushlex(\"vardef\", value.length), vardef, expect(\";\"), poplex);\n    if (type == \"keyword a\") return cont(pushlex(\"form\"), parenExpr, statement, poplex);\n    if (type == \"keyword b\") return cont(pushlex(\"form\"), statement, poplex);\n    if (type == \"{\") return cont(pushlex(\"}\"), block, poplex);\n    if (type == \";\") return cont();\n    if (type == \"if\") {\n      if (cx.state.lexical.info == \"else\" && cx.state.cc[cx.state.cc.length - 1] == poplex)\n        cx.state.cc.pop()();\n      return cont(pushlex(\"form\"), parenExpr, statement, poplex, maybeelse);\n    }\n    if (type == \"function\") return cont(functiondef);\n    if (type == \"for\") return cont(pushlex(\"form\"), forspec, statement, poplex);\n    if (type == \"variable\") {\n      if (isTS && value == \"type\") {\n        cx.marked = \"keyword\"\n        return cont(typeexpr, expect(\"operator\"), typeexpr, expect(\";\"));\n      } if (isTS && value == \"declare\") {\n        cx.marked = \"keyword\"\n        return cont(statement)\n      } else {\n        return cont(pushlex(\"stat\"), maybelabel);\n      }\n    }\n    if (type == \"switch\") return cont(pushlex(\"form\"), parenExpr, expect(\"{\"), pushlex(\"}\", \"switch\"),\n                                      block, poplex, poplex);\n    if (type == \"case\") return cont(expression, expect(\":\"));\n    if (type == \"default\") return cont(expect(\":\"));\n    if (type == \"catch\") return cont(pushlex(\"form\"), pushcontext, expect(\"(\"), funarg, expect(\")\"),\n                                     statement, poplex, popcontext);\n    if (type == \"class\") return cont(pushlex(\"form\"), className, poplex);\n    if (type == \"export\") return cont(pushlex(\"stat\"), afterExport, poplex);\n    if (type == \"import\") return cont(pushlex(\"stat\"), afterImport, poplex);\n    if (type == \"module\") return cont(pushlex(\"form\"), pattern, expect(\"{\"), pushlex(\"}\"), block, poplex, poplex)\n    if (type == \"async\") return cont(statement)\n    if (value == \"@\") return cont(expression, statement)\n    return pass(pushlex(\"stat\"), expression, expect(\";\"), poplex);\n  }\n  function expression(type) {\n    return expressionInner(type, false);\n  }\n  function expressionNoComma(type) {\n    return expressionInner(type, true);\n  }\n  function parenExpr(type) {\n    if (type != \"(\") return pass()\n    return cont(pushlex(\")\"), expression, expect(\")\"), poplex)\n  }\n  function expressionInner(type, noComma) {\n    if (cx.state.fatArrowAt == cx.stream.start) {\n      var body = noComma ? arrowBodyNoComma : arrowBody;\n      if (type == \"(\") return cont(pushcontext, pushlex(\")\"), commasep(pattern, \")\"), poplex, expect(\"=>\"), body, popcontext);\n      else if (type == \"variable\") return pass(pushcontext, pattern, expect(\"=>\"), body, popcontext);\n    }\n\n    var maybeop = noComma ? maybeoperatorNoComma : maybeoperatorComma;\n    if (atomicTypes.hasOwnProperty(type)) return cont(maybeop);\n    if (type == \"function\") return cont(functiondef, maybeop);\n    if (type == \"class\") return cont(pushlex(\"form\"), classExpression, poplex);\n    if (type == \"keyword c\" || type == \"async\") return cont(noComma ? maybeexpressionNoComma : maybeexpression);\n    if (type == \"(\") return cont(pushlex(\")\"), maybeexpression, expect(\")\"), poplex, maybeop);\n    if (type == \"operator\" || type == \"spread\") return cont(noComma ? expressionNoComma : expression);\n    if (type == \"[\") return cont(pushlex(\"]\"), arrayLiteral, poplex, maybeop);\n    if (type == \"{\") return contCommasep(objprop, \"}\", null, maybeop);\n    if (type == \"quasi\") return pass(quasi, maybeop);\n    if (type == \"new\") return cont(maybeTarget(noComma));\n    return cont();\n  }\n  function maybeexpression(type) {\n    if (type.match(/[;\\}\\)\\],]/)) return pass();\n    return pass(expression);\n  }\n  function maybeexpressionNoComma(type) {\n    if (type.match(/[;\\}\\)\\],]/)) return pass();\n    return pass(expressionNoComma);\n  }\n\n  function maybeoperatorComma(type, value) {\n    if (type == \",\") return cont(expression);\n    return maybeoperatorNoComma(type, value, false);\n  }\n  function maybeoperatorNoComma(type, value, noComma) {\n    var me = noComma == false ? maybeoperatorComma : maybeoperatorNoComma;\n    var expr = noComma == false ? expression : expressionNoComma;\n    if (type == \"=>\") return cont(pushcontext, noComma ? arrowBodyNoComma : arrowBody, popcontext);\n    if (type == \"operator\") {\n      if (/\\+\\+|--/.test(value) || isTS && value == \"!\") return cont(me);\n      if (value == \"?\") return cont(expression, expect(\":\"), expr);\n      return cont(expr);\n    }\n    if (type == \"quasi\") { return pass(quasi, me); }\n    if (type == \";\") return;\n    if (type == \"(\") return contCommasep(expressionNoComma, \")\", \"call\", me);\n    if (type == \".\") return cont(property, me);\n    if (type == \"[\") return cont(pushlex(\"]\"), maybeexpression, expect(\"]\"), poplex, me);\n    if (isTS && value == \"as\") { cx.marked = \"keyword\"; return cont(typeexpr, me) }\n  }\n  function quasi(type, value) {\n    if (type != \"quasi\") return pass();\n    if (value.slice(value.length - 2) != \"${\") return cont(quasi);\n    return cont(expression, continueQuasi);\n  }\n  function continueQuasi(type) {\n    if (type == \"}\") {\n      cx.marked = \"string-2\";\n      cx.state.tokenize = tokenQuasi;\n      return cont(quasi);\n    }\n  }\n  function arrowBody(type) {\n    findFatArrow(cx.stream, cx.state);\n    return pass(type == \"{\" ? statement : expression);\n  }\n  function arrowBodyNoComma(type) {\n    findFatArrow(cx.stream, cx.state);\n    return pass(type == \"{\" ? statement : expressionNoComma);\n  }\n  function maybeTarget(noComma) {\n    return function(type) {\n      if (type == \".\") return cont(noComma ? targetNoComma : target);\n      else if (type == \"variable\" && isTS) return cont(maybeTypeArgs, noComma ? maybeoperatorNoComma : maybeoperatorComma)\n      else return pass(noComma ? expressionNoComma : expression);\n    };\n  }\n  function target(_, value) {\n    if (value == \"target\") { cx.marked = \"keyword\"; return cont(maybeoperatorComma); }\n  }\n  function targetNoComma(_, value) {\n    if (value == \"target\") { cx.marked = \"keyword\"; return cont(maybeoperatorNoComma); }\n  }\n  function maybelabel(type) {\n    if (type == \":\") return cont(poplex, statement);\n    return pass(maybeoperatorComma, expect(\";\"), poplex);\n  }\n  function property(type) {\n    if (type == \"variable\") {cx.marked = \"property\"; return cont();}\n  }\n  function objprop(type, value) {\n    if (type == \"async\") {\n      cx.marked = \"property\";\n      return cont(objprop);\n    } else if (type == \"variable\" || cx.style == \"keyword\") {\n      cx.marked = \"property\";\n      if (value == \"get\" || value == \"set\") return cont(getterSetter);\n      return cont(afterprop);\n    } else if (type == \"number\" || type == \"string\") {\n      cx.marked = jsonldMode ? \"property\" : (cx.style + \" property\");\n      return cont(afterprop);\n    } else if (type == \"jsonld-keyword\") {\n      return cont(afterprop);\n    } else if (type == \"modifier\") {\n      return cont(objprop)\n    } else if (type == \"[\") {\n      return cont(expression, expect(\"]\"), afterprop);\n    } else if (type == \"spread\") {\n      return cont(expression, afterprop);\n    } else if (type == \":\") {\n      return pass(afterprop)\n    }\n  }\n  function getterSetter(type) {\n    if (type != \"variable\") return pass(afterprop);\n    cx.marked = \"property\";\n    return cont(functiondef);\n  }\n  function afterprop(type) {\n    if (type == \":\") return cont(expressionNoComma);\n    if (type == \"(\") return pass(functiondef);\n  }\n  function commasep(what, end, sep) {\n    function proceed(type, value) {\n      if (sep ? sep.indexOf(type) > -1 : type == \",\") {\n        var lex = cx.state.lexical;\n        if (lex.info == \"call\") lex.pos = (lex.pos || 0) + 1;\n        return cont(function(type, value) {\n          if (type == end || value == end) return pass()\n          return pass(what)\n        }, proceed);\n      }\n      if (type == end || value == end) return cont();\n      return cont(expect(end));\n    }\n    return function(type, value) {\n      if (type == end || value == end) return cont();\n      return pass(what, proceed);\n    };\n  }\n  function contCommasep(what, end, info) {\n    for (var i = 3; i < arguments.length; i++)\n      cx.cc.push(arguments[i]);\n    return cont(pushlex(end, info), commasep(what, end), poplex);\n  }\n  function block(type) {\n    if (type == \"}\") return cont();\n    return pass(statement, block);\n  }\n  function maybetype(type, value) {\n    if (isTS) {\n      if (type == \":\") return cont(typeexpr);\n      if (value == \"?\") return cont(maybetype);\n    }\n  }\n  function typeexpr(type, value) {\n    if (type == \"variable\") {\n      if (value == \"keyof\") {\n        cx.marked = \"keyword\"\n        return cont(typeexpr)\n      } else {\n        cx.marked = \"type\"\n        return cont(afterType)\n      }\n    }\n    if (type == \"string\" || type == \"number\" || type == \"atom\") return cont(afterType);\n    if (type == \"[\") return cont(pushlex(\"]\"), commasep(typeexpr, \"]\", \",\"), poplex, afterType)\n    if (type == \"{\") return cont(pushlex(\"}\"), commasep(typeprop, \"}\", \",;\"), poplex, afterType)\n    if (type == \"(\") return cont(commasep(typearg, \")\"), maybeReturnType)\n  }\n  function maybeReturnType(type) {\n    if (type == \"=>\") return cont(typeexpr)\n  }\n  function typeprop(type, value) {\n    if (type == \"variable\" || cx.style == \"keyword\") {\n      cx.marked = \"property\"\n      return cont(typeprop)\n    } else if (value == \"?\") {\n      return cont(typeprop)\n    } else if (type == \":\") {\n      return cont(typeexpr)\n    } else if (type == \"[\") {\n      return cont(expression, maybetype, expect(\"]\"), typeprop)\n    }\n  }\n  function typearg(type) {\n    if (type == \"variable\") return cont(typearg)\n    else if (type == \":\") return cont(typeexpr)\n  }\n  function afterType(type, value) {\n    if (value == \"<\") return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, afterType)\n    if (value == \"|\" || type == \".\") return cont(typeexpr)\n    if (type == \"[\") return cont(expect(\"]\"), afterType)\n    if (value == \"extends\") return cont(typeexpr)\n  }\n  function maybeTypeArgs(_, value) {\n    if (value == \"<\") return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, afterType)\n  }\n  function vardef() {\n    return pass(pattern, maybetype, maybeAssign, vardefCont);\n  }\n  function pattern(type, value) {\n    if (type == \"modifier\") return cont(pattern)\n    if (type == \"variable\") { register(value); return cont(); }\n    if (type == \"spread\") return cont(pattern);\n    if (type == \"[\") return contCommasep(pattern, \"]\");\n    if (type == \"{\") return contCommasep(proppattern, \"}\");\n  }\n  function proppattern(type, value) {\n    if (type == \"variable\" && !cx.stream.match(/^\\s*:/, false)) {\n      register(value);\n      return cont(maybeAssign);\n    }\n    if (type == \"variable\") cx.marked = \"property\";\n    if (type == \"spread\") return cont(pattern);\n    if (type == \"}\") return pass();\n    return cont(expect(\":\"), pattern, maybeAssign);\n  }\n  function maybeAssign(_type, value) {\n    if (value == \"=\") return cont(expressionNoComma);\n  }\n  function vardefCont(type) {\n    if (type == \",\") return cont(vardef);\n  }\n  function maybeelse(type, value) {\n    if (type == \"keyword b\" && value == \"else\") return cont(pushlex(\"form\", \"else\"), statement, poplex);\n  }\n  function forspec(type) {\n    if (type == \"(\") return cont(pushlex(\")\"), forspec1, expect(\")\"), poplex);\n  }\n  function forspec1(type) {\n    if (type == \"var\") return cont(vardef, expect(\";\"), forspec2);\n    if (type == \";\") return cont(forspec2);\n    if (type == \"variable\") return cont(formaybeinof);\n    return pass(expression, expect(\";\"), forspec2);\n  }\n  function formaybeinof(_type, value) {\n    if (value == \"in\" || value == \"of\") { cx.marked = \"keyword\"; return cont(expression); }\n    return cont(maybeoperatorComma, forspec2);\n  }\n  function forspec2(type, value) {\n    if (type == \";\") return cont(forspec3);\n    if (value == \"in\" || value == \"of\") { cx.marked = \"keyword\"; return cont(expression); }\n    return pass(expression, expect(\";\"), forspec3);\n  }\n  function forspec3(type) {\n    if (type != \")\") cont(expression);\n  }\n  function functiondef(type, value) {\n    if (value == \"*\") {cx.marked = \"keyword\"; return cont(functiondef);}\n    if (type == \"variable\") {register(value); return cont(functiondef);}\n    if (type == \"(\") return cont(pushcontext, pushlex(\")\"), commasep(funarg, \")\"), poplex, maybetype, statement, popcontext);\n    if (isTS && value == \"<\") return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, functiondef)\n  }\n  function funarg(type) {\n    if (type == \"spread\" || type == \"modifier\") return cont(funarg);\n    return pass(pattern, maybetype, maybeAssign);\n  }\n  function classExpression(type, value) {\n    // Class expressions may have an optional name.\n    if (type == \"variable\") return className(type, value);\n    return classNameAfter(type, value);\n  }\n  function className(type, value) {\n    if (type == \"variable\") {register(value); return cont(classNameAfter);}\n  }\n  function classNameAfter(type, value) {\n    if (value == \"<\") return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, classNameAfter)\n    if (value == \"extends\" || value == \"implements\" || (isTS && type == \",\"))\n      return cont(isTS ? typeexpr : expression, classNameAfter);\n    if (type == \"{\") return cont(pushlex(\"}\"), classBody, poplex);\n  }\n  function classBody(type, value) {\n    if (type == \"modifier\" || type == \"async\" ||\n        (type == \"variable\" &&\n         (value == \"static\" || value == \"get\" || value == \"set\") &&\n         cx.stream.match(/^\\s+[\\w$\\xa1-\\uffff]/, false))) {\n      cx.marked = \"keyword\";\n      return cont(classBody);\n    }\n    if (type == \"variable\") {\n      cx.marked = \"property\";\n      return cont(isTS ? classfield : functiondef, classBody);\n    }\n    if (type == \"[\")\n      return cont(expression, expect(\"]\"), isTS ? classfield : functiondef, classBody)\n    if (value == \"*\") {\n      cx.marked = \"keyword\";\n      return cont(classBody);\n    }\n    if (type == \";\") return cont(classBody);\n    if (type == \"}\") return cont();\n    if (value == \"@\") return cont(expression, classBody)\n  }\n  function classfield(type, value) {\n    if (value == \"?\") return cont(classfield)\n    if (type == \":\") return cont(typeexpr, maybeAssign)\n    if (value == \"=\") return cont(expressionNoComma)\n    return pass(functiondef)\n  }\n  function afterExport(type, value) {\n    if (value == \"*\") { cx.marked = \"keyword\"; return cont(maybeFrom, expect(\";\")); }\n    if (value == \"default\") { cx.marked = \"keyword\"; return cont(expression, expect(\";\")); }\n    if (type == \"{\") return cont(commasep(exportField, \"}\"), maybeFrom, expect(\";\"));\n    return pass(statement);\n  }\n  function exportField(type, value) {\n    if (value == \"as\") { cx.marked = \"keyword\"; return cont(expect(\"variable\")); }\n    if (type == \"variable\") return pass(expressionNoComma, exportField);\n  }\n  function afterImport(type) {\n    if (type == \"string\") return cont();\n    return pass(importSpec, maybeMoreImports, maybeFrom);\n  }\n  function importSpec(type, value) {\n    if (type == \"{\") return contCommasep(importSpec, \"}\");\n    if (type == \"variable\") register(value);\n    if (value == \"*\") cx.marked = \"keyword\";\n    return cont(maybeAs);\n  }\n  function maybeMoreImports(type) {\n    if (type == \",\") return cont(importSpec, maybeMoreImports)\n  }\n  function maybeAs(_type, value) {\n    if (value == \"as\") { cx.marked = \"keyword\"; return cont(importSpec); }\n  }\n  function maybeFrom(_type, value) {\n    if (value == \"from\") { cx.marked = \"keyword\"; return cont(expression); }\n  }\n  function arrayLiteral(type) {\n    if (type == \"]\") return cont();\n    return pass(commasep(expressionNoComma, \"]\"));\n  }\n\n  function isContinuedStatement(state, textAfter) {\n    return state.lastType == \"operator\" || state.lastType == \",\" ||\n      isOperatorChar.test(textAfter.charAt(0)) ||\n      /[,.]/.test(textAfter.charAt(0));\n  }\n\n  function expressionAllowed(stream, state, backUp) {\n    return state.tokenize == tokenBase &&\n      /^(?:operator|sof|keyword c|case|new|export|default|[\\[{}\\(,;:]|=>)$/.test(state.lastType) ||\n      (state.lastType == \"quasi\" && /\\{\\s*$/.test(stream.string.slice(0, stream.pos - (backUp || 0))))\n  }\n\n  // Interface\n\n  return {\n    startState: function(basecolumn) {\n      var state = {\n        tokenize: tokenBase,\n        lastType: \"sof\",\n        cc: [],\n        lexical: new JSLexical((basecolumn || 0) - indentUnit, 0, \"block\", false),\n        localVars: parserConfig.localVars,\n        context: parserConfig.localVars && {vars: parserConfig.localVars},\n        indented: basecolumn || 0\n      };\n      if (parserConfig.globalVars && typeof parserConfig.globalVars == \"object\")\n        state.globalVars = parserConfig.globalVars;\n      return state;\n    },\n\n    token: function(stream, state) {\n      if (stream.sol()) {\n        if (!state.lexical.hasOwnProperty(\"align\"))\n          state.lexical.align = false;\n        state.indented = stream.indentation();\n        findFatArrow(stream, state);\n      }\n      if (state.tokenize != tokenComment && stream.eatSpace()) return null;\n      var style = state.tokenize(stream, state);\n      if (type == \"comment\") return style;\n      state.lastType = type == \"operator\" && (content == \"++\" || content == \"--\") ? \"incdec\" : type;\n      return parseJS(state, style, type, content, stream);\n    },\n\n    indent: function(state, textAfter) {\n      if (state.tokenize == tokenComment) return CodeMirror.Pass;\n      if (state.tokenize != tokenBase) return 0;\n      var firstChar = textAfter && textAfter.charAt(0), lexical = state.lexical, top\n      // Kludge to prevent 'maybelse' from blocking lexical scope pops\n      if (!/^\\s*else\\b/.test(textAfter)) for (var i = state.cc.length - 1; i >= 0; --i) {\n        var c = state.cc[i];\n        if (c == poplex) lexical = lexical.prev;\n        else if (c != maybeelse) break;\n      }\n      while ((lexical.type == \"stat\" || lexical.type == \"form\") &&\n             (firstChar == \"}\" || ((top = state.cc[state.cc.length - 1]) &&\n                                   (top == maybeoperatorComma || top == maybeoperatorNoComma) &&\n                                   !/^[,\\.=+\\-*:?[\\(]/.test(textAfter))))\n        lexical = lexical.prev;\n      if (statementIndent && lexical.type == \")\" && lexical.prev.type == \"stat\")\n        lexical = lexical.prev;\n      var type = lexical.type, closing = firstChar == type;\n\n      if (type == \"vardef\") return lexical.indented + (state.lastType == \"operator\" || state.lastType == \",\" ? lexical.info + 1 : 0);\n      else if (type == \"form\" && firstChar == \"{\") return lexical.indented;\n      else if (type == \"form\") return lexical.indented + indentUnit;\n      else if (type == \"stat\")\n        return lexical.indented + (isContinuedStatement(state, textAfter) ? statementIndent || indentUnit : 0);\n      else if (lexical.info == \"switch\" && !closing && parserConfig.doubleIndentSwitch != false)\n        return lexical.indented + (/^(?:case|default)\\b/.test(textAfter) ? indentUnit : 2 * indentUnit);\n      else if (lexical.align) return lexical.column + (closing ? 0 : 1);\n      else return lexical.indented + (closing ? 0 : indentUnit);\n    },\n\n    electricInput: /^\\s*(?:case .*?:|default:|\\{|\\})$/,\n    blockCommentStart: jsonMode ? null : \"/*\",\n    blockCommentEnd: jsonMode ? null : \"*/\",\n    lineComment: jsonMode ? null : \"//\",\n    fold: \"brace\",\n    closeBrackets: \"()[]{}''\\\"\\\"``\",\n\n    helperType: jsonMode ? \"json\" : \"javascript\",\n    jsonldMode: jsonldMode,\n    jsonMode: jsonMode,\n\n    expressionAllowed: expressionAllowed,\n\n    skipExpression: function(state) {\n      var top = state.cc[state.cc.length - 1]\n      if (top == expression || top == expressionNoComma) state.cc.pop()\n    }\n  };\n});\n\nCodeMirror.registerHelper(\"wordChars\", \"javascript\", /[\\w$]/);\n\nCodeMirror.defineMIME(\"text/javascript\", \"javascript\");\nCodeMirror.defineMIME(\"text/ecmascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/javascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/x-javascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/ecmascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/json\", {name: \"javascript\", json: true});\nCodeMirror.defineMIME(\"application/x-json\", {name: \"javascript\", json: true});\nCodeMirror.defineMIME(\"application/ld+json\", {name: \"javascript\", jsonld: true});\nCodeMirror.defineMIME(\"text/typescript\", { name: \"javascript\", typescript: true });\nCodeMirror.defineMIME(\"application/typescript\", { name: \"javascript\", typescript: true });\n\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.defineMode(\"css\", function(config, parserConfig) {\n  var inline = parserConfig.inline\n  if (!parserConfig.propertyKeywords) parserConfig = CodeMirror.resolveMode(\"text/css\");\n\n  var indentUnit = config.indentUnit,\n      tokenHooks = parserConfig.tokenHooks,\n      documentTypes = parserConfig.documentTypes || {},\n      mediaTypes = parserConfig.mediaTypes || {},\n      mediaFeatures = parserConfig.mediaFeatures || {},\n      mediaValueKeywords = parserConfig.mediaValueKeywords || {},\n      propertyKeywords = parserConfig.propertyKeywords || {},\n      nonStandardPropertyKeywords = parserConfig.nonStandardPropertyKeywords || {},\n      fontProperties = parserConfig.fontProperties || {},\n      counterDescriptors = parserConfig.counterDescriptors || {},\n      colorKeywords = parserConfig.colorKeywords || {},\n      valueKeywords = parserConfig.valueKeywords || {},\n      allowNested = parserConfig.allowNested,\n      lineComment = parserConfig.lineComment,\n      supportsAtComponent = parserConfig.supportsAtComponent === true;\n\n  var type, override;\n  function ret(style, tp) { type = tp; return style; }\n\n  // Tokenizers\n\n  function tokenBase(stream, state) {\n    var ch = stream.next();\n    if (tokenHooks[ch]) {\n      var result = tokenHooks[ch](stream, state);\n      if (result !== false) return result;\n    }\n    if (ch == \"@\") {\n      stream.eatWhile(/[\\w\\\\\\-]/);\n      return ret(\"def\", stream.current());\n    } else if (ch == \"=\" || (ch == \"~\" || ch == \"|\") && stream.eat(\"=\")) {\n      return ret(null, \"compare\");\n    } else if (ch == \"\\\"\" || ch == \"'\") {\n      state.tokenize = tokenString(ch);\n      return state.tokenize(stream, state);\n    } else if (ch == \"#\") {\n      stream.eatWhile(/[\\w\\\\\\-]/);\n      return ret(\"atom\", \"hash\");\n    } else if (ch == \"!\") {\n      stream.match(/^\\s*\\w*/);\n      return ret(\"keyword\", \"important\");\n    } else if (/\\d/.test(ch) || ch == \".\" && stream.eat(/\\d/)) {\n      stream.eatWhile(/[\\w.%]/);\n      return ret(\"number\", \"unit\");\n    } else if (ch === \"-\") {\n      if (/[\\d.]/.test(stream.peek())) {\n        stream.eatWhile(/[\\w.%]/);\n        return ret(\"number\", \"unit\");\n      } else if (stream.match(/^-[\\w\\\\\\-]+/)) {\n        stream.eatWhile(/[\\w\\\\\\-]/);\n        if (stream.match(/^\\s*:/, false))\n          return ret(\"variable-2\", \"variable-definition\");\n        return ret(\"variable-2\", \"variable\");\n      } else if (stream.match(/^\\w+-/)) {\n        return ret(\"meta\", \"meta\");\n      }\n    } else if (/[,+>*\\/]/.test(ch)) {\n      return ret(null, \"select-op\");\n    } else if (ch == \".\" && stream.match(/^-?[_a-z][_a-z0-9-]*/i)) {\n      return ret(\"qualifier\", \"qualifier\");\n    } else if (/[:;{}\\[\\]\\(\\)]/.test(ch)) {\n      return ret(null, ch);\n    } else if ((ch == \"u\" && stream.match(/rl(-prefix)?\\(/)) ||\n               (ch == \"d\" && stream.match(\"omain(\")) ||\n               (ch == \"r\" && stream.match(\"egexp(\"))) {\n      stream.backUp(1);\n      state.tokenize = tokenParenthesized;\n      return ret(\"property\", \"word\");\n    } else if (/[\\w\\\\\\-]/.test(ch)) {\n      stream.eatWhile(/[\\w\\\\\\-]/);\n      return ret(\"property\", \"word\");\n    } else {\n      return ret(null, null);\n    }\n  }\n\n  function tokenString(quote) {\n    return function(stream, state) {\n      var escaped = false, ch;\n      while ((ch = stream.next()) != null) {\n        if (ch == quote && !escaped) {\n          if (quote == \")\") stream.backUp(1);\n          break;\n        }\n        escaped = !escaped && ch == \"\\\\\";\n      }\n      if (ch == quote || !escaped && quote != \")\") state.tokenize = null;\n      return ret(\"string\", \"string\");\n    };\n  }\n\n  function tokenParenthesized(stream, state) {\n    stream.next(); // Must be '('\n    if (!stream.match(/\\s*[\\\"\\')]/, false))\n      state.tokenize = tokenString(\")\");\n    else\n      state.tokenize = null;\n    return ret(null, \"(\");\n  }\n\n  // Context management\n\n  function Context(type, indent, prev) {\n    this.type = type;\n    this.indent = indent;\n    this.prev = prev;\n  }\n\n  function pushContext(state, stream, type, indent) {\n    state.context = new Context(type, stream.indentation() + (indent === false ? 0 : indentUnit), state.context);\n    return type;\n  }\n\n  function popContext(state) {\n    if (state.context.prev)\n      state.context = state.context.prev;\n    return state.context.type;\n  }\n\n  function pass(type, stream, state) {\n    return states[state.context.type](type, stream, state);\n  }\n  function popAndPass(type, stream, state, n) {\n    for (var i = n || 1; i > 0; i--)\n      state.context = state.context.prev;\n    return pass(type, stream, state);\n  }\n\n  // Parser\n\n  function wordAsValue(stream) {\n    var word = stream.current().toLowerCase();\n    if (valueKeywords.hasOwnProperty(word))\n      override = \"atom\";\n    else if (colorKeywords.hasOwnProperty(word))\n      override = \"keyword\";\n    else\n      override = \"variable\";\n  }\n\n  var states = {};\n\n  states.top = function(type, stream, state) {\n    if (type == \"{\") {\n      return pushContext(state, stream, \"block\");\n    } else if (type == \"}\" && state.context.prev) {\n      return popContext(state);\n    } else if (supportsAtComponent && /@component/.test(type)) {\n      return pushContext(state, stream, \"atComponentBlock\");\n    } else if (/^@(-moz-)?document$/.test(type)) {\n      return pushContext(state, stream, \"documentTypes\");\n    } else if (/^@(media|supports|(-moz-)?document|import)$/.test(type)) {\n      return pushContext(state, stream, \"atBlock\");\n    } else if (/^@(font-face|counter-style)/.test(type)) {\n      state.stateArg = type;\n      return \"restricted_atBlock_before\";\n    } else if (/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(type)) {\n      return \"keyframes\";\n    } else if (type && type.charAt(0) == \"@\") {\n      return pushContext(state, stream, \"at\");\n    } else if (type == \"hash\") {\n      override = \"builtin\";\n    } else if (type == \"word\") {\n      override = \"tag\";\n    } else if (type == \"variable-definition\") {\n      return \"maybeprop\";\n    } else if (type == \"interpolation\") {\n      return pushContext(state, stream, \"interpolation\");\n    } else if (type == \":\") {\n      return \"pseudo\";\n    } else if (allowNested && type == \"(\") {\n      return pushContext(state, stream, \"parens\");\n    }\n    return state.context.type;\n  };\n\n  states.block = function(type, stream, state) {\n    if (type == \"word\") {\n      var word = stream.current().toLowerCase();\n      if (propertyKeywords.hasOwnProperty(word)) {\n        override = \"property\";\n        return \"maybeprop\";\n      } else if (nonStandardPropertyKeywords.hasOwnProperty(word)) {\n        override = \"string-2\";\n        return \"maybeprop\";\n      } else if (allowNested) {\n        override = stream.match(/^\\s*:(?:\\s|$)/, false) ? \"property\" : \"tag\";\n        return \"block\";\n      } else {\n        override += \" error\";\n        return \"maybeprop\";\n      }\n    } else if (type == \"meta\") {\n      return \"block\";\n    } else if (!allowNested && (type == \"hash\" || type == \"qualifier\")) {\n      override = \"error\";\n      return \"block\";\n    } else {\n      return states.top(type, stream, state);\n    }\n  };\n\n  states.maybeprop = function(type, stream, state) {\n    if (type == \":\") return pushContext(state, stream, \"prop\");\n    return pass(type, stream, state);\n  };\n\n  states.prop = function(type, stream, state) {\n    if (type == \";\") return popContext(state);\n    if (type == \"{\" && allowNested) return pushContext(state, stream, \"propBlock\");\n    if (type == \"}\" || type == \"{\") return popAndPass(type, stream, state);\n    if (type == \"(\") return pushContext(state, stream, \"parens\");\n\n    if (type == \"hash\" && !/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(stream.current())) {\n      override += \" error\";\n    } else if (type == \"word\") {\n      wordAsValue(stream);\n    } else if (type == \"interpolation\") {\n      return pushContext(state, stream, \"interpolation\");\n    }\n    return \"prop\";\n  };\n\n  states.propBlock = function(type, _stream, state) {\n    if (type == \"}\") return popContext(state);\n    if (type == \"word\") { override = \"property\"; return \"maybeprop\"; }\n    return state.context.type;\n  };\n\n  states.parens = function(type, stream, state) {\n    if (type == \"{\" || type == \"}\") return popAndPass(type, stream, state);\n    if (type == \")\") return popContext(state);\n    if (type == \"(\") return pushContext(state, stream, \"parens\");\n    if (type == \"interpolation\") return pushContext(state, stream, \"interpolation\");\n    if (type == \"word\") wordAsValue(stream);\n    return \"parens\";\n  };\n\n  states.pseudo = function(type, stream, state) {\n    if (type == \"meta\") return \"pseudo\";\n\n    if (type == \"word\") {\n      override = \"variable-3\";\n      return state.context.type;\n    }\n    return pass(type, stream, state);\n  };\n\n  states.documentTypes = function(type, stream, state) {\n    if (type == \"word\" && documentTypes.hasOwnProperty(stream.current())) {\n      override = \"tag\";\n      return state.context.type;\n    } else {\n      return states.atBlock(type, stream, state);\n    }\n  };\n\n  states.atBlock = function(type, stream, state) {\n    if (type == \"(\") return pushContext(state, stream, \"atBlock_parens\");\n    if (type == \"}\" || type == \";\") return popAndPass(type, stream, state);\n    if (type == \"{\") return popContext(state) && pushContext(state, stream, allowNested ? \"block\" : \"top\");\n\n    if (type == \"interpolation\") return pushContext(state, stream, \"interpolation\");\n\n    if (type == \"word\") {\n      var word = stream.current().toLowerCase();\n      if (word == \"only\" || word == \"not\" || word == \"and\" || word == \"or\")\n        override = \"keyword\";\n      else if (mediaTypes.hasOwnProperty(word))\n        override = \"attribute\";\n      else if (mediaFeatures.hasOwnProperty(word))\n        override = \"property\";\n      else if (mediaValueKeywords.hasOwnProperty(word))\n        override = \"keyword\";\n      else if (propertyKeywords.hasOwnProperty(word))\n        override = \"property\";\n      else if (nonStandardPropertyKeywords.hasOwnProperty(word))\n        override = \"string-2\";\n      else if (valueKeywords.hasOwnProperty(word))\n        override = \"atom\";\n      else if (colorKeywords.hasOwnProperty(word))\n        override = \"keyword\";\n      else\n        override = \"error\";\n    }\n    return state.context.type;\n  };\n\n  states.atComponentBlock = function(type, stream, state) {\n    if (type == \"}\")\n      return popAndPass(type, stream, state);\n    if (type == \"{\")\n      return popContext(state) && pushContext(state, stream, allowNested ? \"block\" : \"top\", false);\n    if (type == \"word\")\n      override = \"error\";\n    return state.context.type;\n  };\n\n  states.atBlock_parens = function(type, stream, state) {\n    if (type == \")\") return popContext(state);\n    if (type == \"{\" || type == \"}\") return popAndPass(type, stream, state, 2);\n    return states.atBlock(type, stream, state);\n  };\n\n  states.restricted_atBlock_before = function(type, stream, state) {\n    if (type == \"{\")\n      return pushContext(state, stream, \"restricted_atBlock\");\n    if (type == \"word\" && state.stateArg == \"@counter-style\") {\n      override = \"variable\";\n      return \"restricted_atBlock_before\";\n    }\n    return pass(type, stream, state);\n  };\n\n  states.restricted_atBlock = function(type, stream, state) {\n    if (type == \"}\") {\n      state.stateArg = null;\n      return popContext(state);\n    }\n    if (type == \"word\") {\n      if ((state.stateArg == \"@font-face\" && !fontProperties.hasOwnProperty(stream.current().toLowerCase())) ||\n          (state.stateArg == \"@counter-style\" && !counterDescriptors.hasOwnProperty(stream.current().toLowerCase())))\n        override = \"error\";\n      else\n        override = \"property\";\n      return \"maybeprop\";\n    }\n    return \"restricted_atBlock\";\n  };\n\n  states.keyframes = function(type, stream, state) {\n    if (type == \"word\") { override = \"variable\"; return \"keyframes\"; }\n    if (type == \"{\") return pushContext(state, stream, \"top\");\n    return pass(type, stream, state);\n  };\n\n  states.at = function(type, stream, state) {\n    if (type == \";\") return popContext(state);\n    if (type == \"{\" || type == \"}\") return popAndPass(type, stream, state);\n    if (type == \"word\") override = \"tag\";\n    else if (type == \"hash\") override = \"builtin\";\n    return \"at\";\n  };\n\n  states.interpolation = function(type, stream, state) {\n    if (type == \"}\") return popContext(state);\n    if (type == \"{\" || type == \";\") return popAndPass(type, stream, state);\n    if (type == \"word\") override = \"variable\";\n    else if (type != \"variable\" && type != \"(\" && type != \")\") override = \"error\";\n    return \"interpolation\";\n  };\n\n  return {\n    startState: function(base) {\n      return {tokenize: null,\n              state: inline ? \"block\" : \"top\",\n              stateArg: null,\n              context: new Context(inline ? \"block\" : \"top\", base || 0, null)};\n    },\n\n    token: function(stream, state) {\n      if (!state.tokenize && stream.eatSpace()) return null;\n      var style = (state.tokenize || tokenBase)(stream, state);\n      if (style && typeof style == \"object\") {\n        type = style[1];\n        style = style[0];\n      }\n      override = style;\n      if (type != \"comment\")\n        state.state = states[state.state](type, stream, state);\n      return override;\n    },\n\n    indent: function(state, textAfter) {\n      var cx = state.context, ch = textAfter && textAfter.charAt(0);\n      var indent = cx.indent;\n      if (cx.type == \"prop\" && (ch == \"}\" || ch == \")\")) cx = cx.prev;\n      if (cx.prev) {\n        if (ch == \"}\" && (cx.type == \"block\" || cx.type == \"top\" ||\n                          cx.type == \"interpolation\" || cx.type == \"restricted_atBlock\")) {\n          // Resume indentation from parent context.\n          cx = cx.prev;\n          indent = cx.indent;\n        } else if (ch == \")\" && (cx.type == \"parens\" || cx.type == \"atBlock_parens\") ||\n            ch == \"{\" && (cx.type == \"at\" || cx.type == \"atBlock\")) {\n          // Dedent relative to current context.\n          indent = Math.max(0, cx.indent - indentUnit);\n        }\n      }\n      return indent;\n    },\n\n    electricChars: \"}\",\n    blockCommentStart: \"/*\",\n    blockCommentEnd: \"*/\",\n    lineComment: lineComment,\n    fold: \"brace\"\n  };\n});\n\n  function keySet(array) {\n    var keys = {};\n    for (var i = 0; i < array.length; ++i) {\n      keys[array[i].toLowerCase()] = true;\n    }\n    return keys;\n  }\n\n  var documentTypes_ = [\n    \"domain\", \"regexp\", \"url\", \"url-prefix\"\n  ], documentTypes = keySet(documentTypes_);\n\n  var mediaTypes_ = [\n    \"all\", \"aural\", \"braille\", \"handheld\", \"print\", \"projection\", \"screen\",\n    \"tty\", \"tv\", \"embossed\"\n  ], mediaTypes = keySet(mediaTypes_);\n\n  var mediaFeatures_ = [\n    \"width\", \"min-width\", \"max-width\", \"height\", \"min-height\", \"max-height\",\n    \"device-width\", \"min-device-width\", \"max-device-width\", \"device-height\",\n    \"min-device-height\", \"max-device-height\", \"aspect-ratio\",\n    \"min-aspect-ratio\", \"max-aspect-ratio\", \"device-aspect-ratio\",\n    \"min-device-aspect-ratio\", \"max-device-aspect-ratio\", \"color\", \"min-color\",\n    \"max-color\", \"color-index\", \"min-color-index\", \"max-color-index\",\n    \"monochrome\", \"min-monochrome\", \"max-monochrome\", \"resolution\",\n    \"min-resolution\", \"max-resolution\", \"scan\", \"grid\", \"orientation\",\n    \"device-pixel-ratio\", \"min-device-pixel-ratio\", \"max-device-pixel-ratio\",\n    \"pointer\", \"any-pointer\", \"hover\", \"any-hover\"\n  ], mediaFeatures = keySet(mediaFeatures_);\n\n  var mediaValueKeywords_ = [\n    \"landscape\", \"portrait\", \"none\", \"coarse\", \"fine\", \"on-demand\", \"hover\",\n    \"interlace\", \"progressive\"\n  ], mediaValueKeywords = keySet(mediaValueKeywords_);\n\n  var propertyKeywords_ = [\n    \"align-content\", \"align-items\", \"align-self\", \"alignment-adjust\",\n    \"alignment-baseline\", \"anchor-point\", \"animation\", \"animation-delay\",\n    \"animation-direction\", \"animation-duration\", \"animation-fill-mode\",\n    \"animation-iteration-count\", \"animation-name\", \"animation-play-state\",\n    \"animation-timing-function\", \"appearance\", \"azimuth\", \"backface-visibility\",\n    \"background\", \"background-attachment\", \"background-blend-mode\", \"background-clip\",\n    \"background-color\", \"background-image\", \"background-origin\", \"background-position\",\n    \"background-repeat\", \"background-size\", \"baseline-shift\", \"binding\",\n    \"bleed\", \"bookmark-label\", \"bookmark-level\", \"bookmark-state\",\n    \"bookmark-target\", \"border\", \"border-bottom\", \"border-bottom-color\",\n    \"border-bottom-left-radius\", \"border-bottom-right-radius\",\n    \"border-bottom-style\", \"border-bottom-width\", \"border-collapse\",\n    \"border-color\", \"border-image\", \"border-image-outset\",\n    \"border-image-repeat\", \"border-image-slice\", \"border-image-source\",\n    \"border-image-width\", \"border-left\", \"border-left-color\",\n    \"border-left-style\", \"border-left-width\", \"border-radius\", \"border-right\",\n    \"border-right-color\", \"border-right-style\", \"border-right-width\",\n    \"border-spacing\", \"border-style\", \"border-top\", \"border-top-color\",\n    \"border-top-left-radius\", \"border-top-right-radius\", \"border-top-style\",\n    \"border-top-width\", \"border-width\", \"bottom\", \"box-decoration-break\",\n    \"box-shadow\", \"box-sizing\", \"break-after\", \"break-before\", \"break-inside\",\n    \"caption-side\", \"caret-color\", \"clear\", \"clip\", \"color\", \"color-profile\", \"column-count\",\n    \"column-fill\", \"column-gap\", \"column-rule\", \"column-rule-color\",\n    \"column-rule-style\", \"column-rule-width\", \"column-span\", \"column-width\",\n    \"columns\", \"content\", \"counter-increment\", \"counter-reset\", \"crop\", \"cue\",\n    \"cue-after\", \"cue-before\", \"cursor\", \"direction\", \"display\",\n    \"dominant-baseline\", \"drop-initial-after-adjust\",\n    \"drop-initial-after-align\", \"drop-initial-before-adjust\",\n    \"drop-initial-before-align\", \"drop-initial-size\", \"drop-initial-value\",\n    \"elevation\", \"empty-cells\", \"fit\", \"fit-position\", \"flex\", \"flex-basis\",\n    \"flex-direction\", \"flex-flow\", \"flex-grow\", \"flex-shrink\", \"flex-wrap\",\n    \"float\", \"float-offset\", \"flow-from\", \"flow-into\", \"font\", \"font-feature-settings\",\n    \"font-family\", \"font-kerning\", \"font-language-override\", \"font-size\", \"font-size-adjust\",\n    \"font-stretch\", \"font-style\", \"font-synthesis\", \"font-variant\",\n    \"font-variant-alternates\", \"font-variant-caps\", \"font-variant-east-asian\",\n    \"font-variant-ligatures\", \"font-variant-numeric\", \"font-variant-position\",\n    \"font-weight\", \"grid\", \"grid-area\", \"grid-auto-columns\", \"grid-auto-flow\",\n    \"grid-auto-rows\", \"grid-column\", \"grid-column-end\", \"grid-column-gap\",\n    \"grid-column-start\", \"grid-gap\", \"grid-row\", \"grid-row-end\", \"grid-row-gap\",\n    \"grid-row-start\", \"grid-template\", \"grid-template-areas\", \"grid-template-columns\",\n    \"grid-template-rows\", \"hanging-punctuation\", \"height\", \"hyphens\",\n    \"icon\", \"image-orientation\", \"image-rendering\", \"image-resolution\",\n    \"inline-box-align\", \"justify-content\", \"justify-items\", \"justify-self\", \"left\", \"letter-spacing\",\n    \"line-break\", \"line-height\", \"line-stacking\", \"line-stacking-ruby\",\n    \"line-stacking-shift\", \"line-stacking-strategy\", \"list-style\",\n    \"list-style-image\", \"list-style-position\", \"list-style-type\", \"margin\",\n    \"margin-bottom\", \"margin-left\", \"margin-right\", \"margin-top\",\n    \"marks\", \"marquee-direction\", \"marquee-loop\",\n    \"marquee-play-count\", \"marquee-speed\", \"marquee-style\", \"max-height\",\n    \"max-width\", \"min-height\", \"min-width\", \"move-to\", \"nav-down\", \"nav-index\",\n    \"nav-left\", \"nav-right\", \"nav-up\", \"object-fit\", \"object-position\",\n    \"opacity\", \"order\", \"orphans\", \"outline\",\n    \"outline-color\", \"outline-offset\", \"outline-style\", \"outline-width\",\n    \"overflow\", \"overflow-style\", \"overflow-wrap\", \"overflow-x\", \"overflow-y\",\n    \"padding\", \"padding-bottom\", \"padding-left\", \"padding-right\", \"padding-top\",\n    \"page\", \"page-break-after\", \"page-break-before\", \"page-break-inside\",\n    \"page-policy\", \"pause\", \"pause-after\", \"pause-before\", \"perspective\",\n    \"perspective-origin\", \"pitch\", \"pitch-range\", \"place-content\", \"place-items\", \"place-self\", \"play-during\", \"position\",\n    \"presentation-level\", \"punctuation-trim\", \"quotes\", \"region-break-after\",\n    \"region-break-before\", \"region-break-inside\", \"region-fragment\",\n    \"rendering-intent\", \"resize\", \"rest\", \"rest-after\", \"rest-before\", \"richness\",\n    \"right\", \"rotation\", \"rotation-point\", \"ruby-align\", \"ruby-overhang\",\n    \"ruby-position\", \"ruby-span\", \"shape-image-threshold\", \"shape-inside\", \"shape-margin\",\n    \"shape-outside\", \"size\", \"speak\", \"speak-as\", \"speak-header\",\n    \"speak-numeral\", \"speak-punctuation\", \"speech-rate\", \"stress\", \"string-set\",\n    \"tab-size\", \"table-layout\", \"target\", \"target-name\", \"target-new\",\n    \"target-position\", \"text-align\", \"text-align-last\", \"text-decoration\",\n    \"text-decoration-color\", \"text-decoration-line\", \"text-decoration-skip\",\n    \"text-decoration-style\", \"text-emphasis\", \"text-emphasis-color\",\n    \"text-emphasis-position\", \"text-emphasis-style\", \"text-height\",\n    \"text-indent\", \"text-justify\", \"text-outline\", \"text-overflow\", \"text-shadow\",\n    \"text-size-adjust\", \"text-space-collapse\", \"text-transform\", \"text-underline-position\",\n    \"text-wrap\", \"top\", \"transform\", \"transform-origin\", \"transform-style\",\n    \"transition\", \"transition-delay\", \"transition-duration\",\n    \"transition-property\", \"transition-timing-function\", \"unicode-bidi\",\n    \"user-select\", \"vertical-align\", \"visibility\", \"voice-balance\", \"voice-duration\",\n    \"voice-family\", \"voice-pitch\", \"voice-range\", \"voice-rate\", \"voice-stress\",\n    \"voice-volume\", \"volume\", \"white-space\", \"widows\", \"width\", \"will-change\", \"word-break\",\n    \"word-spacing\", \"word-wrap\", \"z-index\",\n    // SVG-specific\n    \"clip-path\", \"clip-rule\", \"mask\", \"enable-background\", \"filter\", \"flood-color\",\n    \"flood-opacity\", \"lighting-color\", \"stop-color\", \"stop-opacity\", \"pointer-events\",\n    \"color-interpolation\", \"color-interpolation-filters\",\n    \"color-rendering\", \"fill\", \"fill-opacity\", \"fill-rule\", \"image-rendering\",\n    \"marker\", \"marker-end\", \"marker-mid\", \"marker-start\", \"shape-rendering\", \"stroke\",\n    \"stroke-dasharray\", \"stroke-dashoffset\", \"stroke-linecap\", \"stroke-linejoin\",\n    \"stroke-miterlimit\", \"stroke-opacity\", \"stroke-width\", \"text-rendering\",\n    \"baseline-shift\", \"dominant-baseline\", \"glyph-orientation-horizontal\",\n    \"glyph-orientation-vertical\", \"text-anchor\", \"writing-mode\"\n  ], propertyKeywords = keySet(propertyKeywords_);\n\n  var nonStandardPropertyKeywords_ = [\n    \"scrollbar-arrow-color\", \"scrollbar-base-color\", \"scrollbar-dark-shadow-color\",\n    \"scrollbar-face-color\", \"scrollbar-highlight-color\", \"scrollbar-shadow-color\",\n    \"scrollbar-3d-light-color\", \"scrollbar-track-color\", \"shape-inside\",\n    \"searchfield-cancel-button\", \"searchfield-decoration\", \"searchfield-results-button\",\n    \"searchfield-results-decoration\", \"zoom\"\n  ], nonStandardPropertyKeywords = keySet(nonStandardPropertyKeywords_);\n\n  var fontProperties_ = [\n    \"font-family\", \"src\", \"unicode-range\", \"font-variant\", \"font-feature-settings\",\n    \"font-stretch\", \"font-weight\", \"font-style\"\n  ], fontProperties = keySet(fontProperties_);\n\n  var counterDescriptors_ = [\n    \"additive-symbols\", \"fallback\", \"negative\", \"pad\", \"prefix\", \"range\",\n    \"speak-as\", \"suffix\", \"symbols\", \"system\"\n  ], counterDescriptors = keySet(counterDescriptors_);\n\n  var colorKeywords_ = [\n    \"aliceblue\", \"antiquewhite\", \"aqua\", \"aquamarine\", \"azure\", \"beige\",\n    \"bisque\", \"black\", \"blanchedalmond\", \"blue\", \"blueviolet\", \"brown\",\n    \"burlywood\", \"cadetblue\", \"chartreuse\", \"chocolate\", \"coral\", \"cornflowerblue\",\n    \"cornsilk\", \"crimson\", \"cyan\", \"darkblue\", \"darkcyan\", \"darkgoldenrod\",\n    \"darkgray\", \"darkgreen\", \"darkkhaki\", \"darkmagenta\", \"darkolivegreen\",\n    \"darkorange\", \"darkorchid\", \"darkred\", \"darksalmon\", \"darkseagreen\",\n    \"darkslateblue\", \"darkslategray\", \"darkturquoise\", \"darkviolet\",\n    \"deeppink\", \"deepskyblue\", \"dimgray\", \"dodgerblue\", \"firebrick\",\n    \"floralwhite\", \"forestgreen\", \"fuchsia\", \"gainsboro\", \"ghostwhite\",\n    \"gold\", \"goldenrod\", \"gray\", \"grey\", \"green\", \"greenyellow\", \"honeydew\",\n    \"hotpink\", \"indianred\", \"indigo\", \"ivory\", \"khaki\", \"lavender\",\n    \"lavenderblush\", \"lawngreen\", \"lemonchiffon\", \"lightblue\", \"lightcoral\",\n    \"lightcyan\", \"lightgoldenrodyellow\", \"lightgray\", \"lightgreen\", \"lightpink\",\n    \"lightsalmon\", \"lightseagreen\", \"lightskyblue\", \"lightslategray\",\n    \"lightsteelblue\", \"lightyellow\", \"lime\", \"limegreen\", \"linen\", \"magenta\",\n    \"maroon\", \"mediumaquamarine\", \"mediumblue\", \"mediumorchid\", \"mediumpurple\",\n    \"mediumseagreen\", \"mediumslateblue\", \"mediumspringgreen\", \"mediumturquoise\",\n    \"mediumvioletred\", \"midnightblue\", \"mintcream\", \"mistyrose\", \"moccasin\",\n    \"navajowhite\", \"navy\", \"oldlace\", \"olive\", \"olivedrab\", \"orange\", \"orangered\",\n    \"orchid\", \"palegoldenrod\", \"palegreen\", \"paleturquoise\", \"palevioletred\",\n    \"papayawhip\", \"peachpuff\", \"peru\", \"pink\", \"plum\", \"powderblue\",\n    \"purple\", \"rebeccapurple\", \"red\", \"rosybrown\", \"royalblue\", \"saddlebrown\",\n    \"salmon\", \"sandybrown\", \"seagreen\", \"seashell\", \"sienna\", \"silver\", \"skyblue\",\n    \"slateblue\", \"slategray\", \"snow\", \"springgreen\", \"steelblue\", \"tan\",\n    \"teal\", \"thistle\", \"tomato\", \"turquoise\", \"violet\", \"wheat\", \"white\",\n    \"whitesmoke\", \"yellow\", \"yellowgreen\"\n  ], colorKeywords = keySet(colorKeywords_);\n\n  var valueKeywords_ = [\n    \"above\", \"absolute\", \"activeborder\", \"additive\", \"activecaption\", \"afar\",\n    \"after-white-space\", \"ahead\", \"alias\", \"all\", \"all-scroll\", \"alphabetic\", \"alternate\",\n    \"always\", \"amharic\", \"amharic-abegede\", \"antialiased\", \"appworkspace\",\n    \"arabic-indic\", \"armenian\", \"asterisks\", \"attr\", \"auto\", \"auto-flow\", \"avoid\", \"avoid-column\", \"avoid-page\",\n    \"avoid-region\", \"background\", \"backwards\", \"baseline\", \"below\", \"bidi-override\", \"binary\",\n    \"bengali\", \"blink\", \"block\", \"block-axis\", \"bold\", \"bolder\", \"border\", \"border-box\",\n    \"both\", \"bottom\", \"break\", \"break-all\", \"break-word\", \"bullets\", \"button\", \"button-bevel\",\n    \"buttonface\", \"buttonhighlight\", \"buttonshadow\", \"buttontext\", \"calc\", \"cambodian\",\n    \"capitalize\", \"caps-lock-indicator\", \"caption\", \"captiontext\", \"caret\",\n    \"cell\", \"center\", \"checkbox\", \"circle\", \"cjk-decimal\", \"cjk-earthly-branch\",\n    \"cjk-heavenly-stem\", \"cjk-ideographic\", \"clear\", \"clip\", \"close-quote\",\n    \"col-resize\", \"collapse\", \"color\", \"color-burn\", \"color-dodge\", \"column\", \"column-reverse\",\n    \"compact\", \"condensed\", \"contain\", \"content\", \"contents\",\n    \"content-box\", \"context-menu\", \"continuous\", \"copy\", \"counter\", \"counters\", \"cover\", \"crop\",\n    \"cross\", \"crosshair\", \"currentcolor\", \"cursive\", \"cyclic\", \"darken\", \"dashed\", \"decimal\",\n    \"decimal-leading-zero\", \"default\", \"default-button\", \"dense\", \"destination-atop\",\n    \"destination-in\", \"destination-out\", \"destination-over\", \"devanagari\", \"difference\",\n    \"disc\", \"discard\", \"disclosure-closed\", \"disclosure-open\", \"document\",\n    \"dot-dash\", \"dot-dot-dash\",\n    \"dotted\", \"double\", \"down\", \"e-resize\", \"ease\", \"ease-in\", \"ease-in-out\", \"ease-out\",\n    \"element\", \"ellipse\", \"ellipsis\", \"embed\", \"end\", \"ethiopic\", \"ethiopic-abegede\",\n    \"ethiopic-abegede-am-et\", \"ethiopic-abegede-gez\", \"ethiopic-abegede-ti-er\",\n    \"ethiopic-abegede-ti-et\", \"ethiopic-halehame-aa-er\",\n    \"ethiopic-halehame-aa-et\", \"ethiopic-halehame-am-et\",\n    \"ethiopic-halehame-gez\", \"ethiopic-halehame-om-et\",\n    \"ethiopic-halehame-sid-et\", \"ethiopic-halehame-so-et\",\n    \"ethiopic-halehame-ti-er\", \"ethiopic-halehame-ti-et\", \"ethiopic-halehame-tig\",\n    \"ethiopic-numeric\", \"ew-resize\", \"exclusion\", \"expanded\", \"extends\", \"extra-condensed\",\n    \"extra-expanded\", \"fantasy\", \"fast\", \"fill\", \"fixed\", \"flat\", \"flex\", \"flex-end\", \"flex-start\", \"footnotes\",\n    \"forwards\", \"from\", \"geometricPrecision\", \"georgian\", \"graytext\", \"grid\", \"groove\",\n    \"gujarati\", \"gurmukhi\", \"hand\", \"hangul\", \"hangul-consonant\", \"hard-light\", \"hebrew\",\n    \"help\", \"hidden\", \"hide\", \"higher\", \"highlight\", \"highlighttext\",\n    \"hiragana\", \"hiragana-iroha\", \"horizontal\", \"hsl\", \"hsla\", \"hue\", \"icon\", \"ignore\",\n    \"inactiveborder\", \"inactivecaption\", \"inactivecaptiontext\", \"infinite\",\n    \"infobackground\", \"infotext\", \"inherit\", \"initial\", \"inline\", \"inline-axis\",\n    \"inline-block\", \"inline-flex\", \"inline-grid\", \"inline-table\", \"inset\", \"inside\", \"intrinsic\", \"invert\",\n    \"italic\", \"japanese-formal\", \"japanese-informal\", \"justify\", \"kannada\",\n    \"katakana\", \"katakana-iroha\", \"keep-all\", \"khmer\",\n    \"korean-hangul-formal\", \"korean-hanja-formal\", \"korean-hanja-informal\",\n    \"landscape\", \"lao\", \"large\", \"larger\", \"left\", \"level\", \"lighter\", \"lighten\",\n    \"line-through\", \"linear\", \"linear-gradient\", \"lines\", \"list-item\", \"listbox\", \"listitem\",\n    \"local\", \"logical\", \"loud\", \"lower\", \"lower-alpha\", \"lower-armenian\",\n    \"lower-greek\", \"lower-hexadecimal\", \"lower-latin\", \"lower-norwegian\",\n    \"lower-roman\", \"lowercase\", \"ltr\", \"luminosity\", \"malayalam\", \"match\", \"matrix\", \"matrix3d\",\n    \"media-controls-background\", \"media-current-time-display\",\n    \"media-fullscreen-button\", \"media-mute-button\", \"media-play-button\",\n    \"media-return-to-realtime-button\", \"media-rewind-button\",\n    \"media-seek-back-button\", \"media-seek-forward-button\", \"media-slider\",\n    \"media-sliderthumb\", \"media-time-remaining-display\", \"media-volume-slider\",\n    \"media-volume-slider-container\", \"media-volume-sliderthumb\", \"medium\",\n    \"menu\", \"menulist\", \"menulist-button\", \"menulist-text\",\n    \"menulist-textfield\", \"menutext\", \"message-box\", \"middle\", \"min-intrinsic\",\n    \"mix\", \"mongolian\", \"monospace\", \"move\", \"multiple\", \"multiply\", \"myanmar\", \"n-resize\",\n    \"narrower\", \"ne-resize\", \"nesw-resize\", \"no-close-quote\", \"no-drop\",\n    \"no-open-quote\", \"no-repeat\", \"none\", \"normal\", \"not-allowed\", \"nowrap\",\n    \"ns-resize\", \"numbers\", \"numeric\", \"nw-resize\", \"nwse-resize\", \"oblique\", \"octal\", \"opacity\", \"open-quote\",\n    \"optimizeLegibility\", \"optimizeSpeed\", \"oriya\", \"oromo\", \"outset\",\n    \"outside\", \"outside-shape\", \"overlay\", \"overline\", \"padding\", \"padding-box\",\n    \"painted\", \"page\", \"paused\", \"persian\", \"perspective\", \"plus-darker\", \"plus-lighter\",\n    \"pointer\", \"polygon\", \"portrait\", \"pre\", \"pre-line\", \"pre-wrap\", \"preserve-3d\",\n    \"progress\", \"push-button\", \"radial-gradient\", \"radio\", \"read-only\",\n    \"read-write\", \"read-write-plaintext-only\", \"rectangle\", \"region\",\n    \"relative\", \"repeat\", \"repeating-linear-gradient\",\n    \"repeating-radial-gradient\", \"repeat-x\", \"repeat-y\", \"reset\", \"reverse\",\n    \"rgb\", \"rgba\", \"ridge\", \"right\", \"rotate\", \"rotate3d\", \"rotateX\", \"rotateY\",\n    \"rotateZ\", \"round\", \"row\", \"row-resize\", \"row-reverse\", \"rtl\", \"run-in\", \"running\",\n    \"s-resize\", \"sans-serif\", \"saturation\", \"scale\", \"scale3d\", \"scaleX\", \"scaleY\", \"scaleZ\", \"screen\",\n    \"scroll\", \"scrollbar\", \"scroll-position\", \"se-resize\", \"searchfield\",\n    \"searchfield-cancel-button\", \"searchfield-decoration\",\n    \"searchfield-results-button\", \"searchfield-results-decoration\", \"self-start\", \"self-end\",\n    \"semi-condensed\", \"semi-expanded\", \"separate\", \"serif\", \"show\", \"sidama\",\n    \"simp-chinese-formal\", \"simp-chinese-informal\", \"single\",\n    \"skew\", \"skewX\", \"skewY\", \"skip-white-space\", \"slide\", \"slider-horizontal\",\n    \"slider-vertical\", \"sliderthumb-horizontal\", \"sliderthumb-vertical\", \"slow\",\n    \"small\", \"small-caps\", \"small-caption\", \"smaller\", \"soft-light\", \"solid\", \"somali\",\n    \"source-atop\", \"source-in\", \"source-out\", \"source-over\", \"space\", \"space-around\", \"space-between\", \"space-evenly\", \"spell-out\", \"square\",\n    \"square-button\", \"start\", \"static\", \"status-bar\", \"stretch\", \"stroke\", \"sub\",\n    \"subpixel-antialiased\", \"super\", \"sw-resize\", \"symbolic\", \"symbols\", \"system-ui\", \"table\",\n    \"table-caption\", \"table-cell\", \"table-column\", \"table-column-group\",\n    \"table-footer-group\", \"table-header-group\", \"table-row\", \"table-row-group\",\n    \"tamil\",\n    \"telugu\", \"text\", \"text-bottom\", \"text-top\", \"textarea\", \"textfield\", \"thai\",\n    \"thick\", \"thin\", \"threeddarkshadow\", \"threedface\", \"threedhighlight\",\n    \"threedlightshadow\", \"threedshadow\", \"tibetan\", \"tigre\", \"tigrinya-er\",\n    \"tigrinya-er-abegede\", \"tigrinya-et\", \"tigrinya-et-abegede\", \"to\", \"top\",\n    \"trad-chinese-formal\", \"trad-chinese-informal\", \"transform\",\n    \"translate\", \"translate3d\", \"translateX\", \"translateY\", \"translateZ\",\n    \"transparent\", \"ultra-condensed\", \"ultra-expanded\", \"underline\", \"unset\", \"up\",\n    \"upper-alpha\", \"upper-armenian\", \"upper-greek\", \"upper-hexadecimal\",\n    \"upper-latin\", \"upper-norwegian\", \"upper-roman\", \"uppercase\", \"urdu\", \"url\",\n    \"var\", \"vertical\", \"vertical-text\", \"visible\", \"visibleFill\", \"visiblePainted\",\n    \"visibleStroke\", \"visual\", \"w-resize\", \"wait\", \"wave\", \"wider\",\n    \"window\", \"windowframe\", \"windowtext\", \"words\", \"wrap\", \"wrap-reverse\", \"x-large\", \"x-small\", \"xor\",\n    \"xx-large\", \"xx-small\"\n  ], valueKeywords = keySet(valueKeywords_);\n\n  var allWords = documentTypes_.concat(mediaTypes_).concat(mediaFeatures_).concat(mediaValueKeywords_)\n    .concat(propertyKeywords_).concat(nonStandardPropertyKeywords_).concat(colorKeywords_)\n    .concat(valueKeywords_);\n  CodeMirror.registerHelper(\"hintWords\", \"css\", allWords);\n\n  function tokenCComment(stream, state) {\n    var maybeEnd = false, ch;\n    while ((ch = stream.next()) != null) {\n      if (maybeEnd && ch == \"/\") {\n        state.tokenize = null;\n        break;\n      }\n      maybeEnd = (ch == \"*\");\n    }\n    return [\"comment\", \"comment\"];\n  }\n\n  CodeMirror.defineMIME(\"text/css\", {\n    documentTypes: documentTypes,\n    mediaTypes: mediaTypes,\n    mediaFeatures: mediaFeatures,\n    mediaValueKeywords: mediaValueKeywords,\n    propertyKeywords: propertyKeywords,\n    nonStandardPropertyKeywords: nonStandardPropertyKeywords,\n    fontProperties: fontProperties,\n    counterDescriptors: counterDescriptors,\n    colorKeywords: colorKeywords,\n    valueKeywords: valueKeywords,\n    tokenHooks: {\n      \"/\": function(stream, state) {\n        if (!stream.eat(\"*\")) return false;\n        state.tokenize = tokenCComment;\n        return tokenCComment(stream, state);\n      }\n    },\n    name: \"css\"\n  });\n\n  CodeMirror.defineMIME(\"text/x-scss\", {\n    mediaTypes: mediaTypes,\n    mediaFeatures: mediaFeatures,\n    mediaValueKeywords: mediaValueKeywords,\n    propertyKeywords: propertyKeywords,\n    nonStandardPropertyKeywords: nonStandardPropertyKeywords,\n    colorKeywords: colorKeywords,\n    valueKeywords: valueKeywords,\n    fontProperties: fontProperties,\n    allowNested: true,\n    lineComment: \"//\",\n    tokenHooks: {\n      \"/\": function(stream, state) {\n        if (stream.eat(\"/\")) {\n          stream.skipToEnd();\n          return [\"comment\", \"comment\"];\n        } else if (stream.eat(\"*\")) {\n          state.tokenize = tokenCComment;\n          return tokenCComment(stream, state);\n        } else {\n          return [\"operator\", \"operator\"];\n        }\n      },\n      \":\": function(stream) {\n        if (stream.match(/\\s*\\{/, false))\n          return [null, null]\n        return false;\n      },\n      \"$\": function(stream) {\n        stream.match(/^[\\w-]+/);\n        if (stream.match(/^\\s*:/, false))\n          return [\"variable-2\", \"variable-definition\"];\n        return [\"variable-2\", \"variable\"];\n      },\n      \"#\": function(stream) {\n        if (!stream.eat(\"{\")) return false;\n        return [null, \"interpolation\"];\n      }\n    },\n    name: \"css\",\n    helperType: \"scss\"\n  });\n\n  CodeMirror.defineMIME(\"text/x-less\", {\n    mediaTypes: mediaTypes,\n    mediaFeatures: mediaFeatures,\n    mediaValueKeywords: mediaValueKeywords,\n    propertyKeywords: propertyKeywords,\n    nonStandardPropertyKeywords: nonStandardPropertyKeywords,\n    colorKeywords: colorKeywords,\n    valueKeywords: valueKeywords,\n    fontProperties: fontProperties,\n    allowNested: true,\n    lineComment: \"//\",\n    tokenHooks: {\n      \"/\": function(stream, state) {\n        if (stream.eat(\"/\")) {\n          stream.skipToEnd();\n          return [\"comment\", \"comment\"];\n        } else if (stream.eat(\"*\")) {\n          state.tokenize = tokenCComment;\n          return tokenCComment(stream, state);\n        } else {\n          return [\"operator\", \"operator\"];\n        }\n      },\n      \"@\": function(stream) {\n        if (stream.eat(\"{\")) return [null, \"interpolation\"];\n        if (stream.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\\b/, false)) return false;\n        stream.eatWhile(/[\\w\\\\\\-]/);\n        if (stream.match(/^\\s*:/, false))\n          return [\"variable-2\", \"variable-definition\"];\n        return [\"variable-2\", \"variable\"];\n      },\n      \"&\": function() {\n        return [\"atom\", \"atom\"];\n      }\n    },\n    name: \"css\",\n    helperType: \"less\"\n  });\n\n  CodeMirror.defineMIME(\"text/x-gss\", {\n    documentTypes: documentTypes,\n    mediaTypes: mediaTypes,\n    mediaFeatures: mediaFeatures,\n    propertyKeywords: propertyKeywords,\n    nonStandardPropertyKeywords: nonStandardPropertyKeywords,\n    fontProperties: fontProperties,\n    counterDescriptors: counterDescriptors,\n    colorKeywords: colorKeywords,\n    valueKeywords: valueKeywords,\n    supportsAtComponent: true,\n    tokenHooks: {\n      \"/\": function(stream, state) {\n        if (!stream.eat(\"*\")) return false;\n        state.tokenize = tokenCComment;\n        return tokenCComment(stream, state);\n      }\n    },\n    name: \"css\",\n    helperType: \"gss\"\n  });\n\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nvar htmlConfig = {\n  autoSelfClosers: {'area': true, 'base': true, 'br': true, 'col': true, 'command': true,\n                    'embed': true, 'frame': true, 'hr': true, 'img': true, 'input': true,\n                    'keygen': true, 'link': true, 'meta': true, 'param': true, 'source': true,\n                    'track': true, 'wbr': true, 'menuitem': true},\n  implicitlyClosed: {'dd': true, 'li': true, 'optgroup': true, 'option': true, 'p': true,\n                     'rp': true, 'rt': true, 'tbody': true, 'td': true, 'tfoot': true,\n                     'th': true, 'tr': true},\n  contextGrabbers: {\n    'dd': {'dd': true, 'dt': true},\n    'dt': {'dd': true, 'dt': true},\n    'li': {'li': true},\n    'option': {'option': true, 'optgroup': true},\n    'optgroup': {'optgroup': true},\n    'p': {'address': true, 'article': true, 'aside': true, 'blockquote': true, 'dir': true,\n          'div': true, 'dl': true, 'fieldset': true, 'footer': true, 'form': true,\n          'h1': true, 'h2': true, 'h3': true, 'h4': true, 'h5': true, 'h6': true,\n          'header': true, 'hgroup': true, 'hr': true, 'menu': true, 'nav': true, 'ol': true,\n          'p': true, 'pre': true, 'section': true, 'table': true, 'ul': true},\n    'rp': {'rp': true, 'rt': true},\n    'rt': {'rp': true, 'rt': true},\n    'tbody': {'tbody': true, 'tfoot': true},\n    'td': {'td': true, 'th': true},\n    'tfoot': {'tbody': true},\n    'th': {'td': true, 'th': true},\n    'thead': {'tbody': true, 'tfoot': true},\n    'tr': {'tr': true}\n  },\n  doNotIndent: {\"pre\": true},\n  allowUnquoted: true,\n  allowMissing: true,\n  caseFold: true\n}\n\nvar xmlConfig = {\n  autoSelfClosers: {},\n  implicitlyClosed: {},\n  contextGrabbers: {},\n  doNotIndent: {},\n  allowUnquoted: false,\n  allowMissing: false,\n  caseFold: false\n}\n\nCodeMirror.defineMode(\"xml\", function(editorConf, config_) {\n  var indentUnit = editorConf.indentUnit\n  var config = {}\n  var defaults = config_.htmlMode ? htmlConfig : xmlConfig\n  for (var prop in defaults) config[prop] = defaults[prop]\n  for (var prop in config_) config[prop] = config_[prop]\n\n  // Return variables for tokenizers\n  var type, setStyle;\n\n  function inText(stream, state) {\n    function chain(parser) {\n      state.tokenize = parser;\n      return parser(stream, state);\n    }\n\n    var ch = stream.next();\n    if (ch == \"<\") {\n      if (stream.eat(\"!\")) {\n        if (stream.eat(\"[\")) {\n          if (stream.match(\"CDATA[\")) return chain(inBlock(\"atom\", \"]]>\"));\n          else return null;\n        } else if (stream.match(\"--\")) {\n          return chain(inBlock(\"comment\", \"-->\"));\n        } else if (stream.match(\"DOCTYPE\", true, true)) {\n          stream.eatWhile(/[\\w\\._\\-]/);\n          return chain(doctype(1));\n        } else {\n          return null;\n        }\n      } else if (stream.eat(\"?\")) {\n        stream.eatWhile(/[\\w\\._\\-]/);\n        state.tokenize = inBlock(\"meta\", \"?>\");\n        return \"meta\";\n      } else {\n        type = stream.eat(\"/\") ? \"closeTag\" : \"openTag\";\n        state.tokenize = inTag;\n        return \"tag bracket\";\n      }\n    } else if (ch == \"&\") {\n      var ok;\n      if (stream.eat(\"#\")) {\n        if (stream.eat(\"x\")) {\n          ok = stream.eatWhile(/[a-fA-F\\d]/) && stream.eat(\";\");\n        } else {\n          ok = stream.eatWhile(/[\\d]/) && stream.eat(\";\");\n        }\n      } else {\n        ok = stream.eatWhile(/[\\w\\.\\-:]/) && stream.eat(\";\");\n      }\n      return ok ? \"atom\" : \"error\";\n    } else {\n      stream.eatWhile(/[^&<]/);\n      return null;\n    }\n  }\n  inText.isInText = true;\n\n  function inTag(stream, state) {\n    var ch = stream.next();\n    if (ch == \">\" || (ch == \"/\" && stream.eat(\">\"))) {\n      state.tokenize = inText;\n      type = ch == \">\" ? \"endTag\" : \"selfcloseTag\";\n      return \"tag bracket\";\n    } else if (ch == \"=\") {\n      type = \"equals\";\n      return null;\n    } else if (ch == \"<\") {\n      state.tokenize = inText;\n      state.state = baseState;\n      state.tagName = state.tagStart = null;\n      var next = state.tokenize(stream, state);\n      return next ? next + \" tag error\" : \"tag error\";\n    } else if (/[\\'\\\"]/.test(ch)) {\n      state.tokenize = inAttribute(ch);\n      state.stringStartCol = stream.column();\n      return state.tokenize(stream, state);\n    } else {\n      stream.match(/^[^\\s\\u00a0=<>\\\"\\']*[^\\s\\u00a0=<>\\\"\\'\\/]/);\n      return \"word\";\n    }\n  }\n\n  function inAttribute(quote) {\n    var closure = function(stream, state) {\n      while (!stream.eol()) {\n        if (stream.next() == quote) {\n          state.tokenize = inTag;\n          break;\n        }\n      }\n      return \"string\";\n    };\n    closure.isInAttribute = true;\n    return closure;\n  }\n\n  function inBlock(style, terminator) {\n    return function(stream, state) {\n      while (!stream.eol()) {\n        if (stream.match(terminator)) {\n          state.tokenize = inText;\n          break;\n        }\n        stream.next();\n      }\n      return style;\n    };\n  }\n  function doctype(depth) {\n    return function(stream, state) {\n      var ch;\n      while ((ch = stream.next()) != null) {\n        if (ch == \"<\") {\n          state.tokenize = doctype(depth + 1);\n          return state.tokenize(stream, state);\n        } else if (ch == \">\") {\n          if (depth == 1) {\n            state.tokenize = inText;\n            break;\n          } else {\n            state.tokenize = doctype(depth - 1);\n            return state.tokenize(stream, state);\n          }\n        }\n      }\n      return \"meta\";\n    };\n  }\n\n  function Context(state, tagName, startOfLine) {\n    this.prev = state.context;\n    this.tagName = tagName;\n    this.indent = state.indented;\n    this.startOfLine = startOfLine;\n    if (config.doNotIndent.hasOwnProperty(tagName) || (state.context && state.context.noIndent))\n      this.noIndent = true;\n  }\n  function popContext(state) {\n    if (state.context) state.context = state.context.prev;\n  }\n  function maybePopContext(state, nextTagName) {\n    var parentTagName;\n    while (true) {\n      if (!state.context) {\n        return;\n      }\n      parentTagName = state.context.tagName;\n      if (!config.contextGrabbers.hasOwnProperty(parentTagName) ||\n          !config.contextGrabbers[parentTagName].hasOwnProperty(nextTagName)) {\n        return;\n      }\n      popContext(state);\n    }\n  }\n\n  function baseState(type, stream, state) {\n    if (type == \"openTag\") {\n      state.tagStart = stream.column();\n      return tagNameState;\n    } else if (type == \"closeTag\") {\n      return closeTagNameState;\n    } else {\n      return baseState;\n    }\n  }\n  function tagNameState(type, stream, state) {\n    if (type == \"word\") {\n      state.tagName = stream.current();\n      setStyle = \"tag\";\n      return attrState;\n    } else {\n      setStyle = \"error\";\n      return tagNameState;\n    }\n  }\n  function closeTagNameState(type, stream, state) {\n    if (type == \"word\") {\n      var tagName = stream.current();\n      if (state.context && state.context.tagName != tagName &&\n          config.implicitlyClosed.hasOwnProperty(state.context.tagName))\n        popContext(state);\n      if ((state.context && state.context.tagName == tagName) || config.matchClosing === false) {\n        setStyle = \"tag\";\n        return closeState;\n      } else {\n        setStyle = \"tag error\";\n        return closeStateErr;\n      }\n    } else {\n      setStyle = \"error\";\n      return closeStateErr;\n    }\n  }\n\n  function closeState(type, _stream, state) {\n    if (type != \"endTag\") {\n      setStyle = \"error\";\n      return closeState;\n    }\n    popContext(state);\n    return baseState;\n  }\n  function closeStateErr(type, stream, state) {\n    setStyle = \"error\";\n    return closeState(type, stream, state);\n  }\n\n  function attrState(type, _stream, state) {\n    if (type == \"word\") {\n      setStyle = \"attribute\";\n      return attrEqState;\n    } else if (type == \"endTag\" || type == \"selfcloseTag\") {\n      var tagName = state.tagName, tagStart = state.tagStart;\n      state.tagName = state.tagStart = null;\n      if (type == \"selfcloseTag\" ||\n          config.autoSelfClosers.hasOwnProperty(tagName)) {\n        maybePopContext(state, tagName);\n      } else {\n        maybePopContext(state, tagName);\n        state.context = new Context(state, tagName, tagStart == state.indented);\n      }\n      return baseState;\n    }\n    setStyle = \"error\";\n    return attrState;\n  }\n  function attrEqState(type, stream, state) {\n    if (type == \"equals\") return attrValueState;\n    if (!config.allowMissing) setStyle = \"error\";\n    return attrState(type, stream, state);\n  }\n  function attrValueState(type, stream, state) {\n    if (type == \"string\") return attrContinuedState;\n    if (type == \"word\" && config.allowUnquoted) {setStyle = \"string\"; return attrState;}\n    setStyle = \"error\";\n    return attrState(type, stream, state);\n  }\n  function attrContinuedState(type, stream, state) {\n    if (type == \"string\") return attrContinuedState;\n    return attrState(type, stream, state);\n  }\n\n  return {\n    startState: function(baseIndent) {\n      var state = {tokenize: inText,\n                   state: baseState,\n                   indented: baseIndent || 0,\n                   tagName: null, tagStart: null,\n                   context: null}\n      if (baseIndent != null) state.baseIndent = baseIndent\n      return state\n    },\n\n    token: function(stream, state) {\n      if (!state.tagName && stream.sol())\n        state.indented = stream.indentation();\n\n      if (stream.eatSpace()) return null;\n      type = null;\n      var style = state.tokenize(stream, state);\n      if ((style || type) && style != \"comment\") {\n        setStyle = null;\n        state.state = state.state(type || style, stream, state);\n        if (setStyle)\n          style = setStyle == \"error\" ? style + \" error\" : setStyle;\n      }\n      return style;\n    },\n\n    indent: function(state, textAfter, fullLine) {\n      var context = state.context;\n      // Indent multi-line strings (e.g. css).\n      if (state.tokenize.isInAttribute) {\n        if (state.tagStart == state.indented)\n          return state.stringStartCol + 1;\n        else\n          return state.indented + indentUnit;\n      }\n      if (context && context.noIndent) return CodeMirror.Pass;\n      if (state.tokenize != inTag && state.tokenize != inText)\n        return fullLine ? fullLine.match(/^(\\s*)/)[0].length : 0;\n      // Indent the starts of attribute names.\n      if (state.tagName) {\n        if (config.multilineTagIndentPastTag !== false)\n          return state.tagStart + state.tagName.length + 2;\n        else\n          return state.tagStart + indentUnit * (config.multilineTagIndentFactor || 1);\n      }\n      if (config.alignCDATA && /<!\\[CDATA\\[/.test(textAfter)) return 0;\n      var tagAfter = textAfter && /^<(\\/)?([\\w_:\\.-]*)/.exec(textAfter);\n      if (tagAfter && tagAfter[1]) { // Closing tag spotted\n        while (context) {\n          if (context.tagName == tagAfter[2]) {\n            context = context.prev;\n            break;\n          } else if (config.implicitlyClosed.hasOwnProperty(context.tagName)) {\n            context = context.prev;\n          } else {\n            break;\n          }\n        }\n      } else if (tagAfter) { // Opening tag spotted\n        while (context) {\n          var grabbers = config.contextGrabbers[context.tagName];\n          if (grabbers && grabbers.hasOwnProperty(tagAfter[2]))\n            context = context.prev;\n          else\n            break;\n        }\n      }\n      while (context && context.prev && !context.startOfLine)\n        context = context.prev;\n      if (context) return context.indent + indentUnit;\n      else return state.baseIndent || 0;\n    },\n\n    electricInput: /<\\/[\\s\\w:]+>$/,\n    blockCommentStart: \"<!--\",\n    blockCommentEnd: \"-->\",\n\n    configuration: config.htmlMode ? \"html\" : \"xml\",\n    helperType: config.htmlMode ? \"html\" : \"xml\",\n\n    skipAttribute: function(state) {\n      if (state.state == attrValueState)\n        state.state = attrState\n    }\n  };\n});\n\nCodeMirror.defineMIME(\"text/xml\", \"xml\");\nCodeMirror.defineMIME(\"application/xml\", \"xml\");\nif (!CodeMirror.mimeModes.hasOwnProperty(\"text/html\"))\n  CodeMirror.defineMIME(\"text/html\", {name: \"xml\", htmlMode: true});\n\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"), require(\"../xml/xml\"), require(\"../javascript/javascript\"), require(\"../css/css\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"../xml/xml\", \"../javascript/javascript\", \"../css/css\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  var defaultTags = {\n    script: [\n      [\"lang\", /(javascript|babel)/i, \"javascript\"],\n      [\"type\", /^(?:text|application)\\/(?:x-)?(?:java|ecma)script$|^module$|^$/i, \"javascript\"],\n      [\"type\", /./, \"text/plain\"],\n      [null, null, \"javascript\"]\n    ],\n    style:  [\n      [\"lang\", /^css$/i, \"css\"],\n      [\"type\", /^(text\\/)?(x-)?(stylesheet|css)$/i, \"css\"],\n      [\"type\", /./, \"text/plain\"],\n      [null, null, \"css\"]\n    ]\n  };\n\n  function maybeBackup(stream, pat, style) {\n    var cur = stream.current(), close = cur.search(pat);\n    if (close > -1) {\n      stream.backUp(cur.length - close);\n    } else if (cur.match(/<\\/?$/)) {\n      stream.backUp(cur.length);\n      if (!stream.match(pat, false)) stream.match(cur);\n    }\n    return style;\n  }\n\n  var attrRegexpCache = {};\n  function getAttrRegexp(attr) {\n    var regexp = attrRegexpCache[attr];\n    if (regexp) return regexp;\n    return attrRegexpCache[attr] = new RegExp(\"\\\\s+\" + attr + \"\\\\s*=\\\\s*('|\\\")?([^'\\\"]+)('|\\\")?\\\\s*\");\n  }\n\n  function getAttrValue(text, attr) {\n    var match = text.match(getAttrRegexp(attr))\n    return match ? /^\\s*(.*?)\\s*$/.exec(match[2])[1] : \"\"\n  }\n\n  function getTagRegexp(tagName, anchored) {\n    return new RegExp((anchored ? \"^\" : \"\") + \"<\\/\\s*\" + tagName + \"\\s*>\", \"i\");\n  }\n\n  function addTags(from, to) {\n    for (var tag in from) {\n      var dest = to[tag] || (to[tag] = []);\n      var source = from[tag];\n      for (var i = source.length - 1; i >= 0; i--)\n        dest.unshift(source[i])\n    }\n  }\n\n  function findMatchingMode(tagInfo, tagText) {\n    for (var i = 0; i < tagInfo.length; i++) {\n      var spec = tagInfo[i];\n      if (!spec[0] || spec[1].test(getAttrValue(tagText, spec[0]))) return spec[2];\n    }\n  }\n\n  CodeMirror.defineMode(\"htmlmixed\", function (config, parserConfig) {\n    var htmlMode = CodeMirror.getMode(config, {\n      name: \"xml\",\n      htmlMode: true,\n      multilineTagIndentFactor: parserConfig.multilineTagIndentFactor,\n      multilineTagIndentPastTag: parserConfig.multilineTagIndentPastTag\n    });\n\n    var tags = {};\n    var configTags = parserConfig && parserConfig.tags, configScript = parserConfig && parserConfig.scriptTypes;\n    addTags(defaultTags, tags);\n    if (configTags) addTags(configTags, tags);\n    if (configScript) for (var i = configScript.length - 1; i >= 0; i--)\n      tags.script.unshift([\"type\", configScript[i].matches, configScript[i].mode])\n\n    function html(stream, state) {\n      var style = htmlMode.token(stream, state.htmlState), tag = /\\btag\\b/.test(style), tagName\n      if (tag && !/[<>\\s\\/]/.test(stream.current()) &&\n          (tagName = state.htmlState.tagName && state.htmlState.tagName.toLowerCase()) &&\n          tags.hasOwnProperty(tagName)) {\n        state.inTag = tagName + \" \"\n      } else if (state.inTag && tag && />$/.test(stream.current())) {\n        var inTag = /^([\\S]+) (.*)/.exec(state.inTag)\n        state.inTag = null\n        var modeSpec = stream.current() == \">\" && findMatchingMode(tags[inTag[1]], inTag[2])\n        var mode = CodeMirror.getMode(config, modeSpec)\n        var endTagA = getTagRegexp(inTag[1], true), endTag = getTagRegexp(inTag[1], false);\n        state.token = function (stream, state) {\n          if (stream.match(endTagA, false)) {\n            state.token = html;\n            state.localState = state.localMode = null;\n            return null;\n          }\n          return maybeBackup(stream, endTag, state.localMode.token(stream, state.localState));\n        };\n        state.localMode = mode;\n        state.localState = CodeMirror.startState(mode, htmlMode.indent(state.htmlState, \"\"));\n      } else if (state.inTag) {\n        state.inTag += stream.current()\n        if (stream.eol()) state.inTag += \" \"\n      }\n      return style;\n    };\n\n    return {\n      startState: function () {\n        var state = CodeMirror.startState(htmlMode);\n        return {token: html, inTag: null, localMode: null, localState: null, htmlState: state};\n      },\n\n      copyState: function (state) {\n        var local;\n        if (state.localState) {\n          local = CodeMirror.copyState(state.localMode, state.localState);\n        }\n        return {token: state.token, inTag: state.inTag,\n                localMode: state.localMode, localState: local,\n                htmlState: CodeMirror.copyState(htmlMode, state.htmlState)};\n      },\n\n      token: function (stream, state) {\n        return state.token(stream, state);\n      },\n\n      indent: function (state, textAfter, line) {\n        if (!state.localMode || /^\\s*<\\//.test(textAfter))\n          return htmlMode.indent(state.htmlState, textAfter);\n        else if (state.localMode.indent)\n          return state.localMode.indent(state.localState, textAfter, line);\n        else\n          return CodeMirror.Pass;\n      },\n\n      innerMode: function (state) {\n        return {state: state.localState || state.htmlState, mode: state.localMode || htmlMode};\n      }\n    };\n  }, \"xml\", \"javascript\", \"css\");\n\n  CodeMirror.defineMIME(\"text/html\", \"htmlmixed\");\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"))\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod)\n  else // Plain browser env\n    mod(CodeMirror)\n})(function(CodeMirror) {\n  \"use strict\"\n  var Pos = CodeMirror.Pos\n\n  function regexpFlags(regexp) {\n    var flags = regexp.flags\n    return flags != null ? flags : (regexp.ignoreCase ? \"i\" : \"\")\n      + (regexp.global ? \"g\" : \"\")\n      + (regexp.multiline ? \"m\" : \"\")\n  }\n\n  function ensureGlobal(regexp) {\n    return regexp.global ? regexp : new RegExp(regexp.source, regexpFlags(regexp) + \"g\")\n  }\n\n  function maybeMultiline(regexp) {\n    return /\\\\s|\\\\n|\\n|\\\\W|\\\\D|\\[\\^/.test(regexp.source)\n  }\n\n  function searchRegexpForward(doc, regexp, start) {\n    regexp = ensureGlobal(regexp)\n    for (var line = start.line, ch = start.ch, last = doc.lastLine(); line <= last; line++, ch = 0) {\n      regexp.lastIndex = ch\n      var string = doc.getLine(line), match = regexp.exec(string)\n      if (match)\n        return {from: Pos(line, match.index),\n                to: Pos(line, match.index + match[0].length),\n                match: match}\n    }\n  }\n\n  function searchRegexpForwardMultiline(doc, regexp, start) {\n    if (!maybeMultiline(regexp)) return searchRegexpForward(doc, regexp, start)\n\n    regexp = ensureGlobal(regexp)\n    var string, chunk = 1\n    for (var line = start.line, last = doc.lastLine(); line <= last;) {\n      // This grows the search buffer in exponentially-sized chunks\n      // between matches, so that nearby matches are fast and don't\n      // require concatenating the whole document (in case we're\n      // searching for something that has tons of matches), but at the\n      // same time, the amount of retries is limited.\n      for (var i = 0; i < chunk; i++) {\n        var curLine = doc.getLine(line++)\n        string = string == null ? curLine : string + \"\\n\" + curLine\n      }\n      chunk = chunk * 2\n      regexp.lastIndex = start.ch\n      var match = regexp.exec(string)\n      if (match) {\n        var before = string.slice(0, match.index).split(\"\\n\"), inside = match[0].split(\"\\n\")\n        var startLine = start.line + before.length - 1, startCh = before[before.length - 1].length\n        return {from: Pos(startLine, startCh),\n                to: Pos(startLine + inside.length - 1,\n                        inside.length == 1 ? startCh + inside[0].length : inside[inside.length - 1].length),\n                match: match}\n      }\n    }\n  }\n\n  function lastMatchIn(string, regexp) {\n    var cutOff = 0, match\n    for (;;) {\n      regexp.lastIndex = cutOff\n      var newMatch = regexp.exec(string)\n      if (!newMatch) return match\n      match = newMatch\n      cutOff = match.index + (match[0].length || 1)\n      if (cutOff == string.length) return match\n    }\n  }\n\n  function searchRegexpBackward(doc, regexp, start) {\n    regexp = ensureGlobal(regexp)\n    for (var line = start.line, ch = start.ch, first = doc.firstLine(); line >= first; line--, ch = -1) {\n      var string = doc.getLine(line)\n      if (ch > -1) string = string.slice(0, ch)\n      var match = lastMatchIn(string, regexp)\n      if (match)\n        return {from: Pos(line, match.index),\n                to: Pos(line, match.index + match[0].length),\n                match: match}\n    }\n  }\n\n  function searchRegexpBackwardMultiline(doc, regexp, start) {\n    regexp = ensureGlobal(regexp)\n    var string, chunk = 1\n    for (var line = start.line, first = doc.firstLine(); line >= first;) {\n      for (var i = 0; i < chunk; i++) {\n        var curLine = doc.getLine(line--)\n        string = string == null ? curLine.slice(0, start.ch) : curLine + \"\\n\" + string\n      }\n      chunk *= 2\n\n      var match = lastMatchIn(string, regexp)\n      if (match) {\n        var before = string.slice(0, match.index).split(\"\\n\"), inside = match[0].split(\"\\n\")\n        var startLine = line + before.length, startCh = before[before.length - 1].length\n        return {from: Pos(startLine, startCh),\n                to: Pos(startLine + inside.length - 1,\n                        inside.length == 1 ? startCh + inside[0].length : inside[inside.length - 1].length),\n                match: match}\n      }\n    }\n  }\n\n  var doFold, noFold\n  if (String.prototype.normalize) {\n    doFold = function(str) { return str.normalize(\"NFD\").toLowerCase() }\n    noFold = function(str) { return str.normalize(\"NFD\") }\n  } else {\n    doFold = function(str) { return str.toLowerCase() }\n    noFold = function(str) { return str }\n  }\n\n  // Maps a position in a case-folded line back to a position in the original line\n  // (compensating for codepoints increasing in number during folding)\n  function adjustPos(orig, folded, pos, foldFunc) {\n    if (orig.length == folded.length) return pos\n    for (var min = 0, max = pos + Math.max(0, orig.length - folded.length);;) {\n      if (min == max) return min\n      var mid = (min + max) >> 1\n      var len = foldFunc(orig.slice(0, mid)).length\n      if (len == pos) return mid\n      else if (len > pos) max = mid\n      else min = mid + 1\n    }\n  }\n\n  function searchStringForward(doc, query, start, caseFold) {\n    // Empty string would match anything and never progress, so we\n    // define it to match nothing instead.\n    if (!query.length) return null\n    var fold = caseFold ? doFold : noFold\n    var lines = fold(query).split(/\\r|\\n\\r?/)\n\n    search: for (var line = start.line, ch = start.ch, last = doc.lastLine() + 1 - lines.length; line <= last; line++, ch = 0) {\n      var orig = doc.getLine(line).slice(ch), string = fold(orig)\n      if (lines.length == 1) {\n        var found = string.indexOf(lines[0])\n        if (found == -1) continue search\n        var start = adjustPos(orig, string, found, fold) + ch\n        return {from: Pos(line, adjustPos(orig, string, found, fold) + ch),\n                to: Pos(line, adjustPos(orig, string, found + lines[0].length, fold) + ch)}\n      } else {\n        var cutFrom = string.length - lines[0].length\n        if (string.slice(cutFrom) != lines[0]) continue search\n        for (var i = 1; i < lines.length - 1; i++)\n          if (fold(doc.getLine(line + i)) != lines[i]) continue search\n        var end = doc.getLine(line + lines.length - 1), endString = fold(end), lastLine = lines[lines.length - 1]\n        if (end.slice(0, lastLine.length) != lastLine) continue search\n        return {from: Pos(line, adjustPos(orig, string, cutFrom, fold) + ch),\n                to: Pos(line + lines.length - 1, adjustPos(end, endString, lastLine.length, fold))}\n      }\n    }\n  }\n\n  function searchStringBackward(doc, query, start, caseFold) {\n    if (!query.length) return null\n    var fold = caseFold ? doFold : noFold\n    var lines = fold(query).split(/\\r|\\n\\r?/)\n\n    search: for (var line = start.line, ch = start.ch, first = doc.firstLine() - 1 + lines.length; line >= first; line--, ch = -1) {\n      var orig = doc.getLine(line)\n      if (ch > -1) orig = orig.slice(0, ch)\n      var string = fold(orig)\n      if (lines.length == 1) {\n        var found = string.lastIndexOf(lines[0])\n        if (found == -1) continue search\n        return {from: Pos(line, adjustPos(orig, string, found, fold)),\n                to: Pos(line, adjustPos(orig, string, found + lines[0].length, fold))}\n      } else {\n        var lastLine = lines[lines.length - 1]\n        if (string.slice(0, lastLine.length) != lastLine) continue search\n        for (var i = 1, start = line - lines.length + 1; i < lines.length - 1; i++)\n          if (fold(doc.getLine(start + i)) != lines[i]) continue search\n        var top = doc.getLine(line + 1 - lines.length), topString = fold(top)\n        if (topString.slice(topString.length - lines[0].length) != lines[0]) continue search\n        return {from: Pos(line + 1 - lines.length, adjustPos(top, topString, top.length - lines[0].length, fold)),\n                to: Pos(line, adjustPos(orig, string, lastLine.length, fold))}\n      }\n    }\n  }\n\n  function SearchCursor(doc, query, pos, options) {\n    this.atOccurrence = false\n    this.doc = doc\n    pos = pos ? doc.clipPos(pos) : Pos(0, 0)\n    this.pos = {from: pos, to: pos}\n\n    var caseFold\n    if (typeof options == \"object\") {\n      caseFold = options.caseFold\n    } else { // Backwards compat for when caseFold was the 4th argument\n      caseFold = options\n      options = null\n    }\n\n    if (typeof query == \"string\") {\n      if (caseFold == null) caseFold = false\n      this.matches = function(reverse, pos) {\n        return (reverse ? searchStringBackward : searchStringForward)(doc, query, pos, caseFold)\n      }\n    } else {\n      query = ensureGlobal(query)\n      if (!options || options.multiline !== false)\n        this.matches = function(reverse, pos) {\n          return (reverse ? searchRegexpBackwardMultiline : searchRegexpForwardMultiline)(doc, query, pos)\n        }\n      else\n        this.matches = function(reverse, pos) {\n          return (reverse ? searchRegexpBackward : searchRegexpForward)(doc, query, pos)\n        }\n    }\n  }\n\n  SearchCursor.prototype = {\n    findNext: function() {return this.find(false)},\n    findPrevious: function() {return this.find(true)},\n\n    find: function(reverse) {\n      var result = this.matches(reverse, this.doc.clipPos(reverse ? this.pos.from : this.pos.to))\n\n      // Implements weird auto-growing behavior on null-matches for\n      // backwards-compatiblity with the vim code (unfortunately)\n      while (result && CodeMirror.cmpPos(result.from, result.to) == 0) {\n        if (reverse) {\n          if (result.from.ch) result.from = Pos(result.from.line, result.from.ch - 1)\n          else if (result.from.line == this.doc.firstLine()) result = null\n          else result = this.matches(reverse, this.doc.clipPos(Pos(result.from.line - 1)))\n        } else {\n          if (result.to.ch < this.doc.getLine(result.to.line).length) result.to = Pos(result.to.line, result.to.ch + 1)\n          else if (result.to.line == this.doc.lastLine()) result = null\n          else result = this.matches(reverse, Pos(result.to.line + 1, 0))\n        }\n      }\n\n      if (result) {\n        this.pos = result\n        this.atOccurrence = true\n        return this.pos.match || true\n      } else {\n        var end = Pos(reverse ? this.doc.firstLine() : this.doc.lastLine() + 1, 0)\n        this.pos = {from: end, to: end}\n        return this.atOccurrence = false\n      }\n    },\n\n    from: function() {if (this.atOccurrence) return this.pos.from},\n    to: function() {if (this.atOccurrence) return this.pos.to},\n\n    replace: function(newText, origin) {\n      if (!this.atOccurrence) return\n      var lines = CodeMirror.splitLines(newText)\n      this.doc.replaceRange(lines, this.pos.from, this.pos.to, origin)\n      this.pos.to = Pos(this.pos.from.line + lines.length - 1,\n                        lines[lines.length - 1].length + (lines.length == 1 ? this.pos.from.ch : 0))\n    }\n  }\n\n  CodeMirror.defineExtension(\"getSearchCursor\", function(query, pos, caseFold) {\n    return new SearchCursor(this.doc, query, pos, caseFold)\n  })\n  CodeMirror.defineDocExtension(\"getSearchCursor\", function(query, pos, caseFold) {\n    return new SearchCursor(this, query, pos, caseFold)\n  })\n\n  CodeMirror.defineExtension(\"selectMatches\", function(query, caseFold) {\n    var ranges = []\n    var cur = this.getSearchCursor(query, this.getCursor(\"from\"), caseFold)\n    while (cur.findNext()) {\n      if (CodeMirror.cmpPos(cur.to(), this.getCursor(\"to\")) > 0) break\n      ranges.push({anchor: cur.from(), head: cur.to()})\n    }\n    if (ranges.length)\n      this.setSelections(ranges, 0)\n  })\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  var ie_lt8 = /MSIE \\d/.test(navigator.userAgent) &&\n    (document.documentMode == null || document.documentMode < 8);\n\n  var Pos = CodeMirror.Pos;\n\n  var matching = {\"(\": \")>\", \")\": \"(<\", \"[\": \"]>\", \"]\": \"[<\", \"{\": \"}>\", \"}\": \"{<\"};\n\n  function findMatchingBracket(cm, where, config) {\n    var line = cm.getLineHandle(where.line), pos = where.ch - 1;\n    var afterCursor = config && config.afterCursor\n    if (afterCursor == null)\n      afterCursor = /(^| )cm-fat-cursor($| )/.test(cm.getWrapperElement().className)\n\n    // A cursor is defined as between two characters, but in in vim command mode\n    // (i.e. not insert mode), the cursor is visually represented as a\n    // highlighted box on top of the 2nd character. Otherwise, we allow matches\n    // from before or after the cursor.\n    var match = (!afterCursor && pos >= 0 && matching[line.text.charAt(pos)]) ||\n        matching[line.text.charAt(++pos)];\n    if (!match) return null;\n    var dir = match.charAt(1) == \">\" ? 1 : -1;\n    if (config && config.strict && (dir > 0) != (pos == where.ch)) return null;\n    var style = cm.getTokenTypeAt(Pos(where.line, pos + 1));\n\n    var found = scanForBracket(cm, Pos(where.line, pos + (dir > 0 ? 1 : 0)), dir, style || null, config);\n    if (found == null) return null;\n    return {from: Pos(where.line, pos), to: found && found.pos,\n            match: found && found.ch == match.charAt(0), forward: dir > 0};\n  }\n\n  // bracketRegex is used to specify which type of bracket to scan\n  // should be a regexp, e.g. /[[\\]]/\n  //\n  // Note: If \"where\" is on an open bracket, then this bracket is ignored.\n  //\n  // Returns false when no bracket was found, null when it reached\n  // maxScanLines and gave up\n  function scanForBracket(cm, where, dir, style, config) {\n    var maxScanLen = (config && config.maxScanLineLength) || 10000;\n    var maxScanLines = (config && config.maxScanLines) || 1000;\n\n    var stack = [];\n    var re = config && config.bracketRegex ? config.bracketRegex : /[(){}[\\]]/;\n    var lineEnd = dir > 0 ? Math.min(where.line + maxScanLines, cm.lastLine() + 1)\n                          : Math.max(cm.firstLine() - 1, where.line - maxScanLines);\n    for (var lineNo = where.line; lineNo != lineEnd; lineNo += dir) {\n      var line = cm.getLine(lineNo);\n      if (!line) continue;\n      var pos = dir > 0 ? 0 : line.length - 1, end = dir > 0 ? line.length : -1;\n      if (line.length > maxScanLen) continue;\n      if (lineNo == where.line) pos = where.ch - (dir < 0 ? 1 : 0);\n      for (; pos != end; pos += dir) {\n        var ch = line.charAt(pos);\n        if (re.test(ch) && (style === undefined || cm.getTokenTypeAt(Pos(lineNo, pos + 1)) == style)) {\n          var match = matching[ch];\n          if ((match.charAt(1) == \">\") == (dir > 0)) stack.push(ch);\n          else if (!stack.length) return {pos: Pos(lineNo, pos), ch: ch};\n          else stack.pop();\n        }\n      }\n    }\n    return lineNo - dir == (dir > 0 ? cm.lastLine() : cm.firstLine()) ? false : null;\n  }\n\n  function matchBrackets(cm, autoclear, config) {\n    // Disable brace matching in long lines, since it'll cause hugely slow updates\n    var maxHighlightLen = cm.state.matchBrackets.maxHighlightLineLength || 1000;\n    var marks = [], ranges = cm.listSelections();\n    for (var i = 0; i < ranges.length; i++) {\n      var match = ranges[i].empty() && findMatchingBracket(cm, ranges[i].head, config);\n      if (match && cm.getLine(match.from.line).length <= maxHighlightLen) {\n        var style = match.match ? \"CodeMirror-matchingbracket\" : \"CodeMirror-nonmatchingbracket\";\n        marks.push(cm.markText(match.from, Pos(match.from.line, match.from.ch + 1), {className: style}));\n        if (match.to && cm.getLine(match.to.line).length <= maxHighlightLen)\n          marks.push(cm.markText(match.to, Pos(match.to.line, match.to.ch + 1), {className: style}));\n      }\n    }\n\n    if (marks.length) {\n      // Kludge to work around the IE bug from issue #1193, where text\n      // input stops going to the textare whever this fires.\n      if (ie_lt8 && cm.state.focused) cm.focus();\n\n      var clear = function() {\n        cm.operation(function() {\n          for (var i = 0; i < marks.length; i++) marks[i].clear();\n        });\n      };\n      if (autoclear) setTimeout(clear, 800);\n      else return clear;\n    }\n  }\n\n  var currentlyHighlighted = null;\n  function doMatchBrackets(cm) {\n    cm.operation(function() {\n      if (currentlyHighlighted) {currentlyHighlighted(); currentlyHighlighted = null;}\n      currentlyHighlighted = matchBrackets(cm, false, cm.state.matchBrackets);\n    });\n  }\n\n  CodeMirror.defineOption(\"matchBrackets\", false, function(cm, val, old) {\n    if (old && old != CodeMirror.Init) {\n      cm.off(\"cursorActivity\", doMatchBrackets);\n      if (currentlyHighlighted) {currentlyHighlighted(); currentlyHighlighted = null;}\n    }\n    if (val) {\n      cm.state.matchBrackets = typeof val == \"object\" ? val : {};\n      cm.on(\"cursorActivity\", doMatchBrackets);\n    }\n  });\n\n  CodeMirror.defineExtension(\"matchBrackets\", function() {matchBrackets(this, true);});\n  CodeMirror.defineExtension(\"findMatchingBracket\", function(pos, config, oldConfig){\n    // Backwards-compatibility kludge\n    if (oldConfig || typeof config == \"boolean\") {\n      if (!oldConfig) {\n        config = config ? {strict: true} : null\n      } else {\n        oldConfig.strict = config\n        config = oldConfig\n      }\n    }\n    return findMatchingBracket(this, pos, config)\n  });\n  CodeMirror.defineExtension(\"scanForBracket\", function(pos, dir, style, config){\n    return scanForBracket(this, pos, dir, style, config);\n  });\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n// A rough approximation of Sublime Text's keybindings\n// Depends on addon/search/searchcursor.js and optionally addon/dialog/dialogs.js\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../lib/codemirror\"), require(\"../addon/search/searchcursor\"), require(\"../addon/edit/matchbrackets\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../lib/codemirror\", \"../addon/search/searchcursor\", \"../addon/edit/matchbrackets\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  var map = CodeMirror.keyMap.sublime = {fallthrough: \"default\"};\n  var cmds = CodeMirror.commands;\n  var Pos = CodeMirror.Pos;\n  var mac = CodeMirror.keyMap[\"default\"] == CodeMirror.keyMap.macDefault;\n  var ctrl = mac ? \"Cmd-\" : \"Ctrl-\";\n\n  // This is not exactly Sublime's algorithm. I couldn't make heads or tails of that.\n  function findPosSubword(doc, start, dir) {\n    if (dir < 0 && start.ch == 0) return doc.clipPos(Pos(start.line - 1));\n    var line = doc.getLine(start.line);\n    if (dir > 0 && start.ch >= line.length) return doc.clipPos(Pos(start.line + 1, 0));\n    var state = \"start\", type;\n    for (var pos = start.ch, e = dir < 0 ? 0 : line.length, i = 0; pos != e; pos += dir, i++) {\n      var next = line.charAt(dir < 0 ? pos - 1 : pos);\n      var cat = next != \"_\" && CodeMirror.isWordChar(next) ? \"w\" : \"o\";\n      if (cat == \"w\" && next.toUpperCase() == next) cat = \"W\";\n      if (state == \"start\") {\n        if (cat != \"o\") { state = \"in\"; type = cat; }\n      } else if (state == \"in\") {\n        if (type != cat) {\n          if (type == \"w\" && cat == \"W\" && dir < 0) pos--;\n          if (type == \"W\" && cat == \"w\" && dir > 0) { type = \"w\"; continue; }\n          break;\n        }\n      }\n    }\n    return Pos(start.line, pos);\n  }\n\n  function moveSubword(cm, dir) {\n    cm.extendSelectionsBy(function(range) {\n      if (cm.display.shift || cm.doc.extend || range.empty())\n        return findPosSubword(cm.doc, range.head, dir);\n      else\n        return dir < 0 ? range.from() : range.to();\n    });\n  }\n\n  var goSubwordCombo = mac ? \"Ctrl-\" : \"Alt-\";\n\n  cmds[map[goSubwordCombo + \"Left\"] = \"goSubwordLeft\"] = function(cm) { moveSubword(cm, -1); };\n  cmds[map[goSubwordCombo + \"Right\"] = \"goSubwordRight\"] = function(cm) { moveSubword(cm, 1); };\n\n  if (mac) map[\"Cmd-Left\"] = \"goLineStartSmart\";\n\n  var scrollLineCombo = mac ? \"Ctrl-Alt-\" : \"Ctrl-\";\n\n  cmds[map[scrollLineCombo + \"Up\"] = \"scrollLineUp\"] = function(cm) {\n    var info = cm.getScrollInfo();\n    if (!cm.somethingSelected()) {\n      var visibleBottomLine = cm.lineAtHeight(info.top + info.clientHeight, \"local\");\n      if (cm.getCursor().line >= visibleBottomLine)\n        cm.execCommand(\"goLineUp\");\n    }\n    cm.scrollTo(null, info.top - cm.defaultTextHeight());\n  };\n  cmds[map[scrollLineCombo + \"Down\"] = \"scrollLineDown\"] = function(cm) {\n    var info = cm.getScrollInfo();\n    if (!cm.somethingSelected()) {\n      var visibleTopLine = cm.lineAtHeight(info.top, \"local\")+1;\n      if (cm.getCursor().line <= visibleTopLine)\n        cm.execCommand(\"goLineDown\");\n    }\n    cm.scrollTo(null, info.top + cm.defaultTextHeight());\n  };\n\n  cmds[map[\"Shift-\" + ctrl + \"L\"] = \"splitSelectionByLine\"] = function(cm) {\n    var ranges = cm.listSelections(), lineRanges = [];\n    for (var i = 0; i < ranges.length; i++) {\n      var from = ranges[i].from(), to = ranges[i].to();\n      for (var line = from.line; line <= to.line; ++line)\n        if (!(to.line > from.line && line == to.line && to.ch == 0))\n          lineRanges.push({anchor: line == from.line ? from : Pos(line, 0),\n                           head: line == to.line ? to : Pos(line)});\n    }\n    cm.setSelections(lineRanges, 0);\n  };\n\n  map[\"Shift-Tab\"] = \"indentLess\";\n\n  cmds[map[\"Esc\"] = \"singleSelectionTop\"] = function(cm) {\n    var range = cm.listSelections()[0];\n    cm.setSelection(range.anchor, range.head, {scroll: false});\n  };\n\n  cmds[map[ctrl + \"L\"] = \"selectLine\"] = function(cm) {\n    var ranges = cm.listSelections(), extended = [];\n    for (var i = 0; i < ranges.length; i++) {\n      var range = ranges[i];\n      extended.push({anchor: Pos(range.from().line, 0),\n                     head: Pos(range.to().line + 1, 0)});\n    }\n    cm.setSelections(extended);\n  };\n\n  map[\"Shift-Ctrl-K\"] = \"deleteLine\";\n\n  function insertLine(cm, above) {\n    if (cm.isReadOnly()) return CodeMirror.Pass\n    cm.operation(function() {\n      var len = cm.listSelections().length, newSelection = [], last = -1;\n      for (var i = 0; i < len; i++) {\n        var head = cm.listSelections()[i].head;\n        if (head.line <= last) continue;\n        var at = Pos(head.line + (above ? 0 : 1), 0);\n        cm.replaceRange(\"\\n\", at, null, \"+insertLine\");\n        cm.indentLine(at.line, null, true);\n        newSelection.push({head: at, anchor: at});\n        last = head.line + 1;\n      }\n      cm.setSelections(newSelection);\n    });\n    cm.execCommand(\"indentAuto\");\n  }\n\n  cmds[map[ctrl + \"Enter\"] = \"insertLineAfter\"] = function(cm) { return insertLine(cm, false); };\n\n  cmds[map[\"Shift-\" + ctrl + \"Enter\"] = \"insertLineBefore\"] = function(cm) { return insertLine(cm, true); };\n\n  function wordAt(cm, pos) {\n    var start = pos.ch, end = start, line = cm.getLine(pos.line);\n    while (start && CodeMirror.isWordChar(line.charAt(start - 1))) --start;\n    while (end < line.length && CodeMirror.isWordChar(line.charAt(end))) ++end;\n    return {from: Pos(pos.line, start), to: Pos(pos.line, end), word: line.slice(start, end)};\n  }\n\n  cmds[map[ctrl + \"D\"] = \"selectNextOccurrence\"] = function(cm) {\n    var from = cm.getCursor(\"from\"), to = cm.getCursor(\"to\");\n    var fullWord = cm.state.sublimeFindFullWord == cm.doc.sel;\n    if (CodeMirror.cmpPos(from, to) == 0) {\n      var word = wordAt(cm, from);\n      if (!word.word) return;\n      cm.setSelection(word.from, word.to);\n      fullWord = true;\n    } else {\n      var text = cm.getRange(from, to);\n      var query = fullWord ? new RegExp(\"\\\\b\" + text + \"\\\\b\") : text;\n      var cur = cm.getSearchCursor(query, to);\n      var found = cur.findNext();\n      if (!found) {\n        cur = cm.getSearchCursor(query, Pos(cm.firstLine(), 0));\n        found = cur.findNext();\n      }\n      if (!found || isSelectedRange(cm.listSelections(), cur.from(), cur.to()))\n        return CodeMirror.Pass\n      cm.addSelection(cur.from(), cur.to());\n    }\n    if (fullWord)\n      cm.state.sublimeFindFullWord = cm.doc.sel;\n  };\n\n  function addCursorToSelection(cm, dir) {\n    var ranges = cm.listSelections(), newRanges = [];\n    for (var i = 0; i < ranges.length; i++) {\n      var range = ranges[i];\n      var newAnchor = cm.findPosV(range.anchor, dir, \"line\");\n      var newHead = cm.findPosV(range.head, dir, \"line\");\n      var newRange = {anchor: newAnchor, head: newHead};\n      newRanges.push(range);\n      newRanges.push(newRange);\n    }\n    cm.setSelections(newRanges);\n  }\n\n  var addCursorToLineCombo = mac ? \"Shift-Cmd\" : 'Alt-Ctrl';\n  cmds[map[addCursorToLineCombo + \"Up\"] = \"addCursorToPrevLine\"] = function(cm) { addCursorToSelection(cm, -1); };\n  cmds[map[addCursorToLineCombo + \"Down\"] = \"addCursorToNextLine\"] = function(cm) { addCursorToSelection(cm, 1); };\n\n  function isSelectedRange(ranges, from, to) {\n    for (var i = 0; i < ranges.length; i++)\n      if (ranges[i].from() == from && ranges[i].to() == to) return true\n    return false\n  }\n\n  var mirror = \"(){}[]\";\n  function selectBetweenBrackets(cm) {\n    var ranges = cm.listSelections(), newRanges = []\n    for (var i = 0; i < ranges.length; i++) {\n      var range = ranges[i], pos = range.head, opening = cm.scanForBracket(pos, -1);\n      if (!opening) return false;\n      for (;;) {\n        var closing = cm.scanForBracket(pos, 1);\n        if (!closing) return false;\n        if (closing.ch == mirror.charAt(mirror.indexOf(opening.ch) + 1)) {\n          newRanges.push({anchor: Pos(opening.pos.line, opening.pos.ch + 1),\n                          head: closing.pos});\n          break;\n        }\n        pos = Pos(closing.pos.line, closing.pos.ch + 1);\n      }\n    }\n    cm.setSelections(newRanges);\n    return true;\n  }\n\n  cmds[map[\"Shift-\" + ctrl + \"Space\"] = \"selectScope\"] = function(cm) {\n    selectBetweenBrackets(cm) || cm.execCommand(\"selectAll\");\n  };\n  cmds[map[\"Shift-\" + ctrl + \"M\"] = \"selectBetweenBrackets\"] = function(cm) {\n    if (!selectBetweenBrackets(cm)) return CodeMirror.Pass;\n  };\n\n  cmds[map[ctrl + \"M\"] = \"goToBracket\"] = function(cm) {\n    cm.extendSelectionsBy(function(range) {\n      var next = cm.scanForBracket(range.head, 1);\n      if (next && CodeMirror.cmpPos(next.pos, range.head) != 0) return next.pos;\n      var prev = cm.scanForBracket(range.head, -1);\n      return prev && Pos(prev.pos.line, prev.pos.ch + 1) || range.head;\n    });\n  };\n\n  var swapLineCombo = mac ? \"Cmd-Ctrl-\" : \"Shift-Ctrl-\";\n\n  cmds[map[swapLineCombo + \"Up\"] = \"swapLineUp\"] = function(cm) {\n    if (cm.isReadOnly()) return CodeMirror.Pass\n    var ranges = cm.listSelections(), linesToMove = [], at = cm.firstLine() - 1, newSels = [];\n    for (var i = 0; i < ranges.length; i++) {\n      var range = ranges[i], from = range.from().line - 1, to = range.to().line;\n      newSels.push({anchor: Pos(range.anchor.line - 1, range.anchor.ch),\n                    head: Pos(range.head.line - 1, range.head.ch)});\n      if (range.to().ch == 0 && !range.empty()) --to;\n      if (from > at) linesToMove.push(from, to);\n      else if (linesToMove.length) linesToMove[linesToMove.length - 1] = to;\n      at = to;\n    }\n    cm.operation(function() {\n      for (var i = 0; i < linesToMove.length; i += 2) {\n        var from = linesToMove[i], to = linesToMove[i + 1];\n        var line = cm.getLine(from);\n        cm.replaceRange(\"\", Pos(from, 0), Pos(from + 1, 0), \"+swapLine\");\n        if (to > cm.lastLine())\n          cm.replaceRange(\"\\n\" + line, Pos(cm.lastLine()), null, \"+swapLine\");\n        else\n          cm.replaceRange(line + \"\\n\", Pos(to, 0), null, \"+swapLine\");\n      }\n      cm.setSelections(newSels);\n      cm.scrollIntoView();\n    });\n  };\n\n  cmds[map[swapLineCombo + \"Down\"] = \"swapLineDown\"] = function(cm) {\n    if (cm.isReadOnly()) return CodeMirror.Pass\n    var ranges = cm.listSelections(), linesToMove = [], at = cm.lastLine() + 1;\n    for (var i = ranges.length - 1; i >= 0; i--) {\n      var range = ranges[i], from = range.to().line + 1, to = range.from().line;\n      if (range.to().ch == 0 && !range.empty()) from--;\n      if (from < at) linesToMove.push(from, to);\n      else if (linesToMove.length) linesToMove[linesToMove.length - 1] = to;\n      at = to;\n    }\n    cm.operation(function() {\n      for (var i = linesToMove.length - 2; i >= 0; i -= 2) {\n        var from = linesToMove[i], to = linesToMove[i + 1];\n        var line = cm.getLine(from);\n        if (from == cm.lastLine())\n          cm.replaceRange(\"\", Pos(from - 1), Pos(from), \"+swapLine\");\n        else\n          cm.replaceRange(\"\", Pos(from, 0), Pos(from + 1, 0), \"+swapLine\");\n        cm.replaceRange(line + \"\\n\", Pos(to, 0), null, \"+swapLine\");\n      }\n      cm.scrollIntoView();\n    });\n  };\n\n  cmds[map[ctrl + \"/\"] = \"toggleCommentIndented\"] = function(cm) {\n    cm.toggleComment({ indent: true });\n  }\n\n  cmds[map[ctrl + \"J\"] = \"joinLines\"] = function(cm) {\n    var ranges = cm.listSelections(), joined = [];\n    for (var i = 0; i < ranges.length; i++) {\n      var range = ranges[i], from = range.from();\n      var start = from.line, end = range.to().line;\n      while (i < ranges.length - 1 && ranges[i + 1].from().line == end)\n        end = ranges[++i].to().line;\n      joined.push({start: start, end: end, anchor: !range.empty() && from});\n    }\n    cm.operation(function() {\n      var offset = 0, ranges = [];\n      for (var i = 0; i < joined.length; i++) {\n        var obj = joined[i];\n        var anchor = obj.anchor && Pos(obj.anchor.line - offset, obj.anchor.ch), head;\n        for (var line = obj.start; line <= obj.end; line++) {\n          var actual = line - offset;\n          if (line == obj.end) head = Pos(actual, cm.getLine(actual).length + 1);\n          if (actual < cm.lastLine()) {\n            cm.replaceRange(\" \", Pos(actual), Pos(actual + 1, /^\\s*/.exec(cm.getLine(actual + 1))[0].length));\n            ++offset;\n          }\n        }\n        ranges.push({anchor: anchor || head, head: head});\n      }\n      cm.setSelections(ranges, 0);\n    });\n  };\n\n  cmds[map[\"Shift-\" + ctrl + \"D\"] = \"duplicateLine\"] = function(cm) {\n    cm.operation(function() {\n      var rangeCount = cm.listSelections().length;\n      for (var i = 0; i < rangeCount; i++) {\n        var range = cm.listSelections()[i];\n        if (range.empty())\n          cm.replaceRange(cm.getLine(range.head.line) + \"\\n\", Pos(range.head.line, 0));\n        else\n          cm.replaceRange(cm.getRange(range.from(), range.to()), range.from());\n      }\n      cm.scrollIntoView();\n    });\n  };\n\n  if (!mac) map[ctrl + \"T\"] = \"transposeChars\";\n\n  function sortLines(cm, caseSensitive) {\n    if (cm.isReadOnly()) return CodeMirror.Pass\n    var ranges = cm.listSelections(), toSort = [], selected;\n    for (var i = 0; i < ranges.length; i++) {\n      var range = ranges[i];\n      if (range.empty()) continue;\n      var from = range.from().line, to = range.to().line;\n      while (i < ranges.length - 1 && ranges[i + 1].from().line == to)\n        to = ranges[++i].to().line;\n      if (!ranges[i].to().ch) to--;\n      toSort.push(from, to);\n    }\n    if (toSort.length) selected = true;\n    else toSort.push(cm.firstLine(), cm.lastLine());\n\n    cm.operation(function() {\n      var ranges = [];\n      for (var i = 0; i < toSort.length; i += 2) {\n        var from = toSort[i], to = toSort[i + 1];\n        var start = Pos(from, 0), end = Pos(to);\n        var lines = cm.getRange(start, end, false);\n        if (caseSensitive)\n          lines.sort();\n        else\n          lines.sort(function(a, b) {\n            var au = a.toUpperCase(), bu = b.toUpperCase();\n            if (au != bu) { a = au; b = bu; }\n            return a < b ? -1 : a == b ? 0 : 1;\n          });\n        cm.replaceRange(lines, start, end);\n        if (selected) ranges.push({anchor: start, head: Pos(to + 1, 0)});\n      }\n      if (selected) cm.setSelections(ranges, 0);\n    });\n  }\n\n  cmds[map[\"F9\"] = \"sortLines\"] = function(cm) { sortLines(cm, true); };\n  cmds[map[ctrl + \"F9\"] = \"sortLinesInsensitive\"] = function(cm) { sortLines(cm, false); };\n\n  cmds[map[\"F2\"] = \"nextBookmark\"] = function(cm) {\n    var marks = cm.state.sublimeBookmarks;\n    if (marks) while (marks.length) {\n      var current = marks.shift();\n      var found = current.find();\n      if (found) {\n        marks.push(current);\n        return cm.setSelection(found.from, found.to);\n      }\n    }\n  };\n\n  cmds[map[\"Shift-F2\"] = \"prevBookmark\"] = function(cm) {\n    var marks = cm.state.sublimeBookmarks;\n    if (marks) while (marks.length) {\n      marks.unshift(marks.pop());\n      var found = marks[marks.length - 1].find();\n      if (!found)\n        marks.pop();\n      else\n        return cm.setSelection(found.from, found.to);\n    }\n  };\n\n  cmds[map[ctrl + \"F2\"] = \"toggleBookmark\"] = function(cm) {\n    var ranges = cm.listSelections();\n    var marks = cm.state.sublimeBookmarks || (cm.state.sublimeBookmarks = []);\n    for (var i = 0; i < ranges.length; i++) {\n      var from = ranges[i].from(), to = ranges[i].to();\n      var found = cm.findMarks(from, to);\n      for (var j = 0; j < found.length; j++) {\n        if (found[j].sublimeBookmark) {\n          found[j].clear();\n          for (var k = 0; k < marks.length; k++)\n            if (marks[k] == found[j])\n              marks.splice(k--, 1);\n          break;\n        }\n      }\n      if (j == found.length)\n        marks.push(cm.markText(from, to, {sublimeBookmark: true, clearWhenEmpty: false}));\n    }\n  };\n\n  cmds[map[\"Shift-\" + ctrl + \"F2\"] = \"clearBookmarks\"] = function(cm) {\n    var marks = cm.state.sublimeBookmarks;\n    if (marks) for (var i = 0; i < marks.length; i++) marks[i].clear();\n    marks.length = 0;\n  };\n\n  cmds[map[\"Alt-F2\"] = \"selectBookmarks\"] = function(cm) {\n    var marks = cm.state.sublimeBookmarks, ranges = [];\n    if (marks) for (var i = 0; i < marks.length; i++) {\n      var found = marks[i].find();\n      if (!found)\n        marks.splice(i--, 0);\n      else\n        ranges.push({anchor: found.from, head: found.to});\n    }\n    if (ranges.length)\n      cm.setSelections(ranges, 0);\n  };\n\n  map[\"Alt-Q\"] = \"wrapLines\";\n\n  var cK = ctrl + \"K \";\n\n  function modifyWordOrSelection(cm, mod) {\n    cm.operation(function() {\n      var ranges = cm.listSelections(), indices = [], replacements = [];\n      for (var i = 0; i < ranges.length; i++) {\n        var range = ranges[i];\n        if (range.empty()) { indices.push(i); replacements.push(\"\"); }\n        else replacements.push(mod(cm.getRange(range.from(), range.to())));\n      }\n      cm.replaceSelections(replacements, \"around\", \"case\");\n      for (var i = indices.length - 1, at; i >= 0; i--) {\n        var range = ranges[indices[i]];\n        if (at && CodeMirror.cmpPos(range.head, at) > 0) continue;\n        var word = wordAt(cm, range.head);\n        at = word.from;\n        cm.replaceRange(mod(word.word), word.from, word.to);\n      }\n    });\n  }\n\n  map[cK + ctrl + \"Backspace\"] = \"delLineLeft\";\n\n  cmds[map[\"Backspace\"] = \"smartBackspace\"] = function(cm) {\n    if (cm.somethingSelected()) return CodeMirror.Pass;\n\n    cm.operation(function() {\n      var cursors = cm.listSelections();\n      var indentUnit = cm.getOption(\"indentUnit\");\n\n      for (var i = cursors.length - 1; i >= 0; i--) {\n        var cursor = cursors[i].head;\n        var toStartOfLine = cm.getRange({line: cursor.line, ch: 0}, cursor);\n        var column = CodeMirror.countColumn(toStartOfLine, null, cm.getOption(\"tabSize\"));\n\n        // Delete by one character by default\n        var deletePos = cm.findPosH(cursor, -1, \"char\", false);\n\n        if (toStartOfLine && !/\\S/.test(toStartOfLine) && column % indentUnit == 0) {\n          var prevIndent = new Pos(cursor.line,\n            CodeMirror.findColumn(toStartOfLine, column - indentUnit, indentUnit));\n\n          // Smart delete only if we found a valid prevIndent location\n          if (prevIndent.ch != cursor.ch) deletePos = prevIndent;\n        }\n\n        cm.replaceRange(\"\", deletePos, cursor, \"+delete\");\n      }\n    });\n  };\n\n  cmds[map[cK + ctrl + \"K\"] = \"delLineRight\"] = function(cm) {\n    cm.operation(function() {\n      var ranges = cm.listSelections();\n      for (var i = ranges.length - 1; i >= 0; i--)\n        cm.replaceRange(\"\", ranges[i].anchor, Pos(ranges[i].to().line), \"+delete\");\n      cm.scrollIntoView();\n    });\n  };\n\n  cmds[map[cK + ctrl + \"U\"] = \"upcaseAtCursor\"] = function(cm) {\n    modifyWordOrSelection(cm, function(str) { return str.toUpperCase(); });\n  };\n  cmds[map[cK + ctrl + \"L\"] = \"downcaseAtCursor\"] = function(cm) {\n    modifyWordOrSelection(cm, function(str) { return str.toLowerCase(); });\n  };\n\n  cmds[map[cK + ctrl + \"Space\"] = \"setSublimeMark\"] = function(cm) {\n    if (cm.state.sublimeMark) cm.state.sublimeMark.clear();\n    cm.state.sublimeMark = cm.setBookmark(cm.getCursor());\n  };\n  cmds[map[cK + ctrl + \"A\"] = \"selectToSublimeMark\"] = function(cm) {\n    var found = cm.state.sublimeMark && cm.state.sublimeMark.find();\n    if (found) cm.setSelection(cm.getCursor(), found);\n  };\n  cmds[map[cK + ctrl + \"W\"] = \"deleteToSublimeMark\"] = function(cm) {\n    var found = cm.state.sublimeMark && cm.state.sublimeMark.find();\n    if (found) {\n      var from = cm.getCursor(), to = found;\n      if (CodeMirror.cmpPos(from, to) > 0) { var tmp = to; to = from; from = tmp; }\n      cm.state.sublimeKilled = cm.getRange(from, to);\n      cm.replaceRange(\"\", from, to);\n    }\n  };\n  cmds[map[cK + ctrl + \"X\"] = \"swapWithSublimeMark\"] = function(cm) {\n    var found = cm.state.sublimeMark && cm.state.sublimeMark.find();\n    if (found) {\n      cm.state.sublimeMark.clear();\n      cm.state.sublimeMark = cm.setBookmark(cm.getCursor());\n      cm.setCursor(found);\n    }\n  };\n  cmds[map[cK + ctrl + \"Y\"] = \"sublimeYank\"] = function(cm) {\n    if (cm.state.sublimeKilled != null)\n      cm.replaceSelection(cm.state.sublimeKilled, null, \"paste\");\n  };\n\n  map[cK + ctrl + \"G\"] = \"clearBookmarks\";\n  cmds[map[cK + ctrl + \"C\"] = \"showInCenter\"] = function(cm) {\n    var pos = cm.cursorCoords(null, \"local\");\n    cm.scrollTo(null, (pos.top + pos.bottom) / 2 - cm.getScrollInfo().clientHeight / 2);\n  };\n\n  var selectLinesCombo = mac ? \"Ctrl-Shift-\" : \"Ctrl-Alt-\";\n  cmds[map[selectLinesCombo + \"Up\"] = \"selectLinesUpward\"] = function(cm) {\n    cm.operation(function() {\n      var ranges = cm.listSelections();\n      for (var i = 0; i < ranges.length; i++) {\n        var range = ranges[i];\n        if (range.head.line > cm.firstLine())\n          cm.addSelection(Pos(range.head.line - 1, range.head.ch));\n      }\n    });\n  };\n  cmds[map[selectLinesCombo + \"Down\"] = \"selectLinesDownward\"] = function(cm) {\n    cm.operation(function() {\n      var ranges = cm.listSelections();\n      for (var i = 0; i < ranges.length; i++) {\n        var range = ranges[i];\n        if (range.head.line < cm.lastLine())\n          cm.addSelection(Pos(range.head.line + 1, range.head.ch));\n      }\n    });\n  };\n\n  function getTarget(cm) {\n    var from = cm.getCursor(\"from\"), to = cm.getCursor(\"to\");\n    if (CodeMirror.cmpPos(from, to) == 0) {\n      var word = wordAt(cm, from);\n      if (!word.word) return;\n      from = word.from;\n      to = word.to;\n    }\n    return {from: from, to: to, query: cm.getRange(from, to), word: word};\n  }\n\n  function findAndGoTo(cm, forward) {\n    var target = getTarget(cm);\n    if (!target) return;\n    var query = target.query;\n    var cur = cm.getSearchCursor(query, forward ? target.to : target.from);\n\n    if (forward ? cur.findNext() : cur.findPrevious()) {\n      cm.setSelection(cur.from(), cur.to());\n    } else {\n      cur = cm.getSearchCursor(query, forward ? Pos(cm.firstLine(), 0)\n                                              : cm.clipPos(Pos(cm.lastLine())));\n      if (forward ? cur.findNext() : cur.findPrevious())\n        cm.setSelection(cur.from(), cur.to());\n      else if (target.word)\n        cm.setSelection(target.from, target.to);\n    }\n  };\n  cmds[map[ctrl + \"F3\"] = \"findUnder\"] = function(cm) { findAndGoTo(cm, true); };\n  cmds[map[\"Shift-\" + ctrl + \"F3\"] = \"findUnderPrevious\"] = function(cm) { findAndGoTo(cm,false); };\n  cmds[map[\"Alt-F3\"] = \"findAllUnder\"] = function(cm) {\n    var target = getTarget(cm);\n    if (!target) return;\n    var cur = cm.getSearchCursor(target.query);\n    var matches = [];\n    var primaryIndex = -1;\n    while (cur.findNext()) {\n      matches.push({anchor: cur.from(), head: cur.to()});\n      if (cur.from().line <= target.from.line && cur.from().ch <= target.from.ch)\n        primaryIndex++;\n    }\n    cm.setSelections(matches, primaryIndex);\n  };\n\n  map[\"Shift-\" + ctrl + \"[\"] = \"fold\";\n  map[\"Shift-\" + ctrl + \"]\"] = \"unfold\";\n  map[cK + ctrl + \"0\"] = map[cK + ctrl + \"J\"] = \"unfoldAll\";\n\n  map[ctrl + \"I\"] = \"findIncremental\";\n  map[\"Shift-\" + ctrl + \"I\"] = \"findIncrementalReverse\";\n  map[ctrl + \"H\"] = \"replace\";\n  map[\"F3\"] = \"findNext\";\n  map[\"Shift-F3\"] = \"findPrev\";\n\n  CodeMirror.normalizeKeyMap(map);\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  var defaults = {\n    pairs: \"()[]{}''\\\"\\\"\",\n    triples: \"\",\n    explode: \"[]{}\"\n  };\n\n  var Pos = CodeMirror.Pos;\n\n  CodeMirror.defineOption(\"autoCloseBrackets\", false, function(cm, val, old) {\n    if (old && old != CodeMirror.Init) {\n      cm.removeKeyMap(keyMap);\n      cm.state.closeBrackets = null;\n    }\n    if (val) {\n      cm.state.closeBrackets = val;\n      cm.addKeyMap(keyMap);\n    }\n  });\n\n  function getOption(conf, name) {\n    if (name == \"pairs\" && typeof conf == \"string\") return conf;\n    if (typeof conf == \"object\" && conf[name] != null) return conf[name];\n    return defaults[name];\n  }\n\n  var bind = defaults.pairs + \"`\";\n  var keyMap = {Backspace: handleBackspace, Enter: handleEnter};\n  for (var i = 0; i < bind.length; i++)\n    keyMap[\"'\" + bind.charAt(i) + \"'\"] = handler(bind.charAt(i));\n\n  function handler(ch) {\n    return function(cm) { return handleChar(cm, ch); };\n  }\n\n  function getConfig(cm) {\n    var deflt = cm.state.closeBrackets;\n    if (!deflt || deflt.override) return deflt;\n    var mode = cm.getModeAt(cm.getCursor());\n    return mode.closeBrackets || deflt;\n  }\n\n  function handleBackspace(cm) {\n    var conf = getConfig(cm);\n    if (!conf || cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n\n    var pairs = getOption(conf, \"pairs\");\n    var ranges = cm.listSelections();\n    for (var i = 0; i < ranges.length; i++) {\n      if (!ranges[i].empty()) return CodeMirror.Pass;\n      var around = charsAround(cm, ranges[i].head);\n      if (!around || pairs.indexOf(around) % 2 != 0) return CodeMirror.Pass;\n    }\n    for (var i = ranges.length - 1; i >= 0; i--) {\n      var cur = ranges[i].head;\n      cm.replaceRange(\"\", Pos(cur.line, cur.ch - 1), Pos(cur.line, cur.ch + 1), \"+delete\");\n    }\n  }\n\n  function handleEnter(cm) {\n    var conf = getConfig(cm);\n    var explode = conf && getOption(conf, \"explode\");\n    if (!explode || cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n\n    var ranges = cm.listSelections();\n    for (var i = 0; i < ranges.length; i++) {\n      if (!ranges[i].empty()) return CodeMirror.Pass;\n      var around = charsAround(cm, ranges[i].head);\n      if (!around || explode.indexOf(around) % 2 != 0) return CodeMirror.Pass;\n    }\n    cm.operation(function() {\n      cm.replaceSelection(\"\\n\\n\", null);\n      cm.execCommand(\"goCharLeft\");\n      ranges = cm.listSelections();\n      for (var i = 0; i < ranges.length; i++) {\n        var line = ranges[i].head.line;\n        cm.indentLine(line, null, true);\n        cm.indentLine(line + 1, null, true);\n      }\n    });\n  }\n\n  function contractSelection(sel) {\n    var inverted = CodeMirror.cmpPos(sel.anchor, sel.head) > 0;\n    return {anchor: new Pos(sel.anchor.line, sel.anchor.ch + (inverted ? -1 : 1)),\n            head: new Pos(sel.head.line, sel.head.ch + (inverted ? 1 : -1))};\n  }\n\n  function handleChar(cm, ch) {\n    var conf = getConfig(cm);\n    if (!conf || cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n\n    var pairs = getOption(conf, \"pairs\");\n    var pos = pairs.indexOf(ch);\n    if (pos == -1) return CodeMirror.Pass;\n    var triples = getOption(conf, \"triples\");\n\n    var identical = pairs.charAt(pos + 1) == ch;\n    var ranges = cm.listSelections();\n    var opening = pos % 2 == 0;\n\n    var type;\n    for (var i = 0; i < ranges.length; i++) {\n      var range = ranges[i], cur = range.head, curType;\n      var next = cm.getRange(cur, Pos(cur.line, cur.ch + 1));\n      if (opening && !range.empty()) {\n        curType = \"surround\";\n      } else if ((identical || !opening) && next == ch) {\n        if (identical && stringStartsAfter(cm, cur))\n          curType = \"both\";\n        else if (triples.indexOf(ch) >= 0 && cm.getRange(cur, Pos(cur.line, cur.ch + 3)) == ch + ch + ch)\n          curType = \"skipThree\";\n        else\n          curType = \"skip\";\n      } else if (identical && cur.ch > 1 && triples.indexOf(ch) >= 0 &&\n                 cm.getRange(Pos(cur.line, cur.ch - 2), cur) == ch + ch &&\n                 (cur.ch <= 2 || cm.getRange(Pos(cur.line, cur.ch - 3), Pos(cur.line, cur.ch - 2)) != ch)) {\n        curType = \"addFour\";\n      } else if (identical) {\n        if (!CodeMirror.isWordChar(next) && enteringString(cm, cur, ch)) curType = \"both\";\n        else return CodeMirror.Pass;\n      } else if (opening && (cm.getLine(cur.line).length == cur.ch ||\n                             isClosingBracket(next, pairs) ||\n                             /\\s/.test(next))) {\n        curType = \"both\";\n      } else {\n        return CodeMirror.Pass;\n      }\n      if (!type) type = curType;\n      else if (type != curType) return CodeMirror.Pass;\n    }\n\n    var left = pos % 2 ? pairs.charAt(pos - 1) : ch;\n    var right = pos % 2 ? ch : pairs.charAt(pos + 1);\n    cm.operation(function() {\n      if (type == \"skip\") {\n        cm.execCommand(\"goCharRight\");\n      } else if (type == \"skipThree\") {\n        for (var i = 0; i < 3; i++)\n          cm.execCommand(\"goCharRight\");\n      } else if (type == \"surround\") {\n        var sels = cm.getSelections();\n        for (var i = 0; i < sels.length; i++)\n          sels[i] = left + sels[i] + right;\n        cm.replaceSelections(sels, \"around\");\n        sels = cm.listSelections().slice();\n        for (var i = 0; i < sels.length; i++)\n          sels[i] = contractSelection(sels[i]);\n        cm.setSelections(sels);\n      } else if (type == \"both\") {\n        cm.replaceSelection(left + right, null);\n        cm.triggerElectric(left + right);\n        cm.execCommand(\"goCharLeft\");\n      } else if (type == \"addFour\") {\n        cm.replaceSelection(left + left + left + left, \"before\");\n        cm.execCommand(\"goCharRight\");\n      }\n    });\n  }\n\n  function isClosingBracket(ch, pairs) {\n    var pos = pairs.lastIndexOf(ch);\n    return pos > -1 && pos % 2 == 1;\n  }\n\n  function charsAround(cm, pos) {\n    var str = cm.getRange(Pos(pos.line, pos.ch - 1),\n                          Pos(pos.line, pos.ch + 1));\n    return str.length == 2 ? str : null;\n  }\n\n  // Project the token type that will exists after the given char is\n  // typed, and use it to determine whether it would cause the start\n  // of a string token.\n  function enteringString(cm, pos, ch) {\n    var line = cm.getLine(pos.line);\n    var token = cm.getTokenAt(pos);\n    if (/\\bstring2?\\b/.test(token.type) || stringStartsAfter(cm, pos)) return false;\n    var stream = new CodeMirror.StringStream(line.slice(0, pos.ch) + ch + line.slice(pos.ch), 4);\n    stream.pos = stream.start = token.start;\n    for (;;) {\n      var type1 = cm.getMode().token(stream, token.state);\n      if (stream.pos >= pos.ch + 1) return /\\bstring2?\\b/.test(type1);\n      stream.start = stream.pos;\n    }\n  }\n\n  function stringStartsAfter(cm, pos) {\n    var token = cm.getTokenAt(Pos(pos.line, pos.ch + 1))\n    return /\\bstring/.test(token.type) && token.start == pos.ch\n  }\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  var Pos = CodeMirror.Pos;\n  function cmp(a, b) { return a.line - b.line || a.ch - b.ch; }\n\n  var nameStartChar = \"A-Z_a-z\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD\";\n  var nameChar = nameStartChar + \"\\-\\:\\.0-9\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040\";\n  var xmlTagStart = new RegExp(\"<(/?)([\" + nameStartChar + \"][\" + nameChar + \"]*)\", \"g\");\n\n  function Iter(cm, line, ch, range) {\n    this.line = line; this.ch = ch;\n    this.cm = cm; this.text = cm.getLine(line);\n    this.min = range ? Math.max(range.from, cm.firstLine()) : cm.firstLine();\n    this.max = range ? Math.min(range.to - 1, cm.lastLine()) : cm.lastLine();\n  }\n\n  function tagAt(iter, ch) {\n    var type = iter.cm.getTokenTypeAt(Pos(iter.line, ch));\n    return type && /\\btag\\b/.test(type);\n  }\n\n  function nextLine(iter) {\n    if (iter.line >= iter.max) return;\n    iter.ch = 0;\n    iter.text = iter.cm.getLine(++iter.line);\n    return true;\n  }\n  function prevLine(iter) {\n    if (iter.line <= iter.min) return;\n    iter.text = iter.cm.getLine(--iter.line);\n    iter.ch = iter.text.length;\n    return true;\n  }\n\n  function toTagEnd(iter) {\n    for (;;) {\n      var gt = iter.text.indexOf(\">\", iter.ch);\n      if (gt == -1) { if (nextLine(iter)) continue; else return; }\n      if (!tagAt(iter, gt + 1)) { iter.ch = gt + 1; continue; }\n      var lastSlash = iter.text.lastIndexOf(\"/\", gt);\n      var selfClose = lastSlash > -1 && !/\\S/.test(iter.text.slice(lastSlash + 1, gt));\n      iter.ch = gt + 1;\n      return selfClose ? \"selfClose\" : \"regular\";\n    }\n  }\n  function toTagStart(iter) {\n    for (;;) {\n      var lt = iter.ch ? iter.text.lastIndexOf(\"<\", iter.ch - 1) : -1;\n      if (lt == -1) { if (prevLine(iter)) continue; else return; }\n      if (!tagAt(iter, lt + 1)) { iter.ch = lt; continue; }\n      xmlTagStart.lastIndex = lt;\n      iter.ch = lt;\n      var match = xmlTagStart.exec(iter.text);\n      if (match && match.index == lt) return match;\n    }\n  }\n\n  function toNextTag(iter) {\n    for (;;) {\n      xmlTagStart.lastIndex = iter.ch;\n      var found = xmlTagStart.exec(iter.text);\n      if (!found) { if (nextLine(iter)) continue; else return; }\n      if (!tagAt(iter, found.index + 1)) { iter.ch = found.index + 1; continue; }\n      iter.ch = found.index + found[0].length;\n      return found;\n    }\n  }\n  function toPrevTag(iter) {\n    for (;;) {\n      var gt = iter.ch ? iter.text.lastIndexOf(\">\", iter.ch - 1) : -1;\n      if (gt == -1) { if (prevLine(iter)) continue; else return; }\n      if (!tagAt(iter, gt + 1)) { iter.ch = gt; continue; }\n      var lastSlash = iter.text.lastIndexOf(\"/\", gt);\n      var selfClose = lastSlash > -1 && !/\\S/.test(iter.text.slice(lastSlash + 1, gt));\n      iter.ch = gt + 1;\n      return selfClose ? \"selfClose\" : \"regular\";\n    }\n  }\n\n  function findMatchingClose(iter, tag) {\n    var stack = [];\n    for (;;) {\n      var next = toNextTag(iter), end, startLine = iter.line, startCh = iter.ch - (next ? next[0].length : 0);\n      if (!next || !(end = toTagEnd(iter))) return;\n      if (end == \"selfClose\") continue;\n      if (next[1]) { // closing tag\n        for (var i = stack.length - 1; i >= 0; --i) if (stack[i] == next[2]) {\n          stack.length = i;\n          break;\n        }\n        if (i < 0 && (!tag || tag == next[2])) return {\n          tag: next[2],\n          from: Pos(startLine, startCh),\n          to: Pos(iter.line, iter.ch)\n        };\n      } else { // opening tag\n        stack.push(next[2]);\n      }\n    }\n  }\n  function findMatchingOpen(iter, tag) {\n    var stack = [];\n    for (;;) {\n      var prev = toPrevTag(iter);\n      if (!prev) return;\n      if (prev == \"selfClose\") { toTagStart(iter); continue; }\n      var endLine = iter.line, endCh = iter.ch;\n      var start = toTagStart(iter);\n      if (!start) return;\n      if (start[1]) { // closing tag\n        stack.push(start[2]);\n      } else { // opening tag\n        for (var i = stack.length - 1; i >= 0; --i) if (stack[i] == start[2]) {\n          stack.length = i;\n          break;\n        }\n        if (i < 0 && (!tag || tag == start[2])) return {\n          tag: start[2],\n          from: Pos(iter.line, iter.ch),\n          to: Pos(endLine, endCh)\n        };\n      }\n    }\n  }\n\n  CodeMirror.registerHelper(\"fold\", \"xml\", function(cm, start) {\n    var iter = new Iter(cm, start.line, 0);\n    for (;;) {\n      var openTag = toNextTag(iter), end;\n      if (!openTag || iter.line != start.line || !(end = toTagEnd(iter))) return;\n      if (!openTag[1] && end != \"selfClose\") {\n        var startPos = Pos(iter.line, iter.ch);\n        var endPos = findMatchingClose(iter, openTag[2]);\n        return endPos && {from: startPos, to: endPos.from};\n      }\n    }\n  });\n  CodeMirror.findMatchingTag = function(cm, pos, range) {\n    var iter = new Iter(cm, pos.line, pos.ch, range);\n    if (iter.text.indexOf(\">\") == -1 && iter.text.indexOf(\"<\") == -1) return;\n    var end = toTagEnd(iter), to = end && Pos(iter.line, iter.ch);\n    var start = end && toTagStart(iter);\n    if (!end || !start || cmp(iter, pos) > 0) return;\n    var here = {from: Pos(iter.line, iter.ch), to: to, tag: start[2]};\n    if (end == \"selfClose\") return {open: here, close: null, at: \"open\"};\n\n    if (start[1]) { // closing tag\n      return {open: findMatchingOpen(iter, start[2]), close: here, at: \"close\"};\n    } else { // opening tag\n      iter = new Iter(cm, to.line, to.ch, range);\n      return {open: here, close: findMatchingClose(iter, start[2]), at: \"open\"};\n    }\n  };\n\n  CodeMirror.findEnclosingTag = function(cm, pos, range, tag) {\n    var iter = new Iter(cm, pos.line, pos.ch, range);\n    for (;;) {\n      var open = findMatchingOpen(iter, tag);\n      if (!open) break;\n      var forward = new Iter(cm, pos.line, pos.ch, range);\n      var close = findMatchingClose(forward, open.tag);\n      if (close) return {open: open, close: close};\n    }\n  };\n\n  // Used by addon/edit/closetag.js\n  CodeMirror.scanForClosingTag = function(cm, pos, name, end) {\n    var iter = new Iter(cm, pos.line, pos.ch, end ? {from: 0, to: end} : null);\n    return findMatchingClose(iter, name);\n  };\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n/**\n * Tag-closer extension for CodeMirror.\n *\n * This extension adds an \"autoCloseTags\" option that can be set to\n * either true to get the default behavior, or an object to further\n * configure its behavior.\n *\n * These are supported options:\n *\n * `whenClosing` (default true)\n *   Whether to autoclose when the '/' of a closing tag is typed.\n * `whenOpening` (default true)\n *   Whether to autoclose the tag when the final '>' of an opening\n *   tag is typed.\n * `dontCloseTags` (default is empty tags for HTML, none for XML)\n *   An array of tag names that should not be autoclosed.\n * `indentTags` (default is block tags for HTML, none for XML)\n *   An array of tag names that should, when opened, cause a\n *   blank line to be added inside the tag, and the blank line and\n *   closing line to be indented.\n *\n * See demos/closetag.html for a usage example.\n */\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"), require(\"../fold/xml-fold\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"../fold/xml-fold\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  CodeMirror.defineOption(\"autoCloseTags\", false, function(cm, val, old) {\n    if (old != CodeMirror.Init && old)\n      cm.removeKeyMap(\"autoCloseTags\");\n    if (!val) return;\n    var map = {name: \"autoCloseTags\"};\n    if (typeof val != \"object\" || val.whenClosing)\n      map[\"'/'\"] = function(cm) { return autoCloseSlash(cm); };\n    if (typeof val != \"object\" || val.whenOpening)\n      map[\"'>'\"] = function(cm) { return autoCloseGT(cm); };\n    cm.addKeyMap(map);\n  });\n\n  var htmlDontClose = [\"area\", \"base\", \"br\", \"col\", \"command\", \"embed\", \"hr\", \"img\", \"input\", \"keygen\", \"link\", \"meta\", \"param\",\n                       \"source\", \"track\", \"wbr\"];\n  var htmlIndent = [\"applet\", \"blockquote\", \"body\", \"button\", \"div\", \"dl\", \"fieldset\", \"form\", \"frameset\", \"h1\", \"h2\", \"h3\", \"h4\",\n                    \"h5\", \"h6\", \"head\", \"html\", \"iframe\", \"layer\", \"legend\", \"object\", \"ol\", \"p\", \"select\", \"table\", \"ul\"];\n\n  function autoCloseGT(cm) {\n    if (cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n    var ranges = cm.listSelections(), replacements = [];\n    for (var i = 0; i < ranges.length; i++) {\n      if (!ranges[i].empty()) return CodeMirror.Pass;\n      var pos = ranges[i].head, tok = cm.getTokenAt(pos);\n      var inner = CodeMirror.innerMode(cm.getMode(), tok.state), state = inner.state;\n      if (inner.mode.name != \"xml\" || !state.tagName) return CodeMirror.Pass;\n\n      var opt = cm.getOption(\"autoCloseTags\"), html = inner.mode.configuration == \"html\";\n      var dontCloseTags = (typeof opt == \"object\" && opt.dontCloseTags) || (html && htmlDontClose);\n      var indentTags = (typeof opt == \"object\" && opt.indentTags) || (html && htmlIndent);\n\n      var tagName = state.tagName;\n      if (tok.end > pos.ch) tagName = tagName.slice(0, tagName.length - tok.end + pos.ch);\n      var lowerTagName = tagName.toLowerCase();\n      // Don't process the '>' at the end of an end-tag or self-closing tag\n      if (!tagName ||\n          tok.type == \"string\" && (tok.end != pos.ch || !/[\\\"\\']/.test(tok.string.charAt(tok.string.length - 1)) || tok.string.length == 1) ||\n          tok.type == \"tag\" && state.type == \"closeTag\" ||\n          tok.string.indexOf(\"/\") == (tok.string.length - 1) || // match something like <someTagName />\n          dontCloseTags && indexOf(dontCloseTags, lowerTagName) > -1 ||\n          closingTagExists(cm, tagName, pos, state, true))\n        return CodeMirror.Pass;\n\n      var indent = indentTags && indexOf(indentTags, lowerTagName) > -1;\n      replacements[i] = {indent: indent,\n                         text: \">\" + (indent ? \"\\n\\n\" : \"\") + \"</\" + tagName + \">\",\n                         newPos: indent ? CodeMirror.Pos(pos.line + 1, 0) : CodeMirror.Pos(pos.line, pos.ch + 1)};\n    }\n\n    for (var i = ranges.length - 1; i >= 0; i--) {\n      var info = replacements[i];\n      cm.replaceRange(info.text, ranges[i].head, ranges[i].anchor, \"+insert\");\n      var sel = cm.listSelections().slice(0);\n      sel[i] = {head: info.newPos, anchor: info.newPos};\n      cm.setSelections(sel);\n      if (info.indent) {\n        cm.indentLine(info.newPos.line, null, true);\n        cm.indentLine(info.newPos.line + 1, null, true);\n      }\n    }\n  }\n\n  function autoCloseCurrent(cm, typingSlash) {\n    var ranges = cm.listSelections(), replacements = [];\n    var head = typingSlash ? \"/\" : \"</\";\n    for (var i = 0; i < ranges.length; i++) {\n      if (!ranges[i].empty()) return CodeMirror.Pass;\n      var pos = ranges[i].head, tok = cm.getTokenAt(pos);\n      var inner = CodeMirror.innerMode(cm.getMode(), tok.state), state = inner.state;\n      if (typingSlash && (tok.type == \"string\" || tok.string.charAt(0) != \"<\" ||\n                          tok.start != pos.ch - 1))\n        return CodeMirror.Pass;\n      // Kludge to get around the fact that we are not in XML mode\n      // when completing in JS/CSS snippet in htmlmixed mode. Does not\n      // work for other XML embedded languages (there is no general\n      // way to go from a mixed mode to its current XML state).\n      var replacement;\n      if (inner.mode.name != \"xml\") {\n        if (cm.getMode().name == \"htmlmixed\" && inner.mode.name == \"javascript\")\n          replacement = head + \"script\";\n        else if (cm.getMode().name == \"htmlmixed\" && inner.mode.name == \"css\")\n          replacement = head + \"style\";\n        else\n          return CodeMirror.Pass;\n      } else {\n        if (!state.context || !state.context.tagName ||\n            closingTagExists(cm, state.context.tagName, pos, state))\n          return CodeMirror.Pass;\n        replacement = head + state.context.tagName;\n      }\n      if (cm.getLine(pos.line).charAt(tok.end) != \">\") replacement += \">\";\n      replacements[i] = replacement;\n    }\n    cm.replaceSelections(replacements);\n    ranges = cm.listSelections();\n    for (var i = 0; i < ranges.length; i++)\n      if (i == ranges.length - 1 || ranges[i].head.line < ranges[i + 1].head.line)\n        cm.indentLine(ranges[i].head.line);\n  }\n\n  function autoCloseSlash(cm) {\n    if (cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n    return autoCloseCurrent(cm, true);\n  }\n\n  CodeMirror.commands.closeTag = function(cm) { return autoCloseCurrent(cm); };\n\n  function indexOf(collection, elt) {\n    if (collection.indexOf) return collection.indexOf(elt);\n    for (var i = 0, e = collection.length; i < e; ++i)\n      if (collection[i] == elt) return i;\n    return -1;\n  }\n\n  // If xml-fold is loaded, we use its functionality to try and verify\n  // whether a given tag is actually unclosed.\n  function closingTagExists(cm, tagName, pos, state, newTag) {\n    if (!CodeMirror.scanForClosingTag) return false;\n    var end = Math.min(cm.lastLine() + 1, pos.line + 500);\n    var nextClose = CodeMirror.scanForClosingTag(cm, pos, null, end);\n    if (!nextClose || nextClose.tag != tagName) return false;\n    var cx = state.context;\n    // If the immediate wrapping context contains onCx instances of\n    // the same tag, a closing tag only exists if there are at least\n    // that many closing tags of that type following.\n    for (var onCx = newTag ? 1 : 0; cx && cx.tagName == tagName; cx = cx.prev) ++onCx;\n    pos = nextClose.to;\n    for (var i = 1; i < onCx; i++) {\n      var next = CodeMirror.scanForClosingTag(cm, pos, null, end);\n      if (!next || next.tag != tagName) return false;\n      pos = next.to;\n    }\n    return true;\n  }\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n  var WRAP_CLASS = \"CodeMirror-activeline\";\n  var BACK_CLASS = \"CodeMirror-activeline-background\";\n  var GUTT_CLASS = \"CodeMirror-activeline-gutter\";\n\n  CodeMirror.defineOption(\"styleActiveLine\", false, function(cm, val, old) {\n    var prev = old == CodeMirror.Init ? false : old;\n    if (val == prev) return\n    if (prev) {\n      cm.off(\"beforeSelectionChange\", selectionChange);\n      clearActiveLines(cm);\n      delete cm.state.activeLines;\n    }\n    if (val) {\n      cm.state.activeLines = [];\n      updateActiveLines(cm, cm.listSelections());\n      cm.on(\"beforeSelectionChange\", selectionChange);\n    }\n  });\n\n  function clearActiveLines(cm) {\n    for (var i = 0; i < cm.state.activeLines.length; i++) {\n      cm.removeLineClass(cm.state.activeLines[i], \"wrap\", WRAP_CLASS);\n      cm.removeLineClass(cm.state.activeLines[i], \"background\", BACK_CLASS);\n      cm.removeLineClass(cm.state.activeLines[i], \"gutter\", GUTT_CLASS);\n    }\n  }\n\n  function sameArray(a, b) {\n    if (a.length != b.length) return false;\n    for (var i = 0; i < a.length; i++)\n      if (a[i] != b[i]) return false;\n    return true;\n  }\n\n  function updateActiveLines(cm, ranges) {\n    var active = [];\n    for (var i = 0; i < ranges.length; i++) {\n      var range = ranges[i];\n      var option = cm.getOption(\"styleActiveLine\");\n      if (typeof option == \"object\" && option.nonEmpty ? range.anchor.line != range.head.line : !range.empty())\n        continue\n      var line = cm.getLineHandleVisualStart(range.head.line);\n      if (active[active.length - 1] != line) active.push(line);\n    }\n    if (sameArray(cm.state.activeLines, active)) return;\n    cm.operation(function() {\n      clearActiveLines(cm);\n      for (var i = 0; i < active.length; i++) {\n        cm.addLineClass(active[i], \"wrap\", WRAP_CLASS);\n        cm.addLineClass(active[i], \"background\", BACK_CLASS);\n        cm.addLineClass(active[i], \"gutter\", GUTT_CLASS);\n      }\n      cm.state.activeLines = active;\n    });\n  }\n\n  function selectionChange(cm, sel) {\n    updateActiveLines(cm, sel.ranges);\n  }\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n// Open simple dialogs on top of an editor. Relies on dialog.css.\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  function dialogDiv(cm, template, bottom) {\n    var wrap = cm.getWrapperElement();\n    var dialog;\n    dialog = wrap.appendChild(document.createElement(\"div\"));\n    if (bottom)\n      dialog.className = \"CodeMirror-dialog CodeMirror-dialog-bottom\";\n    else\n      dialog.className = \"CodeMirror-dialog CodeMirror-dialog-top\";\n\n    if (typeof template == \"string\") {\n      dialog.innerHTML = template;\n    } else { // Assuming it's a detached DOM element.\n      dialog.appendChild(template);\n    }\n    return dialog;\n  }\n\n  function closeNotification(cm, newVal) {\n    if (cm.state.currentNotificationClose)\n      cm.state.currentNotificationClose();\n    cm.state.currentNotificationClose = newVal;\n  }\n\n  CodeMirror.defineExtension(\"openDialog\", function(template, callback, options) {\n    if (!options) options = {};\n\n    closeNotification(this, null);\n\n    var dialog = dialogDiv(this, template, options.bottom);\n    var closed = false, me = this;\n    function close(newVal) {\n      if (typeof newVal == 'string') {\n        inp.value = newVal;\n      } else {\n        if (closed) return;\n        closed = true;\n        dialog.parentNode.removeChild(dialog);\n        me.focus();\n\n        if (options.onClose) options.onClose(dialog);\n      }\n    }\n\n    var inp = dialog.getElementsByTagName(\"input\")[0], button;\n    if (inp) {\n      inp.focus();\n\n      if (options.value) {\n        inp.value = options.value;\n        if (options.selectValueOnOpen !== false) {\n          inp.select();\n        }\n      }\n\n      if (options.onInput)\n        CodeMirror.on(inp, \"input\", function(e) { options.onInput(e, inp.value, close);});\n      if (options.onKeyUp)\n        CodeMirror.on(inp, \"keyup\", function(e) {options.onKeyUp(e, inp.value, close);});\n\n      CodeMirror.on(inp, \"keydown\", function(e) {\n        if (options && options.onKeyDown && options.onKeyDown(e, inp.value, close)) { return; }\n        if (e.keyCode == 27 || (options.closeOnEnter !== false && e.keyCode == 13)) {\n          inp.blur();\n          CodeMirror.e_stop(e);\n          close();\n        }\n        if (e.keyCode == 13) callback(inp.value, e);\n      });\n\n      if (options.closeOnBlur !== false) CodeMirror.on(inp, \"blur\", close);\n    } else if (button = dialog.getElementsByTagName(\"button\")[0]) {\n      CodeMirror.on(button, \"click\", function() {\n        close();\n        me.focus();\n      });\n\n      if (options.closeOnBlur !== false) CodeMirror.on(button, \"blur\", close);\n\n      button.focus();\n    }\n    return close;\n  });\n\n  CodeMirror.defineExtension(\"openConfirm\", function(template, callbacks, options) {\n    closeNotification(this, null);\n    var dialog = dialogDiv(this, template, options && options.bottom);\n    var buttons = dialog.getElementsByTagName(\"button\");\n    var closed = false, me = this, blurring = 1;\n    function close() {\n      if (closed) return;\n      closed = true;\n      dialog.parentNode.removeChild(dialog);\n      me.focus();\n    }\n    buttons[0].focus();\n    for (var i = 0; i < buttons.length; ++i) {\n      var b = buttons[i];\n      (function(callback) {\n        CodeMirror.on(b, \"click\", function(e) {\n          CodeMirror.e_preventDefault(e);\n          close();\n          if (callback) callback(me);\n        });\n      })(callbacks[i]);\n      CodeMirror.on(b, \"blur\", function() {\n        --blurring;\n        setTimeout(function() { if (blurring <= 0) close(); }, 200);\n      });\n      CodeMirror.on(b, \"focus\", function() { ++blurring; });\n    }\n  });\n\n  /*\n   * openNotification\n   * Opens a notification, that can be closed with an optional timer\n   * (default 5000ms timer) and always closes on click.\n   *\n   * If a notification is opened while another is opened, it will close the\n   * currently opened one and open the new one immediately.\n   */\n  CodeMirror.defineExtension(\"openNotification\", function(template, options) {\n    closeNotification(this, close);\n    var dialog = dialogDiv(this, template, options && options.bottom);\n    var closed = false, doneTimer;\n    var duration = options && typeof options.duration !== \"undefined\" ? options.duration : 5000;\n\n    function close() {\n      if (closed) return;\n      closed = true;\n      clearTimeout(doneTimer);\n      dialog.parentNode.removeChild(dialog);\n    }\n\n    CodeMirror.on(dialog, 'click', function(e) {\n      CodeMirror.e_preventDefault(e);\n      close();\n    });\n\n    if (duration)\n      doneTimer = setTimeout(close, duration);\n\n    return close;\n  });\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n// Define search commands. Depends on dialog.js or another\n// implementation of the openDialog method.\n\n// Replace works a little oddly -- it will do the replace on the next\n// Ctrl-G (or whatever is bound to findNext) press. You prevent a\n// replace by making sure the match is no longer selected when hitting\n// Ctrl-G.\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"), require(\"./searchcursor\"), require(\"../dialog/dialog\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"./searchcursor\", \"../dialog/dialog\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  function searchOverlay(query, caseInsensitive) {\n    if (typeof query == \"string\")\n      query = new RegExp(query.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\"), caseInsensitive ? \"gi\" : \"g\");\n    else if (!query.global)\n      query = new RegExp(query.source, query.ignoreCase ? \"gi\" : \"g\");\n\n    return {token: function(stream) {\n      query.lastIndex = stream.pos;\n      var match = query.exec(stream.string);\n      if (match && match.index == stream.pos) {\n        stream.pos += match[0].length || 1;\n        return \"searching\";\n      } else if (match) {\n        stream.pos = match.index;\n      } else {\n        stream.skipToEnd();\n      }\n    }};\n  }\n\n  function SearchState() {\n    this.posFrom = this.posTo = this.lastQuery = this.query = null;\n    this.overlay = null;\n  }\n\n  function getSearchState(cm) {\n    return cm.state.search || (cm.state.search = new SearchState());\n  }\n\n  function queryCaseInsensitive(query) {\n    return typeof query == \"string\" && query == query.toLowerCase();\n  }\n\n  function getSearchCursor(cm, query, pos) {\n    // Heuristic: if the query string is all lowercase, do a case insensitive search.\n    return cm.getSearchCursor(query, pos, {caseFold: queryCaseInsensitive(query), multiline: true});\n  }\n\n  function persistentDialog(cm, text, deflt, onEnter, onKeyDown) {\n    cm.openDialog(text, onEnter, {\n      value: deflt,\n      selectValueOnOpen: true,\n      closeOnEnter: false,\n      onClose: function() { clearSearch(cm); },\n      onKeyDown: onKeyDown\n    });\n  }\n\n  function dialog(cm, text, shortText, deflt, f) {\n    if (cm.openDialog) cm.openDialog(text, f, {value: deflt, selectValueOnOpen: true});\n    else f(prompt(shortText, deflt));\n  }\n\n  function confirmDialog(cm, text, shortText, fs) {\n    if (cm.openConfirm) cm.openConfirm(text, fs);\n    else if (confirm(shortText)) fs[0]();\n  }\n\n  function parseString(string) {\n    return string.replace(/\\\\(.)/g, function(_, ch) {\n      if (ch == \"n\") return \"\\n\"\n      if (ch == \"r\") return \"\\r\"\n      return ch\n    })\n  }\n\n  function parseQuery(query) {\n    var isRE = query.match(/^\\/(.*)\\/([a-z]*)$/);\n    if (isRE) {\n      try { query = new RegExp(isRE[1], isRE[2].indexOf(\"i\") == -1 ? \"\" : \"i\"); }\n      catch(e) {} // Not a regular expression after all, do a string search\n    } else {\n      query = parseString(query)\n    }\n    if (typeof query == \"string\" ? query == \"\" : query.test(\"\"))\n      query = /x^/;\n    return query;\n  }\n\n  var queryDialog =\n    '<span class=\"CodeMirror-search-label\">Search:</span> <input type=\"text\" style=\"width: 10em\" class=\"CodeMirror-search-field\"/> <span style=\"color: #888\" class=\"CodeMirror-search-hint\">(Use /re/ syntax for regexp search)</span>';\n\n  function startSearch(cm, state, query) {\n    state.queryText = query;\n    state.query = parseQuery(query);\n    cm.removeOverlay(state.overlay, queryCaseInsensitive(state.query));\n    state.overlay = searchOverlay(state.query, queryCaseInsensitive(state.query));\n    cm.addOverlay(state.overlay);\n    if (cm.showMatchesOnScrollbar) {\n      if (state.annotate) { state.annotate.clear(); state.annotate = null; }\n      state.annotate = cm.showMatchesOnScrollbar(state.query, queryCaseInsensitive(state.query));\n    }\n  }\n\n  function doSearch(cm, rev, persistent, immediate) {\n    var state = getSearchState(cm);\n    if (state.query) return findNext(cm, rev);\n    var q = cm.getSelection() || state.lastQuery;\n    if (persistent && cm.openDialog) {\n      var hiding = null\n      var searchNext = function(query, event) {\n        CodeMirror.e_stop(event);\n        if (!query) return;\n        if (query != state.queryText) {\n          startSearch(cm, state, query);\n          state.posFrom = state.posTo = cm.getCursor();\n        }\n        if (hiding) hiding.style.opacity = 1\n        findNext(cm, event.shiftKey, function(_, to) {\n          var dialog\n          if (to.line < 3 && document.querySelector &&\n              (dialog = cm.display.wrapper.querySelector(\".CodeMirror-dialog\")) &&\n              dialog.getBoundingClientRect().bottom - 4 > cm.cursorCoords(to, \"window\").top)\n            (hiding = dialog).style.opacity = .4\n        })\n      };\n      persistentDialog(cm, queryDialog, q, searchNext, function(event, query) {\n        var keyName = CodeMirror.keyName(event)\n        var extra = cm.getOption('extraKeys'), cmd = (extra && extra[keyName]) || CodeMirror.keyMap[cm.getOption(\"keyMap\")][keyName]\n        if (cmd == \"findNext\" || cmd == \"findPrev\" ||\n          cmd == \"findPersistentNext\" || cmd == \"findPersistentPrev\") {\n          CodeMirror.e_stop(event);\n          startSearch(cm, getSearchState(cm), query);\n          cm.execCommand(cmd);\n        } else if (cmd == \"find\" || cmd == \"findPersistent\") {\n          CodeMirror.e_stop(event);\n          searchNext(query, event);\n        }\n      });\n      if (immediate && q) {\n        startSearch(cm, state, q);\n        findNext(cm, rev);\n      }\n    } else {\n      dialog(cm, queryDialog, \"Search for:\", q, function(query) {\n        if (query && !state.query) cm.operation(function() {\n          startSearch(cm, state, query);\n          state.posFrom = state.posTo = cm.getCursor();\n          findNext(cm, rev);\n        });\n      });\n    }\n  }\n\n  function findNext(cm, rev, callback) {cm.operation(function() {\n    var state = getSearchState(cm);\n    var cursor = getSearchCursor(cm, state.query, rev ? state.posFrom : state.posTo);\n    if (!cursor.find(rev)) {\n      cursor = getSearchCursor(cm, state.query, rev ? CodeMirror.Pos(cm.lastLine()) : CodeMirror.Pos(cm.firstLine(), 0));\n      if (!cursor.find(rev)) return;\n    }\n    cm.setSelection(cursor.from(), cursor.to());\n    cm.scrollIntoView({from: cursor.from(), to: cursor.to()}, 20);\n    state.posFrom = cursor.from(); state.posTo = cursor.to();\n    if (callback) callback(cursor.from(), cursor.to())\n  });}\n\n  function clearSearch(cm) {cm.operation(function() {\n    var state = getSearchState(cm);\n    state.lastQuery = state.query;\n    if (!state.query) return;\n    state.query = state.queryText = null;\n    cm.removeOverlay(state.overlay);\n    if (state.annotate) { state.annotate.clear(); state.annotate = null; }\n  });}\n\n  var replaceQueryDialog =\n    ' <input type=\"text\" style=\"width: 10em\" class=\"CodeMirror-search-field\"/> <span style=\"color: #888\" class=\"CodeMirror-search-hint\">(Use /re/ syntax for regexp search)</span>';\n  var replacementQueryDialog = '<span class=\"CodeMirror-search-label\">With:</span> <input type=\"text\" style=\"width: 10em\" class=\"CodeMirror-search-field\"/>';\n  var doReplaceConfirm = '<span class=\"CodeMirror-search-label\">Replace?</span> <button>Yes</button> <button>No</button> <button>All</button> <button>Stop</button>';\n\n  function replaceAll(cm, query, text) {\n    cm.operation(function() {\n      for (var cursor = getSearchCursor(cm, query); cursor.findNext();) {\n        if (typeof query != \"string\") {\n          var match = cm.getRange(cursor.from(), cursor.to()).match(query);\n          cursor.replace(text.replace(/\\$(\\d)/g, function(_, i) {return match[i];}));\n        } else cursor.replace(text);\n      }\n    });\n  }\n\n  function replace(cm, all) {\n    if (cm.getOption(\"readOnly\")) return;\n    var query = cm.getSelection() || getSearchState(cm).lastQuery;\n    var dialogText = '<span class=\"CodeMirror-search-label\">' + (all ? 'Replace all:' : 'Replace:') + '</span>';\n    dialog(cm, dialogText + replaceQueryDialog, dialogText, query, function(query) {\n      if (!query) return;\n      query = parseQuery(query);\n      dialog(cm, replacementQueryDialog, \"Replace with:\", \"\", function(text) {\n        text = parseString(text)\n        if (all) {\n          replaceAll(cm, query, text)\n        } else {\n          clearSearch(cm);\n          var cursor = getSearchCursor(cm, query, cm.getCursor(\"from\"));\n          var advance = function() {\n            var start = cursor.from(), match;\n            if (!(match = cursor.findNext())) {\n              cursor = getSearchCursor(cm, query);\n              if (!(match = cursor.findNext()) ||\n                  (start && cursor.from().line == start.line && cursor.from().ch == start.ch)) return;\n            }\n            cm.setSelection(cursor.from(), cursor.to());\n            cm.scrollIntoView({from: cursor.from(), to: cursor.to()});\n            confirmDialog(cm, doReplaceConfirm, \"Replace?\",\n                          [function() {doReplace(match);}, advance,\n                           function() {replaceAll(cm, query, text)}]);\n          };\n          var doReplace = function(match) {\n            cursor.replace(typeof query == \"string\" ? text :\n                           text.replace(/\\$(\\d)/g, function(_, i) {return match[i];}));\n            advance();\n          };\n          advance();\n        }\n      });\n    });\n  }\n\n  CodeMirror.commands.find = function(cm) {clearSearch(cm); doSearch(cm);};\n  CodeMirror.commands.findPersistent = function(cm) {clearSearch(cm); doSearch(cm, false, true);};\n  CodeMirror.commands.findPersistentNext = function(cm) {doSearch(cm, false, true, true);};\n  CodeMirror.commands.findPersistentPrev = function(cm) {doSearch(cm, true, true, true);};\n  CodeMirror.commands.findNext = doSearch;\n  CodeMirror.commands.findPrev = function(cm) {doSearch(cm, true);};\n  CodeMirror.commands.clearSearch = clearSearch;\n  CodeMirror.commands.replace = replace;\n  CodeMirror.commands.replaceAll = function(cm) {replace(cm, true);};\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  function doFold(cm, pos, options, force) {\n    if (options && options.call) {\n      var finder = options;\n      options = null;\n    } else {\n      var finder = getOption(cm, options, \"rangeFinder\");\n    }\n    if (typeof pos == \"number\") pos = CodeMirror.Pos(pos, 0);\n    var minSize = getOption(cm, options, \"minFoldSize\");\n\n    function getRange(allowFolded) {\n      var range = finder(cm, pos);\n      if (!range || range.to.line - range.from.line < minSize) return null;\n      var marks = cm.findMarksAt(range.from);\n      for (var i = 0; i < marks.length; ++i) {\n        if (marks[i].__isFold && force !== \"fold\") {\n          if (!allowFolded) return null;\n          range.cleared = true;\n          marks[i].clear();\n        }\n      }\n      return range;\n    }\n\n    var range = getRange(true);\n    if (getOption(cm, options, \"scanUp\")) while (!range && pos.line > cm.firstLine()) {\n      pos = CodeMirror.Pos(pos.line - 1, 0);\n      range = getRange(false);\n    }\n    if (!range || range.cleared || force === \"unfold\") return;\n\n    var myWidget = makeWidget(cm, options);\n    CodeMirror.on(myWidget, \"mousedown\", function(e) {\n      myRange.clear();\n      CodeMirror.e_preventDefault(e);\n    });\n    var myRange = cm.markText(range.from, range.to, {\n      replacedWith: myWidget,\n      clearOnEnter: getOption(cm, options, \"clearOnEnter\"),\n      __isFold: true\n    });\n    myRange.on(\"clear\", function(from, to) {\n      CodeMirror.signal(cm, \"unfold\", cm, from, to);\n    });\n    CodeMirror.signal(cm, \"fold\", cm, range.from, range.to);\n  }\n\n  function makeWidget(cm, options) {\n    var widget = getOption(cm, options, \"widget\");\n    if (typeof widget == \"string\") {\n      var text = document.createTextNode(widget);\n      widget = document.createElement(\"span\");\n      widget.appendChild(text);\n      widget.className = \"CodeMirror-foldmarker\";\n    } else if (widget) {\n      widget = widget.cloneNode(true)\n    }\n    return widget;\n  }\n\n  // Clumsy backwards-compatible interface\n  CodeMirror.newFoldFunction = function(rangeFinder, widget) {\n    return function(cm, pos) { doFold(cm, pos, {rangeFinder: rangeFinder, widget: widget}); };\n  };\n\n  // New-style interface\n  CodeMirror.defineExtension(\"foldCode\", function(pos, options, force) {\n    doFold(this, pos, options, force);\n  });\n\n  CodeMirror.defineExtension(\"isFolded\", function(pos) {\n    var marks = this.findMarksAt(pos);\n    for (var i = 0; i < marks.length; ++i)\n      if (marks[i].__isFold) return true;\n  });\n\n  CodeMirror.commands.toggleFold = function(cm) {\n    cm.foldCode(cm.getCursor());\n  };\n  CodeMirror.commands.fold = function(cm) {\n    cm.foldCode(cm.getCursor(), null, \"fold\");\n  };\n  CodeMirror.commands.unfold = function(cm) {\n    cm.foldCode(cm.getCursor(), null, \"unfold\");\n  };\n  CodeMirror.commands.foldAll = function(cm) {\n    cm.operation(function() {\n      for (var i = cm.firstLine(), e = cm.lastLine(); i <= e; i++)\n        cm.foldCode(CodeMirror.Pos(i, 0), null, \"fold\");\n    });\n  };\n  CodeMirror.commands.unfoldAll = function(cm) {\n    cm.operation(function() {\n      for (var i = cm.firstLine(), e = cm.lastLine(); i <= e; i++)\n        cm.foldCode(CodeMirror.Pos(i, 0), null, \"unfold\");\n    });\n  };\n\n  CodeMirror.registerHelper(\"fold\", \"combine\", function() {\n    var funcs = Array.prototype.slice.call(arguments, 0);\n    return function(cm, start) {\n      for (var i = 0; i < funcs.length; ++i) {\n        var found = funcs[i](cm, start);\n        if (found) return found;\n      }\n    };\n  });\n\n  CodeMirror.registerHelper(\"fold\", \"auto\", function(cm, start) {\n    var helpers = cm.getHelpers(start, \"fold\");\n    for (var i = 0; i < helpers.length; i++) {\n      var cur = helpers[i](cm, start);\n      if (cur) return cur;\n    }\n  });\n\n  var defaultOptions = {\n    rangeFinder: CodeMirror.fold.auto,\n    widget: \"\\u2194\",\n    minFoldSize: 0,\n    scanUp: false,\n    clearOnEnter: true\n  };\n\n  CodeMirror.defineOption(\"foldOptions\", null);\n\n  function getOption(cm, options, name) {\n    if (options && options[name] !== undefined)\n      return options[name];\n    var editorOptions = cm.options.foldOptions;\n    if (editorOptions && editorOptions[name] !== undefined)\n      return editorOptions[name];\n    return defaultOptions[name];\n  }\n\n  CodeMirror.defineExtension(\"foldOption\", function(options, name) {\n    return getOption(this, options, name);\n  });\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"), require(\"./foldcode\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"./foldcode\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineOption(\"foldGutter\", false, function(cm, val, old) {\n    if (old && old != CodeMirror.Init) {\n      cm.clearGutter(cm.state.foldGutter.options.gutter);\n      cm.state.foldGutter = null;\n      cm.off(\"gutterClick\", onGutterClick);\n      cm.off(\"change\", onChange);\n      cm.off(\"viewportChange\", onViewportChange);\n      cm.off(\"fold\", onFold);\n      cm.off(\"unfold\", onFold);\n      cm.off(\"swapDoc\", onChange);\n    }\n    if (val) {\n      cm.state.foldGutter = new State(parseOptions(val));\n      updateInViewport(cm);\n      cm.on(\"gutterClick\", onGutterClick);\n      cm.on(\"change\", onChange);\n      cm.on(\"viewportChange\", onViewportChange);\n      cm.on(\"fold\", onFold);\n      cm.on(\"unfold\", onFold);\n      cm.on(\"swapDoc\", onChange);\n    }\n  });\n\n  var Pos = CodeMirror.Pos;\n\n  function State(options) {\n    this.options = options;\n    this.from = this.to = 0;\n  }\n\n  function parseOptions(opts) {\n    if (opts === true) opts = {};\n    if (opts.gutter == null) opts.gutter = \"CodeMirror-foldgutter\";\n    if (opts.indicatorOpen == null) opts.indicatorOpen = \"CodeMirror-foldgutter-open\";\n    if (opts.indicatorFolded == null) opts.indicatorFolded = \"CodeMirror-foldgutter-folded\";\n    return opts;\n  }\n\n  function isFolded(cm, line) {\n    var marks = cm.findMarks(Pos(line, 0), Pos(line + 1, 0));\n    for (var i = 0; i < marks.length; ++i)\n      if (marks[i].__isFold && marks[i].find().from.line == line) return marks[i];\n  }\n\n  function marker(spec) {\n    if (typeof spec == \"string\") {\n      var elt = document.createElement(\"div\");\n      elt.className = spec + \" CodeMirror-guttermarker-subtle\";\n      return elt;\n    } else {\n      return spec.cloneNode(true);\n    }\n  }\n\n  function updateFoldInfo(cm, from, to) {\n    var opts = cm.state.foldGutter.options, cur = from;\n    var minSize = cm.foldOption(opts, \"minFoldSize\");\n    var func = cm.foldOption(opts, \"rangeFinder\");\n    cm.eachLine(from, to, function(line) {\n      var mark = null;\n      if (isFolded(cm, cur)) {\n        mark = marker(opts.indicatorFolded);\n      } else {\n        var pos = Pos(cur, 0);\n        var range = func && func(cm, pos);\n        if (range && range.to.line - range.from.line >= minSize)\n          mark = marker(opts.indicatorOpen);\n      }\n      cm.setGutterMarker(line, opts.gutter, mark);\n      ++cur;\n    });\n  }\n\n  function updateInViewport(cm) {\n    var vp = cm.getViewport(), state = cm.state.foldGutter;\n    if (!state) return;\n    cm.operation(function() {\n      updateFoldInfo(cm, vp.from, vp.to);\n    });\n    state.from = vp.from; state.to = vp.to;\n  }\n\n  function onGutterClick(cm, line, gutter) {\n    var state = cm.state.foldGutter;\n    if (!state) return;\n    var opts = state.options;\n    if (gutter != opts.gutter) return;\n    var folded = isFolded(cm, line);\n    if (folded) folded.clear();\n    else cm.foldCode(Pos(line, 0), opts.rangeFinder);\n  }\n\n  function onChange(cm) {\n    var state = cm.state.foldGutter;\n    if (!state) return;\n    var opts = state.options;\n    state.from = state.to = 0;\n    clearTimeout(state.changeUpdate);\n    state.changeUpdate = setTimeout(function() { updateInViewport(cm); }, opts.foldOnChangeTimeSpan || 600);\n  }\n\n  function onViewportChange(cm) {\n    var state = cm.state.foldGutter;\n    if (!state) return;\n    var opts = state.options;\n    clearTimeout(state.changeUpdate);\n    state.changeUpdate = setTimeout(function() {\n      var vp = cm.getViewport();\n      if (state.from == state.to || vp.from - state.to > 20 || state.from - vp.to > 20) {\n        updateInViewport(cm);\n      } else {\n        cm.operation(function() {\n          if (vp.from < state.from) {\n            updateFoldInfo(cm, vp.from, state.from);\n            state.from = vp.from;\n          }\n          if (vp.to > state.to) {\n            updateFoldInfo(cm, state.to, vp.to);\n            state.to = vp.to;\n          }\n        });\n      }\n    }, opts.updateViewportTimeSpan || 400);\n  }\n\n  function onFold(cm, from) {\n    var state = cm.state.foldGutter;\n    if (!state) return;\n    var line = from.line;\n    if (line >= state.from && line < state.to)\n      updateFoldInfo(cm, line, line + 1);\n  }\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.registerHelper(\"fold\", \"brace\", function(cm, start) {\n  var line = start.line, lineText = cm.getLine(line);\n  var tokenType;\n\n  function findOpening(openCh) {\n    for (var at = start.ch, pass = 0;;) {\n      var found = at <= 0 ? -1 : lineText.lastIndexOf(openCh, at - 1);\n      if (found == -1) {\n        if (pass == 1) break;\n        pass = 1;\n        at = lineText.length;\n        continue;\n      }\n      if (pass == 1 && found < start.ch) break;\n      tokenType = cm.getTokenTypeAt(CodeMirror.Pos(line, found + 1));\n      if (!/^(comment|string)/.test(tokenType)) return found + 1;\n      at = found - 1;\n    }\n  }\n\n  var startToken = \"{\", endToken = \"}\", startCh = findOpening(\"{\");\n  if (startCh == null) {\n    startToken = \"[\", endToken = \"]\";\n    startCh = findOpening(\"[\");\n  }\n\n  if (startCh == null) return;\n  var count = 1, lastLine = cm.lastLine(), end, endCh;\n  outer: for (var i = line; i <= lastLine; ++i) {\n    var text = cm.getLine(i), pos = i == line ? startCh : 0;\n    for (;;) {\n      var nextOpen = text.indexOf(startToken, pos), nextClose = text.indexOf(endToken, pos);\n      if (nextOpen < 0) nextOpen = text.length;\n      if (nextClose < 0) nextClose = text.length;\n      pos = Math.min(nextOpen, nextClose);\n      if (pos == text.length) break;\n      if (cm.getTokenTypeAt(CodeMirror.Pos(i, pos + 1)) == tokenType) {\n        if (pos == nextOpen) ++count;\n        else if (!--count) { end = i; endCh = pos; break outer; }\n      }\n      ++pos;\n    }\n  }\n  if (end == null || line == end && endCh == startCh) return;\n  return {from: CodeMirror.Pos(line, startCh),\n          to: CodeMirror.Pos(end, endCh)};\n});\n\nCodeMirror.registerHelper(\"fold\", \"import\", function(cm, start) {\n  function hasImport(line) {\n    if (line < cm.firstLine() || line > cm.lastLine()) return null;\n    var start = cm.getTokenAt(CodeMirror.Pos(line, 1));\n    if (!/\\S/.test(start.string)) start = cm.getTokenAt(CodeMirror.Pos(line, start.end + 1));\n    if (start.type != \"keyword\" || start.string != \"import\") return null;\n    // Now find closing semicolon, return its position\n    for (var i = line, e = Math.min(cm.lastLine(), line + 10); i <= e; ++i) {\n      var text = cm.getLine(i), semi = text.indexOf(\";\");\n      if (semi != -1) return {startCh: start.end, end: CodeMirror.Pos(i, semi)};\n    }\n  }\n\n  var startLine = start.line, has = hasImport(startLine), prev;\n  if (!has || hasImport(startLine - 1) || ((prev = hasImport(startLine - 2)) && prev.end.line == startLine - 1))\n    return null;\n  for (var end = has.end;;) {\n    var next = hasImport(end.line + 1);\n    if (next == null) break;\n    end = next.end;\n  }\n  return {from: cm.clipPos(CodeMirror.Pos(startLine, has.startCh + 1)), to: end};\n});\n\nCodeMirror.registerHelper(\"fold\", \"include\", function(cm, start) {\n  function hasInclude(line) {\n    if (line < cm.firstLine() || line > cm.lastLine()) return null;\n    var start = cm.getTokenAt(CodeMirror.Pos(line, 1));\n    if (!/\\S/.test(start.string)) start = cm.getTokenAt(CodeMirror.Pos(line, start.end + 1));\n    if (start.type == \"meta\" && start.string.slice(0, 8) == \"#include\") return start.start + 8;\n  }\n\n  var startLine = start.line, has = hasInclude(startLine);\n  if (has == null || hasInclude(startLine - 1) != null) return null;\n  for (var end = startLine;;) {\n    var next = hasInclude(end + 1);\n    if (next == null) break;\n    ++end;\n  }\n  return {from: CodeMirror.Pos(startLine, has + 1),\n          to: cm.clipPos(CodeMirror.Pos(end))};\n});\n\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.registerGlobalHelper(\"fold\", \"comment\", function(mode) {\n  return mode.blockCommentStart && mode.blockCommentEnd;\n}, function(cm, start) {\n  var mode = cm.getModeAt(start), startToken = mode.blockCommentStart, endToken = mode.blockCommentEnd;\n  if (!startToken || !endToken) return;\n  var line = start.line, lineText = cm.getLine(line);\n\n  var startCh;\n  for (var at = start.ch, pass = 0;;) {\n    var found = at <= 0 ? -1 : lineText.lastIndexOf(startToken, at - 1);\n    if (found == -1) {\n      if (pass == 1) return;\n      pass = 1;\n      at = lineText.length;\n      continue;\n    }\n    if (pass == 1 && found < start.ch) return;\n    if (/comment/.test(cm.getTokenTypeAt(CodeMirror.Pos(line, found + 1))) &&\n        (found == 0 || lineText.slice(found - endToken.length, found) == endToken ||\n         !/comment/.test(cm.getTokenTypeAt(CodeMirror.Pos(line, found))))) {\n      startCh = found + startToken.length;\n      break;\n    }\n    at = found - 1;\n  }\n\n  var depth = 1, lastLine = cm.lastLine(), end, endCh;\n  outer: for (var i = line; i <= lastLine; ++i) {\n    var text = cm.getLine(i), pos = i == line ? startCh : 0;\n    for (;;) {\n      var nextOpen = text.indexOf(startToken, pos), nextClose = text.indexOf(endToken, pos);\n      if (nextOpen < 0) nextOpen = text.length;\n      if (nextClose < 0) nextClose = text.length;\n      pos = Math.min(nextOpen, nextClose);\n      if (pos == text.length) break;\n      if (pos == nextOpen) ++depth;\n      else if (!--depth) { end = i; endCh = pos; break outer; }\n      ++pos;\n    }\n  }\n  if (end == null || line == end && endCh == startCh) return;\n  return {from: CodeMirror.Pos(line, startCh),\n          to: CodeMirror.Pos(end, endCh)};\n});\n\n});\n","import m from 'mithril'\nimport b from 'bss'\n\nexport default (attrs, svg) =>\n  m('i' + b\n    .w(attrs.size)\n    .h(attrs.size)\n    .display('flex')\n    .jc('center')\n    .ai('center')\n    .$nest('svg',\n      b.w('100%').h('100%')\n    )\n    ,\n      attrs\n    ,\n      m.trust(svg)\n  )\n\n","import m from 'mithril'\nimport b from 'bss'\n\nimport icon from './icon'\n\nexport default (iconName, onclick) =>\n  m('div' + b\n    .position('absolute')\n    .w('100%')\n    .h('100%')\n    .zi(30)\n    .t(0)\n    .cursor('pointer')\n    .background('rgb(255,255,255)')\n    .transition('opacity 0.5s')\n    .$animate('0.5s', {\n      from: b.o(0),\n      to: b.o(1)\n    })\n    .boxShadow('0 0 10px rgba(0,0,0,.35)')\n    .d('flex')\n    .jc('center')\n    .ai('center')\n    ,\n      {\n        onbeforeremove: (vnode) => {\n          vnode.dom.style.opacity = 0\n          return new Promise(r => setTimeout(r, 500))\n        },\n        onclick: onclick\n      }\n    ,\n      icon({ class: b.h(28).w(28).class }, iconName)\n  )\n","import m from 'mithril'\nimport b from 'bss'\n\nexport default (model, actions) =>\n  m('.handle'\n   + b\n    .position('absolute')\n    .zi(10)\n  ,\n    {\n      style: model.vertical()\n        ? b.height(6).bottom(0).left(0).cursor('row-resize').w('100%').style\n        : b.top(0).width('6px').right(0).cursor('col-resize').h('100%').style,\n      onmousedown: (down) => {\n        actions.startDragging(true)\n        window.addEventListener('mouseup', function mouseUp(up) {\n          if (down.pageX === up.pageX && down.pageY === up.pageY)\n            actions.setMiddle(0)\n\n          window.removeEventListener('mousemove', actions.changeMiddle, false)\n          window.removeEventListener('mouseup', mouseUp, false)\n          actions.stopDragging(false)\n          m.redraw()\n        }, false)\n        window.addEventListener('mousemove', actions.changeMiddle, false)\n      }\n    }\n  )\n","import editor from './editor'\nimport tabs from './tabs'\nimport collapsed from '../components/collapsed'\nimport editIcon from '../icons/edit.svg'\nimport handle from './handle'\n\nexport default (model, actions) =>\n  [\n    model.state.middle < 3 && collapsed(editIcon, actions.resetSize),\n    model.state.toolbar && tabs(model, actions),\n    editor(model, actions),\n    model.state.resizeable && handle(model, actions)\n  ]\n","import b from 'bss'\nimport m from 'mithril'\n\nconst iframe = (model, actions) =>\n  m('iframe'\n    + b\n      .flexGrow(1)\n      .userSelect('none')\n      .minHeight(50)\n      .width('100%')\n      .h(0)\n  , {\n    name: model.id,\n    title: 'Runtime iframe',\n    style: b.pointerEvents(model.dragging && 'none').style,\n    sandbox: 'allow-modals allow-forms allow-same-origin allow-scripts allow-popups',\n    allowfullscreen: true,\n    frameborder: '0',\n    oncreate: vnode => actions.initIframe(vnode.dom)\n  })\n\nconst iframeInScroller = (model, actions) =>\n  m('.iframeScroller'\n    + b\n    .overflowScrolling('touch')\n    .flexGrow(1)\n    .overflowY('scroll')\n    .d('flex')\n    .fd('column')\n    .w('100%')\n  ,\n    iframe(model, actions)\n  )\n\nexport default (model, actions) =>\n  model.iOS\n    ? iframeInScroller(model, actions)\n    : iframe(model, actions)\n","import m from 'mithril'\nimport b from 'bss'\n\nimport icon from './icon'\nimport tooltip from './tooltip'\n\nexport default (iconName, attrs = {}) =>\n  m('.icon'\n    + b\n    .position('relative')\n    .cursor('pointer')\n  , {\n    style: attrs.attention ? b.$animate('1s linear infinite', {\n      '0%': b.transform('scale(1)').o(1),\n      '50%': b.transform('scale(1.2)').o(0.5),\n      '100%': b.transform('scale(1)').o(1)\n    }).style : {}\n  },\n    icon({\n      key: iconName,\n      style: b.o(attrs.disabled && 0.65).style,\n      onclick: attrs.onclick,\n      size: 26,\n      class: b.p(5)\n        .borderRadius(3)\n        .position('relative')\n        .$hover(\n          b.background('#ddd').color('gray')\n        ).class\n    }, iconName)\n  ,\n    Boolean(attrs.badge) && m('.badge'\n      + b.position('absolute')\n        .background('red')\n        .borderRadius(7)\n        .pointerEvents('none')\n        .p('0 3px')\n        .minWidth(14).h(14).top(0).right(0)\n        .c('white').fontStyle('normal').fontSize(10).textAlign('center')\n      ,\n        attrs.badge\n    )\n  ,\n    tooltip(attrs.title)\n  )\n","import m from 'mithril'\nimport b from 'bss'\n\nimport toolbarButton from '../components/toolbarbutton'\nimport closeIcon from '../icons/close.svg'\nimport refreshIcon from '../icons/refresh.svg'\nimport playIcon from '../icons/play.svg'\nimport pauseIcon from '../icons/pause.svg'\nimport shareIcon from '../icons/share.svg'\n\nexport default (model, actions) =>\n  m('.toolbar'\n    + b.w('100%').h(38)\n    .p(4)\n    .position('relative')\n    .flexShrink(0)\n    .justifyContent('flex-end')\n    .alignItems('center')\n    .d('flex')\n    .c('gray')\n    .background('rgb(246,246,246)')\n    .boxShadow('0 1px 0 rgb(183, 183, 183)')\n  ,\n    toolbarButton(model.state.autoReload ? pauseIcon : playIcon, {\n      title: (model.state.autoReload ? 'Disable' : 'Enable') + ' auto reload',\n      onclick: actions.toggleAutoReload\n    }),\n    model.state.reloadButton && toolbarButton(model.loading\n      ? closeIcon\n      : refreshIcon\n    , {\n      onclick: e => actions.refresh({ force: true }),\n      attention: model.hasChanges,\n      title: 'Refresh'\n    }),\n    model.state.shareButton && m('a' + b.color('inherit'), {\n      href: 'https://flems.io',\n      target: '_blank',\n      oncreate: actions.setShareUrl\n    },\n      toolbarButton(shareIcon, {\n        title: 'Open / share on flems.io'\n      })\n    )\n  )\n","import m from 'mithril'\nimport b from 'bss'\n\nexport default model =>\n  m('.loading'\n    + b\n    .position('absolute')\n    .background('white')\n    .pointerEvents('none')\n    .top(model.toolbar() + 1).left(0).bottom(0).right(0)\n    .d('flex')\n    .jc('center')\n    .ai('center')\n    .transition('opacity 0.3s')\n  , {\n    style: b.o(model.loading ? 1 : 0).style\n  },\n    m('div'\n      + b\n      .w(120)\n      .h(120)\n      .borderRadius(30)\n      .bc('gray')\n      .o(0.25)\n      .$animate('2s linear infinite', {\n        from: b.transform('rotate(0deg)'),\n        to: b.transform('rotate(360deg)')\n      })\n    )\n  )\n","import iframe from './iframe'\nimport size from './size'\nimport collapsed from '../components/collapsed'\nimport browserIcon from '../icons/browser.svg'\nimport toolbar from './toolbar'\nimport loading from './loading'\n\nexport default (model, actions) =>\n  [\n    model.state.toolbar && toolbar(model, actions),\n    iframe(model, actions),\n    model.state.middle > 97 && collapsed(browserIcon, actions.resetSize),\n    loading(model),\n    model.resizing && model.state.middle <= 98 && size(model, actions)\n  ]\n","import m from 'mithril'\nimport b from 'bss'\n\nexport default (model, actions) =>\n  m('.input'\n    + b\n      .d('flex')\n      .p(2, 0)\n      .flexShrink(1)\n      .w('100%')\n      .ff('Source Code Pro, monospace')\n  ,\n    m('label'\n      + b\n        .d('block')\n        .m('0 6px 0 10px')\n        .flexShrink(0)\n        .c('blue')\n    , {\n      for: 'input'\n    },\n      '>'\n    ),\n    m('textarea#input'\n      + b\n        .p(0)\n        .flexGrow(1)\n        .fs(12)\n        .lineHeight(model.console.lineHeight)\n        .bc('transparent')\n        .resize('none')\n        .outline('none')\n        .maxHeight(model.console.lineHeight * 5)\n        .border('none')\n    , {\n      resize: false,\n      style: b\n        .minHeight(model.console.inputHeight())\n        .maxHeight(model.console.inputHeight())\n        .style,\n      oninput: actions.onConsoleInput,\n      onkeydown: actions.onConsoleKeyDown\n    }, model.console.input)\n  )\n","import './styles.js'\n\nimport m from 'mithril'\nimport b from 'bss'\n\nimport editor from './editor'\nimport runtime from './runtime'\nimport console from './console'\n\nexport default (model, actions) =>\n  m('.flems'\n    + b\n      .fontFamily('Open Sans, sans-serif')\n      .overflow('hidden')\n      .position('relative')\n      .d('flex')\n      .fd('column')\n  , {\n    style: b\n      .h(!model.state.autoHeight && '100%')\n      .userSelect(model.dragging && 'none')\n      .style\n  },\n    m('main'\n     + b\n      .flexGrow(1)\n      .d('flex')\n      .$media('(max-width:600px)',\n        b\n        .flexDirection('column')\n        .position('relative')\n      )\n\n    , {\n      style: b.ai(!model.vertical() && 'stretch').style\n    },\n      m('.editor'\n       + b\n        .position('relative')\n        .minWidth(50)\n        .minHeight(50)\n        .background(model.state.color)\n        .zIndex(1)\n        .flexGrow(1)\n      , {\n        style: b\n          .position(model.vertical() && 'absolute')\n          .width(model.vertical() && '100%')\n          .height(model.vertical() && (model.state.middle + '%'))\n          .maxWidth(!model.vertical() && (model.state.middle + '%'))\n          .style\n      },\n        editor(model, actions)\n      ),\n      m('.runtime'\n        + b.position('relative')\n          .minWidth(50)\n          .minHeight(50)\n          .b(0)\n          .r(0)\n          .d('flex')\n          .fd('column')\n          .flexGrow(1)\n      , {\n        style: b\n          .position(model.vertical() && 'absolute')\n          .width(model.vertical() && '100%')\n          .height(model.vertical() && ((100 - model.state.middle) + '%'))\n          .maxWidth(!model.vertical() && ((100 - model.state.middle) + '%'))\n          .style\n      },\n        runtime(model, actions)\n      )\n    ),\n    model.state.console && console(model, actions)\n  )\n","import inspect from 'object-inspect'\nimport { memoize } from './utils'\n\nconst load = memoize(url =>\n  new Promise((resolve, reject) => {\n    const el = document.createElement('script')\n    el.async = false\n    el.charset = 'utf-8'\n    el.src = url\n    document.body.appendChild(el)\n    el.onload = resolve\n    el.onerror = err => {\n      reject('Could not load compiler from ' + url + '\\n\\n' + inspect(err))\n    }\n  })\n)\n\nconst compilers = {\n  ts: file => load('https://unpkg.com/typescript@2.4.2/lib/typescriptServices.js').then(() => {\n    const result = window.ts.transpileModule(file.content, {\n      fileName: file.name,\n      compilerOptions: {\n        sourceMap: true,\n        jsx: 'react'\n      }\n    })\n\n    return {\n      code: result.outputText.substring(0, result.outputText.lastIndexOf('\\n')),\n      map: result.sourceMapText\n    }\n  }),\n  babel: file => load('https://unpkg.com/babel-standalone@6/babel.min.js').then(() =>\n    window.Babel.transform(file.content, {\n      presets: ['es2015', 'react'],\n      sourceMaps: true,\n      sourceFileName: file.name,\n      sourceMapTarget: file.name\n    })\n  ),\n  ls: file => load('https://rawgit.com/gkz/LiveScript/master/browser/livescript.js').then(() => {\n    if (!window.liveScript)\n      window.livescript = window.require('livescript')\n\n    const result = window.livescript.compile(file.content, {\n      map: 'notInCode',\n      filename: file.name\n    })\n\n    return {\n      code: result.code,\n      map: result.map.toString()\n    }\n  })\n}\n\nexport default compilers\n","/* eslint-disable */\n;(function() {\n\"use strict\"\n/* eslint-enable */\n\nvar guid = 0, HALT = {}\nfunction createStream() {\n\tfunction stream() {\n\t\tif (arguments.length > 0 && arguments[0] !== HALT) updateStream(stream, arguments[0])\n\t\treturn stream._state.value\n\t}\n\tinitStream(stream)\n\n\tif (arguments.length > 0 && arguments[0] !== HALT) updateStream(stream, arguments[0])\n\n\treturn stream\n}\nfunction initStream(stream) {\n\tstream.constructor = createStream\n\tstream._state = {id: guid++, value: undefined, state: 0, derive: undefined, recover: undefined, deps: {}, parents: [], endStream: undefined, unregister: undefined}\n\tstream.map = stream[\"fantasy-land/map\"] = map, stream[\"fantasy-land/ap\"] = ap, stream[\"fantasy-land/of\"] = createStream\n\tstream.valueOf = valueOf, stream.toJSON = toJSON, stream.toString = valueOf\n\n\tObject.defineProperties(stream, {\n\t\tend: {get: function() {\n\t\t\tif (!stream._state.endStream) {\n\t\t\t\tvar endStream = createStream()\n\t\t\t\tendStream.map(function(value) {\n\t\t\t\t\tif (value === true) {\n\t\t\t\t\t\tunregisterStream(stream)\n\t\t\t\t\t\tendStream._state.unregister = function(){unregisterStream(endStream)}\n\t\t\t\t\t}\n\t\t\t\t\treturn value\n\t\t\t\t})\n\t\t\t\tstream._state.endStream = endStream\n\t\t\t}\n\t\t\treturn stream._state.endStream\n\t\t}}\n\t})\n}\nfunction updateStream(stream, value) {\n\tupdateState(stream, value)\n\tfor (var id in stream._state.deps) updateDependency(stream._state.deps[id], false)\n\tif (stream._state.unregister != null) stream._state.unregister()\n\tfinalize(stream)\n}\nfunction updateState(stream, value) {\n\tstream._state.value = value\n\tstream._state.changed = true\n\tif (stream._state.state !== 2) stream._state.state = 1\n}\nfunction updateDependency(stream, mustSync) {\n\tvar state = stream._state, parents = state.parents\n\tif (parents.length > 0 && parents.every(active) && (mustSync || parents.some(changed))) {\n\t\tvar value = stream._state.derive()\n\t\tif (value === HALT) return false\n\t\tupdateState(stream, value)\n\t}\n}\nfunction finalize(stream) {\n\tstream._state.changed = false\n\tfor (var id in stream._state.deps) stream._state.deps[id]._state.changed = false\n}\n\nfunction combine(fn, streams) {\n\tif (!streams.every(valid)) throw new Error(\"Ensure that each item passed to stream.combine/stream.merge is a stream\")\n\treturn initDependency(createStream(), streams, function() {\n\t\treturn fn.apply(this, streams.concat([streams.filter(changed)]))\n\t})\n}\n\nfunction initDependency(dep, streams, derive) {\n\tvar state = dep._state\n\tstate.derive = derive\n\tstate.parents = streams.filter(notEnded)\n\n\tregisterDependency(dep, state.parents)\n\tupdateDependency(dep, true)\n\n\treturn dep\n}\nfunction registerDependency(stream, parents) {\n\tfor (var i = 0; i < parents.length; i++) {\n\t\tparents[i]._state.deps[stream._state.id] = stream\n\t\tregisterDependency(stream, parents[i]._state.parents)\n\t}\n}\nfunction unregisterStream(stream) {\n\tfor (var i = 0; i < stream._state.parents.length; i++) {\n\t\tvar parent = stream._state.parents[i]\n\t\tdelete parent._state.deps[stream._state.id]\n\t}\n\tfor (var id in stream._state.deps) {\n\t\tvar dependent = stream._state.deps[id]\n\t\tvar index = dependent._state.parents.indexOf(stream)\n\t\tif (index > -1) dependent._state.parents.splice(index, 1)\n\t}\n\tstream._state.state = 2 //ended\n\tstream._state.deps = {}\n}\n\nfunction map(fn) {return combine(function(stream) {return fn(stream())}, [this])}\nfunction ap(stream) {return combine(function(s1, s2) {return s1()(s2())}, [stream, this])}\nfunction valueOf() {return this._state.value}\nfunction toJSON() {return this._state.value != null && typeof this._state.value.toJSON === \"function\" ? this._state.value.toJSON() : this._state.value}\n\nfunction valid(stream) {return stream._state }\nfunction active(stream) {return stream._state.state === 1}\nfunction changed(stream) {return stream._state.changed}\nfunction notEnded(stream) {return stream._state.state !== 2}\n\nfunction merge(streams) {\n\treturn combine(function() {\n\t\treturn streams.map(function(s) {return s()})\n\t}, streams)\n}\n\nfunction scan(reducer, seed, stream) {\n\tvar newStream = combine(function (s) {\n\t\treturn seed = reducer(seed, s._state.value)\n\t}, [stream])\n\n\tif (newStream._state.state === 0) newStream(seed)\n\n\treturn newStream\n}\n\nfunction scanMerge(tuples, seed) {\n\tvar streams = tuples.map(function(tuple) {\n\t\tvar stream = tuple[0]\n\t\tif (stream._state.state === 0) stream(undefined)\n\t\treturn stream\n\t})\n\n\tvar newStream = combine(function() {\n\t\tvar changed = arguments[arguments.length - 1]\n\n\t\tstreams.forEach(function(stream, idx) {\n\t\t\tif (changed.indexOf(stream) > -1) {\n\t\t\t\tseed = tuples[idx][1](seed, stream._state.value)\n\t\t\t}\n\t\t})\n\n\t\treturn seed\n\t}, streams)\n\n\treturn newStream\n}\n\ncreateStream[\"fantasy-land/of\"] = createStream\ncreateStream.merge = merge\ncreateStream.combine = combine\ncreateStream.scan = scan\ncreateStream.scanMerge = scanMerge\ncreateStream.HALT = HALT\n\nif (typeof module !== \"undefined\") module[\"exports\"] = createStream\nelse if (typeof window.m === \"function\" && !(\"stream\" in window.m)) window.m.stream = createStream\nelse window.m = {stream : createStream}\n\n}());\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar intToCharMap = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.split('');\n\n/**\n * Encode an integer in the range of 0 to 63 to a single base 64 digit.\n */\nexports.encode = function (number) {\n  if (0 <= number && number < intToCharMap.length) {\n    return intToCharMap[number];\n  }\n  throw new TypeError(\"Must be between 0 and 63: \" + number);\n};\n\n/**\n * Decode a single base 64 character code digit to an integer. Returns -1 on\n * failure.\n */\nexports.decode = function (charCode) {\n  var bigA = 65;     // 'A'\n  var bigZ = 90;     // 'Z'\n\n  var littleA = 97;  // 'a'\n  var littleZ = 122; // 'z'\n\n  var zero = 48;     // '0'\n  var nine = 57;     // '9'\n\n  var plus = 43;     // '+'\n  var slash = 47;    // '/'\n\n  var littleOffset = 26;\n  var numberOffset = 52;\n\n  // 0 - 25: ABCDEFGHIJKLMNOPQRSTUVWXYZ\n  if (bigA <= charCode && charCode <= bigZ) {\n    return (charCode - bigA);\n  }\n\n  // 26 - 51: abcdefghijklmnopqrstuvwxyz\n  if (littleA <= charCode && charCode <= littleZ) {\n    return (charCode - littleA + littleOffset);\n  }\n\n  // 52 - 61: 0123456789\n  if (zero <= charCode && charCode <= nine) {\n    return (charCode - zero + numberOffset);\n  }\n\n  // 62: +\n  if (charCode == plus) {\n    return 62;\n  }\n\n  // 63: /\n  if (charCode == slash) {\n    return 63;\n  }\n\n  // Invalid base64 digit.\n  return -1;\n};\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\n/**\n * This is a helper function for getting values from parameter/options\n * objects.\n *\n * @param args The object we are extracting values from\n * @param name The name of the property we are getting.\n * @param defaultValue An optional value to return if the property is missing\n * from the object. If this is not specified and the property is missing, an\n * error will be thrown.\n */\nfunction getArg(aArgs, aName, aDefaultValue) {\n  if (aName in aArgs) {\n    return aArgs[aName];\n  } else if (arguments.length === 3) {\n    return aDefaultValue;\n  } else {\n    throw new Error('\"' + aName + '\" is a required argument.');\n  }\n}\nexports.getArg = getArg;\n\nvar urlRegexp = /^(?:([\\w+\\-.]+):)?\\/\\/(?:(\\w+:\\w+)@)?([\\w.]*)(?::(\\d+))?(\\S*)$/;\nvar dataUrlRegexp = /^data:.+\\,.+$/;\n\nfunction urlParse(aUrl) {\n  var match = aUrl.match(urlRegexp);\n  if (!match) {\n    return null;\n  }\n  return {\n    scheme: match[1],\n    auth: match[2],\n    host: match[3],\n    port: match[4],\n    path: match[5]\n  };\n}\nexports.urlParse = urlParse;\n\nfunction urlGenerate(aParsedUrl) {\n  var url = '';\n  if (aParsedUrl.scheme) {\n    url += aParsedUrl.scheme + ':';\n  }\n  url += '//';\n  if (aParsedUrl.auth) {\n    url += aParsedUrl.auth + '@';\n  }\n  if (aParsedUrl.host) {\n    url += aParsedUrl.host;\n  }\n  if (aParsedUrl.port) {\n    url += \":\" + aParsedUrl.port\n  }\n  if (aParsedUrl.path) {\n    url += aParsedUrl.path;\n  }\n  return url;\n}\nexports.urlGenerate = urlGenerate;\n\n/**\n * Normalizes a path, or the path portion of a URL:\n *\n * - Replaces consecutive slashes with one slash.\n * - Removes unnecessary '.' parts.\n * - Removes unnecessary '<dir>/..' parts.\n *\n * Based on code in the Node.js 'path' core module.\n *\n * @param aPath The path or url to normalize.\n */\nfunction normalize(aPath) {\n  var path = aPath;\n  var url = urlParse(aPath);\n  if (url) {\n    if (!url.path) {\n      return aPath;\n    }\n    path = url.path;\n  }\n  var isAbsolute = exports.isAbsolute(path);\n\n  var parts = path.split(/\\/+/);\n  for (var part, up = 0, i = parts.length - 1; i >= 0; i--) {\n    part = parts[i];\n    if (part === '.') {\n      parts.splice(i, 1);\n    } else if (part === '..') {\n      up++;\n    } else if (up > 0) {\n      if (part === '') {\n        // The first part is blank if the path is absolute. Trying to go\n        // above the root is a no-op. Therefore we can remove all '..' parts\n        // directly after the root.\n        parts.splice(i + 1, up);\n        up = 0;\n      } else {\n        parts.splice(i, 2);\n        up--;\n      }\n    }\n  }\n  path = parts.join('/');\n\n  if (path === '') {\n    path = isAbsolute ? '/' : '.';\n  }\n\n  if (url) {\n    url.path = path;\n    return urlGenerate(url);\n  }\n  return path;\n}\nexports.normalize = normalize;\n\n/**\n * Joins two paths/URLs.\n *\n * @param aRoot The root path or URL.\n * @param aPath The path or URL to be joined with the root.\n *\n * - If aPath is a URL or a data URI, aPath is returned, unless aPath is a\n *   scheme-relative URL: Then the scheme of aRoot, if any, is prepended\n *   first.\n * - Otherwise aPath is a path. If aRoot is a URL, then its path portion\n *   is updated with the result and aRoot is returned. Otherwise the result\n *   is returned.\n *   - If aPath is absolute, the result is aPath.\n *   - Otherwise the two paths are joined with a slash.\n * - Joining for example 'http://' and 'www.example.com' is also supported.\n */\nfunction join(aRoot, aPath) {\n  if (aRoot === \"\") {\n    aRoot = \".\";\n  }\n  if (aPath === \"\") {\n    aPath = \".\";\n  }\n  var aPathUrl = urlParse(aPath);\n  var aRootUrl = urlParse(aRoot);\n  if (aRootUrl) {\n    aRoot = aRootUrl.path || '/';\n  }\n\n  // `join(foo, '//www.example.org')`\n  if (aPathUrl && !aPathUrl.scheme) {\n    if (aRootUrl) {\n      aPathUrl.scheme = aRootUrl.scheme;\n    }\n    return urlGenerate(aPathUrl);\n  }\n\n  if (aPathUrl || aPath.match(dataUrlRegexp)) {\n    return aPath;\n  }\n\n  // `join('http://', 'www.example.com')`\n  if (aRootUrl && !aRootUrl.host && !aRootUrl.path) {\n    aRootUrl.host = aPath;\n    return urlGenerate(aRootUrl);\n  }\n\n  var joined = aPath.charAt(0) === '/'\n    ? aPath\n    : normalize(aRoot.replace(/\\/+$/, '') + '/' + aPath);\n\n  if (aRootUrl) {\n    aRootUrl.path = joined;\n    return urlGenerate(aRootUrl);\n  }\n  return joined;\n}\nexports.join = join;\n\nexports.isAbsolute = function (aPath) {\n  return aPath.charAt(0) === '/' || !!aPath.match(urlRegexp);\n};\n\n/**\n * Make a path relative to a URL or another path.\n *\n * @param aRoot The root path or URL.\n * @param aPath The path or URL to be made relative to aRoot.\n */\nfunction relative(aRoot, aPath) {\n  if (aRoot === \"\") {\n    aRoot = \".\";\n  }\n\n  aRoot = aRoot.replace(/\\/$/, '');\n\n  // It is possible for the path to be above the root. In this case, simply\n  // checking whether the root is a prefix of the path won't work. Instead, we\n  // need to remove components from the root one by one, until either we find\n  // a prefix that fits, or we run out of components to remove.\n  var level = 0;\n  while (aPath.indexOf(aRoot + '/') !== 0) {\n    var index = aRoot.lastIndexOf(\"/\");\n    if (index < 0) {\n      return aPath;\n    }\n\n    // If the only part of the root that is left is the scheme (i.e. http://,\n    // file:///, etc.), one or more slashes (/), or simply nothing at all, we\n    // have exhausted all components, so the path is not relative to the root.\n    aRoot = aRoot.slice(0, index);\n    if (aRoot.match(/^([^\\/]+:\\/)?\\/*$/)) {\n      return aPath;\n    }\n\n    ++level;\n  }\n\n  // Make sure we add a \"../\" for each component we removed from the root.\n  return Array(level + 1).join(\"../\") + aPath.substr(aRoot.length + 1);\n}\nexports.relative = relative;\n\nvar supportsNullProto = (function () {\n  var obj = Object.create(null);\n  return !('__proto__' in obj);\n}());\n\nfunction identity (s) {\n  return s;\n}\n\n/**\n * Because behavior goes wacky when you set `__proto__` on objects, we\n * have to prefix all the strings in our set with an arbitrary character.\n *\n * See https://github.com/mozilla/source-map/pull/31 and\n * https://github.com/mozilla/source-map/issues/30\n *\n * @param String aStr\n */\nfunction toSetString(aStr) {\n  if (isProtoString(aStr)) {\n    return '$' + aStr;\n  }\n\n  return aStr;\n}\nexports.toSetString = supportsNullProto ? identity : toSetString;\n\nfunction fromSetString(aStr) {\n  if (isProtoString(aStr)) {\n    return aStr.slice(1);\n  }\n\n  return aStr;\n}\nexports.fromSetString = supportsNullProto ? identity : fromSetString;\n\nfunction isProtoString(s) {\n  if (!s) {\n    return false;\n  }\n\n  var length = s.length;\n\n  if (length < 9 /* \"__proto__\".length */) {\n    return false;\n  }\n\n  if (s.charCodeAt(length - 1) !== 95  /* '_' */ ||\n      s.charCodeAt(length - 2) !== 95  /* '_' */ ||\n      s.charCodeAt(length - 3) !== 111 /* 'o' */ ||\n      s.charCodeAt(length - 4) !== 116 /* 't' */ ||\n      s.charCodeAt(length - 5) !== 111 /* 'o' */ ||\n      s.charCodeAt(length - 6) !== 114 /* 'r' */ ||\n      s.charCodeAt(length - 7) !== 112 /* 'p' */ ||\n      s.charCodeAt(length - 8) !== 95  /* '_' */ ||\n      s.charCodeAt(length - 9) !== 95  /* '_' */) {\n    return false;\n  }\n\n  for (var i = length - 10; i >= 0; i--) {\n    if (s.charCodeAt(i) !== 36 /* '$' */) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Comparator between two mappings where the original positions are compared.\n *\n * Optionally pass in `true` as `onlyCompareGenerated` to consider two\n * mappings with the same original source/line/column, but different generated\n * line and column the same. Useful when searching for a mapping with a\n * stubbed out mapping.\n */\nfunction compareByOriginalPositions(mappingA, mappingB, onlyCompareOriginal) {\n  var cmp = mappingA.source - mappingB.source;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalLine - mappingB.originalLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalColumn - mappingB.originalColumn;\n  if (cmp !== 0 || onlyCompareOriginal) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedLine - mappingB.generatedLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  return mappingA.name - mappingB.name;\n}\nexports.compareByOriginalPositions = compareByOriginalPositions;\n\n/**\n * Comparator between two mappings with deflated source and name indices where\n * the generated positions are compared.\n *\n * Optionally pass in `true` as `onlyCompareGenerated` to consider two\n * mappings with the same generated line and column, but different\n * source/name/original line and column the same. Useful when searching for a\n * mapping with a stubbed out mapping.\n */\nfunction compareByGeneratedPositionsDeflated(mappingA, mappingB, onlyCompareGenerated) {\n  var cmp = mappingA.generatedLine - mappingB.generatedLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n  if (cmp !== 0 || onlyCompareGenerated) {\n    return cmp;\n  }\n\n  cmp = mappingA.source - mappingB.source;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalLine - mappingB.originalLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalColumn - mappingB.originalColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  return mappingA.name - mappingB.name;\n}\nexports.compareByGeneratedPositionsDeflated = compareByGeneratedPositionsDeflated;\n\nfunction strcmp(aStr1, aStr2) {\n  if (aStr1 === aStr2) {\n    return 0;\n  }\n\n  if (aStr1 > aStr2) {\n    return 1;\n  }\n\n  return -1;\n}\n\n/**\n * Comparator between two mappings with inflated source and name strings where\n * the generated positions are compared.\n */\nfunction compareByGeneratedPositionsInflated(mappingA, mappingB) {\n  var cmp = mappingA.generatedLine - mappingB.generatedLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = strcmp(mappingA.source, mappingB.source);\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalLine - mappingB.originalLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalColumn - mappingB.originalColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  return strcmp(mappingA.name, mappingB.name);\n}\nexports.compareByGeneratedPositionsInflated = compareByGeneratedPositionsInflated;\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nexports.GREATEST_LOWER_BOUND = 1;\nexports.LEAST_UPPER_BOUND = 2;\n\n/**\n * Recursive implementation of binary search.\n *\n * @param aLow Indices here and lower do not contain the needle.\n * @param aHigh Indices here and higher do not contain the needle.\n * @param aNeedle The element being searched for.\n * @param aHaystack The non-empty array being searched.\n * @param aCompare Function which takes two elements and returns -1, 0, or 1.\n * @param aBias Either 'binarySearch.GREATEST_LOWER_BOUND' or\n *     'binarySearch.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n */\nfunction recursiveSearch(aLow, aHigh, aNeedle, aHaystack, aCompare, aBias) {\n  // This function terminates when one of the following is true:\n  //\n  //   1. We find the exact element we are looking for.\n  //\n  //   2. We did not find the exact element, but we can return the index of\n  //      the next-closest element.\n  //\n  //   3. We did not find the exact element, and there is no next-closest\n  //      element than the one we are searching for, so we return -1.\n  var mid = Math.floor((aHigh - aLow) / 2) + aLow;\n  var cmp = aCompare(aNeedle, aHaystack[mid], true);\n  if (cmp === 0) {\n    // Found the element we are looking for.\n    return mid;\n  }\n  else if (cmp > 0) {\n    // Our needle is greater than aHaystack[mid].\n    if (aHigh - mid > 1) {\n      // The element is in the upper half.\n      return recursiveSearch(mid, aHigh, aNeedle, aHaystack, aCompare, aBias);\n    }\n\n    // The exact needle element was not found in this haystack. Determine if\n    // we are in termination case (3) or (2) and return the appropriate thing.\n    if (aBias == exports.LEAST_UPPER_BOUND) {\n      return aHigh < aHaystack.length ? aHigh : -1;\n    } else {\n      return mid;\n    }\n  }\n  else {\n    // Our needle is less than aHaystack[mid].\n    if (mid - aLow > 1) {\n      // The element is in the lower half.\n      return recursiveSearch(aLow, mid, aNeedle, aHaystack, aCompare, aBias);\n    }\n\n    // we are in termination case (3) or (2) and return the appropriate thing.\n    if (aBias == exports.LEAST_UPPER_BOUND) {\n      return mid;\n    } else {\n      return aLow < 0 ? -1 : aLow;\n    }\n  }\n}\n\n/**\n * This is an implementation of binary search which will always try and return\n * the index of the closest element if there is no exact hit. This is because\n * mappings between original and generated line/col pairs are single points,\n * and there is an implicit region between each of them, so a miss just means\n * that you aren't on the very start of a region.\n *\n * @param aNeedle The element you are looking for.\n * @param aHaystack The array that is being searched.\n * @param aCompare A function which takes the needle and an element in the\n *     array and returns -1, 0, or 1 depending on whether the needle is less\n *     than, equal to, or greater than the element, respectively.\n * @param aBias Either 'binarySearch.GREATEST_LOWER_BOUND' or\n *     'binarySearch.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n *     Defaults to 'binarySearch.GREATEST_LOWER_BOUND'.\n */\nexports.search = function search(aNeedle, aHaystack, aCompare, aBias) {\n  if (aHaystack.length === 0) {\n    return -1;\n  }\n\n  var index = recursiveSearch(-1, aHaystack.length, aNeedle, aHaystack,\n                              aCompare, aBias || exports.GREATEST_LOWER_BOUND);\n  if (index < 0) {\n    return -1;\n  }\n\n  // We have found either the exact element, or the next-closest element than\n  // the one we are searching for. However, there may be more than one such\n  // element. Make sure we always return the smallest of these.\n  while (index - 1 >= 0) {\n    if (aCompare(aHaystack[index], aHaystack[index - 1], true) !== 0) {\n      break;\n    }\n    --index;\n  }\n\n  return index;\n};\n","/*\n * Copyright 2009-2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE.txt or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\nexports.SourceMapGenerator = require('./lib/source-map-generator').SourceMapGenerator;\nexports.SourceMapConsumer = require('./lib/source-map-consumer').SourceMapConsumer;\nexports.SourceNode = require('./lib/source-node').SourceNode;\n","import m from 'mithril'\nimport compilers from './compilers'\nimport { isCss, ext, assign, createFlemsIoLink } from './utils'\nimport { diff, patch } from './dmp'\nimport SourceMap from 'source-map'\n\nconst firefox = navigator.userAgent.indexOf('Firefox') !== -1\n\nexport default function(model) {\n  let resizeTimer = null\n    , debounceTimer = null\n\n  const actions = {\n    onchange      : () => { /* no-op */ },\n    setMiddle     : size => model.state.middle = size,\n    toggleConsole : change(hide => model.state.console = model.state.console === true ? 'collapsed' : true),\n    resetSize     : change(() => actions.setMiddle(50)),\n    loaded        : () => model.loading = false,\n    toggleAutoReload,\n    onConsoleKeyDown,\n    onConsoleInput,\n    consoleOutput,\n    startDragging,\n    stopDragging,\n    changeMiddle,\n    setShareUrl,\n    fileChange,\n    initIframe,\n    setState,\n    resizing,\n    refresh,\n    getLink,\n    select\n  }\n\n  getLinks()\n\n  return actions\n\n  function getLinks() {\n    Promise.all(model.state.links.map(getLink)).then(() =>\n      refresh({ force: true })\n    )\n  }\n\n  function change(fn) {\n    return function(value) {\n      fn(value)\n      changed()\n    }\n  }\n\n  function changed() {\n    actions.onchange(model.state)\n  }\n\n  function setState(state) {\n    assign(model.state, state)\n\n    model.linkContent = model.state.links.reduce((acc, link) => {\n      acc[link.url] = model.linkContent[link.url]\n      return acc\n    }, {})\n\n    model.linkPatched = model.state.links.reduce((acc, link) => {\n      acc[link.url] = model.linkPatched[link.url]\n      return acc\n    }, {})\n\n    getLinks()\n\n    if (model.selected() !== state.selected)\n      model.selected(state.selected)\n\n    refresh()\n    m.redraw()\n  }\n\n  function setShareUrl({ dom }) {\n    dom.addEventListener('mousedown', e => {\n      dom.href = createFlemsIoLink(model.state)\n    }, true)\n\n  }\n\n  function startDragging() {\n    model.dragging = true\n  }\n\n  function stopDragging() {\n    model.dragging = false\n    model.refreshCm(true)\n    changed()\n  }\n\n  function toggleAutoReload() {\n    model.state.autoReload = !model.state.autoReload\n    changed()\n    if (model.state.autoReload)\n      refresh()\n  }\n\n  function onConsoleInput(e) {\n    model.console.input = e.target.value\n  }\n\n  function onConsoleKeyDown(e) {\n    if ((e.key === 'Enter' || e.keyCode === 13) && !e.shiftKey && !e.altKey) {\n      e.preventDefault()\n      evaluate()\n      return false\n    } else if ((e.key === 'ArrowUp' || e.keyCode === 38) && (model.console.historyNavigated || e.target.selectionStart === 0)) {\n      e.preventDefault()\n      consoleHistoryBack()\n    } else if ((e.key === 'ArrowDown' || e.keyCode === 40) && (model.console.historyNavigated || model.console.input === '')) {\n      e.preventDefault()\n      consoleHistoryForward()\n    } else {\n      model.console.historyNavigated = false\n    }\n  }\n\n  function evaluate(e) {\n    if (!model.console.input)\n      return\n\n    model.iframe.contentWindow.postMessage({\n      name: 'eval',\n      content: model.console.input\n    }, '*')\n    model.console.position = model.console.history.push(model.console.input)\n    model.console.input = ''\n  }\n\n  function consoleHistoryBack() {\n    model.console.historyNavigated = true\n\n    if (model.console.position >= 0)\n      model.console.position -= 1\n\n    model.console.input = model.console.history[model.console.position] || ''\n  }\n\n  function consoleHistoryForward() {\n    model.console.historyNavigated = true\n\n    if (model.console.position < model.console.history.length)\n      model.console.position += 1\n\n    model.console.input = model.console.history[model.console.position] || ''\n  }\n\n  function getLink(link) {\n    if (model.linkContent[link.url])\n      return\n\n    model.linkContent[link.url] = undefined\n\n    return m.request(link.url, {\n      deserialize: v => v\n    }).then(content => {\n      content = content.replace(/\\r\\n/g, '\\n')\n      if (content.length > 200000) // Too large files are slow\n        return\n\n      model.linkContent[link.url] = content\n      model.linkPatched[link.url] = link.patches\n        ? patch(content, link.patches)[0]\n        : content\n\n      if (model.state.selected === link.url)\n        select(link.url)\n    }).catch(() => {\n      // Ignore errors and stay with script src=url\n    })\n  }\n\n  function select(name, file) {\n    model.selected(name)\n    file && model.focus(file)\n    changed()\n  }\n\n  function initIframe(iframe) {\n    model.iframe = iframe\n    model.iframe.addEventListener('load', iframeReady)\n  }\n\n  function iframeReady() {\n    Promise.all(model.state.files.filter(f => f.content).map(getContent))\n    .then(files => {\n      model.iframe.contentWindow.postMessage({\n        name: 'init',\n        content: {\n          id: model.id,\n          state: {\n            files: files,\n            links: model.state.links.map(link => ({\n              type: link.type || (isCss(link.name) ? 'css' : 'js'),\n              name: link.name,\n              url : link.url,\n              content: model.linkPatched[link.url]\n            }))\n          }\n        }\n      }, '*')\n    })\n  }\n\n  function getContent(file) {\n    const compile = typeof file.compiler === 'function'\n      ? file.compiler\n      : compilers[file.compiler || ext(file.name)]\n\n    if (!compile)\n      return file\n\n    return compile(file).then(result => {\n      if (result.error)\n        consoleOutput(result.error)\n\n      if (result.map)\n        model.sourceMaps[file.name] = result.map\n\n      return {\n        name: file.name,\n        content: result.code || ''\n      }\n    }).catch(err => {\n      consoleOutput({\n        content: String(err),\n        stack: []\n      })\n      return file\n    })\n  }\n\n  function consoleOutput(data) {\n    const file = model.findFile(model.state, data.file)\n\n    if (file && data.type === 'error' && data.content.indexOf('<') > -1 && !window.Babel) {\n      file.compiler = 'babel'\n      refresh()\n      return\n    }\n\n    data.stack.forEach(s => {\n      const file = model.findFile(model.state, s.file)\n      if (!file || !(file.name in model.sourceMaps))\n        return\n\n      const smc = new SourceMap.SourceMapConsumer(model.sourceMaps[file.name])\n      const result = smc.originalPositionFor({\n        line: s.line,\n        column: s.column\n      })\n      s.line = result.line\n      s.column = result.column\n    })\n\n    model.console.output.push(data)\n  }\n\n  function fileChange(file, content) {\n    clearTimeout(debounceTimer)\n    debounceTimer = setTimeout(() => {\n      if (file.url)\n        model.linkPatched[file.url] = content\n      else\n        file.content = content\n\n      if (file.url)\n        file.patches = diff(model.linkContent[file.url], model.linkPatched[file.url])\n\n      changed()\n\n      if (model.state.autoReload && (file.type === 'css' || isCss(file.name))) {\n        model.iframe.contentWindow.postMessage({\n          name: 'css',\n          content: {\n            name: file.name,\n            url: file.url,\n            content: model.linkPatched[file.url] || file.content\n          }\n        }, '*')\n      } else {\n        refresh()\n      }\n      m.redraw()\n    }, 400)\n  }\n\n  function changeMiddle(e) {\n    const { top, left } = model.dom.getBoundingClientRect()\n\n    model.state.middle = Math.min(Math.max(Math.round(\n      (model.vertical()\n        ? (e.clientY - top + 5) / (model.dom.offsetHeight)\n        : (e.clientX - left + 5) / (model.dom.offsetWidth)\n      ) * 10000\n    ) / 100, 0), 100)\n\n    m.redraw()\n  }\n\n  function resizing() {\n    if (model.iOS)\n      return\n\n    model.resizing = true\n    clearTimeout(resizeTimer)\n    resizeTimer = setTimeout(() => {\n      model.resizing = false\n      m.redraw()\n    }, 1000)\n  }\n\n  function refresh(options = {}) {\n    if (!options.force && !model.state.autoReload)\n      return model.hasChanges = true\n\n    model.hasChanges = false\n    model.loading = true\n    model.console.output = []\n\n    reloadIframe()\n\n    m.redraw()\n  }\n\n  function reloadIframe() {\n    if (firefox)\n      model.iframe.src += '?'\n\n    model.iframe.src = model.runtimeUrl\n  }\n}\n","import m from 'mithril'\n\nexport default {\n  listen: (model, actions) => {\n    window.addEventListener('message', ({ data }) => {\n      if (data.name && data.flems !== model.id)\n        return\n\n      if (data.name === 'loaded')\n        actions.loaded()\n      else if (data.name === 'console')\n        actions.consoleOutput(data.content)\n      else if (data.name === 'resize')\n        actions.resizing()\n\n      m.redraw()\n    })\n  }\n}\n"],"names":["findWidth","obj","hasOwnProperty","Object","getPrototypeOf","parse","input","value","stringToObject","Array","isArray","raw","arguments","String","apply","style","sanitize","lowercaseFirst","string","charAt","toLowerCase","slice","styles","keys","reduce","acc","key","const","vendorMap","addPx","assign","obj2","hyphenToCamelCase","hyphen","replace","match","toUpperCase","camelCaseToHyphen","camelCase","initials","join","short","prop","acronym","popular","shorts","objectToRules","base","rules","hasBase","forEach","push","selectorBlock","unshift","selector","stylesToCss","map","k","propToString","split","line","tokens","trim","length","shift","vendorRegex","test","isNaN","appendPx","insert","rule","index","debug","styleSheet","textContent","sheet","insertRule","cssRules","createClass","css","classes","className","classPrefix","count","bss","chain","instance","newInstance","create","setter","let","i","this","helper","name","styling","defineProperty","get","result","endsWith","suffix","str","indexOf","selectLineNumber","cm","gutter","e","update","setSelections","others","concat","anchor","CodeMirror","Pos","from","to","head","origin","selections","listSelections","ctrlKey","metaKey","shiftKey","move","curLine","lineAtHeight","clientY","up","window","removeEventListener","addEventListener","linkTabs","model","actions","state","links","link","tab","m","b","c","href","url","target","onclick","linkContent","preventDefault","select","selectedFile","fileTabs","files","file","title","selected","d","ai","transition","minWidth","maxWidth","cursor","flexShrink","background","$hover","color","flexGrow","overflow","ta","whiteSpace","p","fadeRemove","vnode","dom","opacity","Promise","r","setTimeout","el","classList","contains","parentElement","bubble","bc","position","br","o","quote","s","toStr","isDate","isRegExp","isError","isSymbol","isString","isNumber","isBoolean","has","hasOwn","call","objectToString","nameOf","f","xs","x","l","isMap","mapSize","setSize","Map","isSet","Set","isElement","HTMLElement","nodeName","getAttribute","inspectString","lowbyte","n","charCodeAt","8","9","10","12","13","toString","markBoxed","collectionOf","type","size","entries","arrObjKeys","inspect","isArr","Number","randomId","Math","random","validateAndCleanState","clean","defaults","validateFilename","validateCompiler","compiler","content","some","Error","validateUrl","lastIndexOf","findFile","filename","filenameRegex","urlRegex","compilers","diffMain","text1","text2","optChecklines","optDeadline","diffTimeout","MAX_VALUE","Date","getTime","deadline","DIFF_EQUAL","checklines","commonlength","diffCommonPrefix","commonprefix","substring","diffCommonSuffix","commonsuffix","diffs","diffCompute","diffCleanupMerge","DIFF_INSERT","DIFF_DELETE","longtext","shorttext","hm","diffHalfMatch","text1A","text1B","text2A","text2B","midCommon","diffsA","diffsB","diffLinemode","diffBisect","a","diffLinesToChars","chars1","chars2","linearray","lineArray","diffCharsToLines","diffCleanupSemantic","pointer","countDelete","countInsert","textDelete","textInsert","splice","j","pop","text1Length","text2Length","maxD","ceil","vOffset","vLength","v1","v2","delta","front","k1start","k1end","k2start","k2end","k1","k1Offset","x1","y1","k2Offset","diffBisectSplit","k2","x2","y2","y","text1a","text2a","text1b","text2b","diffsb","diffLinesToCharsMunge","text","chars","lineStart","lineEnd","lineArrayLength","lineHash","undefined","fromCharCode","pointermin","pointermax","min","pointermid","pointerstart","floor","pointerend","diffCommonOverlap","textLength","best","pattern","found","diffHalfMatchI","bestLongtextA","bestLongtextB","bestShorttextA","bestShorttextB","seed","bestCommon","prefixLength","suffixLength","hm1","hm2","changes","equalities","equalitiesLength","lastEquality","lengthInsertions1","lengthDeletions1","lengthInsertions2","lengthDeletions2","max","diffCleanupSemanticLossless","deletion","insertion","overlapLength1","overlapLength2","diffCleanupSemanticScore_","one","two","char1","char2","nonAlphaNumeric1","nonAlphaNumericRegex_","nonAlphaNumeric2","whitespace1","whitespaceRegex_","whitespace2","lineBreak1","linebreakRegex_","lineBreak2","blankLine1","blanklineEndRegex_","blankLine2","blanklineStartRegex_","equality1","edit","equality2","commonOffset","commonString","bestEquality1","bestEdit","bestEquality2","bestScore","score","diffCleanupEfficiency","preIns","preDel","postIns","postDel","diffEditCost","diffText1","diffText2","matchMain","loc","matchBitap","matchAlphabet","matchBitapScore_","accuracy","proximity","abs","matchDistance","matchMaxBits","scoreThreshold","matchThreshold","bestLoc","matchmask","binMin","binMid","lastRd","binMax","start","finish","rd","charMatch","patchAddContext","patch","start2","length1","padding","patchMargin","prefix","start1","length2","diff","optB","optC","patches","patchDiffLength","charCount1","charCount2","prepatchText","postpatchText","diffType","diffText","serialize","patchDeepCopy","patchesCopy","patchCopy","diffLevenshtein","levenshtein","insertions","deletions","op","data","deserialize","nullPadding","patchAddPadding","patchSplitMax","results","expectedLoc","startLoc","endLoc","patchDeleteThreshold","index1","index2","mod","diffXIndex","lastChars1","lastChars2","paddingLength","extraLength","patchSize","bigpatch","precontext","empty","postcontext","toVLQSigned","aValue","fromVLQSigned","shifted","ArraySet","_array","_set","hasNativeMap","generatedPositionAfter","mappingA","mappingB","lineA","generatedLine","lineB","columnA","generatedColumn","columnB","util","compareByGeneratedPositionsInflated","MappingList","_sorted","_last","SourceMapGenerator","aArgs","_file","getArg","_sourceRoot","_skipValidation","_sources","_names","_mappings","_sourcesContents","swap","ary","temp","randomIntInRange","low","high","round","doQuickSort","comparator","pivot","q","SourceMapConsumer","aSourceMap","sourceMap","JSON","sections","IndexedSourceMapConsumer","BasicSourceMapConsumer","version","sources","names","sourceRoot","sourcesContent","mappings","_version","normalize","source","isAbsolute","relative","fromArray","Mapping","originalLine","originalColumn","lastOffset","column","_sections","offset","offsetLine","offsetColumn","generatedOffset","consumer","SourceNode","aLine","aColumn","aSource","aChunks","aName","children","sourceContents","isSourceNode","add","Flems","runtimeUrl","Model","Actions","resizeRegistrered","redraw","message","listen","mount","view","app","focus","reload","refresh","force","onchange","fn","set","setState","bs","fd","ff","fs","h","jc","mb","ml","mr","mt","pb","pl","pr","pt","t","td","tt","w","cssProperties","document","documentElement","filter","cache","item","memoize","createElement","setProperty","err","flex","appendChild","keyframeCache","setDebug","valueOf","class","$keyframes","props","getSheet","unprefixed","arg","$media","$nest","pseudos","animation","rel","resize","v",".flems input, .flems textarea","fontFamily",".flems","boxSizing",".flems *, .flems *:before, .flems *:after",".flems svg","fill","va",".flems svg:not(:root)","Vnode","tag","attrs0","attrs","domSize","_state","events","skip","compileSelector","selectorParser","exec","id","attrValue","selectorCache","execSelector","childList","hasAttrs","hyperscript","cached","normalized","normalizeChildren","throttle","callback","last","pending","timeout","requestAnimationFrame","now","node","trust","html","fragment","attrs1","PromisePolyfill","executor","handler","list","shouldAbsorb","execute","then","callAsync","console","error","resolvers","rejectors","retry","self","TypeError","executeOnce","bind","rejectCurrent","run","runs","onerror","resolveCurrent","_instance","setImmediate","prototype","onFulfilled","onRejection","handle","next","resolveNext","rejectNext","promise","resolve","reject","catch","all","total","values","consume","race","global","buildQueryString","object","destructure","key0","args","encodeURIComponent","FILE_PROTOCOL_REGEX","RegExp","requestService","$window","finalizer","complete","oncompletion","finalize","promise0","then0","extra","interpolate","assemble","querystring","extract","xhr","responseText","cast","type0","callbackCount","request","method","useBody","FormData","stringify","XMLHttpRequest","aborted","_abort","abort","open","async","user","password","setRequestHeader","withCredentials","headers","config","onreadystatechange","readyState","response","status","send","jsonp","callbackName","script","parentNode","removeChild","callbackKey","src","setCompletionCallback","_8","coreRenderer","getNameSpace","xmlns","nameSpace","createNodes","parent","vnodes","end","hooks","nextSibling","ns","createNode","createComponent","initLifecycle","createText","createHTML","createFragment","$doc","createTextNode","insertNode","parent1","caption","thead","tbody","tfoot","tr","th","colgroup","col","innerHTML","firstChild","childNodes","child","createDocumentFragment","attrs2","is","element","createElementNS","setAttrs","contenteditable","setContentEditable","setLateAttrs","initComponent","sentinel","$$reentrantLock$$","$emptyFragment","updateNodes","old","recycling","removeNodes","isUnkeyed","getNextSibling","updateNode","isRecyclable","pool","oldStart","oldEnd","shouldRecycle","toFragment","getKeyMap","oldIndex","movable","oldTag","shouldNotUpdate","updateLifecycle","updateText","updateHTML","updateFragment","updateElement","updateComponent","removeNode","nodeValue","updateAttrs","oldChildrenLength","poolChildrenLength","vnodesChildrenLength","key2","count0","insertBefore","context","continuation","called","expected","onremove","removeNodeFromDOM","hasIntegrationMethods","onbeforeremove","setAttr","isFormAttribute","isLifecycleMethod","nsLastIndex","substr","setAttributeNS","updateEvent","updateStyle","isAttribute","isCustomElement","normalized0","activeElement","selectedIndex","setAttribute","removeAttribute","attr","oncreate","onupdate","cssText","onevent","eventName","oninit","forceVnodeUpdate","forceComponentUpdate","onbeforeupdate","svg","math","render","active","namespace","namespaceURI","setEventCallback","redrawService","unsubscribe","key1","callbacks","renderService","subscribe","_11","redrawService0","root","component","_16","parseQueryString","data0","counters","entry","key5","decodeURIComponent","levels","level","nextLevel","parseInt","isValue","coreRouter","normalize1","fragment0","location","debounceAsync","callback0","asyncId","callAsync0","parsePath","path","queryData","hashData","queryIndex","hashIndex","pathEnd","queryEnd","queryParams","key4","hashParams","supportsPushState","history","pushState","router","getPath","setPath","options","match2","token","query","hash","onpopstate","replaceState","defineRoutes","routes","resolveRoute","params","pathname","route0","matcher","onhashchange","route","render1","attrs3","currentPath","lastUpdate","routeService","identity","defaultRoute","run1","bail","payload","routeResolver","comp","onmatch","resolved","prefix0","vnode1","which","param","key3","_20","withAttr","attrName","callback1","currentTarget","_28","module","LZString","getBaseValue","alphabet","character","baseReverseDic","keyStrBase64","keyStrUriSafe","compressToBase64","res","_compress","decompressFromBase64","_decompress","compressToUTF16","decompressFromUTF16","compressed","compressToUint8Array","uncompressed","compress","buf","Uint8Array","TotalLen","current_value","decompressFromUint8Array","decompress","compressToEncodedURIComponent","decompressFromEncodedURIComponent","bitsPerChar","getCharFromInt","ii","context_dictionary","context_dictionaryToCreate","context_c","context_wc","context_w","context_enlargeIn","context_dictSize","context_numBits","context_data","context_data_val","context_data_position","pow","resetValue","getNextValue","bits","resb","maxpower","power","dictionary","enlargeIn","dictSize","numBits","val","createFlemsIoLink","lz","ext","isCss","factory","classTest","cls","removeChildren","removeChildrenAndAdd","elt","eltP","nodeType","host","activeElt","body","shadowRoot","addClass","current","joinClasses","as","copyObj","overwrite","countColumn","tabSize","startIndex","startValue","search","nextTab","array","findColumn","goal","pos","skipped","spaceStr","spaceStrs","lst","arr","out","insertSorted","priority","nothing","createObj","inst","isWordCharBasic","ch","nonASCIISingleCaseWordChar","isWordChar","isEmpty","isExtendingChar","extendingChars","skipExtendingChars","dir","findFirst","pred","mid","Display","place","doc","scrollbarFiller","gutterFiller","lineDiv","selectionDiv","cursorDiv","measure","lineMeasure","lineSpace","lines","mover","sizer","sizerWidth","heightForcer","scrollerGap","gutters","lineGutter","scroller","wrapper","ie","ie_version","zIndex","paddingRight","webkit","gecko","mobile","draggable","viewFrom","viewTo","first","reportedViewFrom","reportedViewTo","renderedView","externalMeasured","viewOffset","lastWrapHeight","lastWrapWidth","updateLineNumbers","nativeBarWidth","barHeight","barWidth","scrollbarsClipped","lineNumWidth","lineNumInnerWidth","lineNumChars","alignWidgets","cachedCharWidth","cachedTextHeight","cachedPaddingH","maxLine","maxLineLength","maxLineChanged","wheelDX","wheelDY","wheelStartX","wheelStartY","selForContextMenu","activeTouch","init","getLine","chunk","sz","chunkSize","getBetween","iter","getLines","updateLineHeight","height","lineNo","cur","no","outer","i$1","lh","isLine","lineNumberFor","lineNumberFormatter","firstLineNumber","sticky","cmp","equalCursorPos","copyPos","maxPos","minPos","clipLine","clipPos","clipToLen","linelen","clipPosArray","seeReadOnlySpans","sawReadOnlySpans","seeCollapsedSpans","sawCollapsedSpans","MarkedSpan","marker","getMarkedSpanFor","spans","span","removeMarkedSpan","addMarkedSpan","markedSpans","attachLine","markedSpansBefore","startCh","isInsert","nw","inclusiveLeft","insertLeft","endsAfter","inclusiveRight","markedSpansAfter","endCh","startsBefore","stretchSpansOverChange","change","full","oldFirst","oldLast","sameLine","span$1","clearEmptySpans","newMarkers","gapMarkers","gap","i$2","i$3","clearWhenEmpty","removeReadOnlyRanges","markers","mark","readOnly","parts","mk","find","newParts","dfrom","dto","detachMarkedSpans","detachLine","attachMarkedSpans","extraLeft","extraRight","compareCollapsedMarkers","lenDiff","aPos","bPos","fromCmp","toCmp","collapsedSpanAtSide","sps","sp","collapsed","collapsedSpanAtStart","collapsedSpanAtEnd","conflictingCollapsedRange","lineNo$$1","visualLine","merged","visualLineEnd","visualLineContinued","visualLineNo","lineN","vis","visualLineEndNo","lastLine","lineIsHidden","widgetNode","lineIsHiddenInner","heightAtLine","lineObj","lineLength","len","found$1","findMaxLine","display","iterateBidiSections","order","part","getBidiPartAt","bidiOther","getOrder","direction","bidiOrdering","moveCharLogically","moveLogically","endOfLine","visually","prep","prepareMeasureForLine","targetTop","measureCharPrepared","top","moveVisually","bidi","partPos","mv","getWrappedLineExtent","lineWrapping","wrappedLineExtentChar","begin","wrappedLineExtent","moveInStorageOrder","searchInVisualLine","getRes","nextCh","getHandlers","emitter","_handlers","noHandlers","off","detachEvent","map$$1","signal","handlers","signalDOMEvent","override","defaultPrevented","e_defaultPrevented","codemirrorIgnore","signalCursorActivity","cursorActivity","curOp","cursorActivityHandlers","hasHandler","eventMixin","ctor","on","e_preventDefault","returnValue","e_stopPropagation","stopPropagation","cancelBubble","e_stop","e_target","srcElement","e_button","button","mac","zeroWidthElement","zwspSupported","offsetHeight","offsetWidth","hasBadBidiRects","badBidiRects","txt","r0","range","getBoundingClientRect","r1","left","right","hasBadZoomedRects","badZoomedRects","normal","fromRange","defineMode","mode","dependencies","modes","resolveMode","spec","mimeModes","getMode","mfactory","modeObj","modeExtensions","exts","helperType","modeProps","prop$1","extendMode","properties","copyState","nstate","innerMode","info","startState","a1","a2","highlightLine","forceToEnd","st","modeGen","lineClasses","runMode","overlays","overlay","at","i_end","opaque","loop","bgClass","textClass","getLineStyles","updateFrontier","getContextBefore","resetState","maxHighlightLength","stateAfter","save","styleClasses","highlightFrontier","modeFrontier","precise","Context","findStartLine","saved","fromSaved","processLine","nextLine","startAt","stream","StringStream","callBlankLine","eol","readToken","blankLine","inner","takeToken","asArray","Token","extractLineClasses","output","lineClass","flattenSpans","curStart","curStyle","addModeClass","mName","minindent","minline","lim","after","SavedContext","lookAhead","indented","retreatFrontier","updateLine","estimateHeight","estHeight","cleanUpLine","interpretTokenStyle","styleToClassCacheWithMode","styleToClassCache","buildLineContent","lineView","builder","pre","trailingSpace","splitSpaces","getOption","rest","addToken","buildToken","buildTokenBadBidi","insertLineContent","maps","caches","lastChild","querySelector","defaultSpecialCharPlaceholder","startStyle","endStyle","displayText","special","specialChars","mustWrap","lastIndex","txt$1","tabWidth","specialCharPlaceholder","fullStyle","trailingBefore","spaceBefore","buildCollapsedSpan","ignoreWidget","widget","needsContentAttribute","setUneditable","allText","spanStyle","spanEndStyle","spanStartStyle","nextChange","Infinity","foundBookmarks","endStyles","j$1","j$2","upto","tokenText","LineView","hidden","buildViewArray","nextPos","pushOperation","operationGroup","ops","ownsGroup","delayedCallbacks","fireCallbacksForOps","group","cursorActivityCalled","finishOperation","endCb","signalLater","orphanDelayedCallbacks","fireOrphanDelayed","delayed","updateLineForChanges","dims","updateLineText","updateLineGutter","updateLineClasses","updateLineWidgets","ensureLineWrapped","replaceChild","updateLineBackground","wrap","getLineContent","built","wrapClass","gutterBackground","gutterClass","fixedGutter","fixedPos","gutterTotalWidth","gutterMarkers","lineNumbers","wrap$1","gutterWrap","lineNumber","gutterLeft","gutterWidth","alignable","insertLineWidgets","buildLineElement","insertLineWidgetsFor","allowAbove","widgets","ws","handleMouseEvents","positionLineWidget","above","noHScroll","width","wrapperWidth","coverGutter","paddingLeft","marginLeft","widgetHeight","parentStyle","clientWidth","eventInWidget","paddingTop","offsetTop","paddingVert","paddingH","getComputedStyle","currentStyle","scrollGap","displayWidth","displayHeight","clientHeight","ensureLineHeights","rect","wrapping","curWidth","heights","rects","getClientRects","bottom","mapFromLineView","before","updateExternalMeasurement","measureChar","bias","findViewForLine","findViewIndex","getDimensions","forceUpdate","hasHeights","prepared","varHeight","measureCharInner","bogus","rtop","rbottom","nodeAndOffsetInLineMap","collapse","mStart","mEnd","coverStart","coverEnd","getUsefulRect","nullRect","maybeUpdateRectForZooming","rSpan","charWidth","rbot","bot","singleCursorHeightPerLine","screen","logicalXDPI","deviceXDPI","scaleX","scaleY","logicalYDPI","deviceYDPI","clearLineMeasurementCacheFor","clearLineMeasurementCache","externalMeasure","clearCaches","pageScrollX","chrome","android","pageXOffset","scrollLeft","pageScrollY","marginTop","pageYOffset","scrollTop","intoCoordSystem","includeWidgets","yOff","lOff","xOff","fromCoordSystem","coords","localBox","lineSpaceBox","charCoords","cursorCoords","preparedMeasure","getBidi","invert","other","estimateCoords","PosWithInfo","outside","xRel","coordsChar","coordsCharInner","mergedPos","prevDiff","prevPos","beginLeft","steps","prevPos$1","diff_change_per_step","box","textHeight","measureText","clientLeft","offsetLeft","compensateForHScroll","perLine","widgetsHeight","estimateLineHeights","est","posFromMouse","liberal","forRect","space","clientX","colDiff","updateSelection","showSelection","prepareSelection","primary","curFragment","cursors","selFragment","selection","sel","ranges","primIndex","range$$1","showCursorWhenSelecting","drawSelectionCursor","drawSelectionRange","cursorHeight","otherCursor","rightSide","drawForLine","fromArg","toArg","lineLen","rightPos","leftPos","tmp","leftSide","sFrom","sTo","fromLine","toLine","singleVLine","leftEnd","rightStart","restartBlink","focused","clearInterval","blinker","visibility","cursorBlinkRate","setInterval","ensureFocus","onFocus","delayBlurEvent","delayingBlurEvent","onBlur","reset","receivedFocus","rmClass","updateHeightsInViewport","prevBottom","updateWidgetHeight","visibleLines","viewport","ensure","ensureFrom","ensureTo","alignHorizontally","gutterW","align","maybeUpdateLineNumberWidth","innerW","updateGutterSpace","maybeScrollWindow","doScroll","innerHeight","phantom","scrollNode","scrollIntoView","scrollPosIntoView","margin","limit","changed","endCoords","scrollPos","calculateScrollPos","startTop","startLeft","updateScrollTop","setScrollLeft","snapMargin","screentop","docBottom","atTop","atBottom","newTop","screenleft","screenw","tooWide","addToScrollTop","resolveScrollToPos","ensureCursorVisible","getCursor","scrollToPos","cursorScrollMargin","scrollToCoords","scrollToRange","scrollToCoordsRange","sPos","updateDisplaySimple","setScrollTop","startWorker","forceScroll","scrollHeight","scrollbars","isScroller","scrollWidth","measureForScrollbars","docH","viewHeight","viewWidth","barLeft","docHeight","updateScrollbars","startWidth","startHeight","updateScrollbarsInner","sizes","paddingBottom","borderBottom","coverGutterNextToScrollbar","initScrollbars","clear","scrollbarModel","scrollbarStyle","axis","startOperation","viewChanged","updateInput","typing","changeObjs","selectionChanged","updateMaxLine","nextOpId","endOperation","endOperations","endOperation_R1","endOperation_W1","endOperation_R2","endOperation_W2","i$4","endOperation_finish","maybeClipScrollbars","mustUpdate","DisplayUpdate","updatedDisplay","updateDisplayIfNeeded","barMeasure","adjustWidthTo","maxScrollLeft","preparedSelection","takeFocus","hasFocus","setDocumentHeight","postUpdateDisplay","maybeHiddenMarkers","unhidden","maybeUnhiddenMarkers","runInOp","operation","methodOp","docMethodOp","regChange","lendiff","resetView","cut","viewCuttingPoint","cut$1","cutTop","cutBot","regLineChange","oldN","newN","adjustView","countDirtyView","dirty","time","highlight","highlightWorker","workTime","changedLines","oldStyles","highlighted","oldCls","newCls","ischange","workDelay","marginBottom","borderRightWidth","selectionSnapshot","getSelection","anchorNode","extend","anchorOffset","focusNode","focusOffset","restoreSelection","snapshot","createRange","setEnd","removeAllRanges","addRange","editorIsHidden","visible","viewportMargin","different","wrapperHeight","toUpdate","selSnapshot","patchDisplay","minHeight","oldDisplayWidth","updateNumbersFrom","rm","currentWheelTarget","container","updateNumber","updateGutters","specs","gElt","setGuttersForLineNumbers","wheelEventDelta","dx","wheelDeltaX","dy","wheelDeltaY","detail","HORIZONTAL_AXIS","VERTICAL_AXIS","wheelDelta","wheelEventPixels","wheelPixelsPerUnit","onScrollWheel","scroll","canScrollX","canScrollY","presto","pixels","wheelSamples","movedX","movedY","sample","normalizeSelection","prim","sort","prev","inv","Range","Selection","simpleSelection","changeEnd","adjustForChange","computeSelAfterChange","offsetPos","computeReplacedSel","hint","oldPrev","newPrev","loadMode","modeOption","resetModeState","isWholeLineUpdate","wholeLineUpdateBefore","updateDoc","estimateHeight$$1","spansFor","linesFor","Line","firstLine","lastText","lastSpans","nlines","remove","added","added$1","added$2","linkedDocs","sharedHistOnly","propagate","sharedHist","linked","shared","attachDoc","setDirectionClass","directionChanged","History","startGen","done","undone","undoDepth","lastModTime","lastSelTime","lastOp","lastSelOp","lastOrigin","lastSelOrigin","generation","maxGeneration","historyChangeFromChange","histChange","attachLocalSpans","clearSelectionEvents","lastChangeEvent","hist","addChangeToHistory","selAfter","opId","historyEventDelay","pushSelectionToHistory","selectionEventCanBeMerged","somethingSelected","addSelectionToHistory","clearRedo","dest","equals","existing","removeClearedSpans","explicitlyCleared","getOldSpans","mergeOldSpans","stretched","oldCur","stretchCur","copyHistoryArray","newGroup","instantiateSel","copy","event","deepCopy","newChanges","extendRange","posBefore","extendSelection","setSelection","extendSelections","heads","replaceOneSelection","setSimpleSelection","filterSelectionChange","this$1","setSelectionReplaceHistory","setSelectionNoUndo","NaN","setSelectionInner","skipAtomicInSelection","reCheckSelection","mayClear","newAnchor","skipAtomic","newHead","skipAtomicInner","oldPos","atomic","near","movePos","far","cantEdit","selectAll","sel_dontScroll","filterChange","canceled","cancel","makeChange","ignoreReadOnly","suppressEdits","makeChangeInner","makeChangeSingleDoc","rebased","rebaseHist","makeChangeFromHistory","allowSelectionOnly","antiChanges","returned","shiftDoc","distance","removed","makeChangeSingleDocInEditor","recomputeMaxLength","checkWidthStart","changesHandler","changeHandler","replaceRange","code","splitLines","rebaseHistSelSingle","rebaseHistArray","sub","ok","copied","changeLine","changeType","LeafChunk","BranchChunk","adjustScrollWhenAboveVisible","addLineWidget","LineWidget","insertAt","aboveVisible","markText","markTextShared","TextMarker","replacedWith","addToHistory","clearOnEnter","clearHistory","nextMarkerId","cloneNode","isParent","SharedTextMarker","findSharedMarkers","findMarks","copySharedMarkers","mFrom","mTo","subMark","detachSharedMarkers","subMarker","onDrop","clearDragCursor","lastDrop","dataTransfer","isReadOnly","FileReader","File","read","allowDropFileTypes","reader","onload","lineSeparator","readAsText","loadFile","draggingText","text$1","getData","replaceSelection","onDragStart","setData","effectAllowed","setDragImage","safari","img","_top","onDragOver","frag","dragCursor","forEachCodeMirror","getElementsByClassName","byClass","ensureGlobalHandlers","globalsRegistered","registerGlobalHandlers","resizeTimer","onResize","normalizeKeyName","alt","ctrl","cmd","normalizeKeyMap","keymap","keyname","lookupKey","fallthrough","isModifierKey","keyNames","keyCode","addModifierNames","noShift","altKey","flipCtrlCmd","keyName","altGraphKey","keyMap","deleteNearSelection","compute","kill","toKill","replaced","visual","lineStartSmart","firstNonWS","inWS","doHandleBinding","bound","dropShift","commands","ensurePolled","prevShift","Pass","lookupKeyForEditor","keyMaps","extraKeys","dispatchKey","seq","keySeq","stopSeq","handleKeyBinding","motion","handleCharBinding","onKeyDown","handled","lastStoppedKey","hasCopyEvent","showCrossHair","onKeyUp","onKeyPress","charCode","clickRepeat","lastDoubleClick","compare","lastClick","PastClick","onMouseDown","supportsTouch","clickInGutter","repeat","selectingText","handleMappedButton","leftButtonDown","captureRightClick","onContextMenu","configureMouse","option","unit","chromeOS","addNew","moveOnDrag","contained","behavior","dragDrop","dragAndDrop","leftButtonStartDrag","leftButtonSelect","moved","dragEnd","mouseMove","dragStart","e2","rangeForUnit","findWordAt","extendTo","lastPos","startCol","posCol","startSel","ourIndex","oldRange","ourRange","ranges$1","sel_mouse","curCount","counter","editorSize","gutterEvent","prevent","mX","mY","lineBox","g","contextMenuInGutter","themeChanged","theme","guttersChanged","dragDropChanged","Init","funcs","dragFunctions","toggle","enter","over","leave","drop","wrappingChanged","CodeMirror$1","Doc","inputStyles","inputStyle","pasteIncoming","cutIncoming","Delayed","autofocus","registerEventHandlers","opt","optionHandlers","finishInit","initHooks","textRendering","finishTouch","touchFinished","prevTouch","isMouseLikeTouchEvent","touches","touch","radiusX","radiusY","farAway","word","clearTimeout","pageX","pageY","inp","getField","indentLine","how","aggressive","indent","curSpace","indentation","curSpaceString","indentUnit","indentString","indentWithTabs","pos$1","setLastCopied","newLastCopied","lastCopied","applyTextInput","inserted","deleted","paste","textLines","splitLinesAuto","multiPaste","pasteLinesPerSelection","lineWise","changeEvent","triggerElectric","handlePaste","pasted","clipboardData","disableInput","electricChars","smartIndent","getModeAt","electricInput","copyableRanges","lineRange","getRange","disableBrowserMagic","field","spellcheck","hiddenTextarea","te","div","ios","border","findPosH","findNextLine","moveOnce","boundToLine","origDir","sawType","getHelper","hitSide","findPosV","pageSize","moveAmount","posToDOM","side","isInGutter","scan","badPos","bad","domTextBetween","recognizeMarker","close","closing","lineSep","addText","walk","cmText","markerID","isBlock","domToPos","lineNode","locateNodeInLineView","textNode","topNode","curNode","dist","previousSibling","dist$1","userAgent","navigator","platform","ie_upto10","ie_11up","edge","documentMode","qtwebkit","vendor","mac_geMountainLion","windows","presto_version","endNode","setStart","createTextRange","moveToElementText","moveEnd","moveStart","selectInput","selectionStart","selectionEnd","_e","ms","sel_move","charType","lowTypes","arabicTypes","BidiSpan","bidiRE","isNeutral","isStrong","countsAsLeft","countsAsNum","outerType","types","type$1","prev$1","type$2","type$3","i$5","cur$1","type$4","i$6","end$1","replace$1","i$7","nstart","reverse","attachEvent","nl","rt","hasSelection","ownerDocument","compareEndPoints","oncopy","lineOracle","lastColumnPos","lastColumnValue","sol","peek","eat","eatWhile","eatSpace","skipToEnd","skipTo","backUp","caseInsensitive","cased","hideFirstChars","oracle","maxLookAhead","NativeScrollbars","vert","horiz","checkedZeroWidth","needsH","needsV","sWidth","totalHeight","totalWidth","zeroWidthHack","disableHoriz","enableZeroWidthBar","disableVert","pointerEvents","bar","delay","maybeDisable","elementFromPoint","NullScrollbars","native","null","here","there","removeInner","insertInner","iterN","oldHeight","remaining","leaf","maybeSpill","me","sibling","myIndex","used","oldH","withOp","dHeight","nextDocId","cleanGeneration","constructor","getValue","setValue","getLineHandle","getLineNumber","getLineHandleVisualStart","lineCount","setCursor","extendSelectionsBy","addSelection","getSelections","dup","replaceSelections","newSel","undo","redo","undoSelection","redoSelection","setExtending","getExtending","historySize","markClean","changeGeneration","forceSplit","isClean","gen","getHistory","setHistory","histData","setGutterMarker","gutterID","clearGutter","lineInfo","addLineClass","where","removeLineClass","removeLineWidget","setBookmark","realOpts","findMarksAt","getAllMarks","posFromIndex","sepSize","indexFromPos","copyHistory","linkedDoc","unlinkDoc","splitIds","iterLinkedDocs","getEditor","setDirection","eachLine","3","16","17","18","19","20","27","32","33","34","35","36","37","38","39","40","44","45","46","59","61","91","92","93","106","107","109","110","111","127","173","186","187","188","189","190","191","192","219","220","221","222","63232","63233","63234","63235","63272","63273","63275","63276","63277","63302","basic","Left","Right","Up","Down","End","Home","PageUp","PageDown","Delete","Backspace","Shift-Backspace","Tab","Shift-Tab","Enter","Insert","Esc","pcDefault","Ctrl-A","Ctrl-D","Ctrl-Z","Shift-Ctrl-Z","Ctrl-Y","Ctrl-Home","Ctrl-End","Ctrl-Up","Ctrl-Down","Ctrl-Left","Ctrl-Right","Alt-Left","Alt-Right","Ctrl-Backspace","Ctrl-Delete","Ctrl-S","Ctrl-F","Ctrl-G","Shift-Ctrl-G","Shift-Ctrl-F","Shift-Ctrl-R","Ctrl-[","Ctrl-]","Ctrl-U","Shift-Ctrl-U","Alt-U","emacsy","Ctrl-B","Ctrl-P","Ctrl-N","Alt-F","Alt-B","Ctrl-E","Ctrl-V","Shift-Ctrl-V","Ctrl-H","Alt-D","Alt-Backspace","Ctrl-K","Ctrl-T","Ctrl-O","macDefault","Cmd-A","Cmd-D","Cmd-Z","Shift-Cmd-Z","Cmd-Y","Cmd-Home","Cmd-Up","Cmd-End","Cmd-Down","Cmd-Left","Cmd-Right","Ctrl-Alt-Backspace","Alt-Delete","Cmd-S","Cmd-F","Cmd-G","Shift-Cmd-G","Cmd-Alt-F","Shift-Cmd-Alt-F","Cmd-[","Cmd-]","Cmd-Backspace","Cmd-Delete","Cmd-U","Shift-Cmd-U","singleSelection","killLine","deleteLine","delLineLeft","delWrappedLineLeft","delWrappedLineRight","goDocStart","goDocEnd","goLineStart","goLineStartSmart","goLineEnd","goLineRight","goLineLeft","goLineLeftSmart","goLineUp","moveV","goLineDown","goPageUp","goPageDown","goCharLeft","moveH","goCharRight","goColumnLeft","goColumnRight","goWordLeft","goGroupRight","goGroupLeft","goWordRight","delCharBefore","deleteH","delCharAfter","delWordBefore","delWordAfter","delGroupBefore","delGroupAfter","indentAuto","indentSelection","indentMore","indentLess","insertTab","insertSoftTab","spaces","defaultTab","execCommand","transposeChars","newlineAndIndent","sels","openLine","toggleOverwrite","defineInitHook","ContentEditableInput","lastAnchorNode","lastAnchorOffset","lastFocusNode","lastFocusOffset","polling","composing","gracePeriod","readDOMTimeout","onCopyCut","lineWiseCopyCut","clearData","kludge","hadFocus","showPrimarySelection","updateFromDOM","readFromDOMSoon","forceCompositionEnd","showMultipleSelections","curAnchor","curFocus","rng","rangeCount","getRangeAt","startGracePeriod","rememberSelection","selectionInEditor","commonAncestorContainer","blur","poll","pollSelection","pollInterval","triggerOnKeyDown","pollContent","fromIndex","fromNode","toNode","toIndex","newText","oldText","cutFront","cutEnd","oldTop","maxCutFront","newBot","oldBot","maxCutEnd","chFrom","chTo","contentEditable","readOnlyChanged","resetPosition","TextareaInput","prevInput","pollingFast","prepareCopyCut","textarea","fastPoll","moveInputWithCursor","headPos","wrapOff","lineOff","teTop","teLeft","drawn","contextMenuPending","slowPoll","missed","same","prepareSelectAllHack","extval","rehide","oldWrapperCSS","oldCSS","detectingSelectAll","resetSelectionOnContextMenu","wrapperBox","oldScrollY","scrollY","scrollTo","mouseup","disabled","deflt","notOnInit","defineOption","newBreaks","getInputField","detach","attach","integer","tabIndex","defineOptions","helpers","setOption","getDoc","addKeyMap","removeKeyMap","addOverlay","modeSpec","removeOverlay","newRanges","getTokenAt","getLineTokens","getTokenTypeAt","getHelpers","help","_global","getStateAfter","defaultTextHeight","defaultCharWidth","getViewport","addWidget","vspace","hspace","triggerOnKeyPress","triggerOnKeyUp","triggerOnMouseDown","amount","rtlMoveVisually","goalColumn","goals","startChar","check","getScrollInfo","interpret","swapDoc","getWrapperElement","getScrollerElement","getGutterElement","registerHelper","registerGlobalHelper","predicate","addEditorMethods","dontDelegate","defineMIME","mime","defineExtension","func","defineDocExtension","fromTextArea","tabindex","placeholder","realSubmit","form","leaveSubmitMethodAlone","submit","wrappedSubmit","getTextArea","toTextArea","cmpPos","addLegacyProps","require$$0","parserConfig","readRegexp","escaped","inSet","ret","tp","cont","tokenBase","tokenize","tokenString","tokenComment","expressionAllowed","isOperatorChar","tokenQuasi","lexical","wordRE","lastType","keywords","propertyIsEnumerable","kw","jsonldMode","isJsonldKeyword","maybeEnd","findFatArrow","fatArrowAt","arrow","isTS","depth","sawSomething","bracket","brackets","JSLexical","inScope","varname","localVars","cx","vars","parseJS","cc","marked","jsonMode","expression","statement","lex","pass","register","inList","globalVars","pushcontext","defaultVars","popcontext","pushlex","poplex","expect","wanted","exp","vardef","parenExpr","block","maybeelse","functiondef","forspec","typeexpr","maybelabel","funarg","afterExport","afterImport","expressionInner","expressionNoComma","noComma","arrowBodyNoComma","arrowBody","commasep","maybeop","maybeoperatorNoComma","maybeoperatorComma","atomicTypes","classExpression","maybeexpressionNoComma","maybeexpression","arrayLiteral","contCommasep","objprop","quasi","maybeTarget","expr","property","continueQuasi","targetNoComma","maybeTypeArgs","_","getterSetter","afterprop","what","sep","proceed","maybetype","afterType","typeprop","typearg","maybeReturnType","maybeAssign","vardefCont","proppattern","_type","forspec1","forspec2","formaybeinof","forspec3","classNameAfter","classBody","classfield","maybeFrom","exportField","importSpec","maybeMoreImports","maybeAs","isContinuedStatement","textAfter","statementIndent","jsonld","json","typescript","wordCharacters","A","B","C","operator","atom","jsKeywords","if","while","with","else","do","try","finally","return","break","continue","new","delete","throw","debugger","var","function","for","switch","case","default","in","typeof","instanceof","true","false","super","yield","export","import","extends","await","tsKeywords","interface","implements","enum","public","private","protected","abstract","readonly","number","boolean","any","variable","regexp","jsonld-keyword","basecolumn","firstChar","doubleIndentSwitch","blockCommentStart","blockCommentEnd","lineComment","fold","closeBrackets","skipExpression","inline","propertyKeywords","tokenHooks","documentTypes","mediaTypes","mediaFeatures","mediaValueKeywords","nonStandardPropertyKeywords","fontProperties","counterDescriptors","colorKeywords","valueKeywords","allowNested","supportsAtComponent","tokenParenthesized","pushContext","popContext","states","popAndPass","wordAsValue","stateArg","maybeprop","propBlock","_stream","parens","pseudo","atBlock","atComponentBlock","atBlock_parens","restricted_atBlock_before","restricted_atBlock","keyframes","interpolation","keySet","documentTypes_","mediaTypes_","mediaFeatures_","mediaValueKeywords_","propertyKeywords_","nonStandardPropertyKeywords_","fontProperties_","counterDescriptors_","colorKeywords_","valueKeywords_","allWords","tokenCComment","/",":","$","#","@","&","htmlConfig","autoSelfClosers","area","command","embed","frame","hr","keygen","meta","track","wbr","menuitem","implicitlyClosed","dd","li","optgroup","rp","contextGrabbers","dt","address","article","aside","blockquote","dl","fieldset","footer","h1","h2","h3","h4","h5","h6","header","hgroup","menu","nav","ol","section","table","ul","doNotIndent","allowUnquoted","allowMissing","caseFold","xmlConfig","editorConf","config_","htmlMode","setStyle","inText","parser","inBlock","doctype","inTag","isInText","baseState","tagName","tagStart","inAttribute","stringStartCol","closure","isInAttribute","terminator","startOfLine","noIndent","maybePopContext","nextTagName","parentTagName","tagNameState","closeTagNameState","attrState","matchClosing","closeState","closeStateErr","attrEqState","attrValueState","attrContinuedState","baseIndent","fullLine","multilineTagIndentPastTag","multilineTagIndentFactor","alignCDATA","tagAfter","grabbers","configuration","skipAttribute","defaultTags","maybeBackup","pat","attrRegexpCache","getAttrRegexp","getAttrValue","getTagRegexp","anchored","addTags","findMatchingMode","tagInfo","tagText","tags","configTags","configScript","scriptTypes","matches","htmlState","endTagA","endTag","localState","localMode","local","regexpFlags","flags","ignoreCase","multiline","ensureGlobal","maybeMultiline","searchRegexpForward","searchRegexpForwardMultiline","inside","startLine","lastMatchIn","cutOff","newMatch","searchRegexpBackward","searchRegexpBackwardMultiline","doFold","noFold","adjustPos","orig","folded","foldFunc","searchStringForward","cutFrom","endString","searchStringBackward","topString","SearchCursor","atOccurrence","findNext","findPrevious","getSearchCursor","ie_lt8","matching","(",")","[","]","{","}","findMatchingBracket","afterCursor","strict","scanForBracket","forward","maxScanLen","maxScanLineLength","maxScanLines","stack","re","bracketRegex","matchBrackets","autoclear","maxHighlightLen","maxHighlightLineLength","marks","currentlyHighlighted","doMatchBrackets","oldConfig","findPosSubword","cat","moveSubword","insertLine","newSelection","wordAt","addCursorToSelection","newRange","isSelectedRange","selectBetweenBrackets","opening","mirror","sortLines","caseSensitive","toSort","au","bu","modifyWordOrSelection","indices","replacements","getTarget","findAndGoTo","sublime","cmds","goSubwordCombo","scrollLineCombo","visibleBottomLine","visibleTopLine","lineRanges","extended","fullWord","sublimeFindFullWord","addCursorToLineCombo","swapLineCombo","linesToMove","newSels","toggleComment","joined","actual","sublimeBookmarks","sublimeBookmark","cK","toStartOfLine","deletePos","prevIndent","sublimeMark","sublimeKilled","selectLinesCombo","primaryIndex","pairs","triples","explode","conf","handleBackspace","handleEnter","handleChar","getConfig","around","charsAround","contractSelection","inverted","identical","curType","stringStartsAfter","enteringString","isClosingBracket","type1","nameStartChar","nameChar","xmlTagStart","Iter","tagAt","prevLine","toTagEnd","gt","lastSlash","selfClose","toTagStart","lt","toNextTag","toPrevTag","findMatchingClose","findMatchingOpen","endLine","openTag","startPos","endPos","findMatchingTag","findEnclosingTag","scanForClosingTag","whenClosing","autoCloseSlash","whenOpening","autoCloseGT","htmlDontClose","htmlIndent","tok","dontCloseTags","indentTags","lowerTagName","closingTagExists","newPos","autoCloseCurrent","typingSlash","replacement","closeTag","collection","newTag","nextClose","onCx","WRAP_CLASS","BACK_CLASS","GUTT_CLASS","selectionChange","clearActiveLines","activeLines","updateActiveLines","sameArray","nonEmpty","dialogDiv","template","dialog","closeNotification","newVal","currentNotificationClose","closed","onClose","getElementsByTagName","selectValueOnOpen","onInput","closeOnEnter","closeOnBlur","buttons","blurring","doneTimer","duration","searchOverlay","SearchState","posFrom","posTo","lastQuery","getSearchState","queryCaseInsensitive","persistentDialog","onEnter","openDialog","clearSearch","shortText","prompt","confirmDialog","openConfirm","confirm","parseString","parseQuery","isRE","queryDialog","startSearch","queryText","showMatchesOnScrollbar","annotate","doSearch","rev","persistent","immediate","hiding","searchNext","replaceQueryDialog","replacementQueryDialog","doReplaceConfirm","replaceAll","dialogText","advance","doReplace","findPersistent","findPersistentNext","findPersistentPrev","findPrev","allowFolded","finder","minSize","__isFold","cleared","myWidget","makeWidget","myRange","editorOptions","foldOptions","defaultOptions","newFoldFunction","rangeFinder","toggleFold","foldCode","unfold","foldAll","unfoldAll","auto","minFoldSize","scanUp","foldGutter","onGutterClick","onChange","onViewportChange","onFold","State","parseOptions","updateInViewport","opts","indicatorOpen","indicatorFolded","isFolded","updateFoldInfo","foldOption","vp","changeUpdate","foldOnChangeTimeSpan","updateViewportTimeSpan","lineText","tokenType","findOpening","openCh","startToken","endToken","nextOpen","hasImport","semi","hasInclude","js","ts","noSmartIndent",",",".","toolbar","$after","backgroundImage","logoIcon64","backgroundSize","backgroundRepeat","backgroundPosition","lineHeight","fontSize","backgroundColor","ref","docs","editable","autoCloseBrackets","autoCloseTags","styleActiveLine","initialDoc","refreshCm","linkPatched","fileChange","focusAfter","autoFocus","autoHeight","cmHeight","overflowX","overflowY","iconName","zi","$animate","boxShadow","icon","vertical","onmousedown","down","startDragging","mouseUp","setMiddle","changeMiddle","stopDragging","middle","resetSize","tabs","editor","resizeable","iframe","userSelect","dragging","sandbox","allowfullscreen","frameborder","initIframe","iframeInScroller","overflowScrolling","iOS","setTriangle","closest","borderTop","transformOrigin","transform","textTransform","textAlign","borderLeft","borderRight","attention","0%","50%","100%","borderRadius","Boolean","badge","fontStyle","tooltip","justifyContent","alignItems","toolbarButton","autoReload","toggleAutoReload","reloadButton","loading","hasChanges","shareButton","setShareUrl","resizing","outline","maxHeight","inputHeight","oninput","onConsoleInput","onkeydown","onConsoleKeyDown","toggleConsole","errors","infos","onscroll","ignoreScroll","manualScroll","log","expand","date","textDecoration","flexDirection","runtime","hasMap","mapSizeDescriptor","getOwnPropertyDescriptor","mapForEach","hasSet","setSizeDescriptor","setForEach","booleanValueOf","inspect_","seen","maxDepth","symString","Symbol","attributes","load","charset","transpileModule","fileName","compilerOptions","jsx","outputText","sourceMapText","babel","Babel","presets","sourceMaps","sourceFileName","sourceMapTarget","ls","liveScript","livescript","require","compile","createStream","HALT","updateStream","initStream","guid","derive","recover","deps","parents","endStream","unregister","ap","toJSON","defineProperties","unregisterStream","updateState","updateDependency","mustSync","every","combine","streams","valid","initDependency","dep","notEnded","registerDependency","dependent","s1","s2","merge","reducer","newStream","scanMerge","tuples","tuple","idx","scripts","flems","runtimeUrlGuess","hideError","intToCharMap","digit","encoded","vlq","VLQ_BASE","base64","encode","aStr","aIndex","aOutParam","strLen","decode","urlParse","aUrl","urlRegexp","scheme","auth","port","urlGenerate","aParsedUrl","aPath","exports","isProtoString","strcmp","aStr1","aStr2","aDefaultValue","dataUrlRegexp","aRoot","aPathUrl","aRootUrl","supportsNullProto","onlyCompareOriginal","onlyCompareGenerated","aArray","aAllowDuplicates","getOwnPropertyNames","sStr","toSetString","isDuplicate","aIdx","toArray","unsortedForEach","aCallback","aThisArg","aMapping","require$$1","fromSourceMap","aSourceMapConsumer","generator","eachMapping","mapping","newMapping","generated","original","addMapping","sourceFile","sourceContentFor","setSourceContent","_validateMapping","aSourceFile","aSourceContent","applySourceMap","aSourceMapPath","newSources","newNames","originalPositionFor","aGenerated","aOriginal","_serializeMappings","nameIdx","sourceIdx","previousGeneratedColumn","previousGeneratedLine","previousOriginalColumn","previousOriginalLine","previousName","previousSource","base64VLQ","_generateSourcesContent","aSources","aSourceRoot","recursiveSearch","aLow","aHigh","aNeedle","aHaystack","aCompare","aBias","LEAST_UPPER_BOUND","GREATEST_LOWER_BOUND","quickSort","__generatedMappings","_parseMappings","__originalMappings","_charIsMappingSeparator","GENERATED_ORDER","ORIGINAL_ORDER","aContext","aOrder","_generatedMappings","_originalMappings","allGeneratedPositionsFor","needle","_findMapping","compareByOriginalPositions","binarySearch","lastColumn","smc","generatedMappings","destGeneratedMappings","destOriginalMappings","srcMapping","destMapping","segment","cachedSegments","originalMappings","compareByGeneratedPositionsDeflated","aMappings","aLineName","aColumnName","aComparator","computeColumnSpans","nextMapping","lastGeneratedColumn","hasContentsOfAllSources","sc","nullOnMissing","fileUriAbsPath","generatedPositionFor","sectionIndex","generatedPosition","sectionMappings","adjustedMapping","REGEX_NEWLINE","fromStringWithSourceMap","aGeneratedCode","aRelativePath","addMappingWithCode","remainingLines","remainingLinesIndex","shiftNextLine","getNextLine","lastGeneratedLine","lastMapping","aChunk","prepend","aFn","aSep","newChildren","replaceRight","aPattern","aReplacement","walkSourceContents","fromSetString","toStringWithSourceMap","sourceMappingActive","lastOriginalSource","lastOriginalLine","lastOriginalColumn","lastOriginalName","sourceContent","require$$2","firefox","getLinks","getLink","evaluate","contentWindow","postMessage","consoleHistoryBack","historyNavigated","consoleHistoryForward","iframeReady","getContent","consoleOutput","SourceMap","reloadIframe","debounceTimer","hide","loaded"],"mappings":"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"}